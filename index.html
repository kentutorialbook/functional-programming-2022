<!doctype html><html style="overflow:auto;height:auto;width:auto;"><head><title>関数型プログラミングが『銀の弾丸』であるという非常識な常識2022</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><style>@font-face {
	font-family: Asana;
	src: url("fonts/Asana-Math.otf") format("opentype");
}

@font-face {
	font-family: Asana-Math;
	src: url("fonts/Asana-math-mode.otf") format("opentype");
}

@font-face {
	font-family: Asana-Mathbb;
	src: url("fonts/types-generated/Asana-mathbb.otf") format("opentype");
}

@font-face {
	font-family: Asana-Mathit;
	src: url("fonts/types-generated/Asana-mathit.otf") format("opentype");
}

@font-face {
	font-family: Asana-Mathcal;
	src: url("fonts/types-generated/Asana-mathcal.otf") format("opentype");
}

@font-face {
	font-family: Asana-Mathscr;
	src: url("fonts/types-generated/Asana-mathscr.otf") format("opentype");
}

@font-face {
	font-family: Asana-Mathfrak;
	src: url("fonts/types-generated/Asana-mathfrak.otf") format("opentype");
}

@font-face {
	font-family: Asana-Mathsf;
	src: url("fonts/types-generated/Asana-mathsf.otf") format("opentype");
}

@font-face {
	font-family: Asana-Mathtt;
	src: url("fonts/types-generated/Asana-mathtt.otf") format("opentype");
}

@font-face {
	font-family: Asana-Mathrm;
	src: url("fonts/types-generated/Asana-mathrm.otf") format("opentype");
}

@font-face {
	font-family: 'FontAwesome';
	src: url('fonts/icomoon.eot');
	src: url('fonts/icomoon.eot') format('embedded-opentype'), url('fonts/icomoon.woff') format('woff'), url('fonts/icomoon.ttf') format('truetype'), url('fonts/icomoon.svg') format('svg');
	font-weight: normal;
	font-style: normal;
}

/**
Latin Modern
**/

@font-face {
	font-family: LatinModern;
	src: url("fonts/latinmodern-math.otf") format("opentype");
}

@font-face {
	font-family: LatinModern-Math;
	src: url("fonts/latinmodern-math-mode.otf") format("opentype");
}

@font-face {
	font-family: LatinModern-Mathbb;
	src: url("fonts/types-generated/latinmodern-mathbb.otf") format("opentype");
}

@font-face {
	font-family: LatinModern-Mathit;
	src: url("fonts/types-generated/latinmodern-mathit.otf") format("opentype");
}

@font-face {
	font-family: LatinModern-Mathcal;
	src: url("fonts/types-generated/latinmodern-mathcal.otf") format("opentype");
}

@font-face {
	font-family: LatinModern-Mathscr;
	src: url("fonts/types-generated/latinmodern-mathscr.otf") format("opentype");
}

@font-face {
	font-family: LatinModern-Mathfrak;
	src: url("fonts/types-generated/latinmodern-mathfrak.otf") format("opentype");
}

@font-face {
	font-family: LatinModern-Mathsf;
	src: url("fonts/types-generated/latinmodern-mathsf.otf") format("opentype");
}

@font-face {
	font-family: LatinModern-Mathtt;
	src: url("fonts/types-generated/latinmodern-mathtt.otf") format("opentype");
}

@font-face {
	font-family: LatinModern-Mathrm;
	src: url("fonts/types-generated/latinmodern-mathrm.otf") format("opentype");
}

/***********************************************************/

/**
Thicker Latin Modern
**/

@font-face {
	font-family: ThickerLm;
	src: url("fonts/thickerlm-math.otf") format("opentype");
}

@font-face {
	font-family: ThickerLm-Math;
	src: url("fonts/thickerlm-math-mode.otf") format("opentype");
}

@font-face {
	font-family: ThickerLm-Mathbb;
	src: url("fonts/types-generated/thickerlm-mathbb.otf") format("opentype");
}

@font-face {
	font-family: ThickerLm-Mathit;
	src: url("fonts/types-generated/thickerlm-mathit.otf") format("opentype");
}

@font-face {
	font-family: ThickerLm-Mathcal;
	src: url("fonts/types-generated/thickerlm-mathcal.otf") format("opentype");
}

@font-face {
	font-family: ThickerLm-Mathscr;
	src: url("fonts/types-generated/thickerlm-mathscr.otf") format("opentype");
}

@font-face {
	font-family: ThickerLm-Mathfrak;
	src: url("fonts/types-generated/thickerlm-mathfrak.otf") format("opentype");
}

@font-face {
	font-family: ThickerLm-Mathsf;
	src: url("fonts/types-generated/thickerlm-mathsf.otf") format("opentype");
}

@font-face {
	font-family: ThickerLm-Mathtt;
	src: url("fonts/types-generated/thickerlm-mathtt.otf") format("opentype");
}

@font-face {
	font-family: ThickerLm-Mathrm;
	src: url("fonts/types-generated/thickerlm-mathrm.otf") format("opentype");
}

/***********************************************************/

/* Computer Modern */

@font-face {
	font-family: 'Computer Modern Sans';
	src: url('fonts/others-text-mode/computer-modern/Sans/cmunss.otf') format("opentype");
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Computer Modern Sans';
	src: url('fonts/others-text-mode/computer-modern/Sans/cmunsx.otf') format("opentype");
	font-weight: bold;
	font-style: normal;
}

@font-face {
	font-family: 'Computer Modern Sans';
	src: url('fonts/others-text-mode/computer-modern/Sans/cmunsi.otf') format("opentype");
	font-weight: normal;
	font-style: italic;
}

@font-face {
	font-family: 'Computer Modern Sans';
	src: url('fonts/others-text-mode/computer-modern/Sans/cmunso.otf') format("opentype");
	font-weight: bold;
	font-style: italic;
}

@font-face {
	font-family: 'Computer Modern Serif';
	src: url('fonts/others-text-mode/computer-modern/Serif/cmunrm.otf') format("opentype");
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Computer Modern Serif';
	src: url('fonts/others-text-mode/computer-modern/Serif/cmunbx.otf') format("opentype");
	font-weight: bold;
	font-style: normal;
}

@font-face {
	font-family: 'Computer Modern Serif';
	src: url('fonts/others-text-mode/computer-modern/Serif/cmunti.otf') format("opentype");
	font-weight: normal;
	font-style: italic;
}

@font-face {
	font-family: 'Computer Modern Serif';
	src: url('fonts/others-text-mode/computer-modern/Serif/cmunbi.otf') format("opentype");
	font-weight: bold;
	font-style: italic;
}

@font-face {
	font-family: 'Computer Modern Typewriter';
	src: url('fonts/others-text-mode/computer-modern/Typewriter/cmuntt.otf') format("opentype");
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Computer Modern Typewriter';
	src: url('fonts/others-text-mode/computer-modern/Typewriter/cmuntb.otf') format("opentype");
	font-weight: bold;
	font-style: normal;
}

@font-face {
	font-family: 'Computer Modern Typewriter';
	src: url('fonts/others-text-mode/computer-modern/Typewriter/cmunit.otf') format("opentype");
	font-weight: normal;
	font-style: italic;
}

@font-face {
	font-family: 'Computer Modern Typewriter';
	src: url('fonts/others-text-mode/computer-modern/Typewriter/cmuntx.otf') format("opentype");
	font-weight: bold;
	font-style: italic;
}

/**/

/**
Sans Math + Liberation Font
**/

@font-face {
	font-family: Sans;
	src: url("fonts/Sans-Math.otf") format("opentype");
}

@font-face {
	font-family: Sans-Math;
	src: url("fonts/Sans-Math-mode.otf") format("opentype");
}

@font-face {
	font-family: Sans-Bold;
	src: url("fonts/types-generated/Sans-bold.otf") format("opentype");
	font-weight: bold;
}

@font-face {
	font-family: Sans-Mathbb;
	src: url("fonts/types-generated/Asana-mathbb.otf") format("opentype");
}

@font-face {
	font-family: Sans-Mathit;
	src: url("fonts/types-generated/Sans-mathit.otf") format("opentype");
}

@font-face {
	font-family: Sans-Mathcal;
	src: url("fonts/types-generated/Asana-mathcal.otf") format("opentype");
}

@font-face {
	font-family: Sans-Mathscr;
	src: url("fonts/types-generated/Asana-mathscr.otf") format("opentype");
}

@font-face {
	font-family: Sans-Mathfrak;
	src: url("fonts/types-generated/Asana-mathfrak.otf") format("opentype");
}

@font-face {
	font-family: Sans-Mathsf;
	src: url("fonts/types-generated/Asana-mathsf.otf") format("opentype");
}

@font-face {
	font-family: Sans-Mathtt;
	src: url("fonts/types-generated/Asana-mathtt.otf") format("opentype");
}

@font-face {
	font-family: Sans-Mathrm;
	src: url("fonts/types-generated/Asana-mathrm.otf") format("opentype");
}

@font-face {
	font-family: Sans-Mathbf;
	src: url("fonts/types-generated/Sans-mathbf.otf") format("opentype");
	font-weight: bold;
}

/***********************************************************/</style><style>/* @font-face {
  font-family: 'FontAwesome';
  src: format('woff'), url('fonts/icomoon.svg?erlpdm#icomoon') format('svg');
  font-weight: normal;
  font-style: normal;
} */

[class^="fa-"], [class*=" fa-"] {
  /* use !important to prevent issues with browser extensions that change fonts */
  /* font-family: 'FontAwesome' !important;
  speak: none;
  font-style: normal;
  font-weight: normal;
  font-variant: normal;
  text-transform: none; */
  /* line-height: 1; */
  /* Better Font Rendering =========== */
  /* -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale; */
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.fa-plus:before {
  content: "\f067";
}
.fa-user:before {
  content: "\f007";
}
.fa-check:before {
  content: "\f00c";
}
.fa-close:before {
  content: "\f00d";
}
.fa-remove:before {
  content: "\f00d";
}
.fa-times:before {
  content: "\f00d";
}
.fa-search-plus:before {
  content: "\f00e";
}
.fa-search-minus:before {
  content: "\f010";
}
.fa-cog:before {
  content: "\f013";
}
.fa-gear:before {
  content: "\f013";
}
.fa-trash-o:before {
  content: "\f014";
}
.fa-file-o:before {
  content: "\f016";
}
.fa-refresh:before {
  content: "\f021";
}
.fa-font:before {
  content: "\f031";
}
.fa-bold:before {
  content: "\f032";
}
.fa-italic:before {
  content: "\f033";
}
.fa-align-left:before {
  content: "\f036";
}
.fa-align-center:before {
  content: "\f037";
}
.fa-align-right:before {
  content: "\f038";
}
.fa-dedent:before {
  content: "\f03b";
}
.fa-outdent:before {
  content: "\f03b";
}
.fa-indent:before {
  content: "\f03c";
}
.fa-image:before {
  content: "\f03e";
}
.fa-photo:before {
  content: "\f03e";
}
.fa-picture-o:before {
  content: "\f03e";
}
.fa-pencil:before {
  content: "\f040";
}
.fa-edit:before {
  content: "\f044";
}
.fa-pencil-square-o:before {
  content: "\f044";
}
.fa-share-square-o:before {
  content: "\f045";
}
.fa-arrows:before {
  content: "\f047";
}
.fa-chevron-left:before {
  content: "\f053";
}
.fa-chevron-right:before {
  content: "\f054";
}
.fa-times-circle:before {
  content: "\f057";
}
.fa-info-circle:before {
  content: "\f05a";
}
.fa-arrow-left:before {
  content: "\f060";
}
.fa-arrow-right:before {
  content: "\f061";
}
.fa-arrow-up:before {
  content: "\f062";
}
.fa-arrow-down:before {
  content: "\f063";
}
.fa-mail-forward:before {
  content: "\f064";
}
.fa-share:before {
  content: "\f064";
}
.fa-exclamation-circle:before {
  content: "\f06a";
}
.fa-exclamation-triangle:before {
  content: "\f071";
}
.fa-warning:before {
  content: "\f071";
}
.fa-chevron-up:before {
  content: "\f077";
}
.fa-chevron-down:before {
  content: "\f078";
}
.fa-folder:before {
  content: "\f07b";
}
.fa-folder-open:before {
  content: "\f07c";
}
.fa-twitter:before {
  content: "\f099";
}
.fa-twr:before {
  content: "\f099";
}
.fa-facebook:before {
  content: "\f09a";
}
.fa-fce:before {
  content: "\f09a";
}
.fa-facebook-f:before {
  content: "\f09a";
}
.fa-github:before {
  content: "\f09b";
}
.fa-gh:before {
  content: "\f09b";
}
.fa-cut:before {
  content: "\f0c4";
}
.fa-scissors:before {
  content: "\f0c4";
}
.fa-copy:before {
  content: "\f0c5";
}
.fa-files-o:before {
  content: "\f0c5";
}
.fa-bars:before {
  content: "\f0c9";
}
.fa-navicon:before {
  content: "\f0c9";
}
.fa-reorder:before {
  content: "\f0c9";
}
.fa-list-ul:before {
  content: "\f0ca";
}
.fa-list-ol:before {
  content: "\f0cb";
}
.fa-strikethrough:before {
  content: "\f0cc";
}
.fa-underline:before {
  content: "\f0cd";
}
.fa-table:before {
  content: "\f0ce";
}
.fa-magic:before {
  content: "\f0d0";
}
.fa-caret-down:before {
  content: "\f0d7";
}
.fa-caret-right:before {
  content: "\f0da";
}
.fa-sort-desc:before {
  content: "\f0dd";
}
.fa-sort-down:before {
  content: "\f0dd";
}
.fa-clipboard:before {
  content: "\f0ea";
}
.fa-paste:before {
  content: "\f0ea";
}
.fa-angle-double-left:before {
  content: "\f100";
}
.fa-angle-double-right:before {
  content: "\f101";
}
.fa-angle-double-up:before {
  content: "\f102";
}
.fa-angle-double-down:before {
  content: "\f103";
}
.fa-circle:before {
  content: "\f111";
}
.fa-mail-reply:before {
  content: "\f112";
}
.fa-reply:before {
  content: "\f112";
}
.fa-exclamation:before {
  content: "\f12a";
}
.fa-eraser:before {
  content: "\f12d";
}
.fa-ellipsis-h:before {
  content: "\f141";
}
.fa-ellipsis-v:before {
  content: "\f142";
}
.fa-file:before {
  content: "\f15b";
}
.fa-file-text:before {
  content: "\f15c";
}
.fa-google:before {
  content: "\f1a0";
}
.fa-gg:before {
  content: "\f1a0";
}
.fa-trash:before {
  content: "\f1f8";
}
.fa-i-cursor:before {
  content: "\f246";
}
.fa-hand-paper-o:before {
  content: "\f256";
}
.fa-hand-stop-o:before {
  content: "\f256";
}
</style><style>

editor-container > math-type.dark-mode {
  background: #1e1e1e;
}
math-type.dark-mode {
  background: #1e1e1e;
}
math-type.dark-mode.math-type-for-print {
  -webkit-print-color-adjust: exact;
}
math-type.dark-mode editarea.root-editor {
  color: #e0e0e0;
  fill: #e0e0e0;
  stroke: #e0e0e0;
  border-color: #e0e0e0;
}
math-type.dark-mode editarea.root-editor {
  background: #1e1e1e;
}
math-type.dark-mode .math-container-symbol.selected,
math-type.dark-mode .math-container-symbol.display.selected {
  background-color: #2a352a;
}
math-type.dark-mode .matrix-symbol.gather-symbol.selected {
  background-color: #2a352a;
}
math-type.dark-mode .matrix-symbol.gather-symbol > matrix > table > tbody > tr > td.selected {
  border: 1px solid #525252;
}
math-type.dark-mode .matrix-symbol.align-symbol.selected {
  background-color: #2a352a;
}
math-type.dark-mode .matrix-symbol.align-symbol > matrix > table > tbody > tr > td.selected {
  border: 1px solid #525252;
}
math-type.dark-mode .matrix-symbol.matrix-like.selected {
  background-color: #2a352a;
}
math-type.dark-mode .matrix-symbol.matrix-like > matrix > table > tbody > tr.selected:not(.hline) {
  border-top: 1px solid #525252;
}
math-type.dark-mode .matrix-symbol.matrix-like > matrix > table > tbody > tr:last-child.selected {
  border-bottom: 1px solid #525252;
}
math-type.dark-mode .matrix-symbol > matrix > table > tbody > tr > td.selected:not(.vline) {
  border-left: 1px solid #525252;
}
math-type.dark-mode .matrix-symbol > matrix > table > tbody > tr > td:last-child.selected {
  border-right: 1px solid #525252;
}
math-type.dark-mode .matrix-symbol.case-symbol > matrix > table > tbody > tr > td.selected {
  border: 1px solid #525252;
}
math-type.dark-mode selection-wrapper > selection {
  background-color: rgba(33, 150, 243, 0.25);
}
math-type.dark-mode selection-wrapper.inactive > selection {
  background-color: rgba(255, 255, 255, 0.27);
}
math-type.dark-mode editarea.selected {
  outline: 1px solid rgba(177, 174, 174, 0.3);
}
math-type.dark-mode compositeblock.math-diagram > math-diagram {
  background: #1e1e1e;
}
container-layer.dark-mode editor-container {
  background: #1e1e1e;
}



compositeblock {
  display: inline-block;
  position: relative;
  text-align: left;
  unicode-bidi: isolate;
}
compositeblock.middle {
  vertical-align: middle;
}
latex-symbol-icon {
  display: inline-block;
  padding: 2px;
  border: 1px solid transparent;
  cursor: pointer;
}
latex-symbol-icon:hover,
latex-symbol-icon.selected {
  background: white;
  border: 1px solid lightgray;
}
inline {
  display: inline-block;
}
base-line-indicator {
  display: inline-block;
  overflow: hidden;
  width: 0px;
  height: inherit;
}

math-type .constant-text > constant-text {
  margin-left: 0.2em;
  margin-right: 0.2em;
}
math-type .constant-text > constant-text.close-left {
  margin-left: 0;
}
math-type .constant-text > constant-text.close-right {
  margin-right: 0;
}








.color-picker no-color-select {
  display: block;
  text-align: center;
  /* width: 100%; */
  /* height: 20px; */
  background: white;
  border: 1px solid lightgray;
  margin-bottom: 2px;
  color: gray;
  padding: 2px;
  cursor: default;
  border-radius: 0;
  padding-bottom: 2px;
  margin-bottom: 3px;
  margin-left: -1px;
  margin-right: -1px;
  font-size: 13px;
}
.color-picker no-color-select:hover {
  color: black;
}
.color-picker color-select {
  position: absolute;
  top: 30px;
  left: 0px;
  background: white;
}

check-box-wrapper {
  display: block;
  font-size: 11px;
  color: gray;
  cursor: pointer;
}
check-box-wrapper.disabled {
  color: lightgray;
}
check-box-wrapper.disabled check-box-rect {
  border: 1px solid #e2e1e1;
  color: lightgray;
}
check-box-wrapper.disabled check-box-rect:hover {
  border: 1px solid #e2e1e1;
}
check-box-wrapper.mobile-tablet check-box-rect {
  margin-top: -3px;
  width: 16px;
  height: 15px;
  font-size: 13px;
}
check-box-wrapper.mobile-tablet check-box-rect > i {
  left: 2px;
  top: 1px;
}
check-box-wrapper check-box-rect {
  width: 1.4em;
  height: 1.35em;
  border: 1px solid #c3c2c2;
  position: relative;
  display: inline-flex;
  font-size: 11px;
  color: green;
  background: white;
  justify-content: center;
  align-items: center;
}
check-box-wrapper check-box-rect:hover {
  border: 1px solid gray;
}
check-box-wrapper.unchecked check-box-rect > i {
  visibility: hidden;
}

vcomposed-symbol {
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  flex-direction: column;
}
vcomposed-symbol > start {
  display: block;
  float: left;
  overflow: hidden;
  margin-bottom: -0.02em;
}
vcomposed-symbol > middle-center {
  overflow: hidden;
  margin-top: -0.02em;
  margin-bottom: -0.02em;
}
vcomposed-symbol > middle {
  display: block;
  flex-grow: 1;
  position: relative;
  overflow: hidden;
  margin-top: -0.02em;
  margin-bottom: -0.02em;
}
vcomposed-symbol > middle > fixed {
  display: block;
  position: absolute;
  left: 0;
  top: 0;
}
vcomposed-symbol > middle > fixed > inside {
  display: block;
  overflow: hidden;
}
vcomposed-symbol > end {
  margin-top: -0.02em;
  display: block;
  overflow: hidden;
}


.open-brace,
.close-brace {
  padding: 0 0.1em;
  width: 0.5em;
  min-width: 0.5em;
}
.open-brace > start,
.close-brace > start {
  min-height: 0.75em;
  height: 0.75em;
}
.open-brace > middle-center,
.close-brace > middle-center {
  min-height: 0.6em;
  height: 0.6em;
}
.open-brace > end,
.close-brace > end {
  min-height: 0.75em;
  height: 0.75em;
}
.open-bracket,
.close-bracket {
  width: 0.43em;
  min-width: 0.43em;
}
.open-bracket > start,
.close-bracket > start {
  height: 0.5em;
  min-height: 0.5em;
}
.open-bracket > end,
.close-bracket > end {
  height: 0.7em;
  min-height: 0.7em;
}
.open-parenthesis,
.close-parenthesis {
  width: 0.45em;
  min-width: 0.45em;
}
.open-parenthesis > start,
.close-parenthesis > start {
  min-height: 0.85em;
  height: 0.85em;
}
.open-parenthesis > end,
.close-parenthesis > end {
  min-height: 0.8em;
  height: 0.8em;
}
.open-floor,
.close-floor {
  width: 0.45em;
  min-width: 0.45em;
}
.open-floor > end,
.close-floor > end {
  height: 0.35em;
  min-height: 0.35em;
}
.open-ceil,
.close-ceil {
  width: 0.45em;
  min-width: 0.45em;
}
.open-ceil > start,
.close-ceil > start {
  height: 0.5em;
  min-height: 0.5em;
}
.open-vert,
.close-vert {
  width: 0.3em;
  min-width: 0.3em;
}
.open-Vert,
.close-Vert {
  width: 0.5em;
  min-width: 0.5em;
}
.open-uparrow,
.close-uparrow {
  width: 0.45em;
  min-width: 0.45em;
}
.open-uparrow > start,
.close-uparrow > start {
  height: 0.5em;
  min-height: 0.5em;
}
.open-downarrow,
.close-downarrow {
  width: 0.45em;
  min-width: 0.45em;
}
.open-downarrow > end,
.close-downarrow > end {
  height: 0.4em;
  min-height: 0.4em;
}
.open-updownarrow,
.close-updownarrow {
  width: 0.45em;
  min-width: 0.45em;
}
.open-updownarrow > start,
.close-updownarrow > start {
  height: 0.5em;
  min-height: 0.5em;
}
.open-updownarrow > end,
.close-updownarrow > end {
  height: 0.4em;
  min-height: 0.4em;
}
.open-Uparrow,
.close-Uparrow {
  width: 0.7em;
  min-width: 0.7em;
}
.open-Uparrow > start,
.close-Uparrow > start {
  height: 0.5em;
  min-height: 0.5em;
}
.open-Downarrow,
.close-Downarrow {
  width: 0.7em;
  min-width: 0.7em;
}
.open-Downarrow > end,
.close-Downarrow > end {
  height: 0.5em;
  min-height: 0.5em;
}
.open-Updownarrow,
.close-Updownarrow {
  width: 0.6em;
  min-width: 0.6em;
}
.open-Updownarrow > start,
.close-Updownarrow > start {
  height: 0.5em;
  min-height: 0.5em;
}
.open-Updownarrow > end,
.close-Updownarrow > end {
  height: 0.5em;
  min-height: 0.5em;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
opensymbolblock,
closesymbolblock,
.middle-vert-symbol {
  display: inline-flex;
  align-items: center;
  position: relative;
  text-align: left;
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}
opensymbolblock.normal,
closesymbolblock.normal,
.middle-vert-symbol.normal {
  margin-top: 0;
  margin-bottom: 0;
}
opensymbolblock > hidden-span,
closesymbolblock > hidden-span,
.middle-vert-symbol > hidden-span {
  visibility: hidden;
  width: 0px;
}
opensymbolblock[type='brace'],
closesymbolblock[type='brace'],
.middle-vert-symbol[type='brace'] {
  margin-left: 0.05em;
  margin-right: 0.05em;
  overflow: visible;
}
opensymbolblock[type='brace'] > svg,
closesymbolblock[type='brace'] > svg,
.middle-vert-symbol[type='brace'] > svg {
  overflow: visible;
  width: 0.5em;
  height: 100%;
}
opensymbolblock[type='parenthesis'] > svg,
closesymbolblock[type='parenthesis'] > svg,
.middle-vert-symbol[type='parenthesis'] > svg {
  width: 0.5em;
  height: 100%;
}
opensymbolblock[type='bracket'] > svg,
closesymbolblock[type='bracket'] > svg,
.middle-vert-symbol[type='bracket'] > svg {
  width: 0.5em;
  height: 100%;
}
opensymbolblock[type='angle'].sm-1 > svg,
closesymbolblock[type='angle'].sm-1 > svg,
.middle-vert-symbol[type='angle'].sm-1 > svg {
  width: 0.3em;
}
opensymbolblock[type='angle'].sm-2 > svg,
closesymbolblock[type='angle'].sm-2 > svg,
.middle-vert-symbol[type='angle'].sm-2 > svg {
  width: 0.45em;
}
opensymbolblock[type='angle'] > svg,
closesymbolblock[type='angle'] > svg,
.middle-vert-symbol[type='angle'] > svg {
  width: 0.6em;
  height: 100%;
}
opensymbolblock[type='slash'] > svg,
closesymbolblock[type='slash'] > svg,
.middle-vert-symbol[type='slash'] > svg {
  width: 0.7em;
  height: 100%;
}
opensymbolblock > bracket-span,
closesymbolblock > bracket-span,
.middle-vert-symbol > bracket-span {
  display: block;
}
opensymbolblock > vcomposed-symbol,
closesymbolblock > vcomposed-symbol,
.middle-vert-symbol > vcomposed-symbol,
opensymbolblock > bracket-span,
closesymbolblock > bracket-span,
.middle-vert-symbol > bracket-span {
  height: 100%;
  width: 100%;
  font-style: normal;
}
opensymbolblock > brace-span,
closesymbolblock > brace-span,
.middle-vert-symbol > brace-span {
  visibility: hidden;
  display: inline-block;
  padding: 0 0.1em;
}
opensymbolblock,
.middle-vert-symbol {
  margin-left: 0.07em;
}
opensymbolblock.normal,
.middle-vert-symbol.normal {
  margin-left: 0;
}
opensymbolblock[type='vert'],
.middle-vert-symbol[type='vert'],
opensymbolblock.middle-vert-symbol,
.middle-vert-symbol.middle-vert-symbol {
  margin-left: 0.05em;
  margin-right: 0.05em;
}
opensymbolblock[type='vert'] > svg,
.middle-vert-symbol[type='vert'] > svg,
opensymbolblock.middle-vert-symbol > svg,
.middle-vert-symbol.middle-vert-symbol > svg {
  width: 0.4em;
  height: 100%;
}
opensymbolblock[type='parenthesis'] > svg,
.middle-vert-symbol[type='parenthesis'] > svg {
  margin-right: -0.1em;
}
closesymbolblock {
  margin-right: 0.07em;
}
closesymbolblock.normal {
  margin-right: 0;
}
closesymbolblock[type='vert'] {
  margin-left: 0.05em;
  margin-right: 0.05em;
}
closesymbolblock[type='vert'] > svg {
  width: 0.4em;
  height: 100%;
}
closesymbolblock[type='parenthesis'] > svg {
  margin-left: -0.1em;
}

opensymbolblock[type=empty] > empty,
closesymbolblock[type=empty] > empty {
  width: 2px;
  height: 100%;
  display: block;
}
opensymbolblock[type=empty] > empty.normal-size,
closesymbolblock[type=empty] > empty.normal-size {
  height: 1em;
}
opensymbolblock[type=empty] > empty.line-selected,
closesymbolblock[type=empty] > empty.line-selected {
  background-color: lightgray;
}

.dirac-bracket-symbol > div > .oangle,
.dirac-bracket-symbol > div > .cangle {
  align-self: stretch;
  width: 0.55em;
  position: relative;
  margin-top: 0.1em;
  margin-bottom: -0.1em;
}
.dirac-bracket-symbol > div > .oangle > svg,
.dirac-bracket-symbol > div > .cangle > svg {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}
.dirac-bracket-symbol > div > .vert {
  align-self: stretch;
  width: 0.25em;
  position: relative;
  margin-top: 0.1em;
  margin-bottom: -0.1em;
}
.dirac-bracket-symbol > div > .vert > svg {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}
.dirac-bracket-symbol > div > editarea.first {
  min-width: 0.3em;
  padding-right: 0.1em;
}
.dirac-bracket-symbol > div > editarea.last {
  min-width: 0.3em;
  padding-left: 0.1em;
}
.dirac-bracket-symbol > div > editarea.middle {
  min-width: 0.3em;
  padding-left: 0.1em;
  padding-right: 0.1em;
}

cancel-symbol > editarea {
  display: inline-flex;
}
cancel-symbol > svg {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: visible;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type compositeblock.frac-slashed-symbol.frac-inline {
  font-size: 0.75em;
}
math-type compositeblock.fraction-symbol {
  margin-left: 0.1em;
  margin-right: 0.1em;
  vertical-align: baseline;
}
math-type compositeblock.fraction-symbol.frac-inline {
  font-size: 0.75em;
}
math-type compositeblock.fraction-symbol > .enumerator {
  float: left;
  width: 100%;
  clear: both;
}
math-type compositeblock.fraction-symbol > .denominator {
  margin-top: -5px;
  float: left;
  width: 100%;
}
math-type compositeblock.fraction-symbol > .frac-line {
  clear: both;
  pointer-events: none;
}
math-type compositeblock.fraction-symbol > .frac-line > inline {
  display: inline-block;
  width: 100%;
  vertical-align: 0.25em;
  border-bottom: solid 1px;
}
math-type compositeblock.fraction-symbol > editarea {
  border: 0px;
  min-width: 0.6em;
  text-align: center;
}
math-type compositeblock.fraction-symbol > editarea > area-container > line,
math-type compositeblock.fraction-symbol > editarea > line {
  justify-content: center;
  text-align: center;
}
math-type compositeblock.fraction-symbol > editarea-line {
  text-align: center;
}

.stackrel-icon {
  margin: auto;
  display: flex;
  align-items: center;
  flex-direction: column;
}
.stackrel-icon .square {
  width: 6px;
  height: 6px;
  border-style: solid;
  border-width: 1px;
  border-color: gray;
}
.stackrel-icon .distance {
  margin-top: 3px;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .stackrel-symbol.selected {
  outline: 1px solid rgba(93, 92, 92, 0.3);
}
math-type .stackrel-symbol > .cur-value {
  clear: both;
  display: inline-flex;
  width: 100%;
}
math-type .stackrel-symbol > .top {
  float: left;
  clear: both;
  width: 100%;
  font-size: 0.7em;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .underset-symbol > .center {
  display: inline-flex;
  width: 100%;
}
math-type .underset-symbol > .bottom {
  float: left;
  display: block;
  width: 100%;
  font-size: 0.7em;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .over-under-set-symbol.selected {
  outline: 1px solid rgba(93, 92, 92, 0.3);
}
math-type .over-under-set-symbol > .top {
  display: flex;
  float: left;
  clear: both;
  width: 100%;
}
math-type .over-under-set-symbol > .top > line {
  font-size: 0.7em;
}
math-type .over-under-set-symbol > .middle {
  display: inline-flex;
  width: 100%;
  clear: both;
}
math-type .over-under-set-symbol > .middle.select {
  border-bottom: none;
}
math-type .over-under-set-symbol > .bottom {
  display: flex;
  float: left;
  width: 100%;
}
math-type .over-under-set-symbol > .bottom > line {
  font-size: 0.7em;
}

expandable-component.thickness item-option.thickness-option {
  width: 40px;
  height: 12px;
}
expandable-component.thickness svg {
  stroke: gray;
  stroke-width: 1px;
  fill: none;
}
expandable-component.thickness thickness {
  position: relative;
  display: flex;
  height: 100%;
}
expandable-component.thickness thickness > svg.thickness {
  width: 25px;
  height: 100%;
  position: static;
}
expandable-component.thickness thickness > svg.thickness line {
  stroke: gray;
  stroke-width: 1px;
}
expandable-component.thickness thickness > svg.thickness path {
  fill: #d2cfcf;
  stroke: none;
}



/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .textcircled > div > editarea {
  text-align: center;
}
math-type .textcircled > div > editarea > area-container > line,
math-type .textcircled > div > editarea > line {
  justify-content: center;
  text-align: center;
}

/**different context*/
/**different context*/
math-type ref-tag {
  position: absolute;
  right: 5px;
  top: 50%;
  transform: translate(0, -50%);
  z-index: 8;
  cursor: pointer;
}
math-type ref-tag > label {
  cursor: pointer;
}
math-type ref-tag:hover {
  text-decoration: underline;
}
math-type ref-tag.line-tag {
  transition: background 0.4s;
}
math-type ref-tag.empty-line-tag {
  opacity: 0.5;
  animation: fadein 0.5s;
}
math-type tr.math-row ref-tag {
  left: calc(100% + 20px);
  right: unset;
}
@keyframes fadein {
  0% {
    opacity: 0;
  }
  70% {
    opacity: 0;
  }
  100% {
    opacity: 0.5;
  }
}



/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
.math-container-symbol {
  margin-top: 0.3em;
  margin-bottom: 0.3em;
  display: inline-flex;
}
.math-container-symbol.inline {
  margin-top: 0px;
  margin-bottom: 0px;
}
.math-container-symbol.selected {
  background-color: rgba(76, 175, 80, 0.05);
  outline: 1px solid #c1d4c1;
}
.math-container-symbol.display {
  display: block;
}
.math-container-symbol.display.selected {
  background-color: rgba(76, 175, 80, 0.05);
  outline: none;
}
.math-container-symbol.display > editarea {
  width: 100%;
  flex-grow: 1;
  display: block;
  text-align: center;
}
.math-container-symbol.display > editarea > area-container > line,
.math-container-symbol.display > editarea > line {
  justify-content: center;
  text-align: center;
}
.math-container-symbol.display > editarea > area-container > line {
  padding-top: 8px;
  padding-bottom: 8px;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
.math-container-symbol > editarea.multiline {
  display: block;
  flex-grow: 1;
  text-align: center;
}
.math-container-symbol > editarea.multiline > area-container > line,
.math-container-symbol > editarea.multiline > line {
  justify-content: center;
  text-align: center;
}
.math-container-symbol > editarea.multiline > line:last-child {
  justify-content: flex-end;
  text-align: right;
}
.math-container-symbol > editarea.multiline > line:first-child {
  justify-content: flex-start;
  text-align: left;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .icon-sqrt,
.auto-complete-external-area .icon-sqrt {
  display: flex;
  margin: auto;
  font-size: 12px;
}
math-type .icon-sqrt .square,
.auto-complete-external-area .icon-sqrt .square {
  margin-top: 3px;
  margin-right: -6px;
}
math-type .icon-sqrt .square-expand,
.auto-complete-external-area .icon-sqrt .square-expand {
  background-color: #f7f7f7;
}
math-type .icon-sqrt .align-end,
.auto-complete-external-area .icon-sqrt .align-end {
  margin-top: 8px;
}
math-type .icon-sqrt .line,
.auto-complete-external-area .icon-sqrt .line {
  width: 10px;
  border-top: solid 1px black;
  margin-top: 6px;
}
math-type .icon-sqrt .big-square,
.auto-complete-external-area .icon-sqrt .big-square {
  margin-top: 11px;
  margin-left: -8px;
}
math-type .sqrt-symbol {
  white-space: nowrap;
  align-items: stretch;
  position: relative;
}
math-type .sqrt-symbol > add {
  opacity: 0.5;
  background-color: #f7f7f7;
  border: 1px solid #c3c2c2;
  color: gray;
  display: block;
  position: absolute;
  font-size: 0.6em;
  cursor: pointer;
  margin-left: -0.4em;
  z-index: 999;
  opacity: 0.7;
  left: 50%;
  top: -0.5em;
  left: 0.5em;
}
math-type .sqrt-symbol > add:hover {
  border-color: gray;
  opacity: 1;
}
math-type .sqrt-symbol > add > i {
  display: block;
  height: 1em;
  padding: 0.1em 0.15em;
  padding-bottom: 0;
  width: 0.8em;
}
math-type .sqrt-symbol text {
  fill: black;
}
math-type .sqrt-symbol > sqrt-edit {
  position: relative;
  order: 3;
  display: inline-block;
  align-self: flex-end;
}
math-type .sqrt-symbol > sqrt-edit > sqrt-symbol-line {
  overflow: visible;
  z-index: 1;
  width: 100%;
  height: 100%;
  display: block;
  position: absolute;
  left: 0;
  top: 0;
  pointer-events: none;
}
math-type .sqrt-symbol > sqrt-edit > sqrt-symbol-line > svg {
  overflow: visible;
  width: 100%;
  height: 1em;
}
math-type .sqrt-symbol > sqrt-edit > area-container > line {
  width: 1em;
  position: relative;
}
math-type .sqrt-symbol > sqrt-edit > editarea,
math-type .sqrt-symbol > sqrt-edit > editarea-line {
  z-index: 2;
  display: inline-block;
  min-width: 0.5em;
  margin-left: 1em;
}
math-type .sqrt-symbol > sqrt-top {
  position: relative;
  z-index: 2;
  vertical-align: bottom;
  padding-bottom: 0.95em;
  align-self: flex-end;
  display: inline-block;
}
math-type .sqrt-symbol > sqrt-top.selected {
  outline: 1px solid rgba(93, 92, 92, 0.3);
}
math-type .sqrt-symbol > sqrt-top > editarea {
  font-size: 0.7em;
  border: none 0px;
  min-width: 0.5em;
  display: flex;
  float: right;
  text-align: center;
}
math-type .sqrt-symbol > sqrt-top > editarea > line {
  justify-content: center;
  text-align: center;
}





/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
image-viewer {
  width: 100%;
}
image-viewer.inline {
  width: auto;
}
image-viewer .image-content {
  cursor: pointer;
  text-align: left;
}
image-viewer detail list-items-options div {
  border: 1px solid transparent;
  cursor: pointer;
  margin-left: 3px;
  padding: 0 2px 0 2px;
}
image-viewer detail list-items-options div:hover {
  background-color: white;
  border: 1px solid lightgray;
}
image-viewer detail list-items-options div.selected {
  background-color: white;
  border: 1px solid lightgray;
}
image-viewer image-container {
  display: flex;
  flex-direction: column;
}
image-viewer image-container img {
  position: absolute;
}
image-viewer image-container.center {
  align-items: center;
}
image-viewer image-container.left {
  align-items: flex-start;
}
image-viewer image-container.right {
  align-items: flex-end;
}
.resize-box {
  position: absolute;
  width: 8px;
  height: 8px;
  border-width: 1px;
  border-color: gray;
  border-style: solid;
  background-color: white;
  z-index: 999;
}
.resize-box.mobile-tablet {
  width: 16px;
  height: 16px;
}
.resize-box.hide {
  display: none;
}
topleft {
  top: 0;
  left: 0;
  margin-left: -5px;
  margin-top: -5px;
  cursor: nwse-resize;
}
topleft.mobile-tablet {
  margin-left: -8px;
  margin-top: -8px;
}
topright {
  top: 0;
  right: 0;
  margin-right: -5px;
  margin-top: -5px;
  cursor: nesw-resize;
}
topright.mobile-tablet {
  margin-right: -8px;
  margin-top: -8px;
}
topmiddle {
  top: 0;
  left: 50%;
  margin-left: -5px;
  margin-top: -5px;
  cursor: ns-resize;
}
topmiddle.mobile-tablet {
  margin-left: -8px;
  margin-top: -8px;
}
leftmiddle {
  top: 50%;
  left: 0;
  margin-left: -5px;
  margin-top: -5px;
  cursor: ew-resize;
}
leftmiddle.mobile-tablet {
  margin-left: -8px;
  margin-top: -8px;
}
rightmiddle {
  top: 50%;
  right: 0;
  margin-right: -5px;
  margin-top: -5px;
  cursor: ew-resize;
}
rightmiddle.mobile-tablet {
  margin-right: -8px;
  margin-top: -8px;
}
bottomleft {
  bottom: 0;
  left: 0;
  margin-left: -5px;
  margin-bottom: -5px;
  cursor: nesw-resize;
}
bottomleft.mobile-tablet {
  margin-left: -8px;
  margin-bottom: -8px;
}
bottomright {
  bottom: 0;
  right: 0;
  margin-right: -5px;
  margin-bottom: -5px;
  cursor: nwse-resize;
}
bottomright.mobile-tablet {
  margin-right: -8px;
  margin-bottom: -8px;
}
bottommiddle {
  bottom: 0;
  left: 50%;
  margin-left: -5px;
  margin-bottom: -5px;
  cursor: ns-resize;
}
bottommiddle.mobile-tablet {
  margin-left: -8px;
  margin-bottom: -8px;
}
.ghost-viewer {
  outline: 1px dotted gray;
  width: 100%;
  height: 100%;
  display: block;
}

compositeblock.image-container {
  position: relative;
  width: 100%;
  margin-top: 10px;
  margin-bottom: 10px;
}
compositeblock.image-container > image-viewer {
  display: block;
}
compositeblock.image-container.inline {
  width: auto;
  margin-top: 0;
  margin-bottom: 0;
  display: inline-block;
}
.image-caption > line.text-mode:first-child {
  display: inline;
}
.image-caption > line.text-mode:first-child > blocks {
  display: inline;
}
.add-caption {
  opacity: 0.85;
  text-align: "center";
  color: #1155cc;
  cursor: pointer;
  position: absolute;
  bottom: -35px;
  left: 50%;
  transform: translate(-50%, 0);
  z-index: 10;
  font-size: 13px;
  background: white;
  border: 1px solid lightgray;
  padding: 5px;
}
.add-caption:hover {
  opacity: 1;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .power-index-symbol-container {
  margin-right: 0.06em;
  margin-left: 0.03em;
}
math-type .power-index-symbol-container.has-power > .power-value {
  margin-left: 0.04em;
}
math-type .power-index-symbol-container > .power-value,
math-type .pre-script-symbol-container > .power-value {
  /*margin-bottom: -2px;*/
  float: left;
  clear: both;
  text-align: left;
}
math-type .power-index-symbol-container > .power-value.small > line,
math-type .pre-script-symbol-container > .power-value.small > line {
  margin-bottom: -0.35em;
}
math-type .power-index-symbol-container > .power-value > line,
math-type .pre-script-symbol-container > .power-value > line {
  font-size: 0.7em;
}
math-type .power-index-symbol-container > .power-value > area-container > line,
math-type .pre-script-symbol-container > .power-value > area-container > line,
math-type .power-index-symbol-container > .power-value > line,
math-type .pre-script-symbol-container > .power-value > line {
  justify-content: flex-start;
  text-align: left;
}
math-type .power-index-symbol-container > middle-base,
math-type .pre-script-symbol-container > middle-base {
  display: block;
  clear: both;
  height: 1em;
}
math-type .power-index-symbol-container > middle-base > inline,
math-type .pre-script-symbol-container > middle-base > inline {
  display: inline-block;
}
math-type .power-index-symbol-container > .index-value,
math-type .pre-script-symbol-container > .index-value {
  float: left;
  text-align: left;
}
math-type .power-index-symbol-container > .index-value > line,
math-type .pre-script-symbol-container > .index-value > line {
  font-size: 0.7em;
}
math-type .power-index-symbol-container > .index-value > area-container > line,
math-type .pre-script-symbol-container > .index-value > area-container > line,
math-type .power-index-symbol-container > .index-value > line,
math-type .pre-script-symbol-container > .index-value > line {
  justify-content: flex-start;
  text-align: left;
}
math-type .power-index-symbol-container > editarea-block.index-value,
math-type .pre-script-symbol-container > editarea-block.index-value,
math-type .power-index-symbol-container > editarea-line.index-value,
math-type .pre-script-symbol-container > editarea-line.index-value {
  font-size: 0.7em;
}
math-type .power-index-symbol-container > editarea-block.power-value,
math-type .pre-script-symbol-container > editarea-block.power-value,
math-type .power-index-symbol-container > editarea-line.power-value,
math-type .pre-script-symbol-container > editarea-line.power-value {
  font-size: 0.7em;
}
math-type .pre-script-symbol-container > .power-value {
  float: right;
}
math-type .pre-script-symbol-container > .index-value {
  float: right;
}
.icon-power-index-symbol {
  display: flex;
  margin: auto;
  width: 20px;
  padding-bottom: 6px;
}
.icon-power-index-symbol .square-up {
  margin-top: 4px;
}
.icon-power-index-symbol .square-down {
  margin-top: 14px;
  margin-left: -6px;
}
.icon-power-index-symbol .align-end {
  margin-top: 4px;
}
.icon-power-symbol {
  display: flex;
  margin: auto;
  width: 20px;
  padding-bottom: 6px;
}
.icon-power-symbol .square {
  margin-top: 4px;
}
.icon-power-symbol .align-end {
  margin-top: 4px;
}
.icon-index-symbol {
  display: flex;
  margin: auto;
  width: 20px;
  padding-bottom: 6px;
}
.icon-index-symbol .square {
  margin-top: 14px;
  margin-left: 0px;
}
.icon-index-symbol .align-end {
  margin-top: 4px;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
.matrix-symbol.matrix-like > matrix > table > tbody > tr > td {
  padding-bottom: 0.1em;
  padding-top: 0.1em;
}
.matrix-symbol.matrix-like > matrix > table > tbody > tr.hline {
  border-top: 1px solid;
}
.matrix-symbol.matrix-like > matrix > table > tbody > tr:last-child.last-hline {
  border-bottom: 1px solid;
}
.matrix-symbol {
  /* must be flex to have vertical center align , unless figure out another way */
  display: inline-flex;
  align-items: center;
}
.matrix-symbol > matrix > table > tbody > tr > td > .sbd {
  position: absolute;
  left: -1px;
  top: -1px;
  right: -1px;
  bottom: -1px;
  pointer-events: none;
  background: none;
}
.matrix-symbol.selected > matrix > table > tbody > tr > td > .sbd {
  border-top: 1px solid rgba(93, 92, 92, 0.15);
  border-left: 1px solid rgba(93, 92, 92, 0.15);
}
.matrix-symbol.selected > matrix > table > tbody > tr > td > .sbd.sbd-lr {
  border-bottom: 1px solid rgba(93, 92, 92, 0.15);
}
.matrix-symbol.selected > matrix > table > tbody > tr > td > .sbd.sbd-lc {
  border-right: 1px solid rgba(93, 92, 92, 0.15);
}
.matrix-symbol > base-line-indicator {
  height: inherit;
  margin-top: -0.18em;
}
.matrix-symbol matrixclosesymbol,
.matrix-symbol matrixopensymbol {
  font-style: normal;
  color: black;
  position: relative;
}
.matrix-symbol matrixclosesymbol > span,
.matrix-symbol matrixopensymbol > span {
  visibility: hidden;
  display: inline-block;
}
.matrix-symbol matrixclosesymbol > svg,
.matrix-symbol matrixopensymbol > svg {
  overflow: visible;
  font-size: 15px;
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}
.matrix-symbol matrixclosesymbol > svg text,
.matrix-symbol matrixopensymbol > svg text {
  fill: black;
}
.matrix-symbol > matrix.matrix > table > tbody > tr > td {
  padding: 0 0.3em;
}
.matrix-symbol > matrix {
  display: flex;
  position: relative;
  float: left;
  align-items: flex-start;
  break-inside: avoid;
}
.matrix-symbol > matrix > svg {
  width: 0.6em;
  /*init height, willl be changed by inline style*/
  height: 3px;
  overflow: visible;
  align-self: flex-start;
}
.matrix-symbol > matrix > vcomposed-symbol {
  height: inherit;
  align-self: stretch;
}
.matrix-symbol > matrix > table {
  border: 1px solid transparent;
  border-collapse: collapse;
}
.matrix-symbol > matrix > table > tbody > tr {
  box-sizing: border-box;
}
.matrix-symbol > matrix > table > tbody > tr.smaller {
  font-size: 0.75em;
}
.matrix-symbol > matrix > table > tbody > tr > td {
  position: relative;
  border: 1px dotted transparent;
  box-sizing: border-box;
  padding: 0 0.3em;
  vertical-align: baseline;
}
.matrix-symbol > matrix > table > tbody > tr > td > .editor-cell {
  display: inline-block;
  width: 100%;
}
.matrix-symbol > matrix > table > tbody > tr > td.vline {
  border-left: 1px solid;
}
.matrix-symbol > matrix > table > tbody > tr > td:last-child.last-vline {
  border-right: 1px solid;
}
.matrix-symbol > matrix > table > tbody > tr > td > .editor-cell {
  min-width: 0.5em;
  text-align: center;
}
.matrix-symbol > matrix > table > tbody > tr > td > .editor-cell > area-container > line,
.matrix-symbol > matrix > table > tbody > tr > td > .editor-cell > line {
  justify-content: center;
  text-align: center;
}
.matrix-symbol > matrix.matrix > table {
  margin-left: -0.2em;
  margin-right: -0.2em;
}
.matrix-symbol > matrix.matrix > table > tbody > tr > td > .editor-cell {
  text-align: center;
}
.matrix-symbol > matrix.matrix > table > tbody > tr > td > .editor-cell > area-container > line,
.matrix-symbol > matrix.matrix > table > tbody > tr > td > .editor-cell > line {
  justify-content: center;
  text-align: center;
}
.matrix-symbol > matrix.array > table > tbody > tr > td > .editor-cell.left {
  text-align: left;
}
.matrix-symbol > matrix.array > table > tbody > tr > td > .editor-cell.left > area-container > line,
.matrix-symbol > matrix.array > table > tbody > tr > td > .editor-cell.left > line {
  justify-content: flex-start;
  text-align: left;
}
.matrix-symbol > matrix.array > table > tbody > tr > td > .editor-cell.center {
  text-align: center;
}
.matrix-symbol > matrix.array > table > tbody > tr > td > .editor-cell.center > area-container > line,
.matrix-symbol > matrix.array > table > tbody > tr > td > .editor-cell.center > line {
  justify-content: center;
  text-align: center;
}
.matrix-symbol > matrix.array > table > tbody > tr > td > .editor-cell.right {
  text-align: right;
}
.matrix-symbol > matrix.array > table > tbody > tr > td > .editor-cell.right > area-container > line,
.matrix-symbol > matrix.array > table > tbody > tr > td > .editor-cell.right > line {
  justify-content: flex-end;
  text-align: right;
}
.matrix-symbol > matrix.gathered > table > tbody > tr > td:nth-child(2n+3) {
  padding-left: 1em;
}
.matrix-symbol > matrix.gathered line {
  text-align: center;
}
.matrix-symbol > matrix.aligned > table > tbody > tr > td {
  padding: 0;
}
.matrix-symbol > matrix.aligned > table > tbody > tr > td:nth-child(2n+3) {
  padding-left: 1em;
}
.matrix-symbol > matrix.aligned > table > tbody > tr > td:nth-child(2n+1) > .editor-cell {
  text-align: right;
}
.matrix-symbol > matrix.aligned > table > tbody > tr > td:nth-child(2n+1) > .editor-cell > area-container > line,
.matrix-symbol > matrix.aligned > table > tbody > tr > td:nth-child(2n+1) > .editor-cell > line {
  justify-content: flex-end;
  text-align: right;
}
.matrix-symbol > matrix.aligned > table > tbody > tr > td:nth-child(2n) > .editor-cell {
  text-align: left;
}
.matrix-symbol > matrix.aligned > table > tbody > tr > td:nth-child(2n) > .editor-cell > area-container > line,
.matrix-symbol > matrix.aligned > table > tbody > tr > td:nth-child(2n) > .editor-cell > line {
  justify-content: flex-start;
  text-align: left;
}
.matrix-symbol > matrix > border-design {
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  display: block;
  background-color: rgba(255, 255, 255, 0.7);
  z-index: 10;
}
.matrix-symbol > matrix > border-design > border-line {
  cursor: pointer;
  position: absolute;
  /*border:1px solid gray;*/
}
.matrix-symbol > matrix > border-design > border-line > horizontal-line {
  border-top: 1px solid #eceaea;
  display: block;
  position: absolute;
  top: 50%;
  width: 100%;
  height: 1px;
  margin-top: 0;
  left: 0;
}
.matrix-symbol > matrix > border-design > border-line > vertical-line {
  border-left: 1px solid #eceaea;
  display: block;
  position: absolute;
  left: 50%;
  width: 1px;
  height: 100%;
  top: 0;
}
.matrix-symbol > matrix > border-design > border-line > vertical-line.enabled {
  border-top: 1px solid;
}
.matrix-symbol > matrix > border-design > border-line:hover > horizontal-line {
  border-top: 1px solid gray;
}
.matrix-symbol > matrix > border-design > border-line:hover > vertical-line {
  border-left: 1px solid gray;
}
.matrix-symbol > matrix > border-design > border-line.enabled > horizontal-line {
  border-top: 1px solid;
}
.matrix-symbol > matrix > border-design > border-line.enabled > vertical-line {
  border-left: 1px solid;
}
.matrix-symbol > matrix > setting {
  padding: 7px;
  position: absolute;
  top: -6px;
  font-family: "Segoe UI", Arial, Verdana, sans-serif;
  transform: translate(0, -100%);
  left: 0;
}
.matrix-symbol > matrix > setting > main-setting {
  display: flex;
  flex-direction: row;
}
.matrix-symbol > matrix > setting > main-setting styled-select {
  display: block;
  background-color: white;
}
.fa-table.array-settings {
  border: 1px solid lightgray;
  padding: 3px 5px;
  font-size: 14px;
  color: gray;
  cursor: pointer;
  /*margin-left: 5px;*/
}
.fa-table.array-settings:hover {
  color: black;
  background: white;
}
.matrix-icon {
  display: flex;
}
.matrix-icon .square {
  margin-top: 2px;
}
.matrix-icon .display-flex {
  display: flex;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
.matrix-symbol.case-symbol > matrix > table > tbody > tr > td,
.matrix-symbol.square-case-symbol > matrix > table > tbody > tr > td {
  padding: 0 0.2em;
}
.matrix-symbol.case-symbol > matrix > table > tbody > tr > td.non-select,
.matrix-symbol.square-case-symbol > matrix > table > tbody > tr > td.non-select {
  user-select: none;
  width: 0.2em;
  padding: 0;
}
.matrix-symbol.case-symbol > matrix > table > tbody > tr > td > .editor-cell,
.matrix-symbol.square-case-symbol > matrix > table > tbody > tr > td > .editor-cell {
  text-align: left;
}
.matrix-symbol.case-symbol > matrix > table > tbody > tr > td > .editor-cell > area-container > line,
.matrix-symbol.square-case-symbol > matrix > table > tbody > tr > td > .editor-cell > area-container > line,
.matrix-symbol.case-symbol > matrix > table > tbody > tr > td > .editor-cell > line,
.matrix-symbol.square-case-symbol > matrix > table > tbody > tr > td > .editor-cell > line {
  justify-content: flex-start;
  text-align: left;
}
.case-icon {
  display: flex;
  font-size: 18px;
  line-height: 18px;
}
.case-icon .square {
  margin-top: 2px;
}
.case-icon .display-flex {
  display: flex;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
.matrix-symbol.dr-case-symbol > matrix > table > tbody > tr > td {
  padding: 0 0.2em;
}
.matrix-symbol.dr-case-symbol > matrix > table > tbody > tr > td.selected {
  border: 1px solid #e0e0e0;
}
.matrix-symbol.dr-case-symbol > matrix > table > tbody > tr > td > .editor-cell {
  text-align: left;
}
.matrix-symbol.dr-case-symbol > matrix > table > tbody > tr > td > .editor-cell > area-container > line,
.matrix-symbol.dr-case-symbol > matrix > table > tbody > tr > td > .editor-cell > line {
  justify-content: flex-start;
  text-align: left;
}
.case-icon {
  display: flex;
  font-size: 18px;
  line-height: 18px;
}
.case-icon .square {
  margin-top: 2px;
}
.case-icon .display-flex {
  display: flex;
}

.array-icon .square {
  margin-top: 2px;
}
.array-icon .display-flex {
  display: flex;
}

.matrix-like.binom > .binom > table > tbody > tr > td {
  padding: 0;
}
.matrix-like.binom > .binom > table > tbody > tr > td line {
  text-align: center;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
.matrix-symbol.align-symbol {
  /*display flex because to make sure it's spend whole line*/
  display: flex;
  justify-content: center;
  margin-top: 10px;
  margin-bottom: 10px;
  width: 100%;
}
.matrix-symbol.align-symbol.selected {
  background-color: rgba(76, 175, 80, 0.05);
}
.matrix-symbol.align-symbol > matrix > setting > main-setting {
  margin-bottom: 0px;
}
.matrix-symbol.align-symbol > matrix > bulb {
  left: 50%;
}
.matrix-symbol.align-symbol > matrix > setting {
  margin-left: 20px;
}
.matrix-symbol.align-symbol > matrix.align {
  width: 100%;
  display: block;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td {
  padding: 0;
  vertical-align: baseline;
  border: 1px solid transparent;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td > .editor-cell {
  /* should align start and area-container level (instead of line level)
                as for lazy rendering, we need to have exact line width */
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td > .editor-cell > area-container {
  align-items: flex-start;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td > .editor-cell > area-container > line {
  width: auto;
  text-align: left;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td.align-right > .editor-cell {
  /* should align start and area-container level (instead of line level)
                as for lazy rendering, we need to have exact line width */
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td.align-right > .editor-cell > area-container {
  align-items: flex-end;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td.align-right > .editor-cell > area-container > line {
  width: auto;
  text-align: right;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td.non-select {
  border: none;
  user-select: none;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td.expand {
  width: 100%;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td.selected {
  border: 1px solid #e0e0e0;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td > .editor-cell {
  min-width: 1.5em;
}
.matrix-symbol.align-symbol > matrix > table > tbody > tr > td > tupple {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: baseline;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
.matrix-symbol.gather-symbol {
  /*display flex because to make sure it's spend whole line*/
  display: flex;
  justify-content: center;
  margin-top: 10px;
  margin-bottom: 10px;
  width: 100%;
}
.matrix-symbol.gather-symbol.selected {
  background-color: rgba(76, 175, 80, 0.05);
}
.matrix-symbol.gather-symbol > matrix.gather {
  width: 100%;
  display: block;
}
.matrix-symbol.gather-symbol > matrix > setting > main-setting {
  margin-bottom: 0px;
}
.matrix-symbol.gather-symbol > matrix > bulb {
  left: -1em;
}
.matrix-symbol.gather-symbol > matrix > setting {
  margin-left: 20px;
}
.matrix-symbol.gather-symbol > matrix > table > tbody > tr > td {
  padding: 0;
  vertical-align: baseline;
  border: 1px solid transparent;
  text-align: center;
}
.matrix-symbol.gather-symbol > matrix > table > tbody > tr > td.non-select {
  user-select: none;
  width: 1.5em;
  border: none;
}
.matrix-symbol.gather-symbol > matrix > table > tbody > tr > td.expand {
  width: 100%;
}
.matrix-symbol.gather-symbol > matrix > table > tbody > tr > td.selected {
  border: 1px solid #e0e0e0;
}
.matrix-symbol.gather-symbol > matrix > table > tbody > tr > td line {
  text-align: center;
}
.matrix-symbol.gather-symbol > matrix > table > tbody > tr > td > .editor-cell {
  min-width: 1.5em;
  /* should align start and area-container level (instead of line level)
                as for lazy rendering, we need to have exact line width */
}
.matrix-symbol.gather-symbol > matrix > table > tbody > tr > td > .editor-cell > area-container {
  align-items: center;
}
.matrix-symbol.gather-symbol > matrix > table > tbody > tr > td > .editor-cell > area-container > line {
  width: auto;
}
.matrix-symbol.gather-symbol > matrix > table > tbody > tr > td > tupple {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: baseline;
}

math-type compositeblock.table-symbol {
  width: 100%;
  display: flex;
}
math-type compositeblock.table-symbol.cap-above {
  flex-direction: column;
}
math-type .matrix-symbol > matrix.table {
  width: 100%;
  flex-direction: column;
  align-items: stretch;
}
math-type .matrix-symbol > matrix.table > table {
  table-layout: fixed;
  border: unset;
  width: 100%;
}
math-type .matrix-symbol > matrix.table > table > tbody > tr > td {
  vertical-align: top;
  padding: 0;
  position: relative;
}
math-type .cell-border-box {
  position: absolute;
  left: -1px;
  top: -1px;
  width: 100%;
  height: 100%;
}
.table-caption > line.text-mode:first-child {
  display: inline;
}
.table-caption > line.text-mode:first-child > blocks {
  display: inline;
}

editarea.lttb.text-mode > line.text-mode > blocks {
  text-align: inherit;
}



math-type compositeblock.table-of-content {
  display: block;
  width: 100%;
}
math-type compositeblock.table-of-content > toc-wrapper {
  position: relative;
  width: 100%;
  display: block;
  cursor: default;
}
math-type compositeblock.table-of-content > toc-wrapper .toc-setting-icons {
  display: none;
  position: absolute;
  left: -65px;
  width: 70px;
  top: -20px;
  bottom: 0;
  font-size: 1em;
  z-index: 999;
  padding-top: 20px;
}
math-type compositeblock.table-of-content > toc-wrapper .toc-setting-icons > .icon-refresh,
math-type compositeblock.table-of-content > toc-wrapper .toc-setting-icons > .icon-settings {
  border: 1px solid #c3c2c2;
  padding: 0.3em;
  padding-top: 0.1em;
  line-height: 1.2;
  padding-bottom: 0;
  cursor: pointer;
  background-color: #f7f7f7;
  color: gray;
  width: 12px;
  display: inline-block;
  margin-left: 5px;
}
math-type compositeblock.table-of-content > toc-wrapper:hover .toc-setting-icons {
  display: block;
}
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode {
  width: 100%;
  cursor: default;
  display: block;
}
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode {
  display: block;
  width: auto;
  cursor: default;
  padding-left: 1em;
  padding-right: 15px;
  font-style: unset;
}
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode > a > blocks,
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode > blocks {
  display: block;
}
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode > a > prefix,
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode > prefix {
  display: none;
}
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode.has-rtl {
  padding-left: 15px;
  padding-right: 1em;
}
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode.has-rtl > a > blocks,
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode.has-rtl > blocks {
  text-align: right;
}
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode.has-rtl a > blocks > compositeblock.toc-page-number-symbol,
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode.has-rtl > blocks > compositeblock.toc-page-number-symbol {
  float: left;
  padding-left: 0;
  margin-right: 0;
  margin-left: 0;
  padding-right: 0.5em;
}
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode > block,
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode > a > block,
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode > blocks > block,
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode a > blocks > block {
  white-space: pre-wrap;
  white-space: break-spaces;
  cursor: pointer;
  font-style: unset;
}
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode > a > blocks > compositeblock.toc-page-number-symbol,
math-type compositeblock.table-of-content > toc-wrapper > editarea.toc-ea.text-mode > line.text-mode > blocks > compositeblock.toc-page-number-symbol {
  float: right;
  padding-left: 0.5em;
  margin-right: 0;
}

.icon-integral-symbol {
  margin: auto 4px auto auto;
  display: flex;
  flex-direction: row-reverse;
  font-size: 12px;
}
.icon-integral-symbol .square-up {
  border-width: 1px;
  margin-top: 0px;
}
.icon-integral-symbol .square-down {
  border-width: 1px;
  margin-top: 21px;
  margin-left: -10px;
}
.icon-integral-symbol .align-end {
  margin-top: 6px;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .limit-type {
  position: relative;
}
math-type .limit-type > add {
  opacity: 0.5;
  background-color: #f7f7f7;
  border: 1px solid #c3c2c2;
  color: gray;
  display: block;
  position: absolute;
  font-size: 0.6em;
  cursor: pointer;
  margin-left: -0.4em;
  z-index: 999;
  opacity: 0.7;
  top: -0.5em;
  left: 50%;
  top: -1.4em;
  left: 0.6em;
  align-items: flex-start;
}
math-type .limit-type > add:hover {
  border-color: gray;
  opacity: 1;
}
math-type .limit-type > add > i {
  display: block;
  height: 1em;
  padding: 0.1em 0.15em;
  padding-bottom: 0;
  width: 0.8em;
}
math-type .limit-type > .to,
math-type .limit-type > .from {
  float: left;
  clear: both;
}
math-type .limit-type > .to > line,
math-type .limit-type > .from > line,
math-type .limit-type > .to > editarea > line,
math-type .limit-type > .from > editarea > line {
  font-size: 0.7em;
}
math-type .limit-type > editarea-line,
math-type .limit-type > editarea-block {
  font-size: 0.7em;
}
math-type .limit-type > symbol {
  display: block;
  clear: both;
  pointer-events: none;
}
math-type .limit-type > symbol > span {
  white-space: nowrap;
  pointer-events: none;
}
math-type .limit-type > setting {
  background-color: #f7f7f7;
  border: 1px solid #c3c2c2;
  color: gray;
  opacity: 0.5;
  opacity: 1;
  position: absolute;
  left: 50%;
  top: -2em;
  font-size: 0.6em;
  margin-left: -0.6em;
  padding: 0 0.2em;
  cursor: pointer;
}
math-type .limit-type > setting:hover {
  border-color: gray;
  opacity: 1;
}
math-type .limit-type > setting:hover {
  border: 1px solid gray;
}
math-type .limit-type > setting > i {
  transform: rotate(-60deg);
}
math-type .limit-type.limit-kind > setting > i {
  transform: rotate(45deg);
}
math-type .limit-type.limit-kind > symbol {
  text-align: center;
}
math-type .limit-type.limit-kind > .from,
math-type .limit-type.limit-kind > .to {
  width: 100%;
  text-align: center;
}
math-type .limit-type.limit-kind > .from > line,
math-type .limit-type.limit-kind > .to > line {
  justify-content: center;
  text-align: center;
}
math-type .limit-type.limit-kind > empty.from {
  height: 0;
  margin-top: -0.75em;
}
math-type .limit-type.limit-kind > empty.from > editarea.selected > line,
math-type .limit-type.limit-kind > empty.from > editarea-block.selected,
math-type .limit-type.limit-kind > empty.from > editarea-line.selected {
  background-color: white;
  text-align: center;
}
math-type .limit-type.limit-kind > empty.to {
  height: 0;
  text-align: center;
}
math-type .limit-type.limit-kind > empty.to > editarea.selected > line,
math-type .limit-type.limit-kind > empty.to > editarea-block.selected,
math-type .limit-type.limit-kind > empty.to > editarea-line.selected {
  background-color: white;
  text-align: center;
}
math-type .integral-like-symbol.inline > symbol {
  font-size: 1em;
}
math-type .integral-like-symbol.int-ml {
  margin-left: -0.5em;
}
math-type .integral-like-symbol.oint-ml {
  margin-left: -0.3em;
}
math-type .integral-like-symbol > symbol {
  font-size: 1.5em;
}
math-type .integral-like-symbol > symbol > span {
  line-height: 1.4em;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .limit-type.lim-like-symbol {
  margin-left: 0.2em;
  margin-right: 0.2em;
}
math-type .limit-type.lim-like-symbol.close-left {
  margin-left: 0;
}
math-type .limit-type.lim-like-symbol.close-right {
  margin-right: 0;
}
math-type .limit-type.lim-like-symbol.limit-kind > empty.from > editarea {
  margin-top: -0.4em;
}
math-type .lim-like-symbol > add {
  left: 50%;
  top: -1em;
}
math-type .lim-like-symbol > symbol.inf {
  text-decoration: underline;
}
math-type .lim-like-symbol > symbol.sup {
  text-decoration: overline;
}
math-type .lim-like-symbol.non-limit-kind > editarea.from,
math-type .lim-like-symbol.non-limit-kind > editarea.to {
  margin-left: 1.47em;
}
math-type .lim-like-symbol.non-limit-kind > editarea.from.from-lim,
math-type .lim-like-symbol.non-limit-kind > editarea.to.to-lim {
  margin-left: 1.5435em;
}
math-type .lim-like-symbol.non-limit-kind > editarea.from.from-liminf,
math-type .lim-like-symbol.non-limit-kind > editarea.to.to-liminf {
  margin-left: 3.15em;
}
math-type .lim-like-symbol.non-limit-kind > editarea.from.from-limsup,
math-type .lim-like-symbol.non-limit-kind > editarea.to.to-limsup {
  margin-left: 3.528em;
}
math-type .lim-like-symbol.non-limit-kind > editarea.from.from-sup,
math-type .lim-like-symbol.non-limit-kind > editarea.to.to-sup {
  margin-left: 1.6905em;
}
math-type .lim-like-symbol.non-limit-kind > editarea.from.from-varlimsup,
math-type .lim-like-symbol.non-limit-kind > editarea.to.to-varlimsup {
  margin-left: 1.5435em;
}
math-type .lim-like-symbol.non-limit-kind > editarea-block.from,
math-type .lim-like-symbol.non-limit-kind > editarea-block.to {
  margin-left: 2.072em;
}
math-type .lim-like-symbol.non-limit-kind > editarea-block.from.from-lim,
math-type .lim-like-symbol.non-limit-kind > editarea-block.to.to-lim {
  margin-left: 2.1756em;
}
math-type .lim-like-symbol.non-limit-kind > editarea-block.from.from-liminf,
math-type .lim-like-symbol.non-limit-kind > editarea-block.to.to-liminf {
  margin-left: 4.44em;
}
math-type .lim-like-symbol.non-limit-kind > editarea-block.from.from-limsup,
math-type .lim-like-symbol.non-limit-kind > editarea-block.to.to-limsup {
  margin-left: 4.9728em;
}
math-type .lim-like-symbol.non-limit-kind > editarea-block.from.from-sup,
math-type .lim-like-symbol.non-limit-kind > editarea-block.to.to-sup {
  margin-left: 2.3828em;
}
math-type .lim-like-symbol.non-limit-kind > editarea-block.from.from-varlimsup,
math-type .lim-like-symbol.non-limit-kind > editarea-block.to.to-varlimsup {
  margin-left: 2.1756em;
}



/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .limit-type.summation-like-symbol.limit-kind > empty.from {
  margin-top: -0.3em;
}
math-type .limit-type.summation-like-symbol.limit-kind > empty.from > editarea,
math-type .limit-type.summation-like-symbol.limit-kind > empty.from > editarea-block {
  margin-top: -0.2em;
}
math-type .summation-like-symbol.inline > add {
  top: -1.1em;
}
math-type .summation-like-symbol.inline > symbol {
  font-size: 1em;
}
math-type .summation-like-symbol.inline > symbol > span {
  vertical-align: 0.15em;
}
math-type .summation-like-symbol {
  padding-right: 0.15em;
}
math-type .summation-like-symbol > symbol {
  font-size: 1.5em;
}
math-type .summation-like-symbol > symbol > span {
  vertical-align: 0.1em;
  line-height: 1.4em;
}
math-type .summation-like-symbol > add {
  top: -1.5em;
}
math-type .summation-like-symbol > .custom-symbol {
  font-weight: bold;
}

hcomposed-symbol {
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
hcomposed-symbol > start {
  display: block;
  float: left;
  overflow: hidden;
}
hcomposed-symbol > middle {
  display: block;
  flex-grow: 1;
  white-space: nowrap;
  position: relative;
  overflow: hidden;
}
hcomposed-symbol > middle > fixed {
  display: block;
  position: absolute;
  left: 0;
  top: 0;
}
hcomposed-symbol > middle > fixed > inside {
  display: inline-block;
  overflow: hidden;
}
hcomposed-symbol > end {
  display: block;
  overflow: hidden;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .arrow-like-symbol {
  padding: 0 0.2em;
}
math-type .arrow-like-symbol > arrow-like-simple > add {
  opacity: 0.5;
  background-color: #f7f7f7;
  border: 1px solid #c3c2c2;
  color: gray;
  display: block;
  position: absolute;
  font-size: 0.6em;
  cursor: pointer;
  margin-left: -0.4em;
  z-index: 999;
  opacity: 0.7;
  top: -0.5em;
  left: 50%;
  left: 0.8em;
  top: -0.7em;
}
math-type .arrow-like-symbol > arrow-like-simple > add:hover {
  border-color: gray;
  opacity: 1;
}
math-type .arrow-like-symbol > arrow-like-simple > add > i {
  display: block;
  height: 1em;
  padding: 0.1em 0.15em;
  padding-bottom: 0;
  width: 0.8em;
}
math-type .arrow-like-symbol > middle {
  display: block;
  text-align: center;
  clear: both;
  width: 100%;
  position: relative;
}
math-type .arrow-like-symbol > middle > inside {
  display: inline-block;
  height: 0.55em;
  width: 100%;
}
math-type .arrow-like-symbol > middle > inside > hcomposed-symbol {
  position: absolute;
  top: 0.4em;
  left: 0;
}
math-type .arrow-like-symbol > editarea.sright-1 {
  padding-left: 0.55em;
  padding-right: 0.25em;
}
math-type .arrow-like-symbol > editarea.sleft-1 {
  padding-left: 0.25em;
  padding-right: 0.55em;
}
math-type .arrow-like-symbol > editarea.small-margin {
  padding-left: 0.4em;
  padding-right: 0.4em;
}
math-type .arrow-like-symbol > editarea.large-padding {
  margin: 0 1.3em;
}
math-type .arrow-like-symbol > editarea > line {
  font-size: 0.7em;
}
math-type .arrow-like-symbol > .top {
  float: left;
  width: 100%;
  clear: both;
  margin-bottom: -0.5em;
  z-index: 1;
  position: relative;
}
math-type .arrow-like-symbol > .top.space-1,
math-type .arrow-like-symbol > .top.up-space-1-lower-space-2 {
  margin-bottom: -0.4em;
}
math-type .arrow-like-symbol > .bottom {
  margin-top: -0.45em;
  float: left;
  width: 100%;
}
math-type .arrow-like-symbol > .bottom.space-1,
math-type .arrow-like-symbol > .bottom.lower-space-1 {
  margin-top: -0.35em;
}
math-type .arrow-like-symbol > .bottom.space-2,
math-type .arrow-like-symbol > .bottom.up-space-1-lower-space-2 {
  margin-top: -0.25em;
}

.over-icon {
  margin: auto;
  width: 12px;
  font-size: 13px;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .over-arrow-symbol > arrow-symbol {
  display: block;
  margin-right: -0.05em;
  position: relative;
}
math-type .over-arrow-symbol > arrow-symbol > hcomposed-symbol {
  position: absolute;
}
math-type .over-arrow-symbol > arrow-symbol > arrow-wrapper {
  margin-right: -0.2em;
}
math-type .over-arrow-symbol > editarea {
  display: inline-flex;
  text-align: center;
}
math-type .over-arrow-symbol > editarea > area-container > line,
math-type .over-arrow-symbol > editarea > line {
  justify-content: center;
  text-align: center;
}
math-type .over-arrow-symbol > editarea-block {
  min-width: 0.5em;
  text-align: center;
  display: inline-block;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .over-line-symbol {
  margin-left: 0.05em;
  margin-right: 0.05em;
}
math-type .over-line-symbol > editarea {
  display: inline-flex;
  min-width: 0.5em;
}
math-type .over-line-symbol > editarea-line {
  min-width: 0.5em;
  display: inline-block;
  text-align: center;
}
math-type .over-line-symbol > line-border {
  display: block;
  position: relative;
}
math-type .over-line-symbol > line-border > hcomposed-symbol {
  position: absolute;
}
math-type .over-line-symbol > line-border > svg {
  position: absolute;
  width: 100%;
  height: 100%;
}

brace-top-wrapper {
  display: flex;
  flex-direction: row;
  height: 100%;
  font-family: Asana-Math, Asana;
}
brace-top-wrapper > middle-wrapper {
  flex-grow: 1;
  position: relative;
  overflow: hidden;
}
brace-top-wrapper > middle-wrapper > fixed {
  display: block;
  position: absolute;
  left: 0;
  top: 0;
}
brace-top-wrapper > middle-wrapper > fixed > middle-inside {
  overflow: hidden;
}
brace-top-wrapper first,
brace-top-wrapper middle,
brace-top-wrapper last {
  overflow: hidden;
  position: relative;
}
brace-top-wrapper first {
  min-width: 0.7em;
  width: 0.7em;
}
brace-top-wrapper > middle {
  min-width: 0.6em;
  width: 0.6em;
}
brace-top-wrapper > last {
  min-width: 0.7em;
  width: 0.7em;
}
bracket-top-wrapper {
  display: flex;
  flex-direction: column;
  width: 100%;
  font-family: Asana-Math, Asana;
}
bracket-top-wrapper > first,
bracket-top-wrapper middle,
bracket-top-wrapper last {
  overflow: hidden;
  position: relative;
}
bracket-top-wrapper > first {
  height: 0.5em;
  min-height: 0.5em;
}
bracket-top-wrapper middle-wrapper {
  flex-grow: 1;
  position: relative;
  overflow: hidden;
}
bracket-top-wrapper middle-wrapper > fixed {
  overflow: hidden;
  position: absolute;
  left: 0;
  top: 0;
}
bracket-top-wrapper middle-wrapper > fixed > middle {
  display: block;
  overflow: hidden;
}
bracket-top-wrapper > last {
  height: 0.65em;
  min-height: 0.65em;
}
parenthesis-top-wrapper {
  display: flex;
  flex-direction: column;
  width: 100%;
  font-family: Asana-Math, Asana;
}
parenthesis-top-wrapper > first,
parenthesis-top-wrapper middle,
parenthesis-top-wrapper last {
  overflow: hidden;
  position: relative;
  height: 1em;
  min-height: 1em;
}
parenthesis-top-wrapper > first {
  min-height: 0.9em;
  height: 0.9em;
}
parenthesis-top-wrapper middle-wrapper {
  flex-grow: 1;
  position: relative;
  overflow: hidden;
}
parenthesis-top-wrapper middle-wrapper > fixed {
  position: absolute;
  top: 0;
  left: 0;
}
parenthesis-top-wrapper middle-wrapper > fixed > middle {
  display: block;
  overflow: hidden;
}
parenthesis-top-wrapper > last {
  min-height: 1em;
  height: 1em;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .over-brace-symbol {
  position: relative;
}
math-type .over-brace-symbol > add {
  opacity: 0.5;
  background-color: #f7f7f7;
  border: 1px solid #c3c2c2;
  color: gray;
  display: block;
  position: absolute;
  font-size: 0.6em;
  cursor: pointer;
  margin-left: -0.4em;
  z-index: 999;
  opacity: 0.7;
  top: -0.5em;
  left: 50%;
  top: -1.5em;
  margin-left: -0.6em;
}
math-type .over-brace-symbol > add:hover {
  border-color: gray;
  opacity: 1;
}
math-type .over-brace-symbol > add > i {
  display: block;
  height: 1em;
  padding: 0.1em 0.15em;
  padding-bottom: 0;
  width: 0.8em;
}
math-type .over-brace-symbol > top-brace {
  pointer-events: none;
  display: block;
  min-width: 1.1em;
  position: relative;
  clear: both;
  margin-bottom: -0.1em;
  font-style: normal;
  font-weight: normal;
}
math-type .over-brace-symbol > top-brace > brace-top-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  left: 50%;
  transform: translate(-50%, 0);
}
math-type .over-brace-symbol > editarea {
  display: inline-flex;
  width: 100%;
  align-self: center;
  clear: both;
}
math-type .over-brace-symbol > editarea.overValue {
  font-size: 0.7em;
  float: left;
  width: 100%;
  margin-bottom: 0.1em;
}

.icon-hat {
  margin: auto;
  width: 12px;
  font-size: 12px;
}
.icon-hat .square {
  margin-top: -3px;
}

.under-arc-symbol {
  display: inline-block;
}
.under-arc-symbol > editarea {
  display: inline-flex;
}
.under-arc-symbol > symbol {
  display: block;
  width: 100%;
  position: relative;
}
.under-arc-symbol > symbol > svg {
  position: absolute;
  left: 0;
  top: 0;
  display: block;
  width: 100%;
  height: 100%;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .under-line-symbol > editarea {
  display: inline-flex;
}
math-type .under-line-symbol > line-border {
  display: block;
  position: relative;
  float: left;
  width: 100%;
}
math-type .under-line-symbol > line-border > svg {
  position: absolute;
  width: 100%;
  height: 100%;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type compositeblock.under-brace-symbol {
  display: inline-flex;
  flex-flow: column;
  position: relative;
}
math-type compositeblock.under-brace-symbol > add {
  opacity: 0.5;
  background-color: #f7f7f7;
  border: 1px solid #c3c2c2;
  color: gray;
  display: block;
  position: absolute;
  font-size: 0.6em;
  cursor: pointer;
  margin-left: -0.4em;
  z-index: 999;
  opacity: 0.7;
  top: -0.5em;
  left: 50%;
  top: 3em;
}
math-type compositeblock.under-brace-symbol > add:hover {
  border-color: gray;
  opacity: 1;
}
math-type compositeblock.under-brace-symbol > add > i {
  display: block;
  height: 1em;
  padding: 0.1em 0.15em;
  padding-bottom: 0;
  width: 0.8em;
}
math-type compositeblock.under-brace-symbol > bottom-brace {
  pointer-events: none;
  display: block;
  position: relative;
  min-width: 1.3em;
  font-style: normal;
  font-weight: normal;
}
math-type compositeblock.under-brace-symbol > bottom-brace > brace-top-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  left: 50%;
  transform: translate(-50%, 0);
}
math-type compositeblock.under-brace-symbol > editarea {
  margin-left: 0.15em;
  margin-right: 0.15em;
  align-self: center;
}
math-type compositeblock.under-brace-symbol > editarea.underValue {
  font-size: 0.7em;
}
.under-brace-icon {
  width: 12px;
  margin: auto;
  font-size: 12px;
}
.under-brace-icon .brace-wrapper {
  margin-top: -14px;
}


math-type .operator-name > editarea {
  margin-left: 0.2em;
  margin-right: 0.2em;
  display: inline-flex;
}
math-type .operator-name > editarea.close-left {
  margin-left: 0;
}
math-type .operator-name > editarea.close-right {
  margin-right: 0;
}

.math-group > editarea {
  float: left;
}
.group-icon .rectangle {
  width: 23px;
  height: 12px;
  border-style: solid;
  border-width: 1px;
  text-align: center;
  border-color: gray;
  font-family: fantasy;
  color: black;
  padding-top: 1px;
  font-size: 9px;
  line-height: 14px;
  vertical-align: middle;
  margin: auto;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type compositeblock.over-symbol {
  position: relative;
}
math-type compositeblock.over-symbol > symbol {
  font-family: Asana-Math, Asana, Arial;
  height: 8em;
  display: block;
  text-align: center;
  position: relative;
}
math-type compositeblock.over-symbol > symbol > inner {
  display: block;
  position: absolute;
  text-align: center;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}
math-type compositeblock.over-symbol > symbol.dot > inner.left-sign,
math-type compositeblock.over-symbol > symbol.ring > inner.left-sign {
  transform: translate(-0.07em, 0);
}
math-type compositeblock.over-symbol > symbol.dot > inner.right-sign,
math-type compositeblock.over-symbol > symbol.ring > inner.right-sign {
  transform: translate(0.2em, 0);
}
math-type compositeblock.over-symbol > symbol.dot > inner,
math-type compositeblock.over-symbol > symbol.ring > inner {
  transform: translate(0.05em, 0);
}
math-type compositeblock.over-symbol > symbol.small-hat > inner.left-sign,
math-type compositeblock.over-symbol > symbol.small-tilde > inner.left-sign {
  transform: translate(-0.04em, 0);
}
math-type compositeblock.over-symbol > symbol.small-hat > inner.right-sign,
math-type compositeblock.over-symbol > symbol.small-tilde > inner.right-sign {
  transform: translate(0.15em, 0);
}
math-type compositeblock.over-symbol > symbol.small-hat > inner.ignore-shift,
math-type compositeblock.over-symbol > symbol.small-tilde > inner.ignore-shift {
  transform: translate(0, 0);
}
math-type compositeblock.over-symbol > symbol.small-hat > inner,
math-type compositeblock.over-symbol > symbol.small-tilde > inner {
  transform: translate(0.05em, 0);
}
math-type compositeblock.over-symbol > symbol.acute > inner.left-sign {
  transform: translate(-0.04em, 0);
}
math-type compositeblock.over-symbol > symbol.acute > inner.right-sign {
  transform: translate(0.25em, 0);
}
math-type compositeblock.over-symbol > symbol.acute > inner {
  transform: translate(0.1em, 0);
}
math-type compositeblock.over-symbol > symbol.grave,
math-type compositeblock.over-symbol > symbol.breve,
math-type compositeblock.over-symbol > symbol.acute {
  font-family: 'Times New Roman', Times, serif;
}
math-type compositeblock.over-symbol > symbol.grave > inner.left-sign,
math-type compositeblock.over-symbol > symbol.breve > inner.left-sign,
math-type compositeblock.over-symbol > symbol.check > inner.left-sign {
  transform: translate(-0.07em, 0);
}
math-type compositeblock.over-symbol > symbol.grave > inner.right-sign,
math-type compositeblock.over-symbol > symbol.breve > inner.right-sign,
math-type compositeblock.over-symbol > symbol.check > inner.right-sign {
  transform: translate(0.17em, 0);
}
math-type compositeblock.over-symbol > symbol.ddddot {
  min-width: 0.9em;
}
math-type compositeblock.over-symbol > symbol.dddot {
  min-width: 0.7em;
}

.math-xx > editarea {
  float: left;
}

math-type .big-delimiter-symbol {
  display: inline-flex;
  align-items: center;
  position: relative;
  margin: 0.1em 0;
}
math-type .big-delimiter-symbol big-delimiter.big-open {
  margin-left: 0.09em;
}
math-type .big-delimiter-symbol big-delimiter.big-close {
  margin-right: 0.07em;
}
math-type .big-delimiter-symbol > base-line-indicator {
  height: inherit;
}
math-type .big-delimiter-symbol > big-delimiter > svg {
  height: 100%;
  width: 100%;
}
math-type .big-delimiter-symbol > big-delimiter > bulb {
  left: -10px;
}
math-type .big-delimiter-symbol > big-delimiter > setting {
  width: 158px;
  display: flex;
  position: absolute;
  left: 0;
  top: -40px;
}
math-type .big-delimiter-symbol > big-delimiter > setting > .select-box-container {
  margin-right: 4px;
}
math-type .big-delimiter-symbol > big-delimiter > setting > .select-box-container:last-child {
  margin-right: 0px;
}

select-buttons {
  font-size: 13px;
  color: gray;
  display: block;
}
select-buttons > sb-item {
  display: inline-block;
  padding: 2px 2px;
  cursor: pointer;
  border: 1px solid transparent;
  /*box-sizing: border-box;*/
}
select-buttons > sb-item.selected {
  background-color: white;
  border: 1px solid lightgray;
}
select-buttons > sb-item:hover {
  border: 1px solid lightgray;
}
select-buttons > sb-item.disabled {
  opacity: 0.3;
  cursor: default;
  border: 1px solid transparent;
}
select-buttons > sb-item.disabled:hover {
  background-color: inherit;
  border: 1px solid transparent;
}

tabs-container tab-item {
  color: gray;
}
tabs-container tab-item:hover {
  color: black;
}

expandable-component.button-action {
  cursor: pointer;
  color: gray;
  fill: gray;
}
expandable-component.button-action:hover,
expandable-component.button-action.selected {
  color: black;
  fill: black;
}
expandable-component.button-action:hover label-display,
expandable-component.button-action.selected label-display {
  border: 1px solid #e2e0e0;
}
expandable-component.button-action label-display {
  font-size: 12px;
  padding-top: 5px;
  display: flex;
  border: 1px solid transparent;
  padding-left: 2px;
  padding-right: 2px;
  margin-top: 0px;
  padding-bottom: 4px;
  cursor: pointer;
}
expandable-component.button-action label-display > i {
  padding-left: 5px;
  padding-top: 1px;
}
expandable-component.button-action label-item-container > label-item:hover {
  background-color: #bfe4bd;
}
expandable-component.button-action label-item-container > label-item.ignore-select {
  background-color: inherit;
  cursor: default;
}
expandable-component.button-action.button-style label-display {
  background: white;
  border: 1px solid lightgray;
}
expandable-component.button-action.button-style:hover,
expandable-component.button-action.button-style.selected {
  color: gray;
}
expandable-component.button-action.button-style:hover label-display,
expandable-component.button-action.button-style.selected label-display {
  background: #f7f6f6;
}

g.group-box-move {
  opacity: 0.2;
}
g.group-box-move:hover {
  opacity: 0.8;
}




.math-diagram .intersections-group {
  stroke-width: 2px;
  stroke: black;
  fill: transparent;
  cursor: move;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type compositeblock.math-diagram > math-diagram {
  background: white;
}
math-type compositeblock.math-diagram {
  cursor: default;
  width: 100%;
  /** display block as if inline block, it will be disapear in some cases*/
  display: block;
}
math-type compositeblock.math-diagram .connection-point {
  cursor: crosshair;
}
math-type compositeblock.math-diagram .connection-point g {
  fill-opacity: 0.6;
}
math-type compositeblock.math-diagram .connection-point:hover g {
  fill-opacity: 1;
}
math-type compositeblock.math-diagram .text-diagram-editor editarea.text-mode.non-wrap > line.text-mode {
  font-size: unset;
}
math-type compositeblock.math-diagram .text-diagram-editor editarea.text-mode.non-wrap > line.text-mode > block {
  white-space: pre;
}
math-type compositeblock.math-diagram .text-diagram-editor editarea.text-mode.non-wrap > line.text-mode > blocks > block {
  white-space: pre;
}
math-type compositeblock.math-diagram > math-diagram {
  border: 1px solid transparent;
}
math-type compositeblock.math-diagram > math-diagram > clip-region > zoom-region {
  display: block;
  width: 100%;
  height: 100%;
}
math-type compositeblock.math-diagram > math-diagram > clip-region > zoom-region > svg {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}
math-type compositeblock.math-diagram .add-label {
  fill: gray;
}
math-type compositeblock.math-diagram .add-label:hover {
  fill: black;
}
math-type compositeblock.math-diagram .diagram-editor {
  margin: 0 2px;
}
math-type compositeblock.math-diagram .control-point-guide {
  stroke: lightgray;
  stroke-width: 0.5px;
  pointer-events: none;
}
math-type compositeblock.math-diagram .connection-group {
  stroke: black;
  fill: none;
}
math-type compositeblock.math-diagram .arrow-line {
  cursor: move;
}
math-type compositeblock.math-diagram .mobile-tablet .shape .transparent,
math-type compositeblock.math-diagram .mobile-tablet .composite-shape .transparent {
  stroke-width: 10px;
}
math-type compositeblock.math-diagram .shape,
math-type compositeblock.math-diagram .composite-shape {
  stroke-width: 1px;
  fill: none;
  cursor: move;
}
math-type compositeblock.math-diagram .shape .transparent,
math-type compositeblock.math-diagram .composite-shape .transparent {
  pointer-events: visiblePainted;
  stroke-width: 6px;
  stroke: transparent;
  stroke-dasharray: none;
  fill: none;
}
math-type compositeblock.math-diagram .mobile-tablet .connection.transparent,
math-type compositeblock.math-diagram .mobile-tablet .connection.transparent > line,
math-type compositeblock.math-diagram .mobile-tablet .connection.transparent > path {
  stroke-width: 10px;
}
math-type compositeblock.math-diagram .connection {
  stroke-width: 1px;
  fill: none;
  cursor: move;
}
math-type compositeblock.math-diagram .connection.transparent,
math-type compositeblock.math-diagram .connection.transparent > line,
math-type compositeblock.math-diagram .connection.transparent > path {
  pointer-events: visiblePainted;
  stroke-width: 6px;
  stroke: transparent;
  stroke-dasharray: none;
  fill: none;
}
math-type compositeblock.math-diagram .frame {
  stroke-width: 1px;
  fill: transparent;
}
math-type math-diagram {
  display: block;
  position: relative;
  width: 100%;
  height: 300px;
}
math-type math-diagram position-container {
  position: absolute;
  width: 1px;
  height: 1px;
  display: block;
}
math-type math-diagram dg-editor-container {
  position: absolute;
  min-width: 0.85em;
  border-collapse: border-box;
}
math-type math-diagram coverlayer {
  position: absolute;
  background: transparent;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
  cursor: move;
}
math-type math-diagram connection-point {
  position: absolute;
  display: block;
  height: 6px;
  width: 6px;
  background: lightgray;
  border: 1px solid gray;
  bottom: -10px;
  left: 50%;
  margin-left: -3px;
  cursor: e-resize;
}
math-type .diagram-caption > line.text-mode:first-child {
  display: inline;
}
math-type .diagram-caption > line.text-mode:first-child > blocks {
  display: inline;
}


.plot-input-style-settings {
  opacity: 0.5;
}
.plot-input-style-settings:hover {
  opacity: 1;
}

.psa-cn .ps-hint {
  opacity: 0;
  transition: opacity 0.3s linear;
}
.psa-cn:hover .ps-hint {
  opacity: 0.6;
}

.role-toolbar-wrapper.dg-full-view tool-bar too-bar-container {
  justify-content: start;
  width: auto;
  min-width: 0;
}
.role-toolbar-wrapper.dg-full-view diagram-settings {
  width: auto;
}

.dg-items-bar-container item {
  display: inline-block;
  padding: 3px;
  fill: gray;
  stroke: gray;
}
.dg-items-bar-container item,
.dg-items-bar-container item-option {
  border: 1px transparent solid;
}
.dg-items-bar-container item:hover,
.dg-items-bar-container item-option:hover {
  border: 1px #c4c1c1 solid;
  background: white;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type compositeblock.theorem {
  display: block;
}
math-type compositeblock.theorem.selected {
  outline: 1px solid rgba(93, 92, 92, 0.3);
}
math-type theorem-name {
  min-width: 20px;
  display: inline;
}
math-type theorem-name > line.text-mode:first-child {
  display: inline;
}
math-type editarea.text-mode.edit-theorem-content {
  min-width: 100px;
  display: inline;
  font-style: italic;
}
math-type editarea.text-mode.edit-theorem-content > line.text-mode:first-child {
  display: inline;
}
math-type editarea.text-mode.edit-theorem-content > line.text-mode:first-child > blocks {
  display: inline;
}
math-type editarea.text-mode.edit-theorem-content > line.text-mode > block {
  font-style: italic;
}
math-type editarea.text-mode.edit-theorem-content > line.text-mode > blocks > block {
  font-style: italic;
}
math-type editarea.text-mode.edit-theorem-content.normal > line.text-mode > block {
  font-style: normal;
}
math-type editarea.text-mode.edit-theorem-content.normal > line.text-mode > blocks > block {
  font-style: normal;
}
math-type editarea.text-mode.edit-theorem-content .qed-symbol {
  line-height: 1em;
}
.deletable {
  cursor: pointer;
}
.deletable:hover {
  color: red;
}

.regular-checkbox:hover {
  background-color: #f3f2f2;
}

@media print {
  code[class*="language-"],
  pre[class*="language-"] {
    text-shadow: none !important;
  }
}
math-type .code-section prefix.code-line-number {
  color: #a9a7a7;
  width: 2.5em;
  display: inline-block;
  flex-shrink: 0;
}
math-type .code-section prefix.code-line-number.prefix-l10 {
  width: 1.5em;
}
math-type .code-section prefix.code-line-number.prefix-l100 {
  width: 2em;
}
math-type .code-section .code-line-blocks-container {
  white-space: pre-wrap;
  white-space: break-spaces;
}
math-type .code-section .code-line-blocks-container block.token {
  white-space: pre-wrap;
  white-space: break-spaces;
}
math-type .code-section line.text-mode.code-section-line {
  display: flex;
  flex-direction: row;
  line-height: 1.5;
}

/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */
.code-section.theme-default editarea {
  color: black;
}
.code-section.theme-default .token.comment,
.code-section.theme-default .token.prolog,
.code-section.theme-default .token.doctype,
.code-section.theme-default .token.cdata {
  color: slategray;
}
.code-section.theme-default .token.punctuation {
  color: #999;
}
.code-section.theme-default .namespace {
  opacity: 0.7;
}
.code-section.theme-default .token.property,
.code-section.theme-default .token.tag,
.code-section.theme-default .token.boolean,
.code-section.theme-default .token.number,
.code-section.theme-default .token.constant,
.code-section.theme-default .token.symbol,
.code-section.theme-default .token.deleted {
  color: #905;
}
.code-section.theme-default .token.selector,
.code-section.theme-default .token.attr-name,
.code-section.theme-default .token.string,
.code-section.theme-default .token.char,
.code-section.theme-default .token.builtin,
.code-section.theme-default .token.inserted {
  color: #690;
}
.code-section.theme-default .token.operator,
.code-section.theme-default .token.entity,
.code-section.theme-default .token.url,
.code-section.theme-default .language-css .token.string,
.code-section.theme-default .style .token.string {
  color: #9a6e3a;
}
.code-section.theme-default .token.atrule,
.code-section.theme-default .token.attr-value,
.code-section.theme-default .token.keyword {
  color: #07a;
}
.code-section.theme-default .token.function,
.code-section.theme-default .token.class-name {
  color: #DD4A68;
}
.code-section.theme-default .token.regex,
.code-section.theme-default .token.important,
.code-section.theme-default .token.important1,
.code-section.theme-default .token.variable {
  color: #e90;
}
.code-section.theme-default .token.important,
.code-section.theme-default .token.bold,
.code-section.theme-default .token.bold1 {
  font-weight: bold;
}
.code-section.theme-default .token.italic,
.code-section.theme-default .token.italic1 {
  font-style: italic;
}
.code-section.theme-default .token.entity {
  cursor: help;
}

/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */
.code-section.theme-tomorrow-night {
  /**
 * prism.js tomorrow night eighties for JavaScript, CoffeeScript, CSS and HTML
 * Based on https://github.com/chriskempson/tomorrow-theme
 * @author Rose Pritchard
 */
}
.code-section.theme-tomorrow-night editarea {
  caret-color: #ccc;
}
.code-section.theme-tomorrow-night editarea {
  color: #ccc;
}
.code-section.theme-tomorrow-night .token.comment,
.code-section.theme-tomorrow-night .token.block-comment,
.code-section.theme-tomorrow-night .token.prolog,
.code-section.theme-tomorrow-night .token.doctype,
.code-section.theme-tomorrow-night .token.cdata {
  color: #999;
}
.code-section.theme-tomorrow-night .token.punctuation {
  color: #ccc;
}
.code-section.theme-tomorrow-night .token.tag,
.code-section.theme-tomorrow-night .token.attr-name,
.code-section.theme-tomorrow-night .token.namespace,
.code-section.theme-tomorrow-night .token.deleted {
  color: #e2777a;
}
.code-section.theme-tomorrow-night .token.function-name {
  color: #6196cc;
}
.code-section.theme-tomorrow-night .token.boolean,
.code-section.theme-tomorrow-night .token.number,
.code-section.theme-tomorrow-night .token.function {
  color: #f08d49;
}
.code-section.theme-tomorrow-night .token.property,
.code-section.theme-tomorrow-night .token.class-name,
.code-section.theme-tomorrow-night .token.constant,
.code-section.theme-tomorrow-night .token.symbol {
  color: #f8c555;
}
.code-section.theme-tomorrow-night .token.selector,
.code-section.theme-tomorrow-night .token.important,
.code-section.theme-tomorrow-night .token.important1,
.code-section.theme-tomorrow-night .token.atrule,
.code-section.theme-tomorrow-night .token.keyword,
.code-section.theme-tomorrow-night .token.builtin {
  color: #cc99cd;
}
.code-section.theme-tomorrow-night .token.string,
.code-section.theme-tomorrow-night .token.char,
.code-section.theme-tomorrow-night .token.attr-value,
.code-section.theme-tomorrow-night .token.regex,
.code-section.theme-tomorrow-night .token.variable {
  color: #7ec699;
}
.code-section.theme-tomorrow-night .token.operator,
.code-section.theme-tomorrow-night .token.entity,
.code-section.theme-tomorrow-night .token.url {
  color: #67cdcc;
}
.code-section.theme-tomorrow-night .token.important,
.code-section.theme-tomorrow-night .token.bold,
.code-section.theme-tomorrow-night .token.bold1 {
  font-weight: bold;
}
.code-section.theme-tomorrow-night .token.italic,
.code-section.theme-tomorrow-night .token.italic1 {
  font-style: italic;
}
.code-section.theme-tomorrow-night .token.entity {
  cursor: help;
}
.code-section.theme-tomorrow-night .token.inserted {
  color: green;
}

.lang-name:hover {
  background: #f7f7f7;
}
.lang-name.selected {
  background: #e1e8f5;
}
.custom-lange-area input::placeholder,
.custom-lange-area textarea::placeholder {
  color: lightgray;
}

.page-print-item {
  position: relative;
}
.page-print-item:hover .page-print-item-hover {
  display: block;
}
.page-print-item-hover {
  display: none;
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 10px;
  background: #f7f6f6;
  z-index: 10;
  padding: 5px;
  font-size: 0.8em;
  white-space: nowrap;
  color: gray;
  border: 1px solid lightgray;
}

.settings-show-hide {
  background: rgba(255, 255, 255, 0.61);
}
.settings-show-hide:hover {
  background: white;
}
.group-symbol-collapsed {
  display: block;
  border: 1px dotted lightgray;
  padding-top: 0.1em;
  padding-bottom: 0.1em;
}
.role-math-mode-group.math-mode-group-expanded .settings-show-hide,
.role-text-mode-group-inline.text-mode-group-inline-expanded .settings-show-hide {
  display: none;
}
.role-math-mode-group.math-mode-group-expanded:hover,
.role-text-mode-group-inline.text-mode-group-inline-expanded:hover {
  outline: 1px solid lightgray;
}
.role-math-mode-group.math-mode-group-expanded:hover .settings-show-hide,
.role-text-mode-group-inline.text-mode-group-inline-expanded:hover .settings-show-hide {
  display: flex;
}

math-type .symbol-container,
.auto-complete-external-area .symbol-container {
  display: flex;
  flex-direction: row;
  min-height: 25px;
  padding-left: 4px;
  padding-right: 12px;
  align-items: center;
  cursor: pointer;
}
math-type .symbol-container.selected,
.auto-complete-external-area .symbol-container.selected {
  background-color: #bfe4bd;
}
math-type .symbol-friendly-name,
.auto-complete-external-area .symbol-friendly-name {
  flex-grow: 1;
  font-family: Asana;
  /*padding-top: 6px;*/
}
math-type .symbol-icon,
.auto-complete-external-area .symbol-icon {
  /*padding-top: 6px;*/
  margin-right: 15px;
  min-width: 20px;
  text-align: center;
}
math-type .short-cut,
.auto-complete-external-area .short-cut {
  text-align: center;
  color: gray;
  /*vertical-align: middle;*/
  /*line-height: 20px;*/
  margin: 0 2px 0 2px;
  font-size: 12px;
  display: flex;
  align-items: center;
}
math-type .short-cut span,
.auto-complete-external-area .short-cut span {
  font-size: 10px;
}
math-type .hidden,
.auto-complete-external-area .hidden {
  display: none;
}

math-type compositeblock.text-super-script-symbol,
math-type compositeblock.text-sub-script-symbol {
  display: inline;
}
math-type compositeblock.text-super-script-symbol > editarea.text-mode,
math-type compositeblock.text-sub-script-symbol > editarea.text-mode {
  display: inline;
}
math-type compositeblock.text-super-script-symbol > editarea.text-mode > line.text-mode,
math-type compositeblock.text-sub-script-symbol > editarea.text-mode > line.text-mode {
  display: inline;
}
math-type compositeblock.text-super-script-symbol > editarea.text-mode > line.text-mode > blocks,
math-type compositeblock.text-sub-script-symbol > editarea.text-mode > line.text-mode > blocks {
  display: inline;
}
math-type .text-super-script-symbol {
  vertical-align: super;
}
math-type .text-sub-script-symbol {
  vertical-align: sub;
}

math-type compositeblock.bib-bibliography {
  width: 100%;
  display: block;
}
math-type compositeblock.bib-cite {
  display: inline;
  white-space: break-spaces;
}
math-type compositeblock.bib-cite > editarea.text-mode {
  display: inline;
}
math-type compositeblock.bib-cite > editarea.text-mode > line.text-mode {
  display: inline;
}
math-type compositeblock.bib-cite > editarea.text-mode > line.text-mode > blocks {
  display: inline;
}
.csl-context {
  white-space: pre-wrap;
}
.csl-context.csl-cite div {
  display: inline;
}
.csl-context div.csl-left-margin {
  float: left;
}
.csl-context div.csl-block {
  font-weight: bold;
}
.csl-context div.csl-right-inline {
  margin-left: 2.5em;
}
.csl-context div.csl-indent {
  margin-top: 0.5em;
  margin-left: 2em;
  padding-bottom: 0.2em;
  padding-left: 0.5em;
  border-left: 5px solid #ccc;
}

compositeblock.section-ref {
  display: inline;
}
compositeblock.section-ref > .section-ref-border {
  display: inline;
  white-space: pre-wrap;
}
compositeblock.section-ref > div {
  display: inline;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type editarea.no-area-container,
math-type editarea.text-mode,
math-type area-container,
math-type .print-as-area-container {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
math-type editarea.no-area-container > line,
math-type editarea.text-mode > line,
math-type area-container > line,
math-type .print-as-area-container > line {
  min-width: 0.3em;
  position: relative;
  display: block;
  width: 100%;
  align-items: baseline;
  flex-wrap: wrap;
  box-sizing: border-box;
  flex-wrap: nowrap;
  line-height: 1.2;
  white-space: nowrap;
}
math-type editarea.no-area-container > line block,
math-type editarea.text-mode > line block,
math-type area-container > line block,
math-type .print-as-area-container > line block {
  white-space: pre;
}
math-type editarea.no-area-container > line.single-block > blocks > baselineblock,
math-type editarea.text-mode > line.single-block > blocks > baselineblock,
math-type area-container > line.single-block > blocks > baselineblock,
math-type .print-as-area-container > line.single-block > blocks > baselineblock {
  display: none;
}
math-type editarea.no-area-container > line > blocks,
math-type editarea.text-mode > line > blocks,
math-type area-container > line > blocks,
math-type .print-as-area-container > line > blocks {
  /**
            Different between inline and inline-block is about whether Section Text will be wrap in next wrapped line 
            */
  display: inline-block;
  text-align: left;
}
math-type editarea.no-area-container > line.root,
math-type editarea.text-mode > line.root,
math-type area-container > line.root,
math-type .print-as-area-container > line.root,
math-type editarea.no-area-container > line.text-mode,
math-type editarea.text-mode > line.text-mode,
math-type area-container > line.text-mode,
math-type .print-as-area-container > line.text-mode {
  display: block;
  font-style: normal;
}
math-type editarea.no-area-container > line.root > prefix,
math-type editarea.text-mode > line.root > prefix,
math-type area-container > line.root > prefix,
math-type .print-as-area-container > line.root > prefix,
math-type editarea.no-area-container > line.text-mode > prefix,
math-type editarea.text-mode > line.text-mode > prefix,
math-type area-container > line.text-mode > prefix,
math-type .print-as-area-container > line.text-mode > prefix {
  white-space: pre;
  display: inline-block;
  cursor: default;
  text-align: left;
}
math-type editarea.no-area-container > line.root > blocks,
math-type editarea.text-mode > line.root > blocks,
math-type area-container > line.root > blocks,
math-type .print-as-area-container > line.root > blocks,
math-type editarea.no-area-container > line.text-mode > blocks,
math-type editarea.text-mode > line.text-mode > blocks,
math-type area-container > line.text-mode > blocks,
math-type .print-as-area-container > line.text-mode > blocks {
  /** should not wrap here*/
  align-items: baseline;
  box-sizing: border-box;
}
math-type editarea.no-area-container > line.root > blocks > block,
math-type editarea.text-mode > line.root > blocks > block,
math-type area-container > line.root > blocks > block,
math-type .print-as-area-container > line.root > blocks > block,
math-type editarea.no-area-container > line.text-mode > blocks > block,
math-type editarea.text-mode > line.text-mode > blocks > block,
math-type area-container > line.text-mode > blocks > block,
math-type .print-as-area-container > line.text-mode > blocks > block {
  white-space: pre-wrap;
  white-space: break-spaces;
}
math-type editarea.no-area-container > line.root.full-line-block-inside > prefix,
math-type editarea.text-mode > line.root.full-line-block-inside > prefix,
math-type area-container > line.root.full-line-block-inside > prefix,
math-type .print-as-area-container > line.root.full-line-block-inside > prefix,
math-type editarea.no-area-container > line.text-mode.full-line-block-inside > prefix,
math-type editarea.text-mode > line.text-mode.full-line-block-inside > prefix,
math-type area-container > line.text-mode.full-line-block-inside > prefix,
math-type .print-as-area-container > line.text-mode.full-line-block-inside > prefix {
  float: left;
  vertical-align: top;
}
math-type editarea.no-area-container > line.root.full-line-block-inside > blocks,
math-type editarea.text-mode > line.root.full-line-block-inside > blocks,
math-type area-container > line.root.full-line-block-inside > blocks,
math-type .print-as-area-container > line.root.full-line-block-inside > blocks,
math-type editarea.no-area-container > line.text-mode.full-line-block-inside > blocks,
math-type editarea.text-mode > line.text-mode.full-line-block-inside > blocks,
math-type area-container > line.text-mode.full-line-block-inside > blocks,
math-type .print-as-area-container > line.text-mode.full-line-block-inside > blocks {
  display: block;
  width: 100%;
}
math-type editarea.no-area-container > line.root.full-line-block-inside > blocks > baselineblock,
math-type editarea.text-mode > line.root.full-line-block-inside > blocks > baselineblock,
math-type area-container > line.root.full-line-block-inside > blocks > baselineblock,
math-type .print-as-area-container > line.root.full-line-block-inside > blocks > baselineblock,
math-type editarea.no-area-container > line.text-mode.full-line-block-inside > blocks > baselineblock,
math-type editarea.text-mode > line.text-mode.full-line-block-inside > blocks > baselineblock,
math-type area-container > line.text-mode.full-line-block-inside > blocks > baselineblock,
math-type .print-as-area-container > line.text-mode.full-line-block-inside > blocks > baselineblock {
  display: inline-block;
  float: left;
}
math-type editarea.no-area-container > line.root.has-rtl.align-justify,
math-type editarea.text-mode > line.root.has-rtl.align-justify,
math-type area-container > line.root.has-rtl.align-justify,
math-type .print-as-area-container > line.root.has-rtl.align-justify,
math-type editarea.no-area-container > line.text-mode.has-rtl.align-justify,
math-type editarea.text-mode > line.text-mode.has-rtl.align-justify,
math-type area-container > line.text-mode.has-rtl.align-justify,
math-type .print-as-area-container > line.text-mode.has-rtl.align-justify {
  direction: rtl;
}
math-type editarea.no-area-container > line.root.section,
math-type editarea.text-mode > line.root.section,
math-type area-container > line.root.section,
math-type .print-as-area-container > line.root.section,
math-type editarea.no-area-container > line.text-mode.section,
math-type editarea.text-mode > line.text-mode.section,
math-type area-container > line.text-mode.section,
math-type .print-as-area-container > line.text-mode.section {
  text-align: left;
}
math-type editarea.no-area-container > line.root.section > blocks,
math-type editarea.text-mode > line.root.section > blocks,
math-type area-container > line.root.section > blocks,
math-type .print-as-area-container > line.root.section > blocks,
math-type editarea.no-area-container > line.text-mode.section > blocks,
math-type editarea.text-mode > line.text-mode.section > blocks,
math-type area-container > line.text-mode.section > blocks,
math-type .print-as-area-container > line.text-mode.section > blocks {
  /**
                    Different between inline and inline-block is about whether Section Text will be wrap in next wrapped line 
                    */
  display: inline;
}
math-type editarea.no-area-container > line.root.section.has-rtl,
math-type editarea.text-mode > line.root.section.has-rtl,
math-type area-container > line.root.section.has-rtl,
math-type .print-as-area-container > line.root.section.has-rtl,
math-type editarea.no-area-container > line.text-mode.section.has-rtl,
math-type editarea.text-mode > line.text-mode.section.has-rtl,
math-type area-container > line.text-mode.section.has-rtl,
math-type .print-as-area-container > line.text-mode.section.has-rtl {
  direction: rtl;
}
math-type editarea.no-area-container > line.root.section.has-rtl > prefix,
math-type editarea.text-mode > line.root.section.has-rtl > prefix,
math-type area-container > line.root.section.has-rtl > prefix,
math-type .print-as-area-container > line.root.section.has-rtl > prefix,
math-type editarea.no-area-container > line.text-mode.section.has-rtl > prefix,
math-type editarea.text-mode > line.text-mode.section.has-rtl > prefix,
math-type area-container > line.text-mode.section.has-rtl > prefix,
math-type .print-as-area-container > line.text-mode.section.has-rtl > prefix {
  direction: rtl;
  order: 1;
}
math-type editarea.no-area-container > line.root.theorem,
math-type editarea.text-mode > line.root.theorem,
math-type area-container > line.root.theorem,
math-type .print-as-area-container > line.root.theorem,
math-type editarea.no-area-container > line.text-mode.theorem,
math-type editarea.text-mode > line.text-mode.theorem,
math-type area-container > line.text-mode.theorem,
math-type .print-as-area-container > line.text-mode.theorem {
  padding-top: 0.3em;
  padding-bottom: 0.3em;
}
math-type editarea.no-area-container > line > prefix,
math-type editarea.text-mode > line > prefix,
math-type area-container > line > prefix,
math-type .print-as-area-container > line > prefix {
  text-align: right;
}
math-type editarea.no-area-container > line.has-indent,
math-type editarea.text-mode > line.has-indent,
math-type area-container > line.has-indent,
math-type .print-as-area-container > line.has-indent {
  display: flex;
  justify-content: flex-start;
}
math-type editarea.no-area-container > line.has-rtl.has-indent > prefix,
math-type editarea.text-mode > line.has-rtl.has-indent > prefix,
math-type area-container > line.has-rtl.has-indent > prefix,
math-type .print-as-area-container > line.has-rtl.has-indent > prefix {
  direction: rtl;
  order: 1;
}
math-type editarea.no-area-container > line.has-rtl.has-indent.indent-0,
math-type editarea.text-mode > line.has-rtl.has-indent.indent-0,
math-type area-container > line.has-rtl.has-indent.indent-0,
math-type .print-as-area-container > line.has-rtl.has-indent.indent-0 {
  padding-left: 0;
  padding-right: 30px;
}
math-type editarea.no-area-container > line.has-rtl.has-indent.indent-1,
math-type editarea.text-mode > line.has-rtl.has-indent.indent-1,
math-type area-container > line.has-rtl.has-indent.indent-1,
math-type .print-as-area-container > line.has-rtl.has-indent.indent-1 {
  padding-left: 0;
  padding-right: 65px;
}
math-type editarea.no-area-container > line.has-rtl.has-indent.indent-2,
math-type editarea.text-mode > line.has-rtl.has-indent.indent-2,
math-type area-container > line.has-rtl.has-indent.indent-2,
math-type .print-as-area-container > line.has-rtl.has-indent.indent-2 {
  padding-left: 0;
  padding-right: 105px;
}
math-type editarea.no-area-container > line.has-rtl.has-indent.indent-3,
math-type editarea.text-mode > line.has-rtl.has-indent.indent-3,
math-type area-container > line.has-rtl.has-indent.indent-3,
math-type .print-as-area-container > line.has-rtl.has-indent.indent-3 {
  padding-left: 0;
  padding-right: 145px;
}
math-type editarea.no-area-container > line.has-rtl.has-indent.indent-4,
math-type editarea.text-mode > line.has-rtl.has-indent.indent-4,
math-type area-container > line.has-rtl.has-indent.indent-4,
math-type .print-as-area-container > line.has-rtl.has-indent.indent-4 {
  padding-left: 0;
  padding-right: 185px;
}
math-type editarea.no-area-container > line.indent-0,
math-type editarea.text-mode > line.indent-0,
math-type area-container > line.indent-0,
math-type .print-as-area-container > line.indent-0 {
  padding-left: 30px;
}
math-type editarea.no-area-container > line.indent-1,
math-type editarea.text-mode > line.indent-1,
math-type area-container > line.indent-1,
math-type .print-as-area-container > line.indent-1 {
  padding-left: 65px;
}
math-type editarea.no-area-container > line.indent-2,
math-type editarea.text-mode > line.indent-2,
math-type area-container > line.indent-2,
math-type .print-as-area-container > line.indent-2 {
  padding-left: 105px;
}
math-type editarea.no-area-container > line.indent-3,
math-type editarea.text-mode > line.indent-3,
math-type area-container > line.indent-3,
math-type .print-as-area-container > line.indent-3 {
  padding-left: 145px;
}
math-type editarea.no-area-container > line.indent-4,
math-type editarea.text-mode > line.indent-4,
math-type area-container > line.indent-4,
math-type .print-as-area-container > line.indent-4 {
  padding-left: 185px;
}
math-type editarea.no-area-container > line.math-container-selected,
math-type editarea.text-mode > line.math-container-selected,
math-type area-container > line.math-container-selected,
math-type .print-as-area-container > line.math-container-selected {
  outline: 1px solid rgba(93, 92, 92, 0.3);
}
math-type editarea.no-area-container > line.math-container,
math-type editarea.text-mode > line.math-container,
math-type area-container > line.math-container,
math-type .print-as-area-container > line.math-container {
  font-family: 'Asana';
  justify-content: center;
  text-align: center;
  display: flex;
}
math-type editarea.no-area-container > line.math-container block,
math-type editarea.text-mode > line.math-container block,
math-type area-container > line.math-container block,
math-type .print-as-area-container > line.math-container block {
  white-space: pre;
}
math-type editarea.no-area-container > line.align-center,
math-type editarea.text-mode > line.align-center,
math-type area-container > line.align-center,
math-type .print-as-area-container > line.align-center {
  text-align: center;
}
math-type editarea.no-area-container > line.align-center.has-indent,
math-type editarea.text-mode > line.align-center.has-indent,
math-type area-container > line.align-center.has-indent,
math-type .print-as-area-container > line.align-center.has-indent {
  justify-content: center;
}
math-type editarea.no-area-container > line.align-center.section,
math-type editarea.text-mode > line.align-center.section,
math-type area-container > line.align-center.section,
math-type .print-as-area-container > line.align-center.section {
  text-align: center;
}
math-type editarea.no-area-container > line.align-center > blocks,
math-type editarea.text-mode > line.align-center > blocks,
math-type area-container > line.align-center > blocks,
math-type .print-as-area-container > line.align-center > blocks {
  text-align: center;
}
math-type editarea.no-area-container > line.align-justify,
math-type editarea.text-mode > line.align-justify,
math-type area-container > line.align-justify,
math-type .print-as-area-container > line.align-justify {
  text-align: justify;
}
math-type editarea.no-area-container > line.align-justify.section,
math-type editarea.text-mode > line.align-justify.section,
math-type area-container > line.align-justify.section,
math-type .print-as-area-container > line.align-justify.section {
  text-align: justify;
}
math-type editarea.no-area-container > line.align-justify > blocks,
math-type editarea.text-mode > line.align-justify > blocks,
math-type area-container > line.align-justify > blocks,
math-type .print-as-area-container > line.align-justify > blocks {
  text-align: justify;
}
math-type editarea.no-area-container > line.align-left,
math-type editarea.text-mode > line.align-left,
math-type area-container > line.align-left,
math-type .print-as-area-container > line.align-left {
  text-align: left;
}
math-type editarea.no-area-container > line.align-left > blocks,
math-type editarea.text-mode > line.align-left > blocks,
math-type area-container > line.align-left > blocks,
math-type .print-as-area-container > line.align-left > blocks {
  text-align: left;
}
math-type editarea.no-area-container > line.align-right,
math-type editarea.text-mode > line.align-right,
math-type area-container > line.align-right,
math-type .print-as-area-container > line.align-right {
  text-align: right;
}
math-type editarea.no-area-container > line.align-right.has-indent,
math-type editarea.text-mode > line.align-right.has-indent,
math-type area-container > line.align-right.has-indent,
math-type .print-as-area-container > line.align-right.has-indent {
  justify-content: flex-end;
}
math-type editarea.no-area-container > line.align-right.section,
math-type editarea.text-mode > line.align-right.section,
math-type area-container > line.align-right.section,
math-type .print-as-area-container > line.align-right.section {
  text-align: right;
}
math-type editarea.no-area-container > line.align-right > blocks,
math-type editarea.text-mode > line.align-right > blocks,
math-type area-container > line.align-right > blocks,
math-type .print-as-area-container > line.align-right > blocks {
  text-align: right;
}
math-type editarea.no-area-container > line > blocks > block,
math-type editarea.text-mode > line > blocks > block,
math-type area-container > line > blocks > block,
math-type .print-as-area-container > line > blocks > block {
  display: inline;
}
math-type editarea.no-area-container,
math-type area-container {
  align-items: initial;
}
math-type editarea.root-editor {
  align-items: initial;
  display: block;
  color: black;
  fill: black;
  stroke: black;
  border-color: black;
}
math-type editarea.root-editor.read-only {
  cursor: default;
}
math-type editarea.root-editor.read-only block {
  cursor: default;
}
math-type editarea.root-editor > area-container {
  display: block;
}
math-type area-container {
  width: 100%;
}
math-type block {
  cursor: text;
}
math-type editarea {
  box-sizing: border-box;
  display: flex;
  overflow-x: visible;
  align-items: center;
  justify-content: center;
  flex-direction: row;
  flex-wrap: nowrap;
}
math-type editarea block {
  cursor: text;
}
math-type editarea.high-order {
  position: relative;
  z-index: 10;
}
math-type editarea.selected {
  outline: 1px solid rgba(93, 92, 92, 0.3);
}
math-type editarea.bordered {
  outline: 1px solid rgba(93, 92, 92, 0.3);
}
math-type editarea.center > area-container > line,
math-type editarea.center > line {
  justify-content: center;
  text-align: center;
}
math-type editarea.left > area-container > line,
math-type editarea.left > line {
  justify-content: flex-start;
  text-align: left;
}
math-type editarea.right > area-container > line,
math-type editarea.right > line {
  justify-content: flex-end;
  text-align: right;
}
math-type editarea > area-baseline {
  width: 0;
  overflow: hidden;
  display: inline-block;
  float: left;
}
math-type setting.mt-common-dialog.line-tag-setting {
  transform: translate(0, -100%);
  position: absolute;
  font-family: serif;
  font-size: 11px;
  top: -4px;
  left: -10px;
  outline: none;
}
math-type setting.mt-common-dialog.line-tag-setting i {
  font-style: normal;
  padding: 1px 3px;
}
baselineblock {
  height: 0px;
  display: inline-block;
  width: 0;
  overflow: hidden;
}
baselineblock.inline {
  display: inline;
}
emptyblock {
  white-space: pre;
}
composite {
  display: inline-block;
}
block.Binary {
  padding: 0 0.2em;
}
block.Relation {
  padding: 0 0.3em;
}
block.Punctuation {
  padding-right: 0.2em;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
editor-container > math-type {
  background: white;
  outline: 1px solid lightgray;
}
math-type {
  display: block;
  position: relative;
  padding: 20px;
  color: black;
  padding-top: 15px;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  outline: none;
  cursor: text;
  text-align: initial;
}
math-type .rcnt {
  color: white;
  font-size: 12px;
  position: -webkit-sticky;
  position: sticky;
  top: 0;
  bottom: 0;
  display: flex;
  flex-direction: row;
}
math-type > .mt-sa {
  position: absolute;
  top: 0;
  left: -100px;
  right: -100px;
  bottom: -400px;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  pointer-events: none;
}
math-type.math-only compositeblock.math-container-symbol {
  width: 100%;
}
math-type.math-only compositeblock.math-container-symbol.selected {
  outline: none;
  background: none;
}
math-type.math-only compositeblock.math-container-symbol > editarea {
  width: 100%;
}
math-type.math-only compositeblock.math-container-symbol > editarea > line {
  justify-content: flex-start;
}
math-type > input:not([type]),
math-type input[type="text"] {
  width: 50px;
}
math-type composition-indicator {
  display: block;
  position: absolute;
  height: 2px;
  min-width: 2px;
  border-bottom: 2px solid gray;
  left: 0;
  top: 0;
}
math-type .focus-element {
  outline: none;
  overflow: hidden;
  width: 0px;
  height: 0px;
  top: 0px;
  left: 0px;
  display: block;
  position: absolute;
  font-size: 40px;
}
.scroll-without-scrollbar {
  scrollbar-width: none;
  /* Firefox */
  -ms-overflow-style: none;
  /* IE 10+ */
}
.scroll-without-scrollbar::-webkit-scrollbar {
  width: 0;
  height: 0;
  display: none;
}
#root,
.main-container {
  width: 100%;
  color: #212121;
}
.sub-text-cursor,
.text-cursor {
  position: absolute;
  color: green;
  /*font-size: 1.2em;*/
  pointer-events: none;
  border-left: 2px solid green;
  display: block;
  top: 0px;
  left: 0px;
  z-index: 10;
}
.sub-text-cursor {
  opacity: 0.4;
}
math-edit-container {
  display: block;
  outline: none;
  position: relative;
  font-family: 'Asana';
}
.root-editor {
  min-height: 500px;
  box-sizing: border-box;
}
.root-editor.restricted-view {
  min-height: unset;
}
.root-editor.test-view {
  min-height: 100px;
}
.menu {
  color: #ffffff;
  text-transform: uppercase;
  text-decoration: none;
  font-family: "HelveticaNeue-Medium", sans-serif;
  font-size: 14px;
  display: inline-block;
  transform: scale(1, 1.5);
  -webkit-transform: scale(1, 1.5);
  /* Safari and Chrome */
  -moz-transform: scale(1, 1.5);
  /* Firefox */
  -ms-transform: scale(1, 1.5);
  /* IE 9+ */
  -o-transform: scale(1, 1.5);
  /* Opera */
}
.setting-group-options {
  font-size: 13px;
  color: gray;
  fill: gray;
}
.setting-group-options > i,
.setting-group-options > svg.icon {
  padding: 3px;
  cursor: pointer;
  border: 1px solid transparent;
  /*box-sizing: border-box;*/
}
.setting-group-options > i.selected,
.setting-group-options > svg.icon.selected {
  background-color: white;
  border: 1px solid lightgray;
}
.setting-group-options > i:hover,
.setting-group-options > svg.icon:hover {
  border: 1px solid lightgray;
}
.setting-group-options > i.disabled,
.setting-group-options > svg.icon.disabled {
  opacity: 0.3;
}
.setting-group-options > i.disabled:hover,
.setting-group-options > svg.icon.disabled:hover {
  background-color: inherit;
  border: 1px solid transparent;
}
math-type .math-text,
math-type .normal-text,
math-type .raw-latex {
  font-family: arial, verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif;
}
math-type .math-text editarea.text-mode > line.text-mode > blocks > block,
math-type .normal-text editarea.text-mode > line.text-mode > blocks > block,
math-type .raw-latex editarea.text-mode > line.text-mode > blocks > block {
  white-space: nowrap;
}
.mt-common-dialog {
  box-shadow: 1px 1px 1px 0px #e0dddd;
  background-color: #f7f7f7;
  border: 1px lightgray solid;
  z-index: 14;
  padding: 6px;
  cursor: default;
  font-family: "Segoe UI", Arial, Verdana, sans-serif;
}
disabled-layer {
  display: block;
  position: absolute;
  left: 0;
  top: 1px;
  right: 0;
  bottom: 2px;
  background: rgba(247, 247, 247, 0.66);
  /** consider export button z-index when change this one*/
  z-index: 500;
}
math-type tag-container tag-select-wrapper {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}
math-type tag-container tag-box-select {
  position: absolute;
  display: block;
  background-color: green;
  opacity: 0;
  cursor: pointer;
  z-index: 15;
}
math-type tag-container tag-box-select:hover {
  opacity: 0.2;
}
math-type tag-container tag-box-gap {
  position: absolute;
  display: block;
  background-color: white;
  opacity: 0.9;
  z-index: 15;
}
.setting-popup-zindex {
  z-index: 11;
}
svg.selectable {
  cursor: pointer;
  border: 1px solid transparent;
}
svg.selectable.selected {
  background: white;
  border: solid 1px lightgray;
}
svg.selectable:hover {
  border: solid 1px lightgray;
}


@media print {
  @page {
    margin: 0;
  }
  /**
    Convert Preview into main print area
    */
  .math-type-doc,
  .docs-container,
  .modal-dialog-root-container,
  instructions-container {
    display: none !important;
  }
  .print-preview-container {
    position: static !important;
    display: block !important;
    visibility: visible !important;
    width: auto !important;
    height: auto !important;
    z-index: 99999 !important;
  }
  .print-container {
    position: static !important;
    overflow: hidden;
  }
  .print-preview-controls-container {
    display: none !important;
  }
  .math-type-no-print {
    display: none !important;
  }
  area-container.print-page-level {
    margin-left: 0 !important;
    margin-top: 0 !important;
    margin-right: 0 !important;
    margin-bottom: 0 !important;
    border: none !important;
    border-left: none !important;
    border-top: none !important;
    border-right: none !important;
    border-bottom: none !important;
    break-inside: avoid !important;
  }
  .area-container-border {
    border: none !important;
    border-left: none !important;
    border-top: none !important;
    border-right: none !important;
    border-bottom: none !important;
    display: none !important;
  }
  #print-container {
    background-color: transparent !important;
  }
  #print-container > math-type {
    background-color: transparent !important;
  }
  #print-container > math-type > math-edit-container > editarea {
    background-color: transparent !important;
  }
  /*-----------------------------*/
  header,
  .export-bar-container {
    display: none !important;
  }
  math-type {
    padding: 0 !important;
  }
  .print-remove-background {
    background-color: transparent !important;
  }
  document-info-bar {
    display: none !important;
  }
  document-sidebar-container {
    display: none !important;
  }
  body {
    position: relative !important;
  }
  page,
  #root,
  body,
  html {
    height: 100% !important;
    width: 100% !important;
    position: relative !important;
    background: white !important;
    overflow: visible !important;
  }
}
.print-background.math-type-for-print {
  -webkit-print-color-adjust: exact;
}
@media print {
  outline: none !important;
  .npm__react-simple-code-editor__textarea {
    display: none !important;
  }
  math-diagram {
    border: none !important;
  }
  .no-border-on-print {
    border: none !important;
  }
  .setting-select {
    display: none !important;
  }
  .no-print,
  ref-tag.empty-line-tag,
  .text-cursor,
  .sub-text-cursor,
  selection-wrapper,
  message-box-container,
  connection-controls,
  .control-point-guide,
  tool-bar,
  items-bar,
  document-sidebar,
  resize-bar,
  diagram-expander,
  warning-error-region,
  loading-layer,
  resizing-info,
  toc-refresh {
    display: none !important;
  }
  .no-print-outline {
    outline: none !important;
  }
  .selected {
    background: unset !important;
  }
  .math-container-symbol.selected {
    background: unset !important;
  }
  .matrix-symbol.align-symbol {
    background: unset !important;
  }
  .matrix-symbol.gather-symbol {
    background: unset !important;
  }
  tr.selected,
  td.selected {
    border: unset !important;
  }
  tr.selected.hline {
    border-top: 1px solid black !important;
  }
  tr.selected.last-hline {
    border-bottom: 1px solid black !important;
  }
  td.selected.vline {
    border-left: 1px solid black !important;
  }
  td.selected.last-vline {
    border-right: 1px solid black !important;
  }
  .selected {
    outline: unset !important;
  }
  container-layer {
    margin: 0 !important;
    padding: 0 !important;
    background: transparent !important;
    height: initial !important;
    overflow: visible !important;
  }
  editor-container {
    border: none !important;
    margin: 0 !important;
    padding: 0 !important;
    background: transparent !important;
    width: 100% !important;
  }
  content-area {
    padding: 0px !important;
    margin: 0;
    background: transparent !important;
  }
  vcomposed-symbol.non-safari > start {
    margin-bottom: -0.05em !important;
  }
  vcomposed-symbol.non-safari > middle-center {
    margin-top: -0.05em;
    margin-bottom: -0.05em !important;
  }
  vcomposed-symbol.non-safari > middle {
    margin-top: -0.05em;
    margin-bottom: -0.05em !important;
  }
  vcomposed-symbol.non-safari > end {
    margin-top: -0.05em !important;
  }
}
.math-type-for-print {
  outline: none !important;
}
.math-type-for-print .npm__react-simple-code-editor__textarea {
  display: none !important;
}
.math-type-for-print math-diagram {
  border: none !important;
}
.math-type-for-print .no-border-on-print {
  border: none !important;
}
.math-type-for-print .setting-select {
  display: none !important;
}
.math-type-for-print .no-print,
.math-type-for-print ref-tag.empty-line-tag,
.math-type-for-print .text-cursor,
.math-type-for-print .sub-text-cursor,
.math-type-for-print selection-wrapper,
.math-type-for-print message-box-container,
.math-type-for-print connection-controls,
.math-type-for-print .control-point-guide,
.math-type-for-print tool-bar,
.math-type-for-print items-bar,
.math-type-for-print document-sidebar,
.math-type-for-print resize-bar,
.math-type-for-print diagram-expander,
.math-type-for-print warning-error-region,
.math-type-for-print loading-layer,
.math-type-for-print resizing-info,
.math-type-for-print toc-refresh {
  display: none !important;
}
.math-type-for-print .no-print-outline {
  outline: none !important;
}
.math-type-for-print .selected {
  background: unset !important;
}
.math-type-for-print .math-container-symbol.selected {
  background: unset !important;
}
.math-type-for-print .matrix-symbol.align-symbol {
  background: unset !important;
}
.math-type-for-print .matrix-symbol.gather-symbol {
  background: unset !important;
}
.math-type-for-print tr.selected,
.math-type-for-print td.selected {
  border: unset !important;
}
.math-type-for-print tr.selected.hline {
  border-top: 1px solid black !important;
}
.math-type-for-print tr.selected.last-hline {
  border-bottom: 1px solid black !important;
}
.math-type-for-print td.selected.vline {
  border-left: 1px solid black !important;
}
.math-type-for-print td.selected.last-vline {
  border-right: 1px solid black !important;
}
.math-type-for-print .selected {
  outline: unset !important;
}
.math-type-for-print container-layer {
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  height: initial !important;
  overflow: visible !important;
}
.math-type-for-print editor-container {
  border: none !important;
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  width: 100% !important;
}
.math-type-for-print content-area {
  padding: 0px !important;
  margin: 0;
  background: transparent !important;
}
.math-type-for-print vcomposed-symbol.non-safari > start {
  margin-bottom: -0.05em !important;
}
.math-type-for-print vcomposed-symbol.non-safari > middle-center {
  margin-top: -0.05em;
  margin-bottom: -0.05em !important;
}
.math-type-for-print vcomposed-symbol.non-safari > middle {
  margin-top: -0.05em;
  margin-bottom: -0.05em !important;
}
.math-type-for-print vcomposed-symbol.non-safari > end {
  margin-top: -0.05em !important;
}
.justify-single-line {
  display: inline-block;
  text-align-last: justify;
  width: 100%;
}
.rtl-on-line-level {
  direction: rtl;
}

math-type modal-dialog.import-latex math-type editarea.root-editor {
  min-height: 100px;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
math-type .mobile-keys-support-region {
  position: fixed;
  top: 84px;
  left: 45px;
  color: gray;
  z-index: 11609;
  opacity: 0.9;
  display: flex;
  width: auto;
  z-index: 600;
  cursor: pointer;
}
math-type .mobile-keys-support-region.is-android {
  top: unset;
  bottom: 4px;
  left: 17px;
}
math-type .mobile-keys-support-region.select-only {
  top: 40px;
  left: 25px;
}
math-type .mobile-keys-support-region.select-only .btn-suggestion-box-mobile {
  display: none;
}



.special-symbol-dialog__special-char {
  display: inline-block;
  width: 24px;
  height: 24px;
  line-height: 24px;
  border-bottom: 1px solid #ddd;
  border-right: 1px solid #ddd;
  text-align: center;
  cursor: pointer;
  outline: none;
}
.special-symbol-dialog__special-char:hover {
  background: #bfe4bd;
}

/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**different context*/
/**different context*/
context-menu-container {
  position: fixed;
  left: 100px;
  top: 300px;
  z-index: 13;
  box-shadow: 2px 2px 3px 0px #c3c3c3;
  border: 1px solid lightgray;
  width: 200px;
  background: white;
  cursor: default;
  outline: none;
  font-family: "Segoe UI", Arial, Verdana, sans-serif;
}
context-menu-container ct-item {
  display: block;
  padding: 6px 9px;
  font-size: 13px;
  color: gray;
}
context-menu-container ct-item.disabled {
  color: lightgray;
}
context-menu-container ct-item:hover {
  background: #eae9e9;
}
context-menu-container ct-item.hidden {
  display: none;
}
context-menu-container ct-icon {
  width: 20px;
  display: inline-block;
}
context-menu-container ct-separator {
  width: 100%;
  display: block;
  height: 1px;
  margin-top: 2px;
  margin-bottom: 2px;
  border-top: 1px solid lightgray;
}

/* Collection default theme */
/* Grid default theme */
/* Table default theme */









/* List default theme */









/**different context*/
/**different context*/
selection-wrapper {
  display: block;
  position: absolute;
  left: 0;
  top: 0;
  user-select: none;
  pointer-events: none;
  z-index: 9;
}
selection-wrapper > selection {
  display: block;
  position: absolute;
  background-color: rgba(0, 126, 255, 0.15);
  user-select: none;
  width: 100px;
  height: 100px;
  transform-origin: 0 0;
}
selection-wrapper.inactive > selection {
  background-color: rgba(58, 57, 57, 0.13);
}

region-highlight-container {
  user-select: none;
  pointer-events: none;
  display: block;
  position: absolute;
  width: 0px;
  height: 0px;
  top: 0;
  left: 0;
  border: 1px solid lightgoldenrodyellow;
  opacity: 0.2;
}
region-highlight-container > rhc-all > rh-rect {
  display: block;
  position: absolute;
  background: orange;
}
region-highlight-container > rh-selected-rect {
  display: block;
  position: absolute;
  background: red;
}

.math-template-btb.btn-normal {
  background: transparent;
  margin-left: 0;
  font-size: 12px;
  border: none;
}
.math-template-btb.btn-normal:hover {
  background: white;
}
.math-template-name-item:hover {
  background: #f7f7f7;
}

.math-template-tree .tree-node-name {
  white-space: nowrap;
}
.math-template-tree .tree-node-name:hover {
  background: #f7f7f7;
}

.caption-ref-select .role-item:hover {
  background: #edf9ec;
}

.footnote-mt-container {
  position: relative;
}
.footnote-mt-container .more-option-box {
  position: absolute;
  left: -25px;
  top: 0;
  width: 30px;
  bottom: 0;
  display: none;
}
.footnote-mt-container .more-option-box > div {
  background: #f7f7f7;
  border: 1px solid #d6d3d3;
  padding: 0 0.2em;
  cursor: pointer;
  color: gray;
  display: inline-block;
}
.footnote-mt-container.hover-select:hover .more-option-box {
  display: block;
}
.mt-doc-fn > math-edit-container > editarea > area-container > line > first-line-prefix {
  padding-right: 0.3em;
}
.mt-doc-fn > math-edit-container > editarea > area-container > line.has-rtl {
  direction: rtl;
}
.mt-doc-fn > math-edit-container > editarea > area-container > line.has-rtl > first-line-prefix {
  padding-left: 0.3em;
}
.blocks-inline > math-edit-container > editarea > area-container > line > blocks {
  display: inline;
}



icon-dropdown-items icon-dropdown-item:hover {
  background: #eae9e9;
}
icon-dropdown ii-icon {
  fill: gray;
}
icon-dropdown:hover {
  color: #4e4d4d;
}
icon-dropdown:hover ii-icon {
  fill: #4e4d4d;
}

resizable-container {
  display: block;
  position: relative;
  min-height: 0;
  flex-shrink: 0;
}





a.fce {
  cursor: pointer;
}
a.fce:hover svg {
  fill: #2d4373;
}
a.fce svg {
  fill: #3b5998;
}
a.fce i {
  text-align: center;
  color: white;
}
a.gg {
  cursor: pointer;
}
a.gg:hover svg {
  fill: #c23321;
}
a.gg svg {
  fill: #dd4b39;
}
a.gg i {
  text-align: center;
  color: white;
}
a.twr {
  cursor: pointer;
}
a.twr:hover svg {
  fill: #2795e9;
}
a.twr svg {
  fill: #55acee;
}
a.twr i {
  text-align: center;
  color: white;
}
a.gh {
  cursor: pointer;
}
a.gh:hover svg {
  fill: #2b2b2b;
}
a.gh svg {
  fill: #444;
}
a.gh i {
  text-align: center;
  color: white;
}



modal-dialog.swift.document-name modal-container.mt-common-dialog {
  width: 500px;
  max-width: 95vw;
}
modal-dialog.swift.document-name document-name {
  width: 100%;
  display: flex;
  flex-direction: column;
}
modal-dialog.swift.document-name document-name label {
  display: block;
  font-size: 13px;
}
modal-dialog.swift.document-name document-name textarea {
  width: auto;
  display: block;
  margin: 5px 0px;
  height: 39px;
  outline: none;
  border: 1px solid lightgray;
  resize: vertical;
}

.dock-tab-content {
  flex: 1;
  min-height: 0;
  min-width: 0;
  display: none;
}
.dock-tab-content.active {
  display: flex;
}

quick-start editarea.root-editor {
  min-height: 100px;
}
quick-start > qs-math-type-container > math-type:hover {
  border: 1px solid gray;
}
quick-start > qs-math-type-container > math-type tool-bar {
  display: none;
}
quick-start > qs-math-type-container > math-type items-bar {
  display: none;
  left: -60px;
  top: 0px;
  box-shadow: 0px 1px 2px 0px #4c4949;
}





/**we use alpha as we have problem with background (without alpha) in Electron version (older Chrome) **/
/* z-index region*/
/**Context Level 1*/
/**both Level 1 and 2 Context */
/**Context Level 2 inside docsContainerZIndex*/
document-info-container document-info-bar {
  display: block;
  position: absolute;
  right: 15px;
  bottom: 5px;
  background: #f7f7f7;
  box-shadow: 1px 1px 1px 0px #e0dddd;
  border: 1px lightgray solid;
  font-size: 12px;
  padding: 0px;
  color: gray;
  opacity: 0.8;
  z-index: 4;
}
document-info-container document-info-bar:hover {
  opacity: 1;
}
document-info-container modal-container button.ok.btn-primary {
  display: none;
}
.Popover-body {
  font-size: 12px;
  padding: 10px;
  background: #4CAF50;
  box-shadow: #888686 1px 1px 1px 1px;
  color: white;
  max-width: 250px;
}
.Popover-tip {
  fill: #4CAF50;
}

/**Context Level 1*/
/**both Level 1 and 2 Context */
/**Context Level 2 inside docsContainerZIndex*/
.doc-toolbar-container {
  position: relative;
  background: #f7f7f7;
  top: 0;
  left: 0;
  width: 100%;
  border: 1px lightgray solid;
  margin-left: -2px;
  z-index: 6;
}
.doc-toolbar-container > tool-bar {
  position: relative;
  top: 0;
  left: 0;
  display: block;
  padding-left: 0px;
  min-width: 770px;
  width: 770px;
  margin: auto;
  background: transparent;
  box-shadow: none;
  border: none;
  height: 35px;
}













/**Context Level 1*/
/**both Level 1 and 2 Context */
/**Context Level 2 inside docsContainerZIndex*/


</style><style>.plotly-notifier .notifier-close:hover { color: rgb(68, 68, 68); text-decoration: none; cursor: pointer; }
.plotly-notifier .notifier-close { color: rgb(255, 255, 255); opacity: 0.8; float: right; padding: 0px 5px; background: none; border: none; font-size: 20px; font-weight: bold; line-height: 20px; }
.plotly-notifier .notifier-note { min-width: 180px; max-width: 250px; border: 1px solid rgb(255, 255, 255); z-index: 3000; margin: 0px; background-color: rgba(140, 151, 175, 0.9); color: rgb(255, 255, 255); padding: 10px; overflow-wrap: break-word; hyphens: auto; }
.plotly-notifier p { margin: 0px; }
.plotly-notifier { font-family: "Open Sans", verdana, arial, sans-serif; position: fixed; top: 50px; right: 20px; z-index: 10000; font-size: 10pt; max-width: 180px; }
.js-plotly-plot .plotly .select-outline-2 { stroke: black; stroke-dasharray: 2px, 2px; }
.js-plotly-plot .plotly .select-outline-1 { stroke: white; }
.js-plotly-plot .plotly .select-outline { fill: none; stroke-width: 1; shape-rendering: crispedges; }
.js-plotly-plot .plotly .vertical [data-title]::before { border-width: 6px; border-style: solid; border-color: transparent transparent transparent rgb(105, 115, 138); border-image: initial; margin-top: 8px; margin-right: -30px; }
.js-plotly-plot .plotly .vertical [data-title]::before, .js-plotly-plot .plotly .vertical [data-title]::after { top: 0%; right: 200%; }
.js-plotly-plot .plotly [data-title]::after { content: attr(data-title); background: rgb(105, 115, 138); color: white; padding: 8px 10px; font-size: 12px; line-height: 12px; white-space: nowrap; margin-right: -18px; border-radius: 2px; }
.js-plotly-plot .plotly [data-title]::before { content: ""; position: absolute; background: transparent; border-width: 6px; border-style: solid; border-color: transparent transparent rgb(105, 115, 138); border-image: initial; z-index: 1002; margin-top: -12px; margin-right: -6px; }
.js-plotly-plot .plotly [data-title]:hover::before, .js-plotly-plot .plotly [data-title]:hover::after { display: block; opacity: 1; }
.js-plotly-plot .plotly [data-title]::before, .js-plotly-plot .plotly [data-title]::after { position: absolute; transform: translate3d(0px, 0px, 0px); display: none; opacity: 0; z-index: 1001; pointer-events: none; top: 110%; right: 50%; }
.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn { display: block; text-align: center; }
.js-plotly-plot .plotly .modebar.vertical .modebar-group { display: block; float: none; padding-left: 0px; padding-bottom: 8px; }
.js-plotly-plot .plotly .modebar.vertical svg { top: -1px; }
.js-plotly-plot .plotly .modebar.vertical { display: flex; flex-flow: column wrap; align-content: flex-end; max-height: 100%; }
.js-plotly-plot .plotly .modebar-btn svg { position: relative; top: 2px; }
.js-plotly-plot .plotly .modebar-btn { position: relative; font-size: 16px; padding: 3px 4px; height: 22px; cursor: pointer; line-height: normal; box-sizing: border-box; }
.js-plotly-plot .plotly .modebar-group { float: left; display: inline-block; box-sizing: border-box; padding-left: 8px; position: relative; vertical-align: middle; white-space: nowrap; }
.js-plotly-plot .plotly:hover .modebar--hover .modebar-group { opacity: 1; }
.js-plotly-plot .plotly .modebar--hover > :not(.watermark) { opacity: 0; transition: opacity 0.3s ease 0s; }
.js-plotly-plot .plotly .ease-bg { transition: background-color 0.3s ease 0s; }
.js-plotly-plot .plotly .modebar { position: absolute; top: 2px; right: 2px; }
.js-plotly-plot .plotly .cursor-grab { cursor: grab; }
.js-plotly-plot .plotly .cursor-ne-resize { cursor: ne-resize; }
.js-plotly-plot .plotly .cursor-n-resize { cursor: n-resize; }
.js-plotly-plot .plotly .cursor-nw-resize { cursor: nw-resize; }
.js-plotly-plot .plotly .cursor-e-resize { cursor: e-resize; }
.js-plotly-plot .plotly .cursor-w-resize { cursor: w-resize; }
.js-plotly-plot .plotly .cursor-se-resize { cursor: se-resize; }
.js-plotly-plot .plotly .cursor-s-resize { cursor: s-resize; }
.js-plotly-plot .plotly .cursor-sw-resize { cursor: sw-resize; }
.js-plotly-plot .plotly .cursor-ew-resize { cursor: ew-resize; }
.js-plotly-plot .plotly .cursor-ns-resize { cursor: ns-resize; }
.js-plotly-plot .plotly .cursor-row-resize { cursor: row-resize; }
.js-plotly-plot .plotly .cursor-col-resize { cursor: col-resize; }
.js-plotly-plot .plotly .cursor-move { cursor: move; }
.js-plotly-plot .plotly .cursor-crosshair { cursor: crosshair; }
.js-plotly-plot .plotly .cursor-pointer { cursor: pointer; }
.js-plotly-plot .plotly .cursor-default { cursor: default; }
.js-plotly-plot .plotly .main-svg .draglayer { pointer-events: all; }
.js-plotly-plot .plotly .main-svg { position: absolute; top: 0px; left: 0px; pointer-events: none; }
.js-plotly-plot .plotly svg a:hover { fill: rgb(60, 109, 197); }
.js-plotly-plot .plotly svg a { fill: rgb(68, 122, 219); }
.js-plotly-plot .plotly svg { overflow: hidden; }
.js-plotly-plot .plotly .user-select-none { user-select: none; }
.js-plotly-plot .plotly .crisp { shape-rendering: crispedges; }
.js-plotly-plot .plotly a:hover { text-decoration: none; }
.js-plotly-plot .plotly a { text-decoration: none; }
.js-plotly-plot .plotly input:focus, .js-plotly-plot .plotly button:focus { outline: none; }
.js-plotly-plot .plotly input, .js-plotly-plot .plotly button { font-family: "Open Sans", verdana, arial, sans-serif; }
.js-plotly-plot .plotly, .js-plotly-plot .plotly div { direction: ltr; font-family: "Open Sans", verdana, arial, sans-serif; margin: 0px; padding: 0px; }</style><style>@keyframes resizeanim { from { opacity: 0; } to { opacity: 0; } } .resize-triggers { animation: 1ms resizeanim; visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }</style></head><body style="overflow:auto;background:rgb(255, 255, 255);width:auto;height:auto;"><editor-container style="display:block;margin:auto;width:907px;"><math-type style="user-select:text;" class=" math-type-for-print "><math-edit-container><editarea class="root-editor" style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;"><area-baseline aria-hidden="true">a</area-baseline><area-container><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em;">関数型プログラミングが『銀の弾丸』であるという非常識な常識 2022</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 0.8em;">(beta release)</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em;">Functional Programming as the Silver bullet, that is the Insane common sense 2022</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode selected align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>岡部　健</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Ken Okabe</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>kentutorialbook@gmail.com</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="table-of-content inline"><toc-wrapper style="opacity: 1;"><editarea class="edit-area toc-ea no-area-container text-mode"><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.010730048775923762" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.010730048775923762" style="display: inline-block; white-space: pre;">1. </span></compositeblock><block>何が問題なのだろう？</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 619.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L619.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.052867256918040506" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.052867256918040506" style="display: inline-block; white-space: pre;">2. </span></compositeblock><block>命令型プログラミング＝ほぼすべてのプログラミング入門者が半ば強制的に辿る道</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 133.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L133.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.17294274866861004" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.17294274866861004" style="display: inline-block; white-space: pre;">2.1. </span></compositeblock><block>Start from Scratch（ゼロからのスタート）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 510.266px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L510.265625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.278609541060459" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.278609541060459" style="display: inline-block; white-space: pre;">2.2. </span></compositeblock><block>命令型コード(JavaScript)</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 626.109px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L626.109375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7584803147057353" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7584803147057353" style="display: inline-block; white-space: pre;">2.3. </span></compositeblock><block>命令型プログラミングに傾倒している「歪な状況」を根本的に解決する必要がある</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 241.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L241.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.5651940929504885" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5651940929504885" style="display: inline-block; white-space: pre;">3. </span></compositeblock><block>関数型プログラミング（Functional Programming）は</block><block>式（Expression）の組み立て</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 111.906px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L111.90625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7329329350780311" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7329329350780311" style="display: inline-block; white-space: pre;">3.1. </span></compositeblock><block>関数型コード(JavaScript)</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 626.109px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L626.109375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9042697291444313" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9042697291444313" style="display: inline-block; white-space: pre;">3.2. </span></compositeblock><block>関数型コードは</block><block>式（Expression）</block><block>である</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 526.906px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L526.90625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8539829990125329" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8539829990125329" style="display: inline-block; white-space: pre;">3.3. </span></compositeblock><block>関数型プログラミングは</block><block>式（Expression）を組み立てていく作業</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 361.922px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L361.921875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5999037588670433" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5999037588670433" style="display: inline-block; white-space: pre;">3.4. </span></compositeblock><block>関数型コードは値が変化するようなことはない</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 481.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L481.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.2577127418745828" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.2577127418745828" style="display: inline-block; white-space: pre;">4. </span></compositeblock><block>関数</block><block>と</block><block>二項演算子　</block><block>関数型コードの式を構成する主要部品</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 331.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L331.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.10391822852845567" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.10391822852845567" style="display: inline-block; white-space: pre;">4.1. </span></compositeblock><block>関数</block><block>（Function）と二項演算子（Binary operator）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 456.031px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L456.03125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3429720997999275" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3429720997999275" style="display: inline-block; white-space: pre;">4.2. </span></compositeblock><block>関数</block><block>（Function）と演算子（Operator）は本当は同じものである</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 364.391px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L364.390625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8462719123823341" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8462719123823341" style="display: inline-block; white-space: pre;">4.3. </span></compositeblock><block>二項演算子（Binary operator）はとてつもなく強力な記法である</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 363.578px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L363.578125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.7796882750291525" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7796882750291525" style="display: inline-block; white-space: pre;">5. </span></compositeblock><block>オブジェクト指向のメソッドを関数型の二項演算子として置き換える</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 241.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L241.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.12738958296209324" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.12738958296209324" style="display: inline-block; white-space: pre;">5.1. </span></compositeblock><block>関数型＆オブジェクト指向のハイブリッド言語としてのJavaScript</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 351.109px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L351.109375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.022431030909590755" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.022431030909590755" style="display: inline-block; white-space: pre;">5.2. </span></compositeblock><block>オブジェクト指向時代の終焉</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 601.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L601.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9418237096136259" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9418237096136259" style="display: inline-block; white-space: pre;">5.3. </span></compositeblock><block>オブジェクト指向のメソッドと二項演算の関係</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 481.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L481.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5248464187771116" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5248464187771116" style="display: inline-block; white-space: pre;">5.4. </span></compositeblock><block>Ja</block><block>vaScriptで独自の二項演算子（Custom operator）を定義する</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 374.391px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L374.390625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8827090314747903" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8827090314747903" style="display: inline-block; white-space: pre;">5.5. </span></compositeblock><block>既存のオブジェクトメソッドを二項演算子として捉え直す</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 406.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L406.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.3344446761981805" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3344446761981805" style="display: inline-block; white-space: pre;">6. </span></compositeblock><block>式の組み立ては依存グラフの構成</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 529.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L529.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6961942381562762" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6961942381562762" style="display: inline-block; white-space: pre;">6.1. </span></compositeblock><block>もっとも単純な関数型コード</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 601.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L601.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.29510912267555045" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.29510912267555045" style="display: inline-block; white-space: pre;">6.2. </span></compositeblock><block>少し複雑な関数型コード</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 631.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L631.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8695947426292396" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8695947426292396" style="display: inline-block; white-space: pre;">6.3. </span></compositeblock><block>依存グラフ（</block><block>Dependency graph</block><block>）を構成する式（関数型コード）を書いてコンピュータに解決してもらう</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 84.3438px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L84.34375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3626992063911616" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3626992063911616" style="display: inline-block; white-space: pre;">6.4. </span></compositeblock><block>計算不可能な巡回グラフ </block><block>有向閉路グラフ</block><block> (</block><block>directed cycle graph</block><block>)</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 373.531px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L373.53125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.48328848254687573" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.48328848254687573" style="display: inline-block; white-space: pre;">6.5. </span></compositeblock><block>計算可能な有向非巡回グラフ（DAG）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 538.625px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L538.625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7483786983161338" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7483786983161338" style="display: inline-block; white-space: pre;">6.6. </span></compositeblock><block>命令型プログラミングのフローをコントロールする文（Statement）は完全に不要だった　数式でやれば良い</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 67.75px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L67.75,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3073128092574626" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3073128092574626" style="display: inline-block; white-space: pre;">6.7. </span></compositeblock><block>二項演算</block><block>'reduce'</block><block>の振る舞いの謎</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 579.516px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L579.515625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8450584795770222" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8450584795770222" style="display: inline-block; white-space: pre;">6.8. </span></compositeblock><block>依存グラフを構成する二項演算を最大限に活用した式の組み立て</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 361.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L361.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.8875809361655769" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8875809361655769" style="display: inline-block; white-space: pre;">7. </span></compositeblock><block>命令型コードのif文switch文は場合分けの演算式にする</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 354.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L354.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.27454152909714313" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.27454152909714313" style="display: inline-block; white-space: pre;">7.1. </span></compositeblock><block>命令型コードのif文</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 668.625px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L668.625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.03365739932928613" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.03365739932928613" style="display: inline-block; white-space: pre;">7.2. </span></compositeblock><block>関数型コードのif式</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 668.625px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L668.625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5297156106950474" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5297156106950474" style="display: inline-block; white-space: pre;">7.3. </span></compositeblock><block>条件 (三項) 演算子をつかう</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 612.812px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L612.8125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7880435630661138" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7880435630661138" style="display: inline-block; white-space: pre;">7.4. </span></compositeblock><block>より洗練され強力なパターンマッチングをつかう</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 466.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L466.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.45963379014390293" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.45963379014390293" style="display: inline-block; white-space: pre;">7.5. </span></compositeblock><block>【余談】TC39の没落</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 654.453px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L654.453125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.8675819653045533" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8675819653045533" style="display: inline-block; white-space: pre;">8. </span></compositeblock><block>関数型プログラミングで複雑性との闘いに勝利するためのたったひとつの方法</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 169.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L169.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9824215454144327" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9824215454144327" style="display: inline-block; white-space: pre;">8.1. </span></compositeblock><block>ある式を別の式に交換する</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 616.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L616.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7517544995571566" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7517544995571566" style="display: inline-block; white-space: pre;">8.2. </span></compositeblock><block>「等しい（Equality）」という超強力な概念</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 502.766px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L502.765625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7238137646417211" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7238137646417211" style="display: inline-block; white-space: pre;">8.3. </span></compositeblock><block>ソフトウェア危機に対する工学的アプローチの根本的な問題</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 391.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L391.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.4871513534882719" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.4871513534882719" style="display: inline-block; white-space: pre;">8.4. </span></compositeblock><block>『銀の弾丸』等しくすれば組合せ爆発（Combinatorial explosion）を回避可能</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 276.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L276.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.3669104561524148" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3669104561524148" style="display: inline-block; white-space: pre;">9. </span></compositeblock><block>型（Type）は何故そんなに役に立つのか？そもそも型（Type）とは何か？</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 196.609px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L196.609375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6764697962214139" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6764697962214139" style="display: inline-block; white-space: pre;">9.1. </span></compositeblock><block>JavaScriptコミュニティでは型（Type）が圧倒的に重要視されている</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 333.578px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L333.578125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9826899580192503" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9826899580192503" style="display: inline-block; white-space: pre;">9.2. </span></compositeblock><block>巷によくある、よくわからない、型（Type）の説明</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 448.609px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L448.609375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6835114233315049" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6835114233315049" style="display: inline-block; white-space: pre;">9.3. </span></compositeblock><block>わかりやすい、型（Type）の説明</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 568.609px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L568.609375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8174467166132451" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8174467166132451" style="display: inline-block; white-space: pre;">9.4. </span></compositeblock><block>スーパーイディオム</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 661.125px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L661.125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.5608015542739713" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5608015542739713" style="display: inline-block; white-space: pre;">10. </span></compositeblock><block>関数（Function）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 641.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L641.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7118596376514843" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7118596376514843" style="display: inline-block; white-space: pre;">10.1. </span></compositeblock><block>関数の具体例</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 697.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L697.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7531312371758475" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7531312371758475" style="display: inline-block; white-space: pre;">10.2. </span></compositeblock><block>かんたんにテーブルで表される関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 547.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L547.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.567930290499625" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.567930290499625" style="display: inline-block; white-space: pre;">10.3. </span></compositeblock><block>テーブルからかんたんにグラフにできる関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 487.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L487.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5804725291846669" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5804725291846669" style="display: inline-block; white-space: pre;">10.4. </span></compositeblock><block>数学法則を使う関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 652.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L652.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7088424194893628" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7088424194893628" style="display: inline-block; white-space: pre;">10.5. </span></compositeblock><block>数式だけが関数なのではない</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 592.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L592.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.3836461398847524" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3836461398847524" style="display: inline-block; white-space: pre;">11. </span></compositeblock><block>写像（Map）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 682.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L682.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.4335511845157264" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.4335511845157264" style="display: inline-block; white-space: pre;">11.1. </span></compositeblock><block>写像（Map）という概念の定義</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 579.719px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L579.71875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3890231060400593" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3890231060400593" style="display: inline-block; white-space: pre;">11.2. </span></compositeblock><block>写像（Map）と集合（Set）と型（Type）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 509.688px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L509.6875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5459369221427866" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5459369221427866" style="display: inline-block; white-space: pre;">11.3. </span></compositeblock><block>型（type）集合（set）写像（map）関数（function）定義域（domain）値域（range）終域（codomain）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 86.2188px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L86.21875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.4251677074497646" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.4251677074497646" style="display: inline-block; white-space: pre;">12. </span></compositeblock><block>関数の表記法</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 681.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L681.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.02405794841881237" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.02405794841881237" style="display: inline-block; white-space: pre;">12.1. </span></compositeblock><block>f(x) 記法とアロー記法</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 641.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L641.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.15747764916574414" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.15747764916574414" style="display: inline-block; white-space: pre;">12.2. </span></compositeblock><block>プレースホルダ（placeholder）という概念</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 500.234px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L500.234375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.034047292125263695" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.034047292125263695" style="display: inline-block; white-space: pre;">12.3. </span></compositeblock><block>f(x) </block><block>記法の関数の定義</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 641.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L641.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.11441227385363595" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.11441227385363595" style="display: inline-block; white-space: pre;">12.4. </span></compositeblock><block>f(x) 記法の</block><block>関数の適用</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 641.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L641.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.09850860315124654" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.09850860315124654" style="display: inline-block; white-space: pre;">12.5. </span></compositeblock><block>f(x) 記法でも</block><block>アロー記法でも</block><block>ない</block><block>関数の定義</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 491.922px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L491.921875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9410380565810172" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9410380565810172" style="display: inline-block; white-space: pre;">12.6. </span></compositeblock><block>アロー記法の関数の定義</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 622.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L622.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.12922445142277939" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.12922445142277939" style="display: inline-block; white-space: pre;">12.7. </span></compositeblock><block>アロー記法の関数の適用</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 622.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L622.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.6490064739754935" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6490064739754935" style="display: inline-block; white-space: pre;">13. </span></compositeblock><block>f(x) 記法からの脱却　パイプライン演算子（Pipeline Operator） </block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 259.922px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L259.921875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9254469612485201" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9254469612485201" style="display: inline-block; white-space: pre;">13.1. </span></compositeblock><block>f(x) 記法の</block><block>問題点</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 671.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L671.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.827490587583035" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.827490587583035" style="display: inline-block; white-space: pre;">13.2. </span></compositeblock><block>データファーストになるパイプ構造</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 547.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L547.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.41304429186822245" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.41304429186822245" style="display: inline-block; white-space: pre;">13.3. </span></compositeblock><block>独自のパイプライン演算子をJavaScriptで実装する試み</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 417.766px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L417.765625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6562500608770725" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6562500608770725" style="display: inline-block; white-space: pre;">13.4. </span></compositeblock><block>関数（写像）の連鎖をイメージ通りに表現できるパイプライン演算子</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 322.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L322.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8483446151041676" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8483446151041676" style="display: inline-block; white-space: pre;">13.5. </span></compositeblock><block>二項演算子で式を書けばコードはシンプルになりType定義の構造と一致しやすい</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 245.266px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L245.265625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.05538134665775063" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.05538134665775063" style="display: inline-block; white-space: pre;">13.6. </span></compositeblock><block>二項演算子（Custom operator）は見やすくて書きやすい</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 406.078px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L406.078125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.07833473411391578" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.07833473411391578" style="display: inline-block; white-space: pre;">14. </span></compositeblock><block>代数構造（代数的構造）（Algebraic structure）</block><block>と有向非巡回グラフ（DAG）＝依存グラフ</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 44.8906px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L44.890625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.21036825326460984" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.21036825326460984" style="display: inline-block; white-space: pre;">14.1. </span></compositeblock><block>これまでのまとめ</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 667.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L667.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.431021277434108" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.431021277434108" style="display: inline-block; white-space: pre;">14.2. </span></compositeblock><block>Twitterは代数構造と有向非巡回グラフ（DAG）＝依存グラフを活用して自社システムを組んでいる</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 126.109px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L126.109375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5696827124692767" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5696827124692767" style="display: inline-block; white-space: pre;">14.3. </span></compositeblock><block>代数構造（代数的構造）（Algebraic structure）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 467.734px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L467.734375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7807046928215546" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7807046928215546" style="display: inline-block; white-space: pre;">14.4. </span></compositeblock><block>３つの代数構造と「等しい（Equality）」</block><block>という概念</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 434.406px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L434.40625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.2917413197109895" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.2917413197109895" style="display: inline-block; white-space: pre;">15. </span></compositeblock><block>モノイド（Monoid）複雑性を排除してくれるシンプルな二項演算</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 257.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L257.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7850549632026209" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7850549632026209" style="display: inline-block; white-space: pre;">15.1. </span></compositeblock><block>モノイド（Monoid）の具体例</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 588.594px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L588.59375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5961780533682861" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5961780533682861" style="display: inline-block; white-space: pre;">15.2. </span></compositeblock><block>モノイド（Monoid）の定義</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 603.594px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L603.59375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9880247229742132" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9880247229742132" style="display: inline-block; white-space: pre;">15.3. </span></compositeblock><block>モノイドの素晴らしさ①　型（Type）が単一の閉じた二項演算</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 365.266px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L365.265625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8610932187740379" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8610932187740379" style="display: inline-block; white-space: pre;">15.4. </span></compositeblock><block>モノイドの素晴らしさ②　組み合わせ方に依存しない、結合法則（Associativity）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 240.266px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L240.265625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.18164694844794105" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.18164694844794105" style="display: inline-block; white-space: pre;">15.5. </span></compositeblock><block>モノイドの素晴らしさ③　単位元（Identity element）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 426.891px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L426.890625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9264889239087997" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9264889239087997" style="display: inline-block; white-space: pre;">15.6. </span></compositeblock><block>半群（Semigroup）にはいつでも単位元を追加してモノイドにできる</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 325.25px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L325.25,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.10357819722013506" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.10357819722013506" style="display: inline-block; white-space: pre;">15.7. </span></compositeblock><block>モノイドとFold（Reduce）の強力さ</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 541.906px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L541.90625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6371054781919829" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6371054781919829" style="display: inline-block; white-space: pre;">15.8. </span></compositeblock><block>Fold（Reduce）と単位元</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 616.906px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L616.90625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6761361135104631" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6761361135104631" style="display: inline-block; white-space: pre;">15.9. </span></compositeblock><block>論理演算もモノイド</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 652.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L652.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.5798234378404825" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5798234378404825" style="display: inline-block; white-space: pre;">16. </span></compositeblock><block>関数（写像）の連鎖と関数（写像）の合成（Function composition）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 223.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L223.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.744049085360756" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.744049085360756" style="display: inline-block; white-space: pre;">16.1. </span></compositeblock><block>関数（写像）の連鎖</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 652.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L652.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3089746376554374" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3089746376554374" style="display: inline-block; white-space: pre;">16.2. </span></compositeblock><block>関数（写像）の合成（Function composition）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 481.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L481.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8981921399443564" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8981921399443564" style="display: inline-block; white-space: pre;">16.3. </span></compositeblock><block>関数（写像）合成（Function composition）は二項演算</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 421.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L421.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.06786516864530201" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.06786516864530201" style="display: inline-block; white-space: pre;">16.4. </span></compositeblock><block>関数（写像）合成（Function composition）はモノイド（Monoid）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 341.859px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L341.859375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5790585347462487" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5790585347462487" style="display: inline-block; white-space: pre;">16.5. </span></compositeblock><block>関数の合成という二項演算には結合性がある</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 487.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L487.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.4828458390418551" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.4828458390418551" style="display: inline-block; white-space: pre;">16.6. </span></compositeblock><block>関数の合成という二項演算には左右の単位元が存在する</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 412.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L412.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3114790582035363" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3114790582035363" style="display: inline-block; white-space: pre;">16.7. </span></compositeblock><block>関数合成という二項演算はモノイド（証明終わり）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 442.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L442.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.7226038808888653" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7226038808888653" style="display: inline-block; white-space: pre;">17. </span></compositeblock><block>高階関数（Higher-order function）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 496.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L496.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5273355130113686" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5273355130113686" style="display: inline-block; white-space: pre;">17.1. </span></compositeblock><block>関数の合成（Function compositon）と</block><block>高階関数（Higher-order function）という用語</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 223.469px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L223.46875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.1334798640681334" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.1334798640681334" style="display: inline-block; white-space: pre;">17.2. </span></compositeblock><block>高階関数（Higher-order function）は世界にありふれている</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 391.891px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L391.890625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7354417023247528" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7354417023247528" style="display: inline-block; white-space: pre;">17.3. </span></compositeblock><block>パイプライン演算子をつかって</block><block>高階関数を表現する</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 442.766px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L442.765625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6970394168593432" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6970394168593432" style="display: inline-block; white-space: pre;">17.4. </span></compositeblock><block>関数の合成（Function compositon）と</block><block>高階関数（Higher-order function）の比較</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 253.469px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L253.46875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9622301767448331" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9622301767448331" style="display: inline-block; white-space: pre;">17.5. </span></compositeblock><block>関数同士の組み合わせでない</block><block>高階関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 532.766px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L532.765625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8708155058706526" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8708155058706526" style="display: inline-block; white-space: pre;">17.6. </span></compositeblock><block>高階関数（Higher-order function）とラムダ式（アロー関数式）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 361.891px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L361.890625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.29418856649632974" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.29418856649632974" style="display: inline-block; white-space: pre;">17.7. </span></compositeblock><block>ラムダ式（アロー関数式）で遊ぶ identity関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 481.094px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L481.09375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7437333867944824" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7437333867944824" style="display: inline-block; white-space: pre;">17.8. </span></compositeblock><block>ラムダ式（アロー関数式）で遊ぶ right関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 499.438px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L499.4375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5877928029570094" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5877928029570094" style="display: inline-block; white-space: pre;">17.9. </span></compositeblock><block>ラムダ式（アロー関数式）で遊ぶ log関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 508.609px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L508.609375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.53323813808083" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.53323813808083" style="display: inline-block; white-space: pre;">17.10. </span></compositeblock><block>right関数で命令型コードの順次実行をエミュレートしてしまう</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 360.266px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L360.265625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.43568168219263925" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.43568168219263925" style="display: inline-block; white-space: pre;">17.11. </span></compositeblock><block>コンビネータ論理</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 660.547px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L660.546875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.534427946483687" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.534427946483687" style="display: inline-block; white-space: pre;">17.12. </span></compositeblock><block>2+引数関数は使わず単項関数（</block><block>Unary function</block><block>）を使う　</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 395.609px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L395.609375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.44794853295886417" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.44794853295886417" style="display: inline-block; white-space: pre;">17.13. </span></compositeblock><block>カリー化(currying)</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 656.109px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L656.109375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.13593814935380877" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.13593814935380877" style="display: inline-block; white-space: pre;">17.14. </span></compositeblock><block>カリー化(currying)する関数とアン・カリー化（uncurrying）する関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 316.062px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L316.0625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.7833752792962816" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7833752792962816" style="display: inline-block; white-space: pre;">18. </span></compositeblock><block>独自の二項演算（Custom operator）、関数合成の二項演算子、パイプライン演算子の実装</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 50.9375px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L50.9375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.905910029594194" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.905910029594194" style="display: inline-block; white-space: pre;">18.1. </span></compositeblock><block>道具立てを揃える</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 667.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L667.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7027727364698275" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7027727364698275" style="display: inline-block; white-space: pre;">18.2. </span></compositeblock><block>Ja</block><block>vaScriptで独自の二項演算子（Custom operator）を定義する</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 366.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L366.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6477847250540825" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6477847250540825" style="display: inline-block; white-space: pre;">18.3. </span></compositeblock><block>Ja</block><block>vaScriptで独自の二項演算子（Custom operator）を定義するための関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 291.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L291.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7311477713690613" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7311477713690613" style="display: inline-block; white-space: pre;">18.4. </span></compositeblock><block>関数合成の二項演算子の実装　グローバル</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 502.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L502.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.37009409101762736" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.37009409101762736" style="display: inline-block; white-space: pre;">18.5. </span></compositeblock><block>関数合成の二項演算子の実装　ローカル</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 517.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L517.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8629399176152406" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8629399176152406" style="display: inline-block; white-space: pre;">18.6. </span></compositeblock><block>パイプライン演算子の実装</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 607.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L607.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.64304360996092" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.64304360996092" style="display: inline-block; white-space: pre;">18.7. </span></compositeblock><block>null問題とオプション型（OptionType）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 522.719px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L522.71875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.03024857881868126" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.03024857881868126" style="display: inline-block; white-space: pre;">18.8. </span></compositeblock><block>パイプライン演算子のコード</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 592.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L592.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.40997325559315434" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.40997325559315434" style="display: inline-block; white-space: pre;">19. </span></compositeblock><block>ファンクタ（Functor）すべてを包括するような代数構造</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 326.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L326.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8543204702790752" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8543204702790752" style="display: inline-block; white-space: pre;">19.1. </span></compositeblock><block>モノイド（Monoid）と同じくらい重要なファンクタ（Functor）という代数構造</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 252.734px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L252.734375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.691965656634518" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.691965656634518" style="display: inline-block; white-space: pre;">19.2. </span></compositeblock><block>ファンクタ（Functor）すべてを包括するような代数構造</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 406.938px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L406.9375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.05127048885796048" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.05127048885796048" style="display: inline-block; white-space: pre;">19.3. </span></compositeblock><block>Array.map()というファンクタ（Functor）を調べればわかってくること</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 313.875px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L313.875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7745050370492563" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7745050370492563" style="display: inline-block; white-space: pre;">19.4. </span></compositeblock><block>パイプライン演算（Pipeline operation）は Identity functor</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 400.141px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L400.140625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6206105522444458" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6206105522444458" style="display: inline-block; white-space: pre;">19.5. </span></compositeblock><block>FunctorはIdentity functor（関数適用）を基本とする拡張可能な代数構造</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 308.547px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L308.546875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.2502714751066093" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.2502714751066093" style="display: inline-block; white-space: pre;">19.6. </span></compositeblock><block>Functorをもっと厳密にTypeScriptで定義していく</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 456.078px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L456.078125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7974612616771612" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7974612616771612" style="display: inline-block; white-space: pre;">19.7. </span></compositeblock><block>圏論（Category theory）のFunctor</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 555.219px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L555.21875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.5500476687360871" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5500476687360871" style="display: inline-block; white-space: pre;">20. </span></compositeblock><block>モナド（Monad）はファンクタ（Functor）の特別なケース</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 304.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L304.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.2915375806225118" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.2915375806225118" style="display: inline-block; white-space: pre;">20.1. </span></compositeblock><block>パイプライン演算は関数合成（Function composition）ができる</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 361.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L361.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6511867111974807" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6511867111974807" style="display: inline-block; white-space: pre;">20.2. </span></compositeblock><block>パイプライン演算は</block><block>Identity functorで</block><block>関数合成（Function composition）ができる特別なFunctor  </block><block>モナド（Monad）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 22.5781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L22.578125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.2418012380640775" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.2418012380640775" style="display: inline-block; white-space: pre;">20.3. </span></compositeblock><block>mapFunctorの連結の様子 Functorの合成（composition）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 407.703px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L407.703125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7048382986907749" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7048382986907749" style="display: inline-block; white-space: pre;">20.4. </span></compositeblock><block>mapFunctorの合成（Functor composition）の問題点</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 437.703px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L437.703125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.2780394991298569" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.2780394991298569" style="display: inline-block; white-space: pre;">20.5. </span></compositeblock><block>flatMapMonadの登場 Monadの合成（Monad composition）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 392.625px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L392.625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.16744677234585503" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.16744677234585503" style="display: inline-block; white-space: pre;">20.6. </span></compositeblock><block>Monadの左右の単位元（Identity）はタイプコンストラクタ関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 363.562px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L363.5625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8105584043269354" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8105584043269354" style="display: inline-block; white-space: pre;">20.7. </span></compositeblock><block>Monad</block><block>をもっと厳密にTypeScriptで定義していく</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 461.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L461.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6298029272260803" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6298029272260803" style="display: inline-block; white-space: pre;">20.8. </span></compositeblock><block>Monadの実装にはflatという概念が使われている</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 466.906px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L466.90625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.17411936577198683" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.17411936577198683" style="display: inline-block; white-space: pre;">20.9. </span></compositeblock><block>MonadはFunctorのより安全な上位互換となる代数構造</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 421.078px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L421.078125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7718823715265186" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7718823715265186" style="display: inline-block; white-space: pre;">20.10. </span></compositeblock><block>Monadのつくりかた</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 643.578px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L643.578125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.37821901300535576" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.37821901300535576" style="display: inline-block; white-space: pre;">21. </span></compositeblock><block>「非同期（Asynchronous）」と命令型プログラミングという技術的負債とasync/await</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 76.875px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L76.875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6988724017823453" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6988724017823453" style="display: inline-block; white-space: pre;">21.1. </span></compositeblock><block>ノイマン型コンピュータ</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 622.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L622.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6657733062156239" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6657733062156239" style="display: inline-block; white-space: pre;">21.2. </span></compositeblock><block>現代ではノイマン型の命令型思考は技術的負債となっている</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 382.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L382.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.08089182014509655" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.08089182014509655" style="display: inline-block; white-space: pre;">21.3. </span></compositeblock><block>「非同期（Asynchronous）」という用語</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 512.734px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L512.734375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.03549108308925342" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.03549108308925342" style="display: inline-block; white-space: pre;">21.4. </span></compositeblock><block>JavaScriptの非同期関数（Async function）async/await</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 421.844px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L421.84375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.5419287901306875" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5419287901306875" style="display: inline-block; white-space: pre;">22. </span></compositeblock><block>関数型リアクティブプログラミング（FRP） 時間に依存する関数型コードの書き方 </block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 113.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L113.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.06030256166697501" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.06030256166697501" style="display: inline-block; white-space: pre;">22.1. </span></compositeblock><block>命令型コードは時間とコードの配置場所に暗黙に依存している</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 367.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L367.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7548331480343926" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7548331480343926" style="display: inline-block; white-space: pre;">22.2. </span></compositeblock><block>命令型コードで普通にやっている値の書き換えというのは一体なんなのか？ ミュータブル（mutable）な世界</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 55.25px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L55.25,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.19337518569281165" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.19337518569281165" style="display: inline-block; white-space: pre;">22.3. </span></compositeblock><block>イミュータブル（Immutable）な世界</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 537.766px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L537.765625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5662845104978185" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5662845104978185" style="display: inline-block; white-space: pre;">22.4. </span></compositeblock><block>GitはImmutableな</block><block>永続データ構造</block><block>（</block><block>Persistent data structure</block><block>）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 370.969px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L370.96875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.21054596832091788" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.21054596832091788" style="display: inline-block; white-space: pre;">22.5. </span></compositeblock><block>関数そして二項演算子は暗黙に時間依存してはならない</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 412.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L412.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.19494951449768894" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.19494951449768894" style="display: inline-block; white-space: pre;">22.6. </span></compositeblock><block>関数そして二項演算子が時間依存するときは明示的に依存グラフを構成する</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 277.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L277.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5943299440260956" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5943299440260956" style="display: inline-block; white-space: pre;">22.7. </span></compositeblock><block>時間軸上のイベントを参照する関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 547.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L547.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3875180606651738" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3875180606651738" style="display: inline-block; white-space: pre;">22.8. </span></compositeblock><block>イベント駆動型プログラミング（Event-driven programming）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 371.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L371.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.07872245400439071" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.07872245400439071" style="display: inline-block; white-space: pre;">22.9. </span></compositeblock><block>リアクティブプログラミング（Reactive programming）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 411.891px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L411.890625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.47526662147378795" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.47526662147378795" style="display: inline-block; white-space: pre;">22.10. </span></compositeblock><block>PromiseはJavaScriptに導入されたの時間軸上のイベントのFunctor</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 333.547px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L333.546875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.4120075861137342" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.4120075861137342" style="display: inline-block; white-space: pre;">23. </span></compositeblock><block>シンプルでミニマルかつ強力なFRPの実装 </block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 442.953px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L442.953125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.043048156605886234" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.043048156605886234" style="display: inline-block; white-space: pre;">23.1. </span></compositeblock><block>Demo</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 747.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L747.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.4780853697014782" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.4780853697014782" style="display: inline-block; white-space: pre;">23.2. </span></compositeblock><block>ReactiveFunctor ReactiveMonad</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 570.188px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L570.1875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.44296126446533024" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.44296126446533024" style="display: inline-block; white-space: pre;">23.3. </span></compositeblock><block>ReactiveFunctor を実装するための下敷きとなるアイデア</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 404.406px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L404.40625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6013936765263639" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6013936765263639" style="display: inline-block; white-space: pre;">23.4. </span></compositeblock><block>ReactiveFunctor を実装するスタート地点</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 509.406px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L509.40625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9803638747766774" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9803638747766774" style="display: inline-block; white-space: pre;">23.5. </span></compositeblock><block>ReactiveFunctor のタイプコンストラクタ（型構築子）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 419.406px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L419.40625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9237110378617883" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9237110378617883" style="display: inline-block; white-space: pre;">23.6. </span></compositeblock><block>ReactiveFunctor の二項演算子を表すreactive関数①</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 441.891px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L441.890625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.25307392623877156" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.25307392623877156" style="display: inline-block; white-space: pre;">23.7. </span></compositeblock><block>ReactiveFunctor のトリガー関数 change()</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 506.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L506.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3423301430814405" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3423301430814405" style="display: inline-block; white-space: pre;">23.8. </span></compositeblock><block>ReactiveFunctor の二項演算子を表すreactive関数②</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 441.891px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L441.890625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.2819757664745257" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.2819757664745257" style="display: inline-block; white-space: pre;">23.9. </span></compositeblock><block>初歩的なReactiveFunctor のコード</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 554.406px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L554.40625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3248777531025189" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3248777531025189" style="display: inline-block; white-space: pre;">23.10. </span></compositeblock><block>初歩的なReactiveFunctor のテスト</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 546.062px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L546.0625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.8173009347729534" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8173009347729534" style="display: inline-block; white-space: pre;">24. </span></compositeblock><block>より安全なReactiveFunctor version2</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 479.875px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L479.875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9799215640352013" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9799215640352013" style="display: inline-block; white-space: pre;">24.1. </span></compositeblock><block>やはりReactive値を保持する必要があった</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 504.422px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L504.421875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5923390398060853" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5923390398060853" style="display: inline-block; white-space: pre;">24.2. </span></compositeblock><block>ReactiveFunctor version 2</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 613.547px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L613.546875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5625050520332517" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5625050520332517" style="display: inline-block; white-space: pre;">24.3. </span></compositeblock><block>タイプコンストラクタ</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 637.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L637.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.9636673999788532" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.9636673999788532" style="display: inline-block; white-space: pre;">24.4. </span></compositeblock><block>reactive関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 705.266px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L705.265625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.253327835651999" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.253327835651999" style="display: inline-block; white-space: pre;">24.5. </span></compositeblock><block>change関数</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 708.578px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L708.578125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8234928077394887" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8234928077394887" style="display: inline-block; white-space: pre;">24.6. </span></compositeblock><block>version2のテスト</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 671.094px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L671.09375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.8547076058302192" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8547076058302192" style="display: inline-block; white-space: pre;">25. </span></compositeblock><block>ReactiveFunctor version3 (typed with None)</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 413.875px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L413.875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.30435109639727576" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.30435109639727576" style="display: inline-block; white-space: pre;">25.1. </span></compositeblock><block>Noneの導入</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 706.922px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L706.921875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.3899317396392328" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.3899317396392328" style="display: inline-block; white-space: pre;">25.2. </span></compositeblock><block>型（Type）の導入</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 665.266px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L665.265625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5090245398556286" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5090245398556286" style="display: inline-block; white-space: pre;">25.3. </span></compositeblock><block>reactive演算子の追加　</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 630.266px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L630.265625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5537344673141684" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5537344673141684" style="display: inline-block; white-space: pre;">25.4. </span></compositeblock><block>タイプコンストラクタ</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 637.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L637.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8426694178617018" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8426694178617018" style="display: inline-block; white-space: pre;">25.5. </span></compositeblock><block>isNoneとoptionMap</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 656.047px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L656.046875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.5310531003877403" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.5310531003877403" style="display: inline-block; white-space: pre;">25.6. </span></compositeblock><block>version3のテスト</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 671.094px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L671.09375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.31483537472045664" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.31483537472045664" style="display: inline-block; white-space: pre;">26. </span></compositeblock><block>ReactiveMonad</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 657.906px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L657.90625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.1875967039128954" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.1875967039128954" style="display: inline-block; white-space: pre;">26.1. </span></compositeblock><block> flat機構の追加</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 688.609px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L688.609375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.7298287194437192" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.7298287194437192" style="display: inline-block; white-space: pre;">26.2. </span></compositeblock><block> flatReactive関数と演算子の追加　</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 555.25px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L555.25,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.40618984835300975" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.40618984835300975" style="display: inline-block; white-space: pre;">26.3. </span></compositeblock><block> タイプコンストラクタ</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 633.625px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L633.625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.6478491657362517" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.6478491657362517" style="display: inline-block; white-space: pre;">26.4. </span></compositeblock><block>ReactiveMonad 結合性（Associativity）テスト</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 476.875px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L476.875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.8067909417298746" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.8067909417298746" style="display: inline-block; white-space: pre;">26.5. </span></compositeblock><block>ReactiveMonad 左右の単位元（left &amp; right Identity）テスト</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 394.344px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L394.34375,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.02831358116408711" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.02831358116408711" style="display: inline-block; white-space: pre;">26.6. </span></compositeblock><block>ReactiveMonad ES Modules（ESM）</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 536.016px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L536.015625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.721911549889799" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.721911549889799" style="display: inline-block; white-space: pre;">27. </span></compositeblock><block>ReactiveMonadのエクステンション関数 </block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 454.906px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L454.90625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.09446143924798522" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.09446143924798522" style="display: inline-block; white-space: pre;">27.1. </span></compositeblock><block>Demo</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 747.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L747.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.640205216780283" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.640205216780283" style="display: inline-block; white-space: pre;">27.2. </span></compositeblock><block>ReactiveMonadとエクステンション関数の関係</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 473.562px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L473.5625,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s2" style="line-height: 1.4; cursor: pointer;"><a href="#n0.33391236677198566" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.33391236677198566" style="display: inline-block; white-space: pre;">27.3. </span></compositeblock><block>エクステンション関数の実装</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 592.781px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L592.78125,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line><line class="text-mode toc-s1" style="line-height: 1.4; font-size: 1.2em; font-weight: bold; cursor: pointer;"><a href="#n0.45770943966675315" style="color: inherit; text-decoration: inherit;"><prefix style="cursor: pointer;"></prefix><blocks style="cursor: pointer;"><baselineblock class="inline"></baselineblock><compositeblock class="prefix-block inline"><span data-line-id="n0.45770943966675315" style="display: inline-block; white-space: pre;">28. </span></compositeblock><block>MIT License</block><compositeblock dir="ltr" class="toc-underline-placeholder-symbol inline" style="width: 20px; overflow: visible;"><svg data-reactroot="" style="width: 686.922px; height: 5px; overflow: visible; display: inline-block;"><path d="M 5,5 L686.921875,5" stroke-dasharray="1 2" fill="none"></path></svg></compositeblock><compositeblock dir="ltr" class="toc-page-number-symbol disabled inline"><span style="white-space: pre;"> </span></compositeblock></blocks></a></line></editarea></toc-wrapper></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.010730048775923762" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.010730048775923762"><prefix style="text-align: left; padding-right: 0.5em;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>何が問題なのだろう？</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 890.614px; height: 111.21px; position: relative;"><img src="image-resources/96bbf23e-029f-4a2a-b92d-f9e844bd46ba.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.1141249795976792" style="position: relative; top: 0px; left: 1px; width: 856.727px;"><colgroup><col style="width: 218px;"><col style="width: 219.5px;"><col style="width: 216px;"><col style="width: 201.219px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">バグがなく</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">生産効率が高く</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">メンテナンスが容易な</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">プログラミングを</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">実現したいのだが</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">結構難しい</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">フォン・ノイマン型</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">コンピュータというマシンを操作するという発想の</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">命令型</block><block style="font-weight: bold;">あるいは</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">オブジェクト指向</block><block style="font-weight: bold;">の</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">プログラミングは、</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">設計とコードが複雑</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">になるから</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">マシンの状態を</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">操作するという</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">発想から脱却し、</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">数学的手法に基づく</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">シンプルで堅牢な</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">関数型</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">プログラミング</block></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">の習得と実践</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="3" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold; color: rgb(208, 2, 27);">！！！！！</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、なにより習得するための良い入門書がほぼほぼ存在していない、ことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>本稿は筆者が「もっと早く読みたかった」と2022年現在に考える関数型プログラミングの入門書です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptの知識と実践は推奨されますが、本書で読み進めるにあたって必須ではありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>むしろ多くの基本的な概念については、型（Type）は必要ではなく逆に煩雑になることが多いので、JavaScriptを優先しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.052867256918040506" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.052867256918040506"><prefix style="text-align: left; padding-right: 0.5em;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型プログラミング＝ほぼすべてのプログラミング入門者が半ば強制的に辿る道</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.17294274866861004" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.17294274866861004"><prefix style="text-align: left; padding-right: 0.25em;">2.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Start from Scratch（ゼロからのスタート）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%91%BD%E4%BB%A4%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%91%BD%E4%BB%A4%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">命令型プログラミング</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Imperative_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Imperative_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Imperative Programming</a></block><block>）は、コンピュータと呼ばれる物理的なハードウェアに順番に命令を送るという一連のシークエンスをコードとして並べる作業のことで、命令を送ればそのとおりマシンは動作するのだろう、という極めて自然で直感的にも理解しやすく原始的なやり方です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2020年現在、ほぼすべてのプログラミング入門者は、まず命令型プログラミングの作法（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%83%91%E3%83%A9%E3%83%80%E3%82%A4%E3%83%A0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%83%91%E3%83%A9%E3%83%80%E3%82%A4%E3%83%A0" target="_blank" style="color: inherit; text-decoration: inherit;">プログラミングパラダイム </a></block><block>(</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Programming_paradigm" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Programming_paradigm" target="_blank" style="color: inherit; text-decoration: inherit;">programming paradigm</a></block><block>)）を徹底的に叩き込まれることからはじめる慣習になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 535px; height: 197.852px; position: relative;"><img src="image-resources/0741f27e-2f6d-4100-a75a-e0be9e3bdfe3.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.nhk.or.jp/school/programming/start/index.html" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.nhk.or.jp/school/programming/start/index.html" target="_blank" style="color: inherit; text-decoration: inherit;">https://www.nhk.or.jp/school/programming/start/index.html</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、古典的で素朴なプログラミングの作法を学ぶという意味では正しいかもしれません。そして将来的にこの状況が改革されるのかどうかも良くわかりません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型プログラミングのコードとは以下のようなものです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1から10までの数を足すコード</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 384px; height: 404.259px; position: relative;"><img src="image-resources/1c4679d4-7171-4db3-ab80-d45648c4a1fe.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 179px; height: 195.677px; position: relative;"><img src="image-resources/6bb0488c-272d-4c7b-b303-91a87e1fdcf8.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、たとえば</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">x </block><block class="operator token">=</block><block class=" token"> x </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というコードがありますが、実際には</block><block style="font-weight: bold;">3つの操作</block><block>を表現しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="text-decoration: none; font-weight: bold;">X</block><block style="font-weight: bold;">に割り当てられているメモリに格納された値を読み取る</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">その値をひとつ増やす</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">新しい値を X に割り当てられているメモリに書き込む</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういうメモリのに格納された「今」の値をプログラマは常に想像しながらコーディングしていくわけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="http://www.f.waseda.jp/moriya/PUBLIC_HTML/social/Scratch/21.pdf" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="http://www.f.waseda.jp/moriya/PUBLIC_HTML/social/Scratch/21.pdf" target="_blank" style="color: inherit; text-decoration: inherit;">http://www.f.waseda.jp/moriya/PUBLIC_HTML/social/Scratch/21.pdf</a></block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.13343332949680042"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 700px; height: 965.239px; position: relative;"><img src="image-resources/1d895566-6f77-4702-91c6-4a4405f7b6f0.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 700px; height: 651.982px; position: relative;"><img src="image-resources/435cdef9-fe03-41ff-9a24-cfd3f57309e1.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とたいへん丁寧に説明されているわけですが、詳細がわかればわかるほど、</block><block style="font-weight: bold;">命令型プログラミングのコードはかなり複雑なことをやっている</block><block>ことがわかってきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.278609541060459" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.278609541060459"><prefix style="text-align: left; padding-right: 0.25em;">2.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型コード(JavaScript)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">let</block><block class=" token"> sum </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">let</block><block class=" token"> x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">for</block><block class=" token"> </block><block class="punctuation token">(</block><block class="keyword token">let</block><block class=" token"> i </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">;</block><block class=" token"> i </block><block class="operator token">&lt;</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">;</block><block class=" token"> i</block><block class="operator token">++</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  x </block><block class="operator token">=</block><block class=" token"> x </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  sum </block><block class="operator token">=</block><block class=" token"> sum </block><block class="operator token">+</block><block class=" token"> x</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">sum</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">2</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">4</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">5</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">6</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">7</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">8</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">9</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">10</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">55</block><block class=" token">   </block><block class="comment token">// sum</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>10回繰り返すループを作るために</block><block style="font-weight: bold;">for</block><block>ステートメントに </block><block style="font-weight: bold;">i </block><block>というカウンター変数を使うパターンです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">sum</block><block> と </block><block style="font-weight: bold;">x</block><block> が繰り返しループとともに刻々と値が変化していき、コードの字面の変数名を見ただけでは、その値が何なのかは？頭のなかでコードのコンピュータの振る舞いをエミュレーションしなければならず、その途中で不等式　</block><block style="font-weight: bold;">x ⩽10</block><block>　なども判断していく、ということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいはカウンターとして1ずつ増えていく変数</block><block style="font-weight: bold;">ｉ</block><block>を</block><block style="font-weight: bold;">ｘ</block><block>の代わりに使うパターンもありえて、その場合は使う変数はひとつ減らせる！と考えられるのかもしれません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、実はこれは</block><block style="font-weight: bold;">与えられた課題の本質とは全く関係ないコードの流れ</block><block>自体をあれこれ考えなければいけないという</block><block style="font-weight: bold;">別の問題に頭を酷使している</block><block>のです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Loops_and_iteration#for_statement" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Loops_and_iteration#for_statement" target="_blank" style="color: inherit; text-decoration: inherit;">for 文</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8790092615574625" style="width: 635px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 495.019px; position: relative;"><img src="image-resources/ae73f3bf-ecba-445f-b9d1-b85db3481832.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">命令型プログラミングのコードはたいへん複雑なのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7584803147057353" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7584803147057353"><prefix style="text-align: left; padding-right: 0.25em;">2.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型プログラミングに傾倒している「歪な状況」を根本的に解決する必要がある</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この</block><block style="font-weight: bold;">根本的な問題</block><block>を</block><block style="font-weight: bold;">根本的に解決する必要</block><block>があるのですが、ほぼすべての人は</block><block style="font-weight: bold;">最初に刷り込まれたプログラミングの作法が命令型プログラミング</block><block>なので、この命令型の作法こそがプログラミングの作法として至極当然であるとし、ここの部分の</block><block style="font-weight: bold;">メンタルブロックが強烈で、なかなか発想を転換することができません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてこれは何もプログラミングの経験が浅い初心者を中心に起こっていることではありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際には、後述するとおり、</block><block style="font-weight: bold;">JavaScriptの仕様策定をしているグループである</block><block class="role-hyper-link" data-hyper-link-url="https://tc39.es/ja/" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://tc39.es/ja/" target="_blank" style="color: inherit; text-decoration: inherit;">TC39</a></block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 154.07px; position: relative;"><img src="image-resources/6ab06342-a803-4b6f-94cc-e6e6f31dbe4f.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の参加者でさえ、この</block><block style="font-weight: bold;">命令型プログラミングへ過剰なまでに執着している現状</block><block>があって、その結果、元来が本稿で解説するところである</block><block style="font-weight: bold;">関数型プログラミングの概念の機能</block><block>ですら、JavaScriptの新機能の仕様としては、</block><block style="font-weight: bold;">命令型プログラミングの作法で実装されようとしている</block><block>、というビックリ仰天のかなり</block><block style="font-weight: bold;">歪な状態</block><block>を筆者自身が目撃しており</block><block style="font-weight: bold;">現状はかなり深刻</block><block>であると感じています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>またこの種の問題点を共有しながら適切に解説しているドキュメントは</block><block style="font-weight: bold;">非常に少なく</block><block>、適切に発想を転換する機会に恵まれないことが現状です。</block><block style="font-weight: bold;">本稿はその問題を適切にアプローチして解説することを目的としています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.5651940929504885" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.5651940929504885"><prefix style="text-align: left; padding-right: 0.5em;">3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミング（Functional Programming）は</block><block style="font-weight: bold;">式（Expression）の組み立て</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7329329350780311" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7329329350780311"><prefix style="text-align: left; padding-right: 0.25em;">3.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コード(JavaScript)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上の命令型コードを関数型で書き直すならば、こうなります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">add</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> sum </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">sum</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">55</block><block class=" token">   </block><block class="comment token">// sum</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>課題の本質ではない無用な変数は取り除かれ、プログラマーの頭を悩ますループの流れも存在せず、ただ</block><block style="font-weight: bold;">２つの式</block><block>が</block><block style="font-weight: bold;">const</block><block>によって</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%AE%A3%E8%A8%80%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%AE%A3%E8%A8%80%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">宣言されているだけ</a></block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">このコードについては、今後複数章にまたがって詳しく解説していきます。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9042697291444313" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9042697291444313"><prefix style="text-align: left; padding-right: 0.25em;">3.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードは</block><block style="font-weight: bold;">式（Expression）</block><block>である</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptは、</block><block style="font-weight: bold;">文（Statement）</block><block>と</block><block style="font-weight: bold;">式（Expression）</block><block>から構成されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://jsprimer.net/basic/statement-expression/" style="text-decoration: underline; font-style: italic; color: rgb(17, 85, 204);"><a href="https://jsprimer.net/basic/statement-expression/" target="_blank" style="color: inherit; text-decoration: inherit;">文と式(JavaScript Primer)</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型プログラミングのコードは</block><block style="font-weight: bold;">文（Statement）</block><block>が中心でした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/for" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/for" target="_blank" style="color: inherit; text-decoration: inherit;">for</a></block><block>文</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7924695338866927" style="width: 616px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 107.273px; position: relative;"><img src="image-resources/0183b570-4d36-47d3-acf3-5c748dc3b028.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミングのコードは、それに対して、</block><block style="font-weight: bold;">式（Expression）</block><block>が中心です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8539829990125329" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8539829990125329"><prefix style="text-align: left; padding-right: 0.25em;">3.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミングは</block><block style="font-weight: bold;">式（Expression）を組み立てていく作業</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>言い換えると、</block><block style="font-weight: bold;">関数型プログラミングは式（Expression）を組み立てていく作業に他なりません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この作業は、命令型プログラミングの作業における、文（Statement）を組み立て、カウンター変数を別途に用意することも含めて刻々と変化する変数を監理しながら流れを整える、という作業とは根本的に異なります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5999037588670433" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5999037588670433"><prefix style="text-align: left; padding-right: 0.25em;">3.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードは値が変化するようなことはない</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">let </block><block>で定義した</block><block style="font-weight: bold;"> i x sum</block><block> のようにコードの流れで値がコロコロと変化していくようなことはなく、  </block><block style="font-weight: bold;">const</block><block> で定義するように値は定数として（一発で）定義されます。あとから値を二重に</block><block style="font-weight: bold;">破壊的代入</block><block>しようとするとエラーが出ます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// error</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型では、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">let</block><block class=" token"> x</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というコードがJavaScriptでもちろん有効で、実際、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">for</block><block class=" token"> </block><block class="punctuation token">(</block><block class="keyword token">let</block><block class=" token"> i </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">;</block><block class=" token"> i </block><block class="operator token">&lt;</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">;</block><block class=" token"> i</block><block class="operator token">++</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class="comment token">//....</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように命令型コードのforループを回すときなどに必要になってくるのですが、</block><block style="font-weight: bold;">関数型コードではアンチパターン</block><block>です。理由は</block><block style="font-weight: bold;">コードの位置、上下関係で値が変化するので式自体に明示されていない余剰の要素が紛れ込んで論理構成が破綻するから</block><block>です。これについては後々詳細に説明していきます、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型コードでは命令型コードのように命令文の上下の並びから発生するコードの流れ（フロー）をベースにするのではなく、式の構成によってプログラミングしていきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>従って命令型のようにコードの振る舞いをコンピュータに成り代わってプログラマーの頭の中でのエミュレーションをしながら、あるいはデバッガーに利用して値の変化を追跡する必要がありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">与えられた課題の本質とは全く関係ないコードの流れ</block><block>自体をあれこれ考えなければいけないという</block><block style="font-weight: bold;">別の問題に頭を酷使する必要は消滅</block><block>します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは少なくとも</block><block style="font-weight: bold;">このレベルではデバッグが不要</block><block>である、ということを意味します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてこの</block><block style="font-weight: bold;">式（Expression）</block><block>の中心となる素材が、</block><block style="font-weight: bold;">関数</block><block>と</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.2577127418745828" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.2577127418745828"><prefix style="text-align: left; padding-right: 0.5em;">4. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数</block><block>と</block><block style="font-weight: bold;">二項演算子　</block><block>関数型コードの式を構成する主要部品</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.10391822852845567" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.10391822852845567"><prefix style="text-align: left; padding-right: 0.25em;">4.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数</block><block style="font-weight: bold;">（Function）と二項演算子（Binary operator）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（Function）</block><block>については</block><block style="font-weight: bold;">数学的にも関数型プログラミングとしても、両方の観点で非常に重要で根幹となる要素</block><block>だけに、後の章で改めて詳しく説明しますが、いきなり最初から数学全開でいくと解説としてとっつきにくい懸念があるので、今回はとりあえずなんとなくわかっているものとして取り扱います。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算子（Binary operator</block><block>）は、我々が小学１年かそれ以前から慣れ親しんでいる</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">1 + 2 </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というような２つの項目をあわせて一つにする</block><block style="font-weight: bold;">演算</block><block>（</block><block style="font-weight: bold;">オペレーション</block><block>）を</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block style="font-weight: bold;">）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と呼び、そのうち</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">+</block><block>  は</block><block style="font-weight: bold;">演算子(Operator)</block><block>、あるいは英語カタカナ読みで</block><block style="font-weight: bold;">オペレータ</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">1,2,3</block><block>などは</block><block style="font-weight: bold;">被演算子(Operand)</block><block> あるいは英語カタカナ読みで</block><block style="font-weight: bold;">オペランド</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と呼びます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ややこしく感じかねないですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">演算（Operation）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">演算子(Operator)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">被演算子（Operand）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というペア要素で構成されている、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは用語はともかくとして、わざわざ説明されずとも我々が小学校以来、直感的に理解している事実です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1 + 2 </block><block>というような</block><block style="font-weight: bold;">二項の間の演算</block><block>なら</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算</block><block>で</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">＋</block><block>は</block><block style="font-weight: bold;">二項演算子</block><block>だ、となるわけですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" target="_blank" style="color: inherit; text-decoration: inherit;">論理否定の演算子  </a></block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" style="text-decoration: underline; font-size: 1.73em; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" target="_blank" style="color: inherit; text-decoration: inherit;">!</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="boolean token">true</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="boolean token">false</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のように、</block><block style="font-weight: bold;">一項演算子</block><block>、または</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%8D%98%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%8D%98%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">単項演算</a></block><block style="font-weight: bold;">子</block><block>というものも普通に存在しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3429720997999275" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3429720997999275"><prefix style="text-align: left; padding-right: 0.25em;">4.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数</block><block style="font-weight: bold;">（Function）と演算子（Operator）は本当は同じものである</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちょうど、</block><block style="font-weight: bold;">一項演算子（単項演算子）</block><block>の話が出たので、関数（Function）と演算子（Operator）の関係について、ここですぐ整理してしまいたいと思います。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（Function）と演算子（Operator）は本当は同じものです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-size: 1.44em; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%8D%98%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-size: 1.44em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%8D%98%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">単項演算</a></block><block style="font-size: 1.44em;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_operation" style="text-decoration: underline; font-size: 1.44em; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_operation" target="_blank" style="color: inherit; text-decoration: inherit;">Unary operation</a></block><block style="font-size: 1.44em;">） の場合</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5292101459912633"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">単項演算とは、数学で、被作用子（オペランド）が一つだけであるような演算（つまり、入力が一つの演算）のこと</block><block>。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、論理否定は真理値に対する単項演算であり、自乗は実数に対する単項演算である。階乗 n! も単項演算である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">与えられた集合 S に対する単項演算は、関数 S→S に他ならない。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" target="_blank" style="color: inherit; text-decoration: inherit;">論理否定の演算子 </a></block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" style="text-decoration: underline; font-size: 1.44em; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" target="_blank" style="color: inherit; text-decoration: inherit;">!</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="boolean token">true</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="boolean token">false</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="operator token">!</block><block class=" token">a</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">false</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と関数表記へそのまま置き換えることができ、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">一項演算子</block><block>は１引数の関数(</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Unary function</a></block><block>)と対応するのがわかります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすれば、単にシンボルの割当ての違いにすぎない、とはっきりとわかります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-size: 1.44em; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-size: 1.44em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block style="font-size: 1.44em;">（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-size: 1.44em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block style="font-size: 1.44em;">） の場合</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 250px; height: 269.71px; position: relative;"><img src="image-resources/90f1aa59-c5a1-4395-923f-54580c3a44b9.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは図の通り、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;">  </block><block>とは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2引数の関数＝</block><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.44em; font-weight: bold;">ｆ(x, y) </block><block>であるということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">１＋２</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という</block><block style="font-weight: bold;">二項演算</block><block>は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">+(1, 2)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という</block><block style="font-weight: bold;">二項関数の糖衣構文（syntax sugar）にすぎない</block><block>、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>我々が小学校１年生の頃から扱って慣れ親しんでいた</block><block style="font-weight: bold;">二項演算</block><block>とは、中学に進級して初めて習う</block><block style="font-weight: bold;">関数というものと正体は同じ</block><block>もので、関数のほうが概念としては統一的に全体を俯瞰することができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に、純粋関数型言語である</block><block style="font-weight: bold;">Haskell</block><block>ではこの事実に準じて実際に、</block><block style="font-weight: bold;">二項演算子と関数表記の相互入れ替え</block><block>が言語仕様として可能になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="http://walk.northcol.org/haskell/operators/#_%E4%B8%AD%E7%BD%AE%E3%81%A8%E5%89%8D%E7%BD%AE%E3%81%AE%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="http://walk.northcol.org/haskell/operators/#_%E4%B8%AD%E7%BD%AE%E3%81%A8%E5%89%8D%E7%BD%AE%E3%81%AE%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88" target="_blank" style="color: inherit; text-decoration: inherit;">中置と前置の切り替え</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8339474329916585" style="width: 723px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 700px; height: 277.378px; position: relative;"><img src="image-resources/f7767140-7ce4-4781-bfda-e3e0a854c929.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここでは、二項演算子はオペランドの間に挟まる記法なので、</block><block style="font-weight: bold;">中置演算子</block><block>と書かれていますね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptも同じように出来れば良いな、とは思いますし出来ないわけがないですが、今のところ意識が低いので出来ていません。JavaScriptの仕様策定団体である</block><block class="role-hyper-link" data-hyper-link-url="https://tc39.es/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://tc39.es/" target="_blank" style="color: inherit; text-decoration: inherit;">TC39</a></block><block>はJavaScript関数型プログラミングコミュニティの意に反して非常に意識が低いのは間違いありません。ただし、稀に良いことはあって、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" target="_blank" style="color: inherit; text-decoration: inherit;">べき乗 (**)</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という二項演算子がES2016で導入されました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Math</block><block class="punctuation token">.</block><block class="function token">pow</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">==</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">2</block><block class=" token"> </block><block class="operator token">**</block><block class=" token"> </block><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Math</block><block class="punctuation token">.</block><block class="function token">pow</block><block class="punctuation token">(</block><block class=" token">Math</block><block class="punctuation token">.</block><block class="function token">pow</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">==</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">2</block><block class=" token"> </block><block class="operator token">**</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="operator token">**</block><block class=" token"> </block><block class="number token">5</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、まさに、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.2em; font-weight: bold;">Math.pow(x, y)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.2em; font-weight: bold;">x ** y</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>へ置き換えたものです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8462719123823341" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8462719123823341"><prefix style="text-align: left; padding-right: 0.25em;">4.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算子（Binary operator）はとてつもなく強力な記法である</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まったく同じ意味のコードであっても、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" target="_blank" style="color: inherit; text-decoration: inherit;">べき乗 (**)</a></block><block>という新しい</block><block style="font-weight: bold;">二項演算子を導入</block><block>した結果、いかに</block><block style="font-weight: bold;">コードが無駄なく簡潔になり、数学的な構造が読みやすくなった</block><block>のかは明白です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>特にこのように連鎖してネスト構造になった場合、非常にシンプルに記述できます。これは</block><block style="font-weight: bold;">バグの混入を事前に防ぐことができ、プログラミングの生産効率が飛躍的に向上する</block><block>ことに直結します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;">  </block><block>とは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.44em; font-weight: bold;">ｆ(x, y) </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のことであり、概念としては、関数だけで統合できてしまうのですが、数式の表記方法としてはむしろ、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;"> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のほうが圧倒的に優れており、なにより、これは繰り返しになりますが我々が小学校の算数の時間から徹底的にトレーニングされてきた慣れ親しんでいる表記でもあります。非常に</block><block style="font-weight: bold;">直感的に理解可能</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>”関数”型プログラミングとして、</block><block style="font-weight: bold;">二項演算子という主要部品も根源的には関数という概念に統合される</block><block>、という</block><block style="font-weight: bold;">概念の統一感</block><block>があります。それと同時に、関数型プログラミングで、実際にコードを書いていくのは、あくまで</block><block style="font-weight: bold;">二項演算子を極限まで活用</block><block>する、</block><block style="font-weight: bold;">二項演算</block><block>を主とする</block><block style="font-weight: bold;">式（Expression）</block><block>の組み立てとする、ということを</block><block style="font-weight: bold;">本稿の一貫した理念</block><block>とします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にこの</block><block style="font-weight: bold;">二項演算で式を組み立てて行く</block><block>、という理念あるいは手法は、Haskellのような純粋関数型言語では、ほぼ自動的に達成されてしまうので、実際にHaskellのコードでは二項演算の式だらけで、非常に短いコードで高度なことを成し遂げているのだけれども、外部の人間からしてみると何をやっているのかよくわからない、ということが起こるでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptの関数型プログラミングにおいて、この二項演算子を極限まで活用する、という理念あるいは手法は、あまり広くシェアされているとは観察されませんが、本稿を読みすすめるにつれて、その強力さは共有されていくと考えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.7796882750291525" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.7796882750291525"><prefix style="text-align: left; padding-right: 0.5em;">5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドを関数型の二項演算子として置き換える</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.12738958296209324" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.12738958296209324"><prefix style="text-align: left; padding-right: 0.25em;">5.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型＆オブジェクト指向のハイブリッド言語としてのJavaScript</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptは関数型プログラマーである</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%96%E3%83%AC%E3%83%B3%E3%83%80%E3%83%B3%E3%83%BB%E3%82%A2%E3%82%A4%E3%82%AF" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%96%E3%83%AC%E3%83%B3%E3%83%80%E3%83%B3%E3%83%BB%E3%82%A2%E3%82%A4%E3%82%AF" target="_blank" style="color: inherit; text-decoration: inherit;">ブレンダン・アイク（Brendan Eich）</a></block><block>によって生み出されました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://brendaneich.com/2008/04/popularity/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://brendaneich.com/2008/04/popularity/" target="_blank" style="color: inherit; text-decoration: inherit;">本人ブログエントリ</a></block><block>によると、実際に彼はNetScapeから、Webブラウザ実装言語にSchemeというLisp系の関数型言語を実装するという約束で雇用されたのですが、その過程で、Javaとオブジェクト指向ブームが巻き起こり、煽りを受けた結果、企業のマーケティングの理由から上層部の指示によって、「Javaのように見える」オブジェクト指向の性格をもつプログラミング言語が要求されることとなりました。その結果、世に送り出されたのが、</block><block style="font-weight: bold;">関数型言語とオブジェクト指向の両方の性質を併せ持つハイブリッド言語としてのJavaScript</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト指向自体をどのように定義するのか</block><block>、ということ自体が歴史的に右往曲折があって厄介な問題なのですが、とりあえず巷で言われているオブジェクト指向プログラミング、言語では、たとえばC++やJavaは、</block><block style="font-weight: bold;">関数型プログラミングを想定した代物ではありえない</block><block>、という一点において原理的に</block><block style="font-weight: bold;">命令型プログラミング</block><block>を踏襲するカテゴリに入ると考えてまったく問題ありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミングをある程度以上のレベルで習得してしまうと、原理的にはオブジェクト指向プログラミングは不要の(冗長な)手法となります。</block><block style="font-weight: bold;">関数型プログラミングは、オブジェクト指向プログラミングを完全に置き換えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なぜならば、関数型プログラミングは、</block><block style="font-weight: bold;">すでに数学世界に存在している式（数式）を組み立てる</block><block>、という極めてシンプルで解釈のブレのない作業ですが、オブジェクト指向プログラミングは同じ作業をオブジェクトという本質的には必要はなかった（あまり出来の良くはない）</block><block style="font-weight: bold;">人工的に発明された枠組み</block><block>の中で、</block><block style="font-weight: bold;">様々な複雑なルールをそのオブジェクトに付与</block><block>した冗長なフォーマットに焼き直した上で、こういう</block><block style="font-weight: bold;">デザインパターン</block><block>が望ましい、アンチパターンだ、と</block><block style="font-weight: bold;">設計の欠点の辻褄あわせをしているにすぎない</block><block>からです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.022431030909590755" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.022431030909590755"><prefix style="text-align: left; padding-right: 0.25em;">5.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト指向時代の終焉</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>当時の熱狂的なオブジェクト指向ブームは2020年代においてはとっくに過ぎ去り、長期に渡る壮大な検証実験を経た結果、多くの問題が指摘されるようになってきました。関数型プログラミングと比較してオブジェクト指向批判の数々の記事がWeb検索でヒットします。日本語の良記事も多くありますし、やはり英語圏のものも多いのでGoogle翻訳などをして読むと良いかもしれません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://betterprogramming.pub/object-oriented-programming-the-trillion-dollar-disaster-92a4b666c7c7" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://betterprogramming.pub/object-oriented-programming-the-trillion-dollar-disaster-92a4b666c7c7" target="_blank" style="color: inherit; text-decoration: inherit;">Object-Oriented Programming — The Trillion Dollar Disaster</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向言語ーそれは何兆ドル規模の厄災</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに、JavaScriptが必須であるWebのフロントエンド界隈では、壮大な実験が行われました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://reactjs.org/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://reactjs.org/" target="_blank" style="color: inherit; text-decoration: inherit;">React</a></block><block>です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 112.989px; position: relative;"><img src="image-resources/7998836f-852e-4176-96a5-304c0785005e.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptはES2015(ES6)時代になり、オブジェクト指向そのもののClass（</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Classes" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Classes" target="_blank" style="color: inherit; text-decoration: inherit;">クラス</a></block><block>）が新たに導入されました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これに伴い、Reactでも、フレームワークの根幹となるコンポーネントをClassで表現するように標準化されました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>筆者などは「いくらJavaScriptが根強いオブジェクト指向ファンの要請から、後方互換性のようなクラスが導入されたからといって、Reactのようなメジャーな外部ライブラリまでそれに習うのは困ったことになった、時代の逆行だ」と、まったく歓迎していませんでした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>案の定、オブジェクト指向のクラスを標準コンポーネントとして利用するというReactのアプローチは失敗し、実質クラス実装のコンポーネントは破棄し、関数型に近いHooksという仕組みが導入されることになりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以下は</block><block class="role-hyper-link" data-hyper-link-url="https://reactjs.org/docs/hooks-intro.html#classes-confuse-both-people-and-machines" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://reactjs.org/docs/hooks-intro.html#classes-confuse-both-people-and-machines" target="_blank" style="color: inherit; text-decoration: inherit;">Introducing Hooks</a></block><block>からの引用です。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.14651994814760982"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Classes confuse both people and machines</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In addition to making code reuse and code organization more difficult, we’ve found that classes can be a large barrier to learning React. You have to understand how this works in JavaScript, which is very different from how it works in most languages. You have to remember to bind the event handlers. Without unstable syntax proposals, the code is very verbose. People can understand props, state, and top-down data flow perfectly well but still struggle with classes. The distinction between function and class components in React and when to use each one leads to disagreements even between experienced React developers.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">クラスは人も機械も混乱させる</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コードの再利用やコードの整理が難しくなるだけでなく、クラスがReactを学ぶ上で大きな障壁になることがわかりました。これがJavaScriptでどのように動作するかを理解しなければならず、それはほとんどの言語で動作する方法とは大きく異なります。イベントハンドラをバインドすることを覚えなければなりません。不安定な構文の提案がなければ、コードは非常に冗長になります。人々は、プロップ、ステート、トップダウンのデータフローは完璧に理解できても、クラスには苦労します。Reactにおける関数コンポーネントとクラスコンポーネントの区別と、それぞれをいつ使用するかについては、経験豊富なReact開発者の間でも意見の相違が見られます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.025549519235993357"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>To solve these problems, Hooks let you use more of React’s features without classes. Conceptually, React components have always been closer to functions. Hooks embrace functions, but without sacrificing the practical spirit of React. Hooks provide access to imperative escape hatches and don’t require you to learn complex functional or reactive programming techniques.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これらの問題を解決するために、HooksはクラスなしでReactの機能をより多く使用できるようにします。</block><block style="font-weight: bold;">概念的には、Reactのコンポーネントは常に関数に近いものでした。</block><block>Hooksは関数を受け入れますが、Reactの実用的な精神を犠牲にすることはありません。Hooksは、命令的なエスケープハッチへのアクセスを提供し、複雑な関数型またはリアクティブプログラミング技術を学ぶ必要はありません。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向については、おもにオブジェクト指向の習得に長い時間を費やしたオブジェクト指向ブームに生きたプログラマーによって強い擁護がなされてきたのですが、結局の所、われわれプログラマーコミュニティはエンジニアであり現実世界でその技術がうまく機能するかどうか？というのは生命線といえるものであり、実際にReactのような大規模なシェアをもつWebフレームワークでうまく行かなかった、という厳然たる事実は到底覆い隠されるものではありませんでした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>結果「より関数型的」なReactHooksが導入されたわけですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8758786043799525"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Hooksは関数を受け入れますが、Reactの実用的な精神を犠牲にすることはありません。Hooksは、命令的なエスケープハッチへのアクセスを提供し、複雑な関数型またはリアクティブプログラミング技術を学ぶ必要はありません。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とあるのは、ここも根源的な間違いを犯しており、ReactHooksはかなり複雑で習得コストが高く、筆者個人はまったく評価していません。実際に読者でも使いづらいと理解している人たちはきっと多いでしょうし、実際に品質に不満な第三者がさまざまなより本質的に関数型的なアプローチのサードパーティの代替物がリリースされています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9418237096136259" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9418237096136259"><prefix style="text-align: left; padding-right: 0.25em;">5.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト指向のメソッドと二項演算の関係</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とはいえ、JavaScriptはオブジェクト指向言語でもあり、オブジェクト指向は言語の根深い実装と直結しており、</block><block style="font-weight: bold;">オブジェクトとメソッドという構造が言語の基本</block><block>となっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミングをこれから志向していこうとしても、絶対に避けられるものではありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、JavaScriptにおいて切り離すことができないオブジェクト指向の表記は、関数型プログラミングで扱う</block><block style="font-weight: bold;">式</block><block>としてどのように解釈すべきでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptはオブジェクト指向言語でもあり、</block><block style="font-weight: bold;">オブジェクトとメソッドという構造が言語の基本</block><block>となっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば文字列は</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" style="color: inherit; text-decoration: inherit;">Stringオブジェクト</a></block><block>という構造で定義されていて、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/concat" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/concat" target="_blank" style="color: inherit; text-decoration: inherit;">String.concat(</a></block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/concat" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/concat" target="_blank" style="color: inherit; text-decoration: inherit;">)</a></block><block> というメソッドがあらかじめ実装されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.06337524994922616"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">concat()</block><block> メソッドは、文字列引数を呼び出し文字列に連結して、新しい文字列を返します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">"Hello"</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="string token">"World"</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// "HelloWorld"</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">"Hello"</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="string token">" "</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="string token">"world!"</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// "Hello world!"</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「へー</block><block style="font-weight: bold;">String</block><block>オブジェクトにこんな</block><block style="font-weight: bold;">concat</block><block>というオブジェクトがあるのか！初めて知った」という読者もいることでしょう。なぜならば我々はこんなオブジェクトメソッドのまわりくどい表記は無視して、シンプルにこう書くことを好むからですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">"Hello"</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="string token">"World"</block><block class=" token"> </block><block class="comment token">// "HelloWorld"</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">"Hello"</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="string token">" "</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="string token">"world!"</block><block class=" token"> </block><block class="comment token">// "Hello world!"</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まったく同じ意味と動作のコードなのですが、どちらが</block><block style="font-weight: bold;">書きやすく、読みやすく、デバッグもしやすい</block><block>のかは一目瞭然です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">String.concat(String) = String</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というオブジェクト指向のコードが</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">String + String = String</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という二項演算に置き換えられる、という事実から以下の事実が明らかになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向の</block><block style="font-weight: bold;">オブジェクト</block><block>は、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">(Sets)</block><block>に相当し、</block><block style="font-weight: bold;">二項演算の左側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向の</block><block style="font-weight: bold;">メソッド</block><block>は、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算子</a></block><block style="font-weight: bold;">(Binary operatior)</block><block>に相当しており、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向の</block><block style="font-weight: bold;">メソッド</block><block>の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%BC%95%E6%95%B0" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%BC%95%E6%95%B0" target="_blank" style="color: inherit; text-decoration: inherit;">引数</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" target="_blank" style="color: inherit; text-decoration: inherit;">Parameter</a></block><block style="font-weight: bold;">）</block><block>は、</block><block style="font-weight: bold;">二項演算の右側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、</block><block style="font-weight: bold;">オブジェクトのメソッドチェーンは、二項演算の連鎖と同じもの</block><block>である、という事実をかんたんなJavaScriptのコードから認識できるでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">"Hello"</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="string token">" "</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="string token">"world!"</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">"Hello"</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">+</block><block class=" token"> </block><block class="string token">" "</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">+</block><block class=" token"> </block><block class="string token">"world!"</block><block class=" token"> </block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算子（Binary operator）はオブジェクト指向のコードを置き換え可能な、強力な表記法です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、JavaScriptの配列データ構造を司る</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" style="color: inherit; text-decoration: inherit;">Arrayオブジェクト</a></block><block>には</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" target="_blank" style="color: inherit; text-decoration: inherit;">Array.concat()</a></block><block style="font-weight: bold;"> </block><block>というメソッドがあらかじめ実装されています。</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/concat" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/concat" target="_blank" style="color: inherit; text-decoration: inherit;">String.concat(</a></block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/concat" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/concat" target="_blank" style="color: inherit; text-decoration: inherit;">)</a></block><block>と</block><block style="font-weight: bold;">まったく同じメソッド名</block><block>であることに注目してください。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6051740274776165"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">concat()</block><block> メソッドは、2つ以上の配列を結合するために使用します。このメソッドは既存の配列を変更せず、新しい配列を返します。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> array1 </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="string token">"a"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"b"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"c"</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> array2 </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="string token">"d"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"e"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"f"</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> array3 </block><block class="operator token">=</block><block class=" token"> array1</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// ["a", "b", "c", "d", "e", "f"]</block></blocks></line></editarea></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同じメソッド名で、</block><block style="font-weight: bold;">機能面でもまったく同じ概念</block><block>であることが確認できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptでは、</block><block style="font-weight: bold;">文字列の結合（連結）のための二項演算子</block><block>が加法演算子のシンボルである</block><block style="font-weight: bold;"> + </block><block>を共有していることを考えると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">"Hello"</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="string token">"World"</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// "HelloWorld"</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">配列の結合（連結）のための二項演算子</block><block>も、同じように加法のシンボルである</block><block style="font-weight: bold;"> + </block><block>を共有していても別に問題なかったはずです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="string token">"a"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"b"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"c"</block><block class="punctuation token">]</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="punctuation token">[</block><block class="string token">"d"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"e"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"f"</block><block class="punctuation token">]</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// ["a", "b", "c", "d", "e", "f"]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こんなふうに。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかしこれは </block><block style="font-weight: bold;">"a,b,cd,e,f" </block><block>という変な結果になります。TypeScriptなら未然にちゃんとエラーが出ます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 550px; height: 111.321px; position: relative;"><img src="image-resources/700d26fd-6598-450e-848c-121e46199f77.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>文字列構造である</block><block style="font-weight: bold;">Strings</block><block>と配列データ構造である</block><block style="font-weight: bold;">Array</block><block>は異なるオブジェクトですが、同じ機能を目的とする同じメソッド名の</block><block style="font-weight: bold;">concat</block><block>を共有しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし前者では便利に直感的に二項演算子</block><block style="font-weight: bold;"> + </block><block>を使えていたのに、後者では使えません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実は、ここには別段</block><block style="font-weight: bold;">合理的な理由など存在せず、ただ単にJavaScript言語実装の気まぐれにすぎない</block><block>のです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>べき乗の二項演算子をES2016で新規導入したのと同じように今からでも新規実装できるような事案ではあるのでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">なんとかならないでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5248464187771116" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5248464187771116"><prefix style="text-align: left; padding-right: 0.25em;">5.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Ja</block><block>vaScriptで独自の二項演算子（Custom operator）を定義する</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptでは現在このような機能はありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-operator-overloading" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-operator-overloading" target="_blank" style="color: inherit; text-decoration: inherit;">tc39/proposal-operator-overloading</a></block><block>という既存の演算子のオーバーロードの検討はあるにはありますが、まったく活発ではないようですし、残念ながらTC39にはあまり期待できません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、多少のハック的手法を許容するのであれば、</block><block style="font-weight: bold;">なんとかはなります</block><block>。それが本書の手法です。すべては二項演算子を活用するという根幹の目的を達成するためです。</block><block style="font-weight: bold;">逆にこの最難関ポイントを突破することさえできれば、関数型プログラミングの見通しがクリアになり、視野は広がり、理解を深めることが容易になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、はじめてみましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>シンプルなお馴染みの </block><block style="font-weight: bold;">+</block><block> という二項演算子を用いた、加法の二項演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1 + 2 = 3</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1 + 2 + 3 = 6</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">＋</block><block>という二項演算子によって、JavaScriptのオブジェクトとして</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Number</block><block>と</block><block style="font-weight: bold;">Number</block><block>いう集合同士から</block><block style="font-weight: bold;">Number</block><block>が演算される、と代数的に定義されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、オブジェクト指向の世界に翻訳すると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Number" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank" style="color: inherit; text-decoration: inherit;">Numberオブジェクト</a></block><block>に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">＋(Number)</block><block>というメソッドが実装されていて</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Number</block><block>を返す</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということと同じです。つまり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="class-name token">Number</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"plus"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token">  </block><block class="comment token">// R is Right hand side or the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="keyword token">this</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// `this` is Left hand side of the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、</block><block style="font-weight: bold;">Number</block><block>オブジェクトに</block><block style="font-weight: bold;">plus</block><block>メソッドを拡張してやることで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とオブジェクト指向の表記で記述することも可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに、</block><block style="font-weight: bold;">plus</block><block>ではなく本当に </block><block style="font-weight: bold;">+ </block><block>という記号で拡張定義することも可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="class-name token">Number</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"+"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token">  </block><block class="comment token">// R is Right hand side or the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="keyword token">this</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// `this` is Left hand side of the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この場合は、オブジェクト指向的な </block><block style="font-size: 1.73em; font-weight: bold;">. </block><block>(ドット)記法ではSyntaxErrorになるので、代わりにプロパティ/連想配列形式でうまく書けます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と</block><block style="font-weight: bold;">車輪の再発明</block><block>をすることも可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同様に、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" style="color: inherit; text-decoration: inherit;">Arrayオブジェクト</a></block><block style="font-weight: bold;"> </block><block>に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">+ </block><block>という記号のプロパティで</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" target="_blank" style="color: inherit; text-decoration: inherit;">Array.concat()</a></block><block style="font-weight: bold;"> </block><block>というメソッドを拡張してしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="class-name token">Array</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"+"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token">        </block><block class="comment token">// R is Right hand side or the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="keyword token">this</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="constant token">R</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// `this` is Left hand side of the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このコードでは、</block><block style="font-weight: bold;">this.concat(R) </block><block>と単純に</block><block style="font-weight: bold;">Array</block><block>オブジェクトメソッドを</block><block style="font-weight: bold;">  + </block><block>というオブジェクトプロパティにコピーしています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その結果、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="string token">"a"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"b"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"c"</block><block class="punctuation token">]</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="punctuation token">[</block><block class="string token">"d"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"e"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"f"</block><block class="punctuation token">]</block><block class="punctuation token">;</block><block class=" token">      </block><block class="comment token">// ["a", "b", "c", "d", "e", "f"]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書くのは言語仕様的に無理でも、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="string token">"a"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"b"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"c"</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="string token">"d"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"e"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"f"</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// ["a", "b", "c", "d", "e", "f"]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書くことは可能になりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptで独自の二項演算子（Custom operator）を定義することに成功しました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" style="color: inherit; text-decoration: inherit;">Object.defineProperty()</a></block><block>では、デフォルトの設定では、プロパティの値は変更することはできず、プロパティ列挙可能性がfalseになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Enumerability_and_ownership_of_properties" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Enumerability_and_ownership_of_properties" target="_blank" style="color: inherit; text-decoration: inherit;">プロパティの列挙可能性と所有権</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.05395175447556011"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>列挙可能プロパティは、内部の列挙可能enumerableフラグが true に設定されているプロパティです。これは、単純な代入や初期化で作成されたプロパティのデフォルトです (Object.defineProperty で追加したプロパティはデフォルトで列挙可能性が false になります）。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8827090314747903" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8827090314747903"><prefix style="text-align: left; padding-right: 0.25em;">5.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">既存のオブジェクトメソッドを二項演算子として捉え直す</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上記のとおり、オブジェクトメソッド表記が、オブジェクトプロパティ/連想配列形式で表記できる、というのは、逆方向に応用することも可能です。つまり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">[</block><block class="string token">'concat'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書き直せるということで、すでに確認したとおり、</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.33661476976459426"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のオブジェクトは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">(Sets)</block><block>に相当し、</block><block style="font-weight: bold;">二項演算の左側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算子</a></block><block style="font-weight: bold;">(Binary operatior)</block><block>に相当しており、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドの</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%BC%95%E6%95%B0" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%BC%95%E6%95%B0" target="_blank" style="color: inherit; text-decoration: inherit;">引数</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" target="_blank" style="color: inherit; text-decoration: inherit;">Parameter</a></block><block style="font-weight: bold;">）</block><block>は、</block><block style="font-weight: bold;">二項演算の右側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という事実が、オブジェクトメソッド表記から一旦離れることにより、意識しやすくなります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん、既にオブジェクトメソッド表記で簡潔に書けていることは間違いないので、無理に書き直す必要性はないでしょうが、あくまで二項演算子として扱うことを常に意識するためには役立つでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同様の原理で、</block><block style="font-weight: bold;">Arrayオブジェクト</block><block>には最初から</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" style="color: inherit; text-decoration: inherit;">.mapメソッド</a></block><block>が実装されていることを考慮して、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">    </block><block class="comment token">// [2, 3, 4]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'map'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// [2, 3, 4]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、</block><block style="font-weight: bold;">Array.map(f) メソッドというのは、配列Arrayと関数f との間の二項演算子 map である</block><block>、と理解できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、ここで課題である関数型のコードを見てみましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">add</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> sum </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という、オブジェクト指向フォーマットで書かれた式は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'reduce'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と</block><block style="font-weight: bold;">二項演算</block><block>であることを強く意識したフォーマットへ書き直すこともできて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">reduce </block><block>は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>配列 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数 add</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の間の</block><block style="font-weight: bold;">二項演算</block><block>を司る</block><block style="font-weight: bold;">二項演算子</block><block>であると代数的に理解できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>（代数学についてはあとで説明）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まとめると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>加算演算子である </block><block style="font-weight: bold;">+ </block><block>は、NumberとNumberからNumberを生み出す</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Number + Number = Number</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>1 + 2 = 3</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>文字列結合としての </block><block style="font-weight: bold;">+ </block><block>は、とStringとStringからStringを生み出す</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">String + String = String</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>"Helllo" + "World!"  = "HelloWorld!"</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>配列結合としての </block><block style="font-weight: bold;">'concat' </block><block>は、ArrayとArrayからArrayを生み出す</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array 'concat' Array = Array</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>[1,2,3] ['concat'] ([4,5,6)] = [1, 2, 3, 4, 5, 6]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">'map'</block><block> は、ArrayとFuncttionからArrayを生み出す</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array 'map' Function = Array</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>[1,2,3] ['map'] (f)  = [2,3,4]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">'reduce'</block><block> は、ArrayとFuncttionからObjectを生み出す</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array 'reduce' Function = Object</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>Object はFunctionの働きによって変わる。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] ['reduce'] (add) = 55</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算子 'reduce' </block><block>についてはまだまだ謎につつまれているので、さらなる探求が続く章とともに必要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.3344446761981805" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.3344446761981805"><prefix style="text-align: left; padding-right: 0.5em;">6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>式の組み立ては依存グラフの構成</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6961942381562762" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6961942381562762"><prefix style="text-align: left; padding-right: 0.25em;">6.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>もっとも単純な関数型コード</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptは、</block><block style="font-weight: bold;">文（Statement）</block><block>と</block><block style="font-weight: bold;">式（Expression）</block><block>から構成されている。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">命令型プログラミング</block><block>のコードは、</block><block style="font-weight: bold;">for</block><block>ループなどの</block><block style="font-weight: bold;">文（Statement）</block><block>が中心、</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型プログラミング</block><block>のコードは、それに対して、</block><block style="font-weight: bold;">式（Expression）</block><block>が中心。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型コードは式（Expression）</block><block>である。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型プログラミングは式を組み立てていく作業。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">式</block><block>の中心となる素材が、</block><block style="font-weight: bold;">関数（Function）</block><block>と</block><block style="font-weight: bold;">二項演算子（Binary operator）。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（Function）</block><block>と</block><block style="font-weight: bold;">演算子（Operator）</block><block>は本当は</block><block style="font-weight: bold;">同じもの</block><block>である。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算子（Binary operator）はとてつもなく強力な記法</block><block>である。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが</block><block style="font-weight: bold;">一番の大枠のまとめ</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この大枠に付随する、どうしても説明しておかなければならなかった事柄も説明出来たと思います。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では実際に、</block><block style="font-weight: bold;">式を組み立てていく</block><block>として、</block><block style="font-weight: bold;">もっとも単純なコード</block><block>は何でしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>おそらく</block><block style="font-weight: bold;">もっとも単純な式</block><block>とは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">"hello"</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こんな感じでしょう。</block><block style="font-weight: bold;">これがもっとも単純な関数型のコードです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ではもう少し進んで、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class=" token"> </block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">より関数型コードらしくなりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なぜならば、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（Function）</block><block>と</block><block style="font-weight: bold;">演算子（Operator）</block><block>は本当は</block><block style="font-weight: bold;">同じもの</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;">  </block><block>とは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.44em; font-weight: bold;">ｆ(x, y) </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 250px; height: 269.71px; position: relative;"><img src="image-resources/90f1aa59-c5a1-4395-923f-54580c3a44b9.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であることはすでに確認済みなので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1 + 2 </block><block>は実際に</block><block style="font-weight: bold;">関数（Function）</block><block>を扱う</block><block style="font-weight: bold;">式（Expression）</block><block>である関数型コードです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>よく考えると、我々は全員、小学校の義務教育の範囲内ですでに関数型コードを書いていた、ということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.29510912267555045" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.29510912267555045"><prefix style="text-align: left; padding-right: 0.25em;">6.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>少し複雑な関数型コード</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらにもう少し複雑にしてみましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class=" token">　</block><block class="operator token">+</block><block class=" token"> </block><block class="number token">3</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この関数型コードは、数学の</block><block style="font-weight: bold;">＋</block><block>演算子のルールによって、実際には暗黙の了解で、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">)</block><block class=" token">　</block><block class="operator token">+</block><block class=" token"> </block><block class="number token">3</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と解釈されます。</block><block style="font-weight: bold;">数学であってもJavaScriptコードであっても変わりはありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-style: italic;">というより、</block><block style="font-weight: bold; font-style: italic;">関数型プログラミングの力の源泉は数式であり数学そのもの</block><block style="font-style: italic;">であるので、もし「プログラミングと数学は違う」であるとか「JavaScriptは純粋関数型言語ではないし関数型プログラミングは無理だ」という愚言が呈された場合は、それはたいてい</block><block style="font-weight: bold; font-style: italic;">強い命令型プログラミングへの傾倒によるメンタルブロック</block><block style="font-style: italic;">によるものですし、「このコードの振る舞いは数学とは異なる」と示された場合、本当にそうなのか慎重に吟味する必要がありますし、もし本当にそれが数学の振る舞いと異なるJavaScriptパーツなのであれば、関数型コードを書く場合は重大な障害になりうると認識し回避策を熟慮したほうが良いです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptの</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" target="_blank" style="color: inherit; text-decoration: inherit;">グループ化演算子 ( ) </a></block><block style="font-weight: bold;">は、式における演算の優先順位を制御します。これは数学の（）の振る舞いと等価です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このとき、式の構造は</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 479.23px; position: relative;"><img src="image-resources/103d0cb9-c09f-4ae6-a412-e1f3ae20e4c6.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように構成されました。上のコードと対比させると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x=1, y=2, z=3</block><block> です念の為。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8695947426292396" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8695947426292396"><prefix style="text-align: left; padding-right: 0.25em;">6.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">依存グラフ（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Dependency_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Dependency_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Dependency graph</a></block><block style="font-weight: bold;">）を構成する式（関数型コード）を書いてコンピュータに解決してもらう</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上記の図はグラフを構成しています。特に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">依存（関係）グラフ（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Dependency_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Dependency_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Dependency graph</a></block><block style="font-weight: bold;">）</block><block>などと呼ばれているものです。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.08847652129668648"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In mathematics, computer science and digital electronics, a </block><block style="font-weight: bold;">dependency graph </block><block>is a</block><block style="font-weight: bold;"> </block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_graph" target="_blank" style="color: inherit; text-decoration: inherit;">directed graph</a></block><block style="font-weight: bold;"> representing dependencies of several objects towards each other. It is possible to derive an evaluation order or the absence of an evaluation order that respects the given dependencies from the dependency graph.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学やコンピュータサイエンス、デジタルエレクトロニクスの分野で、</block><block style="font-weight: bold;">依存（関係）グラフ</block><block>は、</block><block style="font-weight: bold;">複数のオブジェクトの相互依存関係を表す有向グラフ （</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_graph" target="_blank" style="color: inherit; text-decoration: inherit;">directed graph</a></block><block style="font-weight: bold;">）</block><block>である</block><block style="font-weight: bold;">。依存関係グラフから、与えられた依存関係を尊重した評価順序や評価順序がないことを導き出すことができる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 411.75px; position: relative;"><img src="image-resources/447bee98-ab29-46de-965c-bc03ce74be13.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8188790158770207"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>依存関係グラフから、与えられた依存関係を尊重した評価順序や評価順序がないことを導き出すことができる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とあるとおり、関数型のコードでは、</block><block style="font-weight: bold;">演算子とともに</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" target="_blank" style="color: inherit; text-decoration: inherit;">グループ化演算子 ( ) </a></block><block style="font-weight: bold;">を組み合わせることで依存グラフを構成し、演算はその依存グラフを解決する形で進んでいきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">これは数学とほぼ全てのプログラミング言語において共通の仕様です。</block><block>「ほぼ全て」と留保したのは、別に作ろうと思えば一般的な数学規則としての（）の規則を無視したプログラミング言語を設計することはいくらだって可能だからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかしメジャーな言語たとえば、CやJava、JavaScript、Haskell、Pythonでは、この</block><block style="font-weight: bold;">グループ化演算子（）</block><block>の振る舞いは同一でしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class=" token">　</block><block class="operator token">+</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">4</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">5</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは演算ルールに則って暗黙に省略されてしまっている</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" target="_blank" style="color: inherit; text-decoration: inherit;">グループ化演算子 ( ) </a></block><block>を明示して</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">)</block><block class=" token">　</block><block class="operator token">+</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という式＝関数型コードについて</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 479.23px; position: relative;"><img src="image-resources/8a884ec1-075c-4d16-b6ad-147b578b5ce7.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>依存関係の矢印の向きの解釈を逆にして表現すると、さらに依存グラフらしく表現すると、こうなります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 427.807px; position: relative;"><img src="image-resources/9aa79464-8f92-472a-b5ce-64cd27eef31f.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プログラマーが関数型コードの</block><block style="font-weight: bold;">式を組み立てていく</block><block>ときは、このように</block><block style="font-weight: bold;">二項演算子</block><block>と</block><block style="font-weight: bold;">（）</block><block>を活用して</block><block style="font-weight: bold;">依存グラフを構成</block><block>します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptの実行環境は、式（Expression）によって構成された依存グラフを解析し、解決していくことによってコードを実行していきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">依存（関係）グラフ</block><block>はソフトウェア開発分野でありふれた概念で、パッケージマネージャーやあるいは</block><block style="font-weight: bold;">GitHubレポジトリ</block><block>などに見られます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://docs.github.com/ja/code-security/supply-chain-security/understanding-your-software-supply-chain/about-the-dependency-graph#dependency-graph-availability" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://docs.github.com/ja/code-security/supply-chain-security/understanding-your-software-supply-chain/about-the-dependency-graph#dependency-graph-availability" target="_blank" style="color: inherit; text-decoration: inherit;">依存関係グラフについて</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 255.871px; position: relative;"><img src="image-resources/77368eaf-3df3-4f3e-9835-a1f6b2ff715e.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.blog/jp/2021-03-12-secure-at-every-step-how-githubs-dependency-graph-is-generated/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.blog/jp/2021-03-12-secure-at-every-step-how-githubs-dependency-graph-is-generated/" target="_blank" style="color: inherit; text-decoration: inherit;">GitHubの依存関係グラフ~ 開発ワークフロー全体をセキュアに</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.539919367436335"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オープンソースの利用が加速する中で、プロジェクトにはおそらく何百もの依存関係が存在します。平均でリポジトリあたり203個のパッケージ依存関係が存在することがわかっています。アプリケーションにどのような依存関係があるのか、どうすれば実際に判断することができるのでしょうか。ドキュメントまたはStack Overflowからコードを自分のコードにコピペしすることも、依存関係と言えるでしょう。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>依存関係とは何か、また、GitHubの依存関係グラフでコードどのような影響があるかを確認する方法について、そして依存関係を安全に維持するために何をすべきかについて、詳しく見ていきましょう。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">依存関係の把握</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>依存関係はソフトウェアの実行に必要なバイナリです。これには、アプリケーション開発時に必要なバイナリ(多くの場合、開発依存関係と呼ばれる)と、実行時にアプリケーションの一部として実際に使用されるバイナリの両方が含まれていると考えることができます。また、スタックの他の部分にも依存関係があります。たとえば、アプリケーションがオペレーティングシステム上で実行される、などです。ただし、ここでは分かりやすくするために、これについては除外します。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>依存関係は、開発者がアプリケーションの一部として指定したときに環境に取り込まれます。これは通常、依存関係が宣言されるマニフェストファイル、または特定バージョンの依存関係が指定されるロックファイルの一部として実行されます。依存関係は推移的に含まれる場合もあります。つまり、特定の依存関係を指定していなくても、自分で指定した依存関係によって指定されている場合、結果的にその依存関係に依存することになります。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 262.207px; position: relative;"><img src="image-resources/bdaa41cb-06fb-4139-9dfa-932325f558b9.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが、ネットワーク効果を介して依存関係が急速に拡大する仕組みであり、アプリケーションが何に依存しているかを識別することが難しくなる理由ともなります。これを簡単に把握できるようにする一般的な方法は、</block><block style="font-weight: bold;">依存関係を非巡回グラフとして提示し、レビューすること</block><block>です。つまり、あるバイナリから別のバイナリへの依存の方向を示すことによって、一連の依存関係を表示します。ファミリーツリーと同様に、アプリケーションには直接引き込む依存関係があり(ファミリーツリーにおけるペアレントのようなもの)、その依存関係にも独自の依存関係(ペアレント関係の上位のようなもの)があります。ただし、類似しているのはそこまでです。複数の項目がすべて1つのバイナリにつながる可能性があり、また所有する依存関係の数に制限はありません。おそらく、”ペアレント関係のさらに上位の関係”よりもさらに前に遡ることができます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3626992063911616" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3626992063911616"><prefix style="text-align: left; padding-right: 0.25em;">6.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">計算不可能な巡回グラフ </block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向閉路グラフ</a></block><block> (</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Cycle_graph" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Cycle_graph" target="_blank" style="color: inherit; text-decoration: inherit;">directed cycle graph</a></block><block>)</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.25463541271100865"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが、ネットワーク効果を介して依存関係が急速に拡大する仕組みであり、アプリケーションが何に依存しているかを識別することが難しくなる理由ともなります。これを簡単に把握できるようにする一般的な方法は、</block><block style="font-weight: bold;">依存関係を非巡回グラフとして提示し、レビューすること</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とありますが、なぜ</block><block style="font-weight: bold;">依存関係</block><block>は、</block><block style="font-weight: bold;">非巡回グラフ</block><block>というものなっているのでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">非巡回グラフ</block><block>でないほうの</block><block style="font-weight: bold;">巡回グラフ</block><block>というのはプログラミングでもあまり耳慣れない言葉ですが、プログラマーに限らず一般の人でも聞いたことのある言葉でいうならば要するに</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%84%A1%E9%99%90%E3%83%AB%E3%83%BC%E3%83%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%84%A1%E9%99%90%E3%83%AB%E3%83%BC%E3%83%97" target="_blank" style="color: inherit; text-decoration: inherit;">無限ループ</a></block><block>のことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>グラフ理論では、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向閉路グラフ</a></block><block> (</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Cycle_graph" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Cycle_graph" target="_blank" style="color: inherit; text-decoration: inherit;">directed cycle graph</a></block><block>)などと呼びますが、別にここでは積極的にこの用語を覚える必要はありません。ただし、概念としては常識的に理解しておく必要はあるし、実際にこういうGitHubのドキュメントでも</block><block style="font-weight: bold;">非巡回グラフ</block><block>であるとか、その下敷きとなる重要概念として紹介されていたりはするので、用語が出てきたら、ああアレのことか、とわかれば、プログラマとしてもかなりのアドバンテージにはなります。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8601347933910171"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 150px; height: 150px; position: relative;"><img src="image-resources/0e0b0970-3180-4bae-944e-40149a44808c.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>有向閉路グラフ (英: directed cycle graph) は辺に向きのある閉路グラフであり、全ての辺は同じ向きになっている。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">閉路のない有向グラフは有向非巡回グラフ (英: directed acyclic graph) という。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E8%A8%88%E7%AE%97%E5%8F%AF%E8%83%BD%E6%80%A7%E7%90%86%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E8%A8%88%E7%AE%97%E5%8F%AF%E8%83%BD%E6%80%A7%E7%90%86%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">計算可能性理論</a></block><block>とも密接な関係があって、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%81%9C%E6%AD%A2%E6%80%A7%E5%95%8F%E9%A1%8C" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%81%9C%E6%AD%A2%E6%80%A7%E5%95%8F%E9%A1%8C" target="_blank" style="color: inherit; text-decoration: inherit;">チューリングマシンの停止問題</a></block><block>や、もっと一般的に</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%BE%AA%E7%92%B0%E8%AB%96%E6%B3%95" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%BE%AA%E7%92%B0%E8%AB%96%E6%B3%95" target="_blank" style="color: inherit; text-decoration: inherit;">循環論法</a></block><block>と同じことである、というのは直感的にも理解できるのではないでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以下は、循環論法の概念図ですが、</block><block style="font-weight: bold;">巡回グラフ</block><block>とまったく同じ概念であることは一目で理解できるでしょう。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 280px; position: relative;"><img src="image-resources/55a06270-7b71-4359-b992-c9feef6d8ae2.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">無限ループ、循環論法は、巡回グラフ、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向閉路グラフ</a></block><block style="font-weight: bold;"> (</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Cycle_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Cycle_graph" target="_blank" style="color: inherit; text-decoration: inherit;">directed cycle graph</a></block><block style="font-weight: bold;">)であり、計算不可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてこれが</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6421241407232681"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>依存関係グラフから、与えられた依存関係を尊重した評価順序や</block><block style="font-weight: bold;">評価順序がないこと</block><block>を導き出すことができる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のうち「</block><block style="font-weight: bold;">評価順序がないこと</block><block>を導き出す」という依存関係グラフのケースです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%81%9C%E6%AD%A2%E6%80%A7%E5%95%8F%E9%A1%8C" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%81%9C%E6%AD%A2%E6%80%A7%E5%95%8F%E9%A1%8C" target="_blank" style="color: inherit; text-decoration: inherit;">チューリングマシンの停止問題</a></block><block>でも</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.10266850761869883"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アラン・チューリングは1936年、停止性問題を解くアルゴリズムは存在しないことをある種の対角線論法のようにして証明した。 すなわち、そのようなアルゴリズムを実行できるチューリングマシンの存在を仮定すると「自身が停止するならば無限ループに陥って停止せず、停止しないならば停止する」ような別の構成が可能ということになり、矛盾となる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とあるように、原理的に、関数型コードであっても命令型であっても、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向閉路グラフ</a></block><block style="font-weight: bold;"> (</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Cycle_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Cycle_graph" target="_blank" style="color: inherit; text-decoration: inherit;">directed cycle graph</a></block><block style="font-weight: bold;">)</block><block>は計算不可能であるので、プログラミングのコードとして成立しません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.48328848254687573" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.48328848254687573"><prefix style="text-align: left; padding-right: 0.25em;">6.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">計算可能な有向非巡回グラフ（DAG）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ただし、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%86%8D%E5%B8%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%86%8D%E5%B8%B0" target="_blank" style="color: inherit; text-decoration: inherit;">再帰</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Recursion_(computer_science)" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Recursion_(computer_science)" target="_blank" style="color: inherit; text-decoration: inherit;">Recursion</a></block><block>）あるいは、もっと一般的に、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E8%87%AA%E5%B7%B1%E7%9B%B8%E4%BC%BC" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E8%87%AA%E5%B7%B1%E7%9B%B8%E4%BC%BC" target="_blank" style="color: inherit; text-decoration: inherit;">自己相似</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Self-similarity" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Self-similarity" target="_blank" style="color: inherit; text-decoration: inherit;">Self-similarity</a></block><block>）あるいは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%95%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%AB" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%95%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%AB" target="_blank" style="color: inherit; text-decoration: inherit;">フラクタル構造</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Fractal" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Fractal" target="_blank" style="color: inherit; text-decoration: inherit;">Fractal</a></block><block>）</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 479.43px; position: relative;"><img src="image-resources/35522473-b84e-495b-aef3-10a2ef321403.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もしくは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E8%87%AA%E5%B7%B1%E8%A8%80%E5%8F%8A" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E8%87%AA%E5%B7%B1%E8%A8%80%E5%8F%8A" target="_blank" style="color: inherit; text-decoration: inherit;">自己言及</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Self-reference" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Self-reference" target="_blank" style="color: inherit; text-decoration: inherit;">Self-reference</a></block><block>）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://plato.stanford.edu/entries/self-reference/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://plato.stanford.edu/entries/self-reference/" target="_blank" style="color: inherit; text-decoration: inherit;">https://plato.stanford.edu/entries/self-reference/</a></block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 199.2px; position: relative;"><img src="image-resources/8eb56400-d722-40d7-896d-6b1c7fb39416.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、OSのディレクトリツリー構造としても普通に使われています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 523.18px; position: relative;"><img src="image-resources/d01fdbc1-6d45-4869-b540-0d0521ec238a.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるディレクトリは別のディレクトリを含む再帰構造になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%BE%AA%E7%92%B0%E8%AB%96%E6%B3%95" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%BE%AA%E7%92%B0%E8%AB%96%E6%B3%95" target="_blank" style="color: inherit; text-decoration: inherit;">循環論法</a></block><block> 関連項目</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.16509572116297155"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">再帰プログラミング</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>形式的には、「ある用語の定義を与える表現の中にその用語自体が登場」しており、一見すると循環定義そのもののような構造で書かれているが、再帰で辿っていける鎖の端に具体的な値を決定できる要素が最低でもひとつ見つけられるように記述しておけば、プログラムとして立派に作動する。決定できる要素が与えられないと再帰プログラムとして成立せず、まともに動作しない。）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、無限ループは計算不能になって使い物にならないが、有限ループのグラフ構造なら計算可能だし、それは、</block><block style="font-weight: bold;">巡回グラフ</block><block>にはなっていない、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型プログラミングでは、フローの制御文のForやWhileをある種のステートメントのパターンとして繰り返し構造を表現しますが、関数型プログラミングでは、このように自然界や工学的な構造として普通に現れる、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%86%8D%E5%B8%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%86%8D%E5%B8%B0" target="_blank" style="color: inherit; text-decoration: inherit;">再帰</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Recursion_(computer_science)" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Recursion_(computer_science)" target="_blank" style="color: inherit; text-decoration: inherit;">Recursion</a></block><block>）構造を強く意識して、</block><block style="font-weight: bold;">依存グラフとして構成し、式で表現</block><block>します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">巡回グラフ</block><block>あるいは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向閉路グラフ</a></block><block> (</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Cycle_graph" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Cycle_graph" target="_blank" style="color: inherit; text-decoration: inherit;">directed cycle graph</a></block><block>)になっていない、つまり、計算可能で無限ループになってないグラフのことは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block style="font-weight: bold;">）</block><block>と呼びます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 429.73px; position: relative;"><img src="image-resources/babfe0c3-651c-4554-989f-899c8aa5014a.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5375789156612152"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">有向非巡回グラフ、有向非循環グラフ、有向無閉路グラフ（ゆうこうひじゅんかいグラフ、英: Directed acyclic graph, DAG）</block><block>とは、</block><block style="font-weight: bold;">グラフ理論における閉路のない有向グラフのこと</block><block>である。有向グラフは頂点と有向辺（方向を示す矢印付きの辺）からなり、辺は頂点同士をつなぐが、ある頂点</block><block style="font-weight: bold;">v</block><block>から出発し、辺をたどり、頂点</block><block style="font-weight: bold;">v</block><block>に戻ってこないのが</block><block style="font-weight: bold;">有向非巡回グラフ</block><block>である[1][2][3]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">有向非巡回グラフは様々な情報をモデル化するのに使われる。</block><block>有向非巡回グラフにおける到達可能性は半順序を構成し、全ての有限半順序は到達可能性を利用し有向非巡回グラフで表現可能である。順序づけする必要があるタスクの集合は、あるタスクが他のタスクよりも前に行う必要があるという制約により、頂点をタスク、辺を制約条件で表現すると有向非巡回グラフで表現できる。</block><block style="font-weight: bold;">トポロジカルソートを使うと、妥当な順序を手に入れることができる。</block><block>加えて、有向非巡回グラフは一部が重なるシーケンスの集合を表現する際の空間効率の良い表現として利用できる。また、</block><block style="font-weight: bold;">有向非巡回グラフはイベント間の因果関係を表現することにも使える。さらに、有向非巡回グラフはデータの流れが一定方向のネットワークを表現することにも使える。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block style="font-weight: bold;">, DAG）</block><block>は、</block><block style="font-weight: bold;">依存グラフ（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Dependency_graph#Recognizing_impossible_evaluations" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Dependency_graph#Recognizing_impossible_evaluations" target="_blank" style="color: inherit; text-decoration: inherit;">Dependency graph</a></block><block style="font-weight: bold;">）</block><block>のなかで</block><block style="font-weight: bold;">依存関係のサイクル（循環依存関係）が存在しない特殊なケース</block><block>であり、関数型プログラミングあるいは本稿で、依存グラフというときには、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block>）のことを意味します。</block><block style="font-weight: bold;">原理的に計算可能なのはこちらでしかない</block><block>からですね。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5321852409823391"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In a dependency graph, </block><block style="font-weight: bold;">the cycles of dependencies (also called circular dependencies) </block><block>lead to a situation in which</block><block style="font-weight: bold;"> no valid evaluation order exists</block><block>, because none of the objects in the cycle may be evaluated first.</block><block style="font-weight: bold;"> If a dependency graph does not have any circular dependencies, it forms a directed acyclic graph, and an evaluation order may be found by topological sorting.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>依存関係グラフにおいて、</block><block style="font-weight: bold;">依存関係のサイクル（循環依存関係とも呼ばれる）</block><block>は、サイクル内のどのオブジェクトも最初に評価することができないため、</block><block style="font-weight: bold;">有効な評価順序が存在しない</block><block>という状況を引き起こす。</block><block style="font-weight: bold;">依存グラフに循環依存性がない場合、それは有向非巡回グラフ（DAG）を形成し、トポロジカルソートによって評価順序を見つけることができる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-1 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3391563751194262"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">有向非巡回グラフはイベント間の因果関係を表現することにも使える。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、関数型プログラミングの文脈でいうと、</block><block style="font-weight: bold;">関数型リアクティブプログラミング（FunctionalReactiveProgramming）</block><block>つまりFRPのことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>演算可能な式を二項演算子やグループ化演算子</block><block style="font-weight: bold;">（）</block><block>を活用して代数的に構成することは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block style="font-weight: bold;">, DAG）</block><block>を構成することであり、これは</block><block style="font-weight: bold;">そのままイベント間の因果関係を表現することが可能</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際、前述のReactHooksでも取り扱っている対象であるReactコンポーネントの状態管理には、このDAGを使う</block><block style="font-weight: bold;">FRPの原理で実装すべき</block><block>でしたが、少なくと理念としては、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.21697185676514574"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Hooksは関数を受け入れますが、Reactの実用的な精神を犠牲にすることはありません。Hooksは、命令的なエスケープハッチへのアクセスを提供し、複雑な関数型またはリアクティブプログラミング技術を学ぶ必要はありません。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とFacebookの担当技術者自身が明言してしまっているのは非常に残念なことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">FRPについては関数型プログラミングを実世界のアプリケーションで活用するために必須</block><block>なので本稿の後半では詳細に説明します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7483786983161338" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7483786983161338"><prefix style="text-align: left; padding-right: 0.25em;">6.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">命令型プログラミングのフローをコントロールする文（Statement）は完全に不要だった　数式でやれば良い</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptの実行環境は、式（Expression）によって構成された依存グラフを解析し、解決していくことによってコードを実行</block><block>する能力が</block><block style="font-weight: bold;">数学の原理原則としてデフォルトで最初から装備されている</block><block>のであれば、</block><block style="font-weight: bold;">命令型プログラミングのフローをコントロール</block><block>する</block><block style="font-weight: bold;">文（Statement）</block><block>別の言葉では、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%88%B6%E5%BE%A1%E6%A7%8B%E9%80%A0" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%88%B6%E5%BE%A1%E6%A7%8B%E9%80%A0" target="_blank" style="color: inherit; text-decoration: inherit;">制御構造</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Control_flow" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Control_flow" target="_blank" style="color: inherit; text-decoration: inherit;">Control flow</a></block><block style="font-weight: bold;">）と呼ばれる仕組みってそもそも必要？？</block><block>となりますよね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型プログラミングのこれはいったいなんだったのか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 425.113px; position: relative;"><img src="image-resources/4ac64e5b-7358-406a-9633-17efc847b59b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block style="font-weight: bold;">, DAG）の</block><block>、</block><block style="font-weight: bold;">依存グラフ（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Dependency_graph#Recognizing_impossible_evaluations" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Dependency_graph#Recognizing_impossible_evaluations" target="_blank" style="color: inherit; text-decoration: inherit;">Dependency graph</a></block><block style="font-weight: bold;">）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を構築すれば良いのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際はまだ我々は積み残した課題、あるいは謎が残っています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上の命令形フロー文を式に置き換えた関数型コード</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">add</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> sum </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'reduce'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この二項演算子</block><block style="font-weight: bold;">'reduce'</block><block>の振る舞いの</block><block style="font-weight: bold;">謎</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3073128092574626" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3073128092574626"><prefix style="text-align: left; padding-right: 0.25em;">6.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算</block><block style="font-weight: bold;">'reduce'</block><block>の振る舞いの謎</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>都合上、長いので、このサンプルコードを</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'reduce'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>へ置き換えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">'reduce'</block><block> は、ArrayとFuncttionからObjectを生み出す二項演算子です。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array 'reduce' Function = Object</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">'reduce'</block><block>の二項演算の仕組みは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">左側のオペランド</block><block>として与えられた</block><block style="font-weight: bold;">配列集合</block><block>（</block><block style="font-weight: bold;">Array</block><block>）</block><block style="font-weight: bold;">[1, 2, 3, 4, 5]</block><block>を素材として並び順に従い、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">右側のオペランド</block><block>として与えられた</block><block style="font-weight: bold;">二項関数　add = (a, b) =&gt; a + b </block><block>によって順次演算を行います。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 427.807px; position: relative;"><img src="image-resources/9aa79464-8f92-472a-b5ce-64cd27eef31f.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">'reduce'</block><block>とは、まさにこのとおりの依存グラフを構成する二項演算子だったのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは日本語では</block><block style="font-weight: bold;">畳み込み</block><block>、英語では</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Fold_(higher-order_function)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Fold_(higher-order_function)" target="_blank" style="color: inherit; text-decoration: inherit;">fold</a></block><block>として、広く知られています。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6376854061736432" style="width: 738px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 700px; height: 475.607px; position: relative;"><img src="image-resources/442d0e53-4993-4b67-8cb7-948621f25cd2.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.07095531211162354"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In functional programming, fold (also termed reduce, accumulate, aggregate, compress, or inject) refers to a family of higher-order functions that analyze a recursive data structure and through use of a given combining operation, recombine the results of recursively processing its constituent parts, building up a return value. Typically, a fold is presented with a combining function, a top node of a data structure, and possibly some default values to be used under certain conditions. The fold then proceeds to combine elements of the data structure's hierarchy, using the function in a systematic way.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミングにおいて、fold（reduce、accumulate、aggregate、compress、inventとも呼ばれる）とは、</block><block style="font-weight: bold;">再帰的なデータ構造を分析し、与えられた結合操作を使用して、その構成部分を再帰的に処理した結果を再結合し、戻り値を構築する高階関数</block><block>のファミリーを指します。通常、フォールドには、結合関数、データ構造のトップノード、および特定の条件で使用されるデフォルト値が提示されます。フォールドはその後、データ構造の階層の要素を結合し、関数を体系的に使用していきます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block><block style="font-weight: bold;">Array.reduce</block><block>あるいはFoldという関数は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.007462415051193938"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型プログラミングでは、フローの制御文のForやWhileをある種のステートメントのパターンとして繰り返し構造を表現しますが、関数型プログラミングでは、このように自然界や工学的な構造として普通に現れる、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%86%8D%E5%B8%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%86%8D%E5%B8%B0" target="_blank" style="color: inherit; text-decoration: inherit;">再帰</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Recursion_(computer_science)" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Recursion_(computer_science)" target="_blank" style="color: inherit; text-decoration: inherit;">Recursion</a></block><block>）構造を強く意識して、</block><block style="font-weight: bold;">依存グラフとして構成し、式で表現</block><block>します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の具体例だったのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold; font-style: italic;">結合操作（combining operation）、高階関数（higher-order functions ）</block><block>という用語については、かなり重要なので、これも独立した章で詳細に説明していきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8450584795770222" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8450584795770222"><prefix style="text-align: left; padding-right: 0.25em;">6.8. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">依存グラフを構成する二項演算を最大限に活用した式の組み立て</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型コード</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">let</block><block class=" token"> sum </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">let</block><block class=" token"> x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">for</block><block class=" token"> </block><block class="punctuation token">(</block><block class="keyword token">let</block><block class=" token"> i </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">;</block><block class=" token"> i </block><block class="operator token">&lt;</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">;</block><block class=" token"> i</block><block class="operator token">++</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  x </block><block class="operator token">=</block><block class=" token"> x </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  sum </block><block class="operator token">=</block><block class=" token"> sum </block><block class="operator token">+</block><block class=" token"> x</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">sum</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、関数型コードに数学の式として洗練された理念で置き換えが可能で、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'reduce'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という式を書くことは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">4</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">5</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">6</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">7</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">8</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">9</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">10</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という式を書くことと等価で、これらの</block><block style="font-weight: bold;">式</block><block>をもって</block><block style="font-weight: bold;">まったく同じ依存グラフを構成している</block><block>、ということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、コントロールフローの文や変数を追跡しながら命令型コードを書くのではなく、</block><block style="font-weight: bold;">依存グラフを構成する二項演算を最大限に活用した式の組み立てに注力</block><block>することで、</block><block style="font-weight: bold;">バグの入り込む余地が極小の関数型コードを書くことが実現</block><block>できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.8875809361655769" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.8875809361655769"><prefix style="text-align: left; padding-right: 0.5em;">7. </prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型コードのif文switch文は場合分けの演算式にする</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.27454152909714313" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.27454152909714313"><prefix style="text-align: left; padding-right: 0.25em;">7.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型コードのif文</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptは、</block><block style="font-weight: bold;">文（Statement）</block><block>と</block><block style="font-weight: bold;">式（Expression）</block><block>から構成されている。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">命令型プログラミング</block><block>のコードは、</block><block style="font-weight: bold;">for</block><block>ループなどの</block><block style="font-weight: bold;">文（Statement）</block><block>が中心、</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型プログラミング</block><block>のコードは、それに対して、</block><block style="font-weight: bold;">式（Expression）</block><block>が中心。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型コードは式</block><block>である。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型プログラミングは式を組み立てていく作業。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">式の組み立ては依存グラフの構成。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptの実行環境は、式（Expression）によって構成された依存グラフを解析し、解決していくことによってコードを実行。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">式</block><block>の中心となる素材が、</block><block style="font-weight: bold;">関数</block><block>と</block><block style="font-weight: bold;">二項演算子。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（Function）</block><block>と</block><block style="font-weight: bold;">演算子（Operator）</block><block>は本当は</block><block style="font-weight: bold;">同じもの</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算子はとてつもなく強力な記法</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが一番の大枠のまとめです。ここで、</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">命令型プログラミング</block><block>のコードは、</block><block style="font-weight: bold;">for</block><block>ループなどの</block><block style="font-weight: bold;">文（Statement）</block><block>が中心、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、命令型のサンプルコードに即して書いたのですが、他に大事な制御文として、条件分岐を司る</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/if...else" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/if...else" target="_blank" style="color: inherit; text-decoration: inherit;">if文</a></block><block>があります。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5396077196022098"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>if 文は、指定された条件が truthy ならば文を実行します。条件が falsy なら、もう一方の文を実行することができます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>よく見るフローチャートの条件分岐ではこのようなダイアグラムのシンボルで表現されていることが多いです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 84.3243px; position: relative;"><img src="image-resources/cc077bbc-c549-4ffe-9921-16c76f63fc8d.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上の図はそっくり、電車の線路の分岐と同じ概念ですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 250px; height: 195.599px; position: relative;"><img src="image-resources/217549e5-0954-44de-beda-f5e2d9668d13.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちょうど電車がレールにそって、分岐器（ポイント）で進行方向が変わる、というようなことであり、その分岐されたそれぞれの行き先には、それぞれの命令文が用意されており、それを実行することになる、と。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">for文</block><block>によるルーブの中にもこの条件分岐の概念、つまりループの流れから脱出するための条件文が含まれており、全く同じことなのですが、このような条件分岐の文を書き連ねることによりコードの流れをコントロールしようとする命令型コードの問題点は、プログラマーがいちいち「電車に乗って分岐の流れに沿って進む必要がある」ことです。頭のなかで電車に乗って、ここがポイントだからこっちに流されて行って、と簡単なときはなんとかなるでしょうが、コードがどんどん複雑になってくると、まったくなんとかならない方が多く、本当にこのポイントでこちらに流されているのだろうか？この現在自分が居る位置は本当に正しいのだろうか？という</block><block style="font-weight: bold;">シミュレーションの正しさの検証が必要</block><block>となり、それはBUGの温床になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%96%E3%83%AC%E3%83%BC%E3%82%AF%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%96%E3%83%AC%E3%83%BC%E3%82%AF%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88" target="_blank" style="color: inherit; text-decoration: inherit;">ブレークポイント</a></block><block style="font-weight: bold;">とかバグトラッカー</block><block>というのは、関数型プログラミングで利用局面はない、とは言えないまでも、ほぼほぼこういう命令型の分岐やループを含むコードの流れを確認するために利用されており、これはデバッグにおいて大変な負担です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードではこのようなフローチャートの条件分岐の先に待機している「文（statment）を実行」という流れを制御するのではなく、あくまで式（expression）の組み立てをするだけなので、このような</block><block style="font-weight: bold;">if文は使いません</block><block>。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.03365739932928613" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.03365739932928613"><prefix style="text-align: left; padding-right: 0.25em;">7.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードのif式</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>遠回りのようですが、一旦、JavaScriptではない関数型プログラミングの流れが強い</block><block style="font-weight: bold;">Rust</block><block>では、if文がどうなっているのか？と確認すると、</block><block style="font-weight: bold;">ifは文ではなく、式になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://doc.rust-jp.rs/rust-by-example-ja/flow_control/if_else.html" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://doc.rust-jp.rs/rust-by-example-ja/flow_control/if_else.html" target="_blank" style="color: inherit; text-decoration: inherit;">if/else</a></block><block>（Rust By Example 日本語版）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.11087435757592634" style="width: 735px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 700px; height: 134.828px; position: relative;"><img src="image-resources/90397b61-5029-4a29-ba70-3e15c83a949c.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは純粋関数型言語である</block><block style="font-weight: bold;">Haskell</block><block>でも同様です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5297156106950474" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5297156106950474"><prefix style="text-align: left; padding-right: 0.25em;">7.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>条件 (三項) 演算子をつかう</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptには幸か不幸か</block><block style="font-weight: bold;">if文</block><block>をそのまま置き換える</block><block style="font-weight: bold;">if式</block><block>というものが存在しないので、代わりに</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" target="_blank" style="color: inherit; text-decoration: inherit;">条件 (三項) 演算子</a></block><block>を利用します。これは実質</block><block style="font-weight: bold;">if式</block><block>なのです。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.09104571023649188"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">条件 (三項) 演算子</block><block>は JavaScript では唯一の、3 つのオペランドをとる演算子です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>条件に続いて疑問符 (</block><block style="font-weight: bold;">?</block><block>)、そして条件が真値であった場合に実行する式、コロン (</block><block style="font-weight: bold;">:</block><block>) が続き、条件がfalsyであった場合に実行する式が最後に来ます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この演算子は、 </block><block style="font-weight: bold;">if 文</block><block>のショートカットとしてよく用いられます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>要するに場合分けをする演算子です。条件式があり、その結果、ある値が決定されます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>C言語の流れを汲むJavaScriptの</block><block style="font-weight: bold;">条件 (三項) 演算子</block><block>の書式は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">&lt;条件式&gt; ? &lt;真式&gt; : &lt;偽式&gt; </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>3項を結ぶ必要上、 (</block><block style="font-weight: bold;">?</block><block>)と (</block><block style="font-weight: bold;">:</block><block>) の2つの記号を使うが、演算子としては1つの演算子。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>１つの演算子ということは</block><block style="font-weight: bold;">＋</block><block>プラス演算子で</block><block style="font-weight: bold;">１＋１</block><block>というような演算を行っているのと同じです。コードのフローの条件分岐ではなくて、値の場合分けという演算、計算をしているのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">true ? 999 : 0 </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書けば、&lt;条件式&gt;はtrueで真なので、この式の値は</block><block style="font-weight: bold;">999</block><block>になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">false ? 999 : 0 </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ならば、値は</block><block style="font-weight: bold;">０</block><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>三項演算子は命令型の</block><block style="font-weight: bold;">if文</block><block>と比べて可読性が悪いという誤解がありますが、改行すればいいだけで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型の</block><block style="font-weight: bold;">if文による条件分岐</block><block>と関数型の</block><block style="font-weight: bold;">条件演算子の式</block><block>とを対比すると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">命令型　if文</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">let</block><block class=" token"> x</block><block class="punctuation token">;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">if</block><block class=" token"> </block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> x </block><block class="operator token">=</block><block class=" token"> </block><block class="string token">"true"</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class=" token"> </block><block class="keyword token">else</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> x </block><block class="operator token">=</block><block class=" token"> </block><block class="string token">"false"</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class=" token"> </block><block class="comment token">//  x == "true" </block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型　条件演算子の式</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> x </block><block class="operator token">=</block><block class=" token"> </block><block class="boolean token">true</block><block class=" token">  </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="operator token">?</block><block class=" token"> </block><block class="string token">"true"</block><block class=" token">  </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">:</block><block class=" token"> </block><block class="string token">"false"</block><block class="punctuation token">;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">//  x == "true" </block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とかなり</block><block style="font-weight: bold;">条件演算子の式</block><block>のほうがかなり簡潔に記述できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型では、まず</block><block style="font-weight: bold;">x</block><block>という後から中身になにか値を入れる変数を</block><block style="font-weight: bold;">let</block><block>でとりあえず準備しておいて、</block><block style="font-weight: bold;">if文</block><block>によってフローを分岐させる、このサンプルコードの場合、かんたんのため条件式が</block><block style="font-weight: bold;">true</block><block>と決め打ちされているので、分岐先の代入命令文により </block><block style="font-weight: bold;">x = "true" </block><block>と値が代入されています。破壊的代入を行っているわけで、実際このコードで</block><block style="font-weight: bold;">let</block><block>ではなく破壊的代入を明示的に禁止する</block><block style="font-weight: bold;">const</block><block>とするとエラーになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型ではフローをコントロールするのではなく、</block><block style="font-weight: bold;">「値の場合わけ」</block><block>をします。命令型コードのような </block><block style="font-weight: bold;">x</block><block> はとりあえず空で、後から命令文によってなにか値が代入される、というフローは存在しません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最初から</block><block style="font-weight: bold;">const</block><block>で決め打ちです。決め打ちはしますが、どの値で決め打ちするのかを</block><block style="font-weight: bold;">条件演算子</block><block>によってその場で場合分けするのです。この場合かんたんのため条件式が</block><block style="font-weight: bold;">true</block><block>と決め打ちされているので、</block><block style="font-weight: bold;">x = "true" </block><block>と値が決定されます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>偶数と奇数を場合分けするコードは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> number </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> result </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">number </block><block class="operator token">%</block><block class=" token"> </block><block class="number token">2</block><block class=" token"> </block><block class="operator token">===</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">)</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">         </block><block class="operator token">?</block><block class=" token"> </block><block class="string token">"偶数"</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">         </block><block class="punctuation token">:</block><block class=" token"> </block><block class="string token">"奇数"</block><block class="punctuation token">;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">result</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">//奇数 </block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となり、すべて式の組み立てと宣言で構成されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7880435630661138" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7880435630661138"><prefix style="text-align: left; padding-right: 0.25em;">7.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>より洗練され強力なパターンマッチングをつかう</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">if文</block><block>を</block><block style="font-weight: bold;">条件演算子</block><block>の式で簡潔に書き直せることは理解できた、では、より複雑な条件を扱う</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/switch" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/switch" target="_blank" style="color: inherit; text-decoration: inherit;">switch文</a></block><block>はどうする？という懸念があることでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これも関数型コードでは当然のように</block><block style="font-weight: bold;">式</block><block>で構築します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>例えば、switch文を利用して、HTMLのDOMのタグの種類を判別する以下のような命令型のコードがあります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">switch</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">type</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">case</block><block class=" token"> </block><block class="string token">'text'</block><block class="punctuation token">:</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">case</block><block class=" token"> </block><block class="string token">'span'</block><block class="punctuation token">:</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">case</block><block class=" token"> </block><block class="string token">'p'</block><block class="punctuation token">:</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="string token">'text'</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">case</block><block class=" token"> </block><block class="string token">'btn'</block><block class="punctuation token">:</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">case</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">:</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、関数型の</block><block style="font-weight: bold;">式</block><block>として（オブジェクトメソッドとしての表記ではあるが）書き直せます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">sanitize</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">name</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function token">match</block><block class="punctuation token">(</block><block class=" token">name</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">with</block><block class="punctuation token">(</block><block class="string token">'text'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'span'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'p'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="string token">'text'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">with</block><block class="punctuation token">(</block><block class="string token">'btn'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">otherwise</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> name</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">sanitize</block><block class="punctuation token">(</block><block class="string token">'span'</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">   </block><block class="comment token">// 'text'</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">sanitize</block><block class="punctuation token">(</block><block class="string token">'p'</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">      </block><block class="comment token">// 'text'</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">sanitize</block><block class="punctuation token">(</block><block class="string token">'button'</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 'button'</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう形式を、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%83%9E%E3%83%83%E3%83%81%E3%83%B3%E3%82%B0" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%83%9E%E3%83%83%E3%83%81%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">パターンマッチング</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Pattern_matching" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Pattern_matching" target="_blank" style="color: inherit; text-decoration: inherit;">Pattern Matching</a></block><block>）と呼びます。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9316925829805682"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>いくつかの高水準プログラミング言語には、多分岐の一種で、場合分けと同時に構成要素の取り出しのできる言語機能があり、パターンマッチと呼ばれている。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/gvergnaud/ts-pattern" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://github.com/gvergnaud/ts-pattern" target="_blank" style="color: inherit; text-decoration: inherit;">ts-pattern</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4867977643114998"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Write </block><block style="font-weight: bold;">better</block><block> and </block><block style="font-weight: bold;">safer conditions</block><block>. Pattern matching lets you express complex conditions in a single, compact </block><block style="font-weight: bold;">expression</block><block>. Your code becomes </block><block style="font-weight: bold;">shorter</block><block> and </block><block style="font-weight: bold;">more readable</block><block>. </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">What is Pattern Matching?</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Pattern Matching</block><block> is a technique coming from </block><block style="font-weight: bold;">functional programming languages to declaratively write conditional code branches based on the structure of a value.</block><block> This technique has proven itself to be much more powerful and much less verbose than</block><block style="font-weight: bold;"> imperative alternatives (if/else/switch statements)</block><block> especially when branching on complex data structures or on several values.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Pattern Matching is implemented in Haskell, Rust, Swift, Elixir and many other languages. There is </block><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-pattern-matching" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-pattern-matching" target="_blank" style="color: inherit; text-decoration: inherit;">a tc39 proposal</a></block><block> to add Pattern Matching to the EcmaScript specification, but it is still in stage 1 and isn't likely to land before several years (if ever). Luckily, pattern matching can be implemented in userland. ts-pattern Provides a typesafe pattern matching implementation that you can start using today.</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8995903489228683"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">より良い、より安全な条件（condition）</block><block>を書きましょう。パターンマッチングを使えば、複雑な複数の条件を、単一のコンパクトな</block><block style="font-weight: bold;">式（expression）</block><block>で表現できます。</block><block style="font-weight: bold;">コードが短くなり、読みやすくなります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">パターンマッチングとは何ですか？</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パターンマッチング</block><block>とは、</block><block style="font-weight: bold;">関数型プログラミング言語に由来する技術で、値の構造に基づいて条件付きコードの分岐を宣言的に記述</block><block>するものです。この技術は、特に複雑なデータ構造や複数の値で分岐する場合に、</block><block style="font-weight: bold;">命令型の代替物（if/else/switch文）</block><block>よりもはるかに強力で、はるかに冗長性が少ないことが証明されています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パターンマッチングは、Haskell、Rust、Swift、Elixir、その他多くの言語で実装されています。EcmaScript仕様にパターンマッチングを追加するための</block><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-pattern-matching" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-pattern-matching" target="_blank" style="color: inherit; text-decoration: inherit;">tc39プロポーザル</a></block><block>がありますが、まだステージ1であり、この先数年は実装されそうにありません（仮に実装されることがあったとしても）。幸運なことに、パターンマッチングはユーザーランドで実装することができます。</block><block style="font-weight: bold;"> ts-pattern</block><block>は、タイプセーフなパターンマッチングの実装を提供しており、今日から使い始めることができます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-1 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>素晴らしいですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上の関数型コードで大枠の</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">const sanitize = name =&gt;</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、ユーザが自由に定義した関数と引数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">switch/case</block><block>文に相当する主要なパーツは</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">match</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">with</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">otherwise</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の３つです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">match</block><block class="punctuation token">(</block><block class=" token">name</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">with</block><block class="punctuation token">(</block><block class="string token">'text'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'span'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'p'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="string token">'text'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">with</block><block class="punctuation token">(</block><block class="string token">'btn'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">otherwise</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> name</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>おそらく多くの読者にとっては初めて見るAPIなので何のことかよくわからないでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで役立つ強力なフレームワークが、</block><block style="font-weight: bold;">二項演算/二項演算子</block><block>で</block><block style="font-weight: bold;">式</block><block>を構築するという関数型コードの一貫した理念です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>すでに我々が確認したとおり、オブジェクト指向の表記は以下のように</block><block style="font-weight: bold;">二項演算</block><block>に変換できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.34645439539361567"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のオブジェクトは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">(Sets)</block><block>に相当し、</block><block style="font-weight: bold;">二項演算の左側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算子</a></block><block style="font-weight: bold;">(Binary operatior)</block><block>に相当しており、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドの引数は、</block><block style="font-weight: bold;">二項演算の右側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">'map'</block><block> は、ArrayとFuncttionからArrayを生み出す二項演算子です。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array 'map' Function = Array</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>[1,2,3] ['map'] (f)  = [2,3,4]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という馴染み深いケースを思い出しましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このAPIは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Array</block><block class="punctuation token">.</block><block class="function token">of</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//[5]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">     </block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">     </block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">     </block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">h</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>に非常に近い構造をしています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向の言葉で言うと、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array.of() </block><block>メソッドは、 </block><block style="font-weight: bold;">Array</block><block>インスタンスを生成します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学の言葉で言うと、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array.of() </block><block>は</block><block style="font-weight: bold;">単項演算子</block><block>であり、</block><block style="font-weight: bold;">配列集合</block><block>を生み出します。</block><block style="font-weight: bold;">5 → [5]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして </block><block style="font-weight: bold;">'map'</block><block> は、Arrayである </block><block style="font-weight: bold;">[5]</block><block> とFuncttionである </block><block style="font-weight: bold;">f</block><block> からArrayを生み出す</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パターンマッチングの式に当てはめて考えると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">match</block><block class="punctuation token">(</block><block class=" token">name</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">     </block><block class="punctuation token">.</block><block class="function token">with</block><block class="punctuation token">(</block><block class="string token">'text'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'span'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'p'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="string token">'text'</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array.of() </block><block>が単項演算子であり、</block><block style="font-weight: bold;">配列集合</block><block>を生み出したのと同様に、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">match()</block><block>は単項演算子であり、</block><block style="font-weight: bold;">パターンマッチングの単位となる集合</block><block>を生み出します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>生み出された配列オブジェクトを</block><block style="font-weight: bold;">Array</block><block>型と表現するならば、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パターンマッチングオブジェクトは</block><block style="font-weight: bold;">PatternMatch</block><block>型と表現しても良いでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この場合は、</block><block style="font-weight: bold;">String</block><block>型の引数として渡ってきた</block><block style="font-weight: bold;">name</block><block>が</block><block style="font-weight: bold;">PatternMatch</block><block>型に格上げされた、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが、</block><block style="font-weight: bold;">二項演算の左側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">PatternMatch.with() </block><block>メソッドあるいは単に</block><block style="font-weight: bold;"> 'with' </block><block>は、</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">('text', 'span', 'p', () =&gt; 'text')</block><block>が、</block><block style="font-weight: bold;">二項演算の右側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算の生成物</block><block>は、あたらしい</block><block style="font-weight: bold;">PatternMatch</block><block>型の</block><block style="font-weight: bold;">値</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、命令型コードでは漫然と</block><block style="font-weight: bold;">swtich/case文</block><block>として処理していたものが、関数型コードでは</block><block style="font-weight: bold;">二項演算子で式を構築する</block><block>、というフレームワークに統合されます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型で書いていた</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">swtich/case文</block><block>のコードは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型のコードでは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1 + 2 = 3 </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1 + 2 + 3 = 6 </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array 'map' f = Array</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array 'map' f 'map' f = Array</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array 'reduce' f = Object</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という二項演算の式と同様に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">PatternMatch 'with' pattern = PatternMatch</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">PatternMatch 'with' pattern 'with' pattern = PatternMatch</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">PatternMatch 'otherwise' pattern = Object</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という</block><block style="font-weight: bold;">二項演算の式を組み立てる作業</block><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block><block style="font-weight: bold;">式の組み立ては依存グラフの構成</block><block>であり、</block><block style="font-weight: bold;">依存グラフ（Dependency graph）を構成する式（関数型コード）を書いてコンピュータに解決してもらう</block><block>だけなので、その他の余計なことを考慮する必要は原理的にありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さて、この素晴らしいパターンマッチングAPIは、前述の通りJavaScript標準では実装されていないのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/gvergnaud/ts-pattern" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://github.com/gvergnaud/ts-pattern" target="_blank" style="color: inherit; text-decoration: inherit;">ts-pattern</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というライブラリで提供されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>作者の紹介ブログは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://dev.to/gvergnaud/bringing-pattern-matching-to-typescript-introducing-ts-pattern-v3-0-o1k" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://dev.to/gvergnaud/bringing-pattern-matching-to-typescript-introducing-ts-pattern-v3-0-o1k" target="_blank" style="color: inherit; text-decoration: inherit;">Bringing Pattern Matching to TypeScript 🎨 Introducing TS-Pattern v3.0</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.npmjs.com/package/ts-pattern" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.npmjs.com/package/ts-pattern" target="_blank" style="color: inherit; text-decoration: inherit;">https://www.npmjs.com/package/ts-pattern</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.463430386274265" style="width: 640px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 136.278px; position: relative;"><img src="image-resources/8bdd1e39-d04c-45a7-ac40-74e5adcdafdd.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 73px; position: relative;"><img src="image-resources/a96148ae-c5bf-499b-865a-bb95736608f0.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>npmでも目下人気急上昇で、JavaScriptに</block><block style="font-weight: bold;">パターンマッチング（Pattern Maching）</block><block>機能を提供するライブラリとしては品質は傑出しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" target="_blank" style="color: inherit; text-decoration: inherit;">#StateOfJS 2020: What do you feel is currently missing from JavaScript?</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-style: italic;">2020サーベイ:JavaScriptに欠けていると感じるものは？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 750px; height: 318.381px; position: relative;"><img src="image-resources/1cdd9850-a8dd-4652-aae3-4690489414c8.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Pattern MachingはTop3</block><block>となっており、現在のJavaScriptプログラマーにとって特段に需要が高い機能であることが確認できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型言語としては見做されることはないPythonですら最近では結構強力なパターンマッチングが実装されている</block><block>ようです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://atmarkit.itmedia.co.jp/ait/articles/2110/08/news035.html" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://atmarkit.itmedia.co.jp/ait/articles/2110/08/news035.html" target="_blank" style="color: inherit; text-decoration: inherit;">Python 3.10の新機能：「構造的パターンマッチ」とは</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.45963379014390293" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.45963379014390293"><prefix style="text-align: left; padding-right: 0.25em;">7.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>【余談】TC39の没落</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、JavaScript言語標準として</block><block style="font-weight: bold;">パターンマッチング（Pattern Maching）</block><block>はどうなっているのでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-pattern-matching" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-pattern-matching" target="_blank" style="color: inherit; text-decoration: inherit;">tc39/proposal-pattern-matching</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.811387965859397" style="width: 429px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 141.129px; position: relative;"><img src="image-resources/30f359f8-5373-402c-a3d9-37b1abf1a965.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>現在State:1で、多分あと数年はかかるでしょう。というかStage:4まで到達してその後完成するのか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それ以前にTC39プロポーザル版Pattern Matchingは、どのような実装になっているのでしょう？</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9207398299272656" style="width: 769px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 750px; height: 587.95px; position: relative;"><img src="image-resources/2f724fa2-0ac3-4d6c-ab80-8f95287450b0.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>うーん、なんか</block><block style="font-weight: bold;">文（Statememt）</block><block>になっていますね・・・</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>元々Pattern Matchingとは関数型プログラミングが発祥であり、</block><block style="font-weight: bold;">式（expression）</block><block>であるのが普通なのに。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/gvergnaud/ts-pattern" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://github.com/gvergnaud/ts-pattern" target="_blank" style="color: inherit; text-decoration: inherit;">ts-pattern</a></block><block>のコードでは純粋に簡潔に二項演算の式として構築できることとは対照的です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">sanitize</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">name</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function token">match</block><block class="punctuation token">(</block><block class=" token">name</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">with</block><block class="punctuation token">(</block><block class="string token">'text'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'span'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'p'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="string token">'text'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">with</block><block class="punctuation token">(</block><block class="string token">'btn'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">otherwise</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> name</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは何を意味するのか？というと、</block><block style="font-weight: bold;">ts-pattern</block><block>ライブラリの作者はPattern Matchingがなんたるかという本質とそれによってもたらされる効能、</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">より良い、より安全な条件（condition）</block><block>を書きましょう。パターンマッチングを使えば、複雑な複数の条件を、単一のコンパクトな</block><block style="font-weight: bold;">式（expression）</block><block>で表現できます。</block><block style="font-weight: bold;">コードが短くなり、読みやすくなります。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パターンマッチング</block><block>とは、</block><block style="font-weight: bold;">関数型プログラミング言語に由来する技術で、値の構造に基づいて条件付きコードの分岐を宣言的に記述</block><block>するものです。この技術は、特に複雑なデータ構造や複数の値で分岐する場合に、</block><block style="font-weight: bold;">命令型の代替物（if/else/switch文）</block><block>よりもはるかに強力で、はるかに冗長性が少ないことが証明されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を良く理解していてその強い理念と情熱をもって実装しているのに対して、本件のTS39プロポーザルの参加者は、需要がありそうだしやってみよう、標準化されたら自分の功績にもなるし、という功名心（全員がそうではないが筆者が直接やりとりしたこともあるアカウントの参加者（あまりレベルが高いプログラマとは見做せない）を見てたらおそらくそんなところ）で、さらに背景には「JavaScriptはあくまで命令型の文の集まりとして記述されるべきだ」という信念のようなものが共有されており、</block><block style="font-weight: bold;">switch/case</block><block>文との後方互換性を維持したかったのだろうと想像します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>いずれにせよ将来、仮に</block><block style="font-weight: bold;">パターンマッチング（Pattern Maching）</block><block>がTC39によって標準化されたとしても、関数型プログラミングを指向するのであれば、</block><block style="font-weight: bold;">ts-pattern</block><block>ライブラリを使い続けるべきでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>筆者の体感から言うと、JavaScriptの策定団体であるTC39はもはやまともに機能していません。近頃特に酷くなってきています。私見ですが、プログラミング技術界隈は、設計理念を共有する一握りの極めて強力で機動性の高い小規模の技術者集団によって大きな進歩を成し遂げています。TC39のすべてとはとても言えませんが、多くのプロポーザルでは、まっとうな設計理念を持たず技術水準がけして高いとは見受けられず、名誉欲や承認欲求だけが強いコントロールフリークがあれこれ仕様に口出す行為を大変楽しんでおられて、高い理念と技術力があるライブラリ作者などの主張正論がもはや通らなくなってしまっています。</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wiktionary.org/wiki/%E8%88%B9%E9%A0%AD%E5%A4%9A%E3%81%8F%E3%81%97%E3%81%A6%E8%88%B9%E5%B1%B1%E3%81%AB%E7%99%BB%E3%82%8B" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wiktionary.org/wiki/%E8%88%B9%E9%A0%AD%E5%A4%9A%E3%81%8F%E3%81%97%E3%81%A6%E8%88%B9%E5%B1%B1%E3%81%AB%E7%99%BB%E3%82%8B" target="_blank" style="color: inherit; text-decoration: inherit;">船頭多くして船山に登る</a></block><block>の状態です。その結果、当初、高い知見でコミュニティを牽引してきたプログラマが馬鹿らしくなって将来性のあるプロポーザルから離脱してしまっています。それがこのPattern Matchingプロポーザルにもよく反映されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" target="_blank" style="color: inherit; text-decoration: inherit;">#StateOfJS 2020: What do you feel is currently missing from JavaScript?</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-style: italic;">2020サーベイ:JavaScriptに欠けていると感じるものは？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の</block><block style="font-weight: bold;">2位</block><block>は、</block><block style="font-weight: bold;">Standard Library</block><block>ですが、これはまさに</block><block style="font-weight: bold;">nodejs</block><block>と</block><block style="font-weight: bold;">npm</block><block>のことですね。全部、外部の誰かが本来JavaScriptに必要な標準機能を提供しているわけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>V8 JavaScriptエンジン上に構築されたランタイム環境としてデファクトスタンダードとなった</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://nodejs.org/ja/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://nodejs.org/ja/" target="_blank" style="color: inherit; text-decoration: inherit;">nodeJS</a></block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 90.9091px; position: relative;"><img src="image-resources/aac94e14-98c9-40eb-adf6-ce8d8dbff2c3.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>nodeから利用できるパッケージマネージャとライブラリエコである</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.npmjs.com/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.npmjs.com/" target="_blank" style="color: inherit; text-decoration: inherit;">npm</a></block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 100px; height: 61.3861px; position: relative;"><img src="image-resources/1aad43e6-b6f8-496e-9d00-e01c48dbd3f5.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように外部で実現されたnpmライブラリをWebブラウザで利用するために、最初に</block><block class="role-hyper-link" data-hyper-link-url="https://browserify.org/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://browserify.org/" target="_blank" style="color: inherit; text-decoration: inherit;">Browserify</a></block><block>が発明され、その後、</block><block class="role-hyper-link" data-hyper-link-url="https://webpack.js.org/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://webpack.js.org/" target="_blank" style="color: inherit; text-decoration: inherit;">Webpack</a></block><block>などが登場してきました。この混乱の背景には</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E6%88%A6%E4%BA%89" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E6%88%A6%E4%BA%89" target="_blank" style="color: inherit; text-decoration: inherit;">ブラウザ戦争</a></block><block>による標準化の困難さがあったので、TC39の没落というのは公平ではない気がしますし、現在では</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Modules" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Modules" target="_blank" style="color: inherit; text-decoration: inherit;">ES Modules(esm</a></block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Modules" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Modules" target="_blank" style="color: inherit; text-decoration: inherit;">)</a></block><block>が登場したので状況は良い方向へ流動的です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もっとも大きな流れはnodeのオリジナルの開発者であるRyan Dahlが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://youtu.be/M3BM9TB-8yA" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://youtu.be/M3BM9TB-8yA" target="_blank" style="color: inherit; text-decoration: inherit;">Node.jsに関する10の反省点 - Ryan Dahl - JSConf EU</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>として、新しいJS/TSランタイム</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/Deno" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/Deno" target="_blank" style="color: inherit; text-decoration: inherit;">Deno</a></block><block>をリリースしました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/denoland/deno" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/denoland/deno" target="_blank" style="color: inherit; text-decoration: inherit;">https://github.com/denoland/deno</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://deno.land/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://deno.land/" target="_blank" style="color: inherit; text-decoration: inherit;">https://deno.land/</a></block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 112.19px; position: relative;"><img src="image-resources/f1df367f-0afd-4214-bc82-6e6dd4462c55.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Denoはnpmから脱却し、標準化されたESModuleを利用しています。もはやWebpack系の回り道は必要ありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2020サーベイの1位は、</block><block style="font-weight: bold;">StaticTyping</block><block>で圧倒的です。これはまさに</block><block class="role-hyper-link" data-hyper-link-url="https://www.typescriptlang.org/" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://www.typescriptlang.org/" target="_blank" style="color: inherit; text-decoration: inherit;">TypeScript</a></block><block>の登場と人気ぶりに直結しています。JavaScriptに型（Type）をつけて欲しいという要望は昔から強く有りましたが実現することはありませんでした。遅々としたJavaScriptの進歩に業を似やした技術者達は、それぞれ独自のAltJSと呼ばれるJavaScriptの代替となる言語を開発しました。TypeScriptはそのうちMicrosoftの</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%A2%E3%83%B3%E3%83%80%E3%83%BC%E3%82%B9%E3%83%BB%E3%83%98%E3%83%AB%E3%82%B9%E3%83%90%E3%83%BC%E3%82%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%A2%E3%83%B3%E3%83%80%E3%83%BC%E3%82%B9%E3%83%BB%E3%83%98%E3%83%AB%E3%82%B9%E3%83%90%E3%83%BC%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">アンダース・ヘルスバーグ</a></block><block> (</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Anders_Hejlsberg" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Anders_Hejlsberg" target="_blank" style="color: inherit; text-decoration: inherit;">Anders Hejlsberg</a></block><block> ）が設計し人気を博し現在主流となったAltJSです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/TypeScript#%E8%83%8C%E6%99%AF" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/TypeScript#%E8%83%8C%E6%99%AF" target="_blank" style="color: inherit; text-decoration: inherit;">TypeScript/背景</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.03373316572786589"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptはECMAScript 2015において期待されている機能を先取りするようなものであるともいえる。ECMAScriptの提案にないがTypeScriptに独自に搭載された機能として、静的言語解析を可能にする静的型付け機能(使用するかどうかは選択可能)がある。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" target="_blank" style="color: inherit; text-decoration: inherit;">#StateOfJS 2020: What do you feel is currently missing from JavaScript?</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-style: italic;">2020サーベイ:JavaScriptに欠けていると感じるものは？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>第3位の</block><block style="font-weight: bold;">Pattern Maching</block><block>に続く4位は</block><block style="font-weight: bold;">パイプラインオペレータ（Pipeline Operator）</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>結構、僅差とは言えて、このあたりが突出しているようです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプラインオペレータ（Pipeline Operator）</block><block>も例にもれずTC39プロポーザルがあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-pipeline-operator" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-pipeline-operator" target="_blank" style="color: inherit; text-decoration: inherit;">tc39/proposal-pipeline-operator</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.27929201276138516" style="width: 424px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 79.7203px; position: relative;"><img src="image-resources/bca2fc11-37ac-4347-9fae-8534cddb1d0e.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>現在Stage:2で、最近昇格しましたが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-pipeline-operator/blob/main/HISTORY.md#2017-09" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-pipeline-operator/blob/main/HISTORY.md#2017-09" target="_blank" style="color: inherit; text-decoration: inherit;">Brief history of the JavaScript pipe operator</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptパイプオペレータの簡単な歴史</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>でまとめられているように、2015年より、このひとつのオペレータのために議論が紛糾しており現在かなり悪い方向へ迷走中です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプラインオペレータ（Pipeline Operator）</block><block>は、もともと関数型言語である</block><block class="role-hyper-link" data-hyper-link-url="https://docs.microsoft.com/ja-jp/dotnet/fsharp/what-is-fsharp" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://docs.microsoft.com/ja-jp/dotnet/fsharp/what-is-fsharp" target="_blank" style="color: inherit; text-decoration: inherit;">F#</a></block><block>で広く活用されてきた数学的な意味での</block><block style="font-weight: bold;">二項演算子</block><block>なのですが、非常に愚かなことに、前述の「JavaScriptは命令型の文で書かれなければならない」それが多数派だからという信念の影響で、具体的には</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/async_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" style="color: inherit; text-decoration: inherit;">Async/Await</a></block><block>（これ自体が</block><block style="font-weight: bold;">式</block><block>である</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" target="_blank" style="color: inherit; text-decoration: inherit;">Peomise.then()</a></block><block>のSyntaxSugar（糖衣構文）である命令型の</block><block style="font-weight: bold;">文</block><block>であり、同じ信念のもとに生み出された）との相性が悪い、との理由で長らく提案され続けていたF#Styleは却下され、現在HackStyleなる醜悪なものとなりStage2に進み、コミュニティからの大反発を食らっています。関数型プログラミングコミュニティはHackStyleの偽</block><block style="font-weight: bold;">パイプラインオペレータ（Pipeline Operator）</block><block>が仮に本当に実装されても受け入れることはないでしょう。これは</block><block style="font-weight: bold;">パターンマッチング（Pattern Maching）</block><block>とまったく同じ状況と言えなくもないですが、厄介なのは、ユーザーランドレベルのライブラリで上手く提供されて活用できる</block><block style="font-weight: bold;">パターンマッチング（Pattern Maching）</block><block>とは異なり</block><block style="font-weight: bold;">パイプラインオペレータ（Pipeline Operator）</block><block>は言語レベルでハードコーディングされた二項演算子なのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">教訓: もはやTC39はアテにならない。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>静的型（StaticTyping）、パターンマッチング（Pattern Matching）、パイプラインオペレータ（Pipeline Operator）、それから演算子のオーバーロード（Operator overloading）、演算子のユーザー定義（Custom Operator）など関数型プログラミングを指向する上で本当に欲しい機能がJavaScriptのネイティブ実装として提供される希望はかなり少ないでしょう。しかし、</block><block style="font-weight: bold;">オブジェクト指向への評価の没落と反比例するように関数型プログラミングへの注目度は年々高まり続けている</block><block>、それはこういう</block><block style="font-weight: bold;">パターンマッチング（Pattern Maching）</block><block>という関数型由来の技術への需要の高まりという現象を見ても明らかです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.8675819653045533" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.8675819653045533"><prefix style="text-align: left; padding-right: 0.5em;">8. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミングで複雑性との闘いに勝利するためのたったひとつの方法</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9824215454144327" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9824215454144327"><prefix style="text-align: left; padding-right: 0.25em;">8.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ある式を別の式に交換する</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'reduce'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という式を書く</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように説明すると、命令型のコードはそんな配列データ</block><block style="font-weight: bold;">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</block><block>ベタ書きなどしていないし、100とか1000とか10万とか大きな数になればどう適応させるつもりなのか？コードの汎用性に欠けるのではないか？という指摘がきっとあることでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それは実は結構些細なことで、関数型コードはあくまで</block><block style="font-weight: bold;">式</block><block>なので、その</block><block style="font-weight: bold;">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</block><block>を、具体的な値ではない、より汎用度の高い</block><block style="font-weight: bold;">式</block><block>に交換してしまえば簡単に解決できる問題です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>目的の配列操作のやり方は複数あるようですが、</block><block class="role-hyper-link" data-hyper-link-url="https://stackoverflow.com/questions/39924644/es6-generate-an-array-of-numbers" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://stackoverflow.com/questions/39924644/es6-generate-an-array-of-numbers" target="_blank" style="color: inherit; text-decoration: inherit;">ES6 - generate an array of numbers</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>任意の数の自然数の配列を得られる</block><block style="font-weight: bold;">natural</block><block>関数を用意して</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">natural</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">n</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="operator token">...</block><block class="function token">Array</block><block class="punctuation token">(</block><block class=" token">n</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">keys</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">add</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> sum </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">natural</block><block class="punctuation token">(</block><block class="number token">10</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">sum</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 55</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ベタ書きだった配列の式を</block><block style="font-weight: bold;"> natural(10)</block><block> という</block><block style="font-weight: bold;">別の式へ置き換えれば良い</block><block>でしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように関数型プログラミングは、</block><block style="font-weight: bold;">コード全体が式の列挙</block><block>であり、それぞれの</block><block style="font-weight: bold;">式の一部分</block><block>も</block><block style="font-weight: bold;">別の式</block><block>と</block><block style="font-weight: bold;">交換可能</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同様に、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">natural</block><block class="punctuation token">(</block><block class="number token">10</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'reduce'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>において、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">reduce </block><block>は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>配列 </block><block style="font-weight: bold;">natural(10)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数 </block><block style="font-weight: bold;">add</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の間の</block><block style="font-weight: bold;">二項演算</block><block>を司る</block><block style="font-weight: bold;">二項演算子</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という事実を考えると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>左辺オペランドである</block><block style="font-weight: bold;">natural(10)</block><block>を別の値に交換できたのと同様に、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>右辺オペランドである</block><block style="font-weight: bold;">add</block><block>も別の関数へ交換可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、加算のかわりに乗算である</block><block style="font-weight: bold;">multiply</block><block>に交換して、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">multiply</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> product </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">natural</block><block class="punctuation token">(</block><block class="number token">4</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">multiply</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// 1 * 2 * 3 * 4</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">product</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 24</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすることも自由に可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">コードの堅牢性が担保されたまま、バグの心配をせずに可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7517544995571566" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7517544995571566"><prefix style="text-align: left; padding-right: 0.25em;">8.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>「等しい（Equality）」という超強力な概念</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">厳密に正しさが担保されておりバグがないコードを書く超強力な手段として、式の構築にのみ注力する関数型コードを書くことが機能する背景には、式が「交換可能」である、という概念があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上の事例では、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という具体的な値が、より抽象的で汎用的な構造であった、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">natural(10)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という値に交換できた、さらに、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">natural(4)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という別の値に交換してもコードが壊れないことは事前によくわかっている、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">add</block><block>という関数は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">multiply</block><block>という別の関数に交換してもコードが壊れないことは事前によくわかっている、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このあたりの</block><block style="font-weight: bold;">「コードの堅牢性の担保」があるバグのでないコードを書くにあたって大変に強力で重要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「交換可能」</block><block>ということは、数学的にもうちょっと突き詰めて考えてみると、それは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「等しい（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Equality_(mathematics)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Equality_(mathematics)" target="_blank" style="color: inherit; text-decoration: inherit;">Eqaulity</a></block><block style="font-weight: bold;">）」</block><block>ということです。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7415332163037971"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In mathematics, equality is a relationship between two quantities or, more generally two mathematical expressions, asserting that the quantities have the same value, or that the expressions represent the same mathematical object. </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学では、2つの量、より一般的には2つの数学的表現の間の関係で、量が同じ値を持つこと、あるいは表現が同じ数学的対象を表すことを主張することを「等価性」という。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プログラミングでは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] </block><block>＝ </block><block style="font-weight: bold;">natural(10)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という値の等価性もあり、もうひとつ、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">natural(10)</block><block>という値が</block><block style="font-weight: bold;">natural(4)</block><block>あるいは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">add</block><block>という関数は</block><block style="font-weight: bold;">multiply</block><block>という別の関数に交換可能というのは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その</block><block style="font-weight: bold;">型（Type）＝集合</block><block>が等しい、という原理があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（Type）＝集合</block><block>については、後述しますが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">値が等しい、型（Type）が等しい式を構築する、というアプローチは、「コードの堅牢性の担保」があるバグのないコードを書くためのたったひとつの方法と言い切っても過言ではありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7238137646417211" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7238137646417211"><prefix style="text-align: left; padding-right: 0.25em;">8.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア危機に対する工学的アプローチの根本的な問題</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E5%8D%B1%E6%A9%9F" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E5%8D%B1%E6%A9%9F" target="_blank" style="color: inherit; text-decoration: inherit;">ソフトウェア危機</a></block><block>ということがありました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.28600683618461287"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア危機（ソフトウェアきき、Software Crisis）とは、高性能化するハードウェアのコストは低下する一方、複雑化するソフトウェア開発のコストは上昇する傾向が続くことにより、将来的にソフトウェアの供給が需要を満たせなくなるという考え方である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この用語は、ソフトウェア工学がまだ十分に確立していなかった頃によく使われた。その根本には、正しく、可読性が高く、検証可能なコンピュータプログラムを書くことが困難であるという事情がある。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8845370404181729"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">ソフトウェア危機の解決手法</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア危機は（少なくとも一部は）様々な手法や方法論の開発によって解決されてきつつある。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向、カプセル化</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>構造化プログラミング</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>ガベージコレクション</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>アジャイルソフトウェア開発</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>マルチスレッド・プログラミング</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェアコンポーネント</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェアプロトタイピング</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>デザインパターン</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>統合開発環境、RAD</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>バグ管理システム、バージョン管理システム</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>反復型開発</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>Model View Controller</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし</block><block style="font-weight: bold;">フレデリック・ブルックスが『銀の弾などない』</block><block>で記している通り、</block><block style="font-weight: bold;">「本質的な複雑性」</block><block>に対して生産性を向上させるような技法は存在しないと言われている。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この、フレデリック・ブルックスによる</block><block style="font-weight: bold;">『銀の弾などない』（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/No_Silver_Bullet" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/No_Silver_Bullet" target="_blank" style="color: inherit; text-decoration: inherit;">No Silver Bullet</a></block><block style="font-weight: bold;"> ）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、巷でやたらに引用されています。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9501718771382814"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">『銀の弾などない— ソフトウェアエンジニアリングの本質と偶有的事項』</block><block>（ぎんのたまなどない ソフトウェアエンジニアリングのほんしつとぐうゆうてきじこう、英: </block><block style="font-weight: bold;">No Silver Bullet - essence and accidents of software engineering</block><block>）とは、フレデリック・ブルックスが1986年に著した、ソフトウェア工学の広く知られた論文である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>原論文は英語である。日本語では『銀の弾丸はない』と、翻訳されることもある。ブルックスは、「銀の弾丸」（Silver Bullet）として、魔法のように、すぐに役に立ちプログラマの生産性を倍増させるような技術や実践 (特効薬) は、今後10年間（論文が著された1986年の時点から10年の間）は現れないだろう、と記載した。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>銀の弾とは、銀で作られた弾丸であり、西洋の信仰において狼人間、悪魔を撃退する際に用いるものとされていた。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ブルックスの警句は、非常に多く引用されており、生産性、品質、制御に適用されている。ブルックスは、自身の警句で述べているプログラマの生産性の限界は</block><block style="font-weight: bold;">「本質的な複雑性」（essential complexity）</block><block>についてのみ当てはまると述べているのであり、「偶有的な複雑性」（accidental complexity）に対する挑戦については支持している。ブルックスは、偶有的な複雑性については著しい改善（おそらく今後10年間で10倍以上）がみられるだろうと述べている。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ブルックスは、この論文で本質的な複雑性に対処するために、次のことを提案している（詳細は#提案を参照）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>購入できるものをあえて構築しないようにするために大市場を利用する。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア要件の確立に際し、開発循環計画の一部として、迅速なプロトタイピングを使用する。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実行と使用とテストが行われるにつれて、より多くの機能をシステムに追加しながら、ソフトウェアを有機的（系統的）に成長させる。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>若い世代の素晴らしいコンセプトデザイナーを発掘し、育てる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">『銀の弾などない』（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/No_Silver_Bullet" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/No_Silver_Bullet" target="_blank" style="color: inherit; text-decoration: inherit;">No Silver Bullet</a></block><block style="font-weight: bold;"> ）</block><block>という主張内容については、2021年現在でもソフトウェア業界で広く引用されるわりには、現在の知見で本当にまだ権威として引用できるほどなのか？と考えてみると個人的にはまったく評価していません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>おそらくブルックスの主張はオブジェクト指向全盛にむけた時代においては、たしかにそれは宣伝されるほどには銀の弾丸ではなかった、という意味では正しいです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト指向をはじめとする、数学の範疇外での余剰の工学的発明は複雑さの元凶でしかない</block><block>という意味では正しい。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>デザインパターン</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>Model View Controller</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのも、まるでソフトウェア開発における冴えた知見の結晶のように持ち上げられることがありますが、これらは数学の範疇外の余剰の工学的発明で、本質的には複雑性を増しているにすぎず、筋の悪い間違った工学的アプローチです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block><block style="font-weight: bold;">ブルックスがいう「本質的な複雑性」とは数学のことなど語っているわけではまったくない</block><block>ので、彼の主張は的外れであると言えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.4871513534882719" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.4871513534882719"><prefix style="text-align: left; padding-right: 0.25em;">8.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>『銀の弾丸』等しくすれば組合せ爆発（Combinatorial explosion）を回避可能</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">『銀の弾などない』（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/No_Silver_Bullet" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/No_Silver_Bullet" target="_blank" style="color: inherit; text-decoration: inherit;">No Silver Bullet</a></block><block style="font-weight: bold;"> ）</block><block>というのは誤りで、</block><block style="font-weight: bold;">『銀の弾』</block><block>は実は存在していて、それは</block><block style="font-weight: bold;">「等しい（Equality）」</block><block>という超強力な概念に他なりません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア開発、あるいはプログラミングにおける</block><block style="font-weight: bold;">「本質的な複雑性」（essential complexity）</block><block>とは、ほんとうは</block><block style="font-weight: bold;">数学的な概念で、それは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%84%E5%90%88%E3%81%9B%E7%88%86%E7%99%BA" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%84%E5%90%88%E3%81%9B%E7%88%86%E7%99%BA" target="_blank" style="color: inherit; text-decoration: inherit;">組合せ爆発</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Combinatorial_explosion" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Combinatorial_explosion" target="_blank" style="color: inherit; text-decoration: inherit;">Combinatorial explosion</a></block><block style="font-weight: bold;">）</block><block>です。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.14512339945390584"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>組合せ爆発（くみあわせばくはつ、英: combinatorial explosion）は、計算機科学、応用数学、情報工学、人工知能などの分野では、解が組合せ（combination）的な条件で定義される離散最適化問題で、問題の大きさn に対して解の数が指数関数や階乗などのオーダーで急激に大きくなってしまうために、有限時間で解あるいは最適解を発見することが困難になることをいう。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>念の為ですが、解決したい課題の対象が本質的に原理的に内在している組み合わせ爆発のことではなく、</block><block style="font-weight: bold;">プログラマが書いてしまいがちで、不注意な、あるいは、不適切な工学的アプローチによるコード自体が本質的には回避可能であるのにもかかわらず、非合理的に、無用に、組みわせ爆発を起こしている</block><block>、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>無用な組合せ爆発を回避するためには、可能な限り要素を減らすこと、そして何より肝要なことは、本質的に等しいものは、等しいものとして徹底的に扱うこと、さらに必ずしも等しくなければならない要請はなくても、等しいものとして扱うことができるならば等しくする、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">要素が1つしかなければ、組み合わせというのが原理的に存在しないので、組合せ爆発による問題など起こりようがありません。しかし、それぞれの要素に区別があるときは、指数関数的に組み合わせ爆発が起こり収集はつかなくなります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">数学の範疇外での余剰の工学的発明は複雑さの元凶でしかない</block><block>のですが、裏を返すと</block><block style="font-weight: bold;">「唯一正しい工学的アプローチ」『銀の弾丸』</block><block>とは、</block><block style="font-weight: bold;">組合せ爆発を回避する「等しくする」という数学的アプローチ</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際これはソフトウェア開発に限らない一般的な工学的な問題として死活問題なので、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%B7%A5%E6%A5%AD%E8%A6%8F%E6%A0%BC" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%B7%A5%E6%A5%AD%E8%A6%8F%E6%A0%BC" target="_blank" style="color: inherit; text-decoration: inherit;">工業規格</a></block><block>という人類の経験則による知見が存在しています。ISO規格（国際標準化機構）があり、JIS（日本）など各国に規格が決定されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>身近なところでは、電気のコンセントプラグがあり、特にプログラマにとっては、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%A6%E3%83%8B%E3%83%90%E3%83%BC%E3%82%B5%E3%83%AB%E3%83%BB%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%AB%E3%83%BB%E3%83%90%E3%82%B9" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%A6%E3%83%8B%E3%83%90%E3%83%BC%E3%82%B5%E3%83%AB%E3%83%BB%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%AB%E3%83%BB%E3%83%90%E3%82%B9" target="_blank" style="color: inherit; text-decoration: inherit;">USB</a></block><block>規格があります。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 212.4px; position: relative;"><img src="image-resources/df86fc82-9d25-4147-a169-3c6ca02db909.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.09422115256741792"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ユニバーサル・シリアル・バス（英: Universal Serial Bus、略称：USB、ユーエスビー）は、コンピュータ等の情報機器に周辺機器を接続するためのシリアルバス規格の1つ。ユニバーサル（汎用）の名の示す通り、ホスト機器にさまざまな周辺機器を接続するためのペリフェラルバス規格であり、最初の規格となるUSB 1.0は1996年に登場した。現在のパーソナルコンピュータ周辺機器において、最も普及した汎用インターフェース規格である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん、Appleのように独自の規格、つまり自前機器のエコだけで完結すれば良いだろう、というのもひとつの主張ではありますが、最近排除されて消費者に歓迎された事案は記憶に新しいところです。</block><block class="role-hyper-link" data-hyper-link-url="https://www.broadcreation.com/blog/news/83958.html" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.broadcreation.com/blog/news/83958.html" target="_blank" style="color: inherit; text-decoration: inherit;">EU スマートフォンの充電器をUSB Type-Cへ統一へ（iPhoneのLightningケーブル排除へ）</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>USBなどを使っているとわかりますが、こういう「等しさ」が担保されている概念は</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Building_block" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Building_block" target="_blank" style="color: inherit; text-decoration: inherit;">Building block</a></block><block>になります。その定められた規格内に収まってさえおれば、それらは「等しい」と見做され、自由自在に組み合わせても壊れる心配がありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.lego.com/ja-jp" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.lego.com/ja-jp" target="_blank" style="color: inherit; text-decoration: inherit;">LEGO</a></block><block>もそれ自体がBuilding blockであり単一の接続規格で、自由自在に構築可能です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 200px; position: relative;"><img src="image-resources/c0777480-a775-4d5f-8734-6f7af5beb5f1.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、関数型コードの式においては、実際に、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">multiply</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> product </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">natural</block><block class="punctuation token">(</block><block class="number token">4</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">multiply</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// 1 * 2 * 3 * 4</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">product</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 24</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">reduceという二項演算子の左右オペランドはあらかじめ型（Type）が規定（規格化）されているので、規格に合致してさえおれば、別の値、式に置き換えても全く問題がないことは予め保証されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆に、TypeScriptで、タイプエラーが出るということは、間違った型、間違った規格の組み合わせを行ったということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、繰り返しとなりますが、二項演算子というのは、関数のことなので、根源的には</block><block style="font-weight: bold;">関数には厳密な型がある</block><block>、ということにほかなりません。この事実については、後述する関数それ自体の解説の章で詳説します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>根源的には、</block><block style="font-weight: bold;">コードの要素を等しく保つというアプローチ</block><block>で、</block><block style="font-weight: bold;">コードをUSBデバイスやLEGOブロックのように自由自在に組み合わせてもコードは壊れないと担保される、バグのでないメンテナンス性の高いコードをプログラミング可能</block><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にこれだけJavaScriptに型付けするTypeScriptが絶大な支持を得ており、Rustなどモダンな言語でも型があたりまえな現状において、</block><block style="font-weight: bold;">型（Type）の等しさを担保することは、銀の弾丸（SilverBullet）だ</block><block>、と主張されることは滅多にありません。おそらく、ただ</block><block style="font-weight: bold;">『銀の弾などない』（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/No_Silver_Bullet" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/No_Silver_Bullet" target="_blank" style="color: inherit; text-decoration: inherit;">No Silver Bullet</a></block><block style="font-weight: bold;"> ）</block><block>とさえ発言しておけば、有る一定の論争がある場所で曖昧な玉虫色の決着をつけることに有用な方便としてだけ乱用されており、そこそこ達観した知見のあるポーズを取ることができるからだろうと想像するしかありませんが、現代においては、あまり意味のない言及です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（Type）</block><block>とは、等しくする効用の対象として顕著な事例ですが、</block><block style="font-weight: bold;">「等しい（Equality）」という概念の超強力さはもっと一般的なもので他にも色々ある</block><block>のでそれについては別に後述します。とりあえず当面は型のことを説明していきましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.3669104561524148" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.3669104561524148"><prefix style="text-align: left; padding-right: 0.5em;">9. </prefix><blocks><baselineblock class="inline"></baselineblock><block>型（Type）は何故そんなに役に立つのか？そもそも型（Type）とは何か？</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6764697962214139" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6764697962214139"><prefix style="text-align: left; padding-right: 0.25em;">9.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptコミュニティでは型（Type）が圧倒的に重要視されている</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" target="_blank" style="color: inherit; text-decoration: inherit;">#StateOfJS 2020: What do you feel is currently missing from JavaScript?</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-style: italic;">2020サーベイ:JavaScriptに欠けていると感じるものは？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 750px; height: 318.381px; position: relative;"><img src="image-resources/1cdd9850-a8dd-4652-aae3-4690489414c8.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Type_system#Static_type_checking" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Type_system#Static_type_checking" target="_blank" style="color: inherit; text-decoration: inherit;">Static Typing</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9D%99%E7%9A%84%E5%9E%8B%E4%BB%98%E3%81%91" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9D%99%E7%9A%84%E5%9E%8B%E4%BB%98%E3%81%91" target="_blank" style="color: inherit; text-decoration: inherit;">静的型付け</a></block><block>）が圧倒的な需要があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その根本的な理由は、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.48621724846184144"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プログラミングでは、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] </block><block>＝ </block><block style="font-weight: bold;">natural(10)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という値の等価性もあり、もうひとつ、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">natural(10)</block><block>という値が</block><block style="font-weight: bold;">natural(4)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">add</block><block>という関数は</block><block style="font-weight: bold;">multiply</block><block>という別の関数に交換可能というのは、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その</block><block style="font-weight: bold;">型（Type）＝集合</block><block>が等しい、という原理があります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（Type）＝集合</block><block>については、後述しますが、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">値が等しい、型（Type）が等しい式を構築する、というアプローチは、「コードの堅牢性の担保」があるバグのないコードを書くためのたったひとつの方法と言い切っても過言ではありません。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7623311516968485"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードの式においては、実際に、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">multiply</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> product </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">natural</block><block class="punctuation token">(</block><block class="number token">4</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">multiply</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// 1 * 2 * 3 * 4</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">product</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 24</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">reduceという二項演算子の左右オペランドはあらかじめ型（Type）が規定（規格化）されているので、規格に合致してさえおれば、別の値、式に置き換えても全く問題がないことは予め担保されています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆に、TypeScriptで、タイプエラーが出るということは、間違った型、間違った規格の組み合わせを行ったということになります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8033673426850929"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>根源的には、</block><block style="font-weight: bold;">コードの要素を等しく保つというアプローチ</block><block>で、</block><block style="font-weight: bold;">コードをUSBデバイスやLEGOブロックのように自由自在に組み合わせてもコードは壊れないと担保される、バグのでないメンテナンス性の高いコードをプログラミング可能</block><block>となります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということです。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9826899580192503" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9826899580192503"><prefix style="text-align: left; padding-right: 0.25em;">9.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>巷によくある、よくわからない、型（Type）の説明</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>多くのプログラマーは多かれ少なかれ「どうやらプログラミングの世界には</block><block style="font-weight: bold;">型（Type）</block><block>があって、それをコードの中で明示的に宣言するかしないかが、ときどき大きな議論になっているようだ」というところから</block><block style="font-weight: bold;">型（Type）</block><block>の概念に遭遇することでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 150px; height: 33.1094px; position: relative;"><img src="image-resources/5128a80b-e455-451d-a4a7-70fabe518e7b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptは</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%8B%95%E7%9A%84%E5%9E%8B%E4%BB%98%E3%81%91" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%8B%95%E7%9A%84%E5%9E%8B%E4%BB%98%E3%81%91" target="_blank" style="color: inherit; text-decoration: inherit;">動的型付け</a></block><block style="font-weight: bold;">言語（dynamically typed language）</block><block>です。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8165697111756092"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">動的型付け</block><block>（どうてきかたづけ、英: dynamic typing）とは、プログラミング言語で書かれたプログラムにおいて、変数や、サブルーチンの引数や返り値などの値について、その型を、コンパイル時などそのプログラムの実行よりも前にあらかじめ決めるということをせず、実行時の実際の値による、という型システムの性質のことである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、そのような性質の言語を、</block><block style="font-weight: bold;">動的型付き言語</block><block>（どうてきかたつきげんご、英: dynamically typed language）という。これに対し、型は実行前に決まる、というのが</block><block style="font-weight: bold;">静的型付け</block><block>である。型推論を利用していて、構文上は型の記述が省略可能な言語もあるが、そういった言語も静的型付けである（MLなど）。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 150px; height: 33.6585px; position: relative;"><img src="image-resources/312af342-083c-47ba-9f6d-23c24c9f6b48.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptは</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9D%99%E7%9A%84%E5%9E%8B%E4%BB%98%E3%81%91" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9D%99%E7%9A%84%E5%9E%8B%E4%BB%98%E3%81%91" target="_blank" style="color: inherit; text-decoration: inherit;">静的型付け</a></block><block style="font-weight: bold;">言語（statically typed language）</block><block>です。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6814896555459904"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">静的型付け</block><block>（せいてきかたづけ、英: static typing）は、プログラミング言語で書かれたプログラムにおいて、変数や、サブルーチンの引数や返り値などの値について、その型が、コンパイル時など、そのプログラムの実行よりも前にあらかじめ決められている、という型システムの性質のことである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、そのような性質の言語を、</block><block style="font-weight: bold;">静的型付き言語</block><block>（せいてきかたつきげんご、英: statically typed language）という。これに対し、型は実行時の実際の値による、というのが動的型付けである。型推論を利用していて、構文上は型の記述が省略可能な言語もあるが、そういった言語も静的型付けである（MLなど）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、その</block><block style="font-weight: bold;">型（Type）</block><block>というものは何なのか？Wikipediaなどで調べてみると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%87%E3%83%BC%E3%82%BF%E5%9E%8B" style="text-decoration: underline; font-size: 1.2em; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%87%E3%83%BC%E3%82%BF%E5%9E%8B" target="_blank" style="color: inherit; text-decoration: inherit;">データ型</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9413670771041522"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">データ型（データがた、data type）</block><block>とはコンピュータプログラミングや計算機科学において、データ値の性質を定義するための表現であり、コンパイラやインタプリタにそのデータ値の用法を宣言するための機能である。単に</block><block style="font-weight: bold;">型（かた、type）</block><block>とも呼ばれる。データ型は、関数や演算子に対するデータ値の適用の可否や、変数に対するデータ値の代入や束縛の可否を判定して、式やステートメントによる計算実行を制限する。データ型を基準にした計算可能性を規則化する形式手法は、</block><block style="font-weight: bold;">型システム</block><block>と呼ばれている。データ型は型理論視点の値の集合と同義になり、式・関数・変数の評価後の代数としても用いられる。ほとんどのプログラミング言語は、整数型・浮動小数点型・論理型・文字型といった基本データ型を備えており、また一定のデータ構造に付与される複合データ型を備えている。言語によってはポインタ・シンボル・式・関数にもデータ型は付与される。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9E%8B%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0" style="text-decoration: underline; font-size: 1.2em; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9E%8B%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0" target="_blank" style="color: inherit; text-decoration: inherit;">型システム</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5779452360092348"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型システム（英: type system）</block><block>は、計算機科学およびコンピュータプログラミング分野において、主にデータを扱うための数々の規則の集合から成立した形式体系であり、プログラム内の様々な要素に</block><block style="font-weight: bold;">型（type）</block><block>と呼ばれる特性を付与する仕組みである。型を付与される対象としては基本的なデータ値のほか、変数、式、関数、オブジェクト、モジュールなどが挙げられる。型の付与は、データの分類を成立させてデータ型を表現するほか、それらデータ型の規則的な集合を表わしたデータ構造の形式的分類も成立させる。型システムの意義は、プログラム要素を分類し、各分類の識別法則の一貫性および分類間関係の整合性を保証して、フォールトアヴォイダンスの視点からプログラムエラーの発生を抑止することにある。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>型システムは数学基礎論または数理論理学で扱われる型理論に基づいて構築されたコンピュータプログラミング用の形式手法である[1]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">型とは</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%87%E3%83%BC%E3%82%BF%E5%9E%8B" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%87%E3%83%BC%E3%82%BF%E5%9E%8B" target="_blank" style="color: inherit; text-decoration: inherit;">データ型</a></block><block>」も参照</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プログラミング言語はさまざまな値を扱う。代表的かつ最も原始的なものは数値や文字列だが、一般的に有限の資源制約があるコンピュータにとって都合のよい内部表現が使われ、例えば数値には32ビットや64ビットといった固定サイズの整数型や浮動小数点数型が、文字列には特定の文字コード集合によって符号化された整数値の羅列（文字配列）が使われることが多い。文字列の表現には最後の文字（番兵）に0を使用するゼロ終端文字列（ヌル終端文字列）が使われることもあれば、長さ情報を別途整数値で保持する複合データ構造が使われることもある。三角関数は浮動小数点数を引数にとり浮動小数点数を返す。先頭の文字を大文字にする関数は文字列を引数にとり文字列を返す。ユーザーからの入力を数値として扱うためには、文字列を解釈して数値を返す関数が必要である。ここで、3.14 や "hoge" といった値について「浮動小数点数」や「文字列」といった種類に分類して扱っているが、同じ種類の値であれば同じ操作（演算）が可能である。この「値の種類」が型（データ型）である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>初学者というか多くの、ほとんどのプログラマーが</block><block style="font-weight: bold;">型（Type）</block><block>とは何か？と概念を習得したいときに、この説明でわかるとは到底思えません。もしかしたら説明している当事者が事象の表面をなぞって見せているだけで本当のことは何もわかっていない危険性が大きいです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6835114233315049" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6835114233315049"><prefix style="text-align: left; padding-right: 0.25em;">9.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>わかりやすい、型（Type）の説明</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">型（Type）とは</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-size: 1.2em; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-size: 1.2em; font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_(mathematics)" style="text-decoration: underline; font-size: 1.2em; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_(mathematics)" target="_blank" style="color: inherit; text-decoration: inherit;">Set</a></block><block style="font-size: 1.2em; font-weight: bold;">）のことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.1652249805533903"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学における</block><block style="font-weight: bold;">集合</block><block> (しゅうごう、英: set, 仏: ensemble, 独: Menge) とは、大雑把に言えばいくつかの「もの」からなる「集まり」である。集合を構成する個々の「もの」のことを</block><block style="font-weight: bold;">元</block><block> (げん、英: element; </block><block style="font-weight: bold;">要素</block><block>) という。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学において、</block><block style="font-weight: bold;">集合</block><block>とは要素の集まりである。集合を構成する要素は、数、記号、空間上の点、直線、その他の幾何学的形状、変数、さらには他の集合など、あらゆる種類の数学的対象となりうる。集合は有限個の要素を持つこともあれば、無限個の要素を持つこともある。2つの集合が等しいのは、正確に同じ要素を持つ場合に限られる。</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 163.93px; position: relative;"><img src="image-resources/eb4e46c9-be58-4a1a-a3c5-f8869317cccb.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.britannica.com/topic/set-mathematics-and-logic" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://www.britannica.com/topic/set-mathematics-and-logic" target="_blank" style="color: inherit; text-decoration: inherit;">ブリタニカ百科事典</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8884294729941857"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 121.739px; position: relative;"><img src="image-resources/91dcf0a3-cf2e-4947-b437-4af43358bf7a.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合</block><block>とは、数学や論理学において、対象物（要素）の集まりのことで、数学的なもの（例えば、数や関数）である場合もあれば、そうでない場合もある。集合の直感的なアイデアは、おそらく数のそれよりも古いものである。例えば、動物の群れのメンバーは、袋の中の石と一致させることができるが、どちらの集合のメンバーも実際には数えられない。この概念は無限にまで広がる。例えば、1から100までの整数の集合は有限であるが、すべての整数の集合は無限である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ncatlab.org/nlab/show/type+theory#type_theory_versus_set_theory" style="text-decoration: underline; font-size: 1.2em; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ncatlab.org/nlab/show/type+theory#type_theory_versus_set_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Type theory versus set theory</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">型理論 vs 集合論</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.651655792967208"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Alternately, we could change our terminology so that what we have been calling “types” are instead called “sets”.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">あるいは、これまで「型」と呼んでいたものを「集合」と呼ぶように用語を変更することもできます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Thus, words like “type” and “set” and “class” are really quite fungible. This sort of level-switch is especially important when we want to study the mathematics of type theory,</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">このように、「型」や「集合」や「クラス」などの言葉は、実はかなり代替可能です。このようなレベルの切り替えは、型理論の数学、つまり型理論の数学を研究するときには特に重要です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以上は、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/NLab" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/NLab" target="_blank" style="color: inherit; text-decoration: inherit;">nLab</a></block><block>記事からの引用文です。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.45698182512998464"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">nLab</block><block> は、数学・物理学・哲学の研究レベルの内容について扱ったウィキである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>nLabはMathOverflowにおいて、質問前にチェックするべき標準的なオンラインの数学文献の1つとしてリストされている。多くの質問と解答が、nLabを背景資料として用いている。また、nLabはバイエズがアメリカ数学会（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/American_Mathematical_Society" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/American_Mathematical_Society" target="_blank" style="color: inherit; text-decoration: inherit;">American Mathematical Society</a></block><block>）に投稿した数学ブログのレビュー記事の中で言及されている2つのウィキのうちの1つである。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://guide.elm-lang.org/appendix/types_as_sets.html" style="text-decoration: underline; font-size: 1.2em; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://guide.elm-lang.org/appendix/types_as_sets.html" target="_blank" style="color: inherit; text-decoration: inherit;">Types as Sets</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">集合としての型</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.06235711460227722"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>One of the most important techniques in Elm programming is to make the possible values in code exactly match the valid values in real life. This leaves no room for invalid data, and this is why I always encourage folks to focus on custom types and data structures.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">In pursuit of this goal, I have found it helpful to understand the relationship between types and sets. It sounds like a stretch, but it really helps develop your mindset!</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Elmプログラミングで最も重要なテクニックの一つは、コード内の値を実際に有効な値と正確に一致させることです。これでは無効なデータを残す余地がないので、私は常にカスタム型やデータ構造に注目することを推奨しています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">この目的を追求するにあたって、型（types）と集合（sets）の関係を理解しておくことが役立つことを私は発見しました。余計なことのように聞こえますが、それは貴方のマインドセットの形成に本当に役立つのです！</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.35386993112372855"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">集合（Sets）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（Type）</block><block>は値の</block><block style="font-weight: bold;">集合（Set）</block><block>と捉えることができる</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Bool</block><block> は集合</block><block style="font-weight: bold;"> { True, False }</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Color</block><block> は集合 </block><block style="font-weight: bold;">{ Red, Yellow, Green }</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Int</block><block> は集合 </block><block style="font-weight: bold;">{ ... -2, -1, 0, 1, 2 ... }</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Float</block><block>は集合 </block><block style="font-weight: bold;">{ ... 0.9, 0.99, 0.999 ... 1.0 ... }</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">String</block><block> は集合 </block><block style="font-weight: bold;">{ "", "a", "aa", "aaa" ... "hello" ... }</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block><block style="font-weight: bold;">型（Type）</block><block>の文脈で </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x : Bool</block><block> </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というとき、それは、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x</block><block> は集合 </block><block style="font-weight: bold;">{ True, False }</block><block> の要素</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのと同じです。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6146679834518236"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（Type）</block><block>をこのような</block><block style="font-weight: bold;">集合（Set）</block><block>として考えることは、ある言語が人によって「簡単」「制限がある」「間違いやすい」と感じる理由を説明するのにも役立ちます。例えば</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Java - BoolやStringといったプリミティブな値があります。そこから、異なる型のフィールドを固定的に持つクラスを作ることができます。これはElmのレコードによく似ていて、カーディナルを掛け合わせることができます。しかし、足し算をするのはなかなか難しい。サブタイピングを使えばできますが、かなり手の込んだ作業になります。つまり、Elmでは簡単なResult Bool Colorも、Javaではかなり大変なのです。5のカーディナリティを持つ型を設計するのは非常に難しく、しばしばトラブルの価値がないように思われるため、Javaを「制限的」と感じる人もいると思います。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScript - ここでも、BoolやStringといったプリミティブな値があります。ここから、動的なフィールドセットを持つオブジェクトを作成することができ、カーディナリティを増やすことができます。これはクラスを作るよりもはるかに軽量です。しかし、Javaのように、加算を行うことは特に簡単ではありません。例えば、Maybe Intをシミュレートするには、{ tag: "just", value: 42 } や { tag: "nothing" }のようなオブジェクトでMaybe Intをシミュレートすることができますが、これは実際にはカーディナリティの掛け算です。これでは、実際に有効な値のセットと正確に一致させるのはかなり困難です。このように、カーディナリティが(∞×∞×∞)の型を設計するのは非常に簡単で何でもカバーできるので、JavaScriptを「簡単」と感じる人がいる一方で、カーディナリティが5の型を設計するのは実際には不可能で、無効なデータのためのスペースがたくさんあるので、JavaScriptを「エラーが多い」と感じる人もいるのではないでしょうか。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>面白いことに、いくつかの命令型言語にはカスタム型があります。Rustがその良い例です。Rustでは、CやJavaから得られる直感に基づいて、これらをenumと呼んでいます。そのため、RustではElmと同じように簡単にカーディナリティを追加することができ、同じような利点があります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで言いたいのは、型の「追加」は一般的に非常に過小評価されているということです。「</block><block style="font-weight: bold;">集合としての型</block><block>」として考えることで、ある言語設計がなぜある種のフラストレーションを生むのかを明確にすることができます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、TypeScriptではなく、Elm言語作者によるドキュメントなのですが、</block><block style="font-weight: bold;">型（Type）</block><block>の知見を深めたいとき、示唆に富んでいる内容なので、Google翻訳なりを活用しながらでも全文を読むことをお勧めします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8174467166132451" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8174467166132451"><prefix style="text-align: left; padding-right: 0.25em;">9.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>スーパーイディオム</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>分野にまたがって、基本、同じ概念を違う用語で表現しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6267401670607062" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">型理論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Type_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Type_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Type theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（type）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）/ 写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">集合論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Set theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">始集合（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">終集合（codomain）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">解析学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Mathematical_analysis" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Mathematical_analysis" target="_blank" style="color: inherit; text-decoration: inherit;">Analysis</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">定義域（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">値域（range）と終域（codomain）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">代数学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Algebra" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Algebra" target="_blank" style="color: inherit; text-decoration: inherit;">Algebra</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）/  被演算子（operand）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">演算子（operator）</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">オブジェクト指向</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Object-oriented_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Object-oriented_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Object-oriented programming</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト（object）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">メソッド（method）</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="関数（function）" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="関数（function）" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">対象（object）/  圏（category）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">射（morphism）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.013699209624025821" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">情報処理・プログラミング</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">データ（data）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">処理（operation）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 0.9em;">このなかで、最も根底となる、すべての概念の包括的な枠組みが</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block style="font-size: 0.9em;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Category_theory" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Category_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block style="font-size: 0.9em;">）で、これまで永らく数学の基礎であった</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">集合論</a></block><block style="font-size: 0.9em;">でさえも圏論の言葉で再定義されます（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E3%81%AE%E5%9C%8F" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E3%81%AE%E5%9C%8F" target="_blank" style="color: inherit; text-decoration: inherit;">集合の圏</a></block><block style="font-size: 0.9em;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Category_of_sets" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Category_of_sets" target="_blank" style="color: inherit; text-decoration: inherit;">category of sets</a></block><block style="font-size: 0.9em;">）における</block><block style="font-size: 0.9em; font-weight: bold;">射（morphism）</block><block style="font-size: 0.9em;">は</block><block style="font-size: 0.9em; font-weight: bold;">関数（function）</block><block style="font-size: 0.9em;">になる）。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（Type）とは</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_(mathematics)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_(mathematics)" target="_blank" style="color: inherit; text-decoration: inherit;">Set</a></block><block style="font-weight: bold;">）のこと。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（Function）</block><block>と</block><block style="font-weight: bold;">演算子（Operator）</block><block>は本当は</block><block style="font-weight: bold;">同じもの。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のオブジェクトは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">(Sets)</block><block>に相当し、</block><block style="font-weight: bold;">二項演算の左側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算子</a></block><block style="font-weight: bold;">(Binary operatior)</block><block>に相当しており、</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドの引数は、</block><block style="font-weight: bold;">二項演算の右側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と既に明確にしたとおり、本稿の方針は、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算子</a></block><block style="font-weight: bold;">(Binary operatior)</block><block>を最大限に活用することなので、このなかでどの分野の言葉をもってコードを書いていくのか？となると、当然、</block><block class="role-hyper-link" data-hyper-link-url="代数学" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="代数学" target="_blank" style="color: inherit; text-decoration: inherit;">代数学</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Algebra" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Algebra" target="_blank" style="color: inherit; text-decoration: inherit;">Algebra</a></block><block style="font-weight: bold;">）</block><block>になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし同時に明確にしたとおり、その</block><block style="font-weight: bold;">二項演算子</block><block>は、</block><block style="font-weight: bold;">関数（Function）</block><block>と同じものであり、さらに</block><block style="font-weight: bold;">集合論</block><block>の</block><block style="font-weight: bold;">写像（map）</block><block>と同じものであるので、なにはともあれ、そこの基礎を固める必要があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.5608015542739713" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.5608015542739713"><prefix style="text-align: left; padding-right: 0.5em;">10. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数（Function）</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7118596376514843" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7118596376514843"><prefix style="text-align: left; padding-right: 0.25em;">10.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数の具体例</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%A2%E6%95%B0_(%E6%95%B0%E5%AD%A6)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%A2%E6%95%B0_(%E6%95%B0%E5%AD%A6)" target="_blank" style="color: inherit; text-decoration: inherit;">関数</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Function_(mathematics)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Function_(mathematics)" target="_blank" style="color: inherit; text-decoration: inherit;">Function</a></block><block style="font-weight: bold;">）</block><block>は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>２つの</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（Type）</block><block>＝</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_(mathematics)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_(mathematics)" target="_blank" style="color: inherit; text-decoration: inherit;">Set</a></block><block style="font-weight: bold;">）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の間の</block><block style="font-weight: bold;">一方向の関係</block><block>として定義されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>矢印があるのは一方向の関係である、ということを如実に示しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 315.818px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".05633541832246447" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.05633541832246447)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M369,52 C369,33.77 393.27,19 423.2,19 C453.14,19 477.41,33.77 477.41,52 C477.41,70.23 453.14,85 423.2,85 C393.27,85 369,70.23 369,52 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M361.41,793 L489.41,793 L489.41,854 L361.41,854 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M372,267 C372,248.77 396.27,234 426.2,234 C456.14,234 480.41,248.77 480.41,267 C480.41,285.23 456.14,300 426.2,300 C396.27,300 372,285.23 372,267 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M401.1,110 L412.65,110 L412.65,86 L435.76,86 L435.76,110 L447.31,110 L424.2,126 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M402.1,215 L413.65,215 L413.65,191 L436.76,191 L436.76,215 L448.31,215 L425.2,231 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M362,128 L490,128 L490,189 L362,189 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 406px; top: 32px;"><dg-editor-container data-editor-id="de752111251056297" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">国</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 396px; top: 248px;"><dg-editor-container data-editor-id="de3153750771589121" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">都市</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 372.591px; top: 142px;"><dg-editor-container data-editor-id="de8182430774942175" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">首都関数</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここでは、</block><block style="font-weight: bold;">国</block><block>と</block><block style="font-weight: bold;">都市</block><block>（首都）という２つの</block><block style="font-weight: bold;">集合</block><block>の間の一方的な関係を定義しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「別に何も一方向じゃなくても良いんじゃない？双方向の矢印でも・・・」という自由な発想はもちろんアリですが、そうなると、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E9%96%A2%E4%BF%82" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E9%96%A2%E4%BF%82" target="_blank" style="color: inherit; text-decoration: inherit;">二項関係</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_relation" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_relation" target="_blank" style="color: inherit; text-decoration: inherit;">Binary relation</a></block><block>）という、もっと一般的な（ゆるい）数学的概念になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関係</block><block>にはいろんな種類があるのですが、そのうち、あくまでこういう一方向で答えがバシッと出てくる</block><block style="font-weight: bold;">保証がある</block><block>関係を</block><block style="font-weight: bold;">関数関係</block><block>あるいは単に</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%A2%E6%95%B0_(%E6%95%B0%E5%AD%A6)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%A2%E6%95%B0_(%E6%95%B0%E5%AD%A6)" target="_blank" style="color: inherit; text-decoration: inherit;">関数</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Function_(mathematics)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Function_(mathematics)" target="_blank" style="color: inherit; text-decoration: inherit;">Function</a></block><block style="font-weight: bold;">）</block><block>と呼ぶわけです。逆方向については何の保証もありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆方向にについて何か保証がある関係の</block><block style="font-weight: bold;">二項関係</block><block>というのはもちろん存在しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>例えば、</block><block style="font-weight: bold;">色がついている自由な図形</block><block>という集合があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">色関数</block><block>で、</block><block style="font-weight: bold;">色</block><block>の集合の要素には、必ずひとつに対応しますが、逆方向に対応することは保証されていない、そういう一方通行の関係が</block><block style="font-weight: bold;">関数</block><block>です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 300px; height: 304.74px; position: relative;"><img src="image-resources/a7d03bf3-526f-4c4a-bb6e-0a8e8d24ea85.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういうのは、しばしばブラックボックスのように抽象化されて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>単項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Unary function</a></block><block>）なら、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 300px; height: 279.11px; position: relative;"><img src="image-resources/0ff30f27-54e5-4dfd-ae42-1a9a5acc81fb.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">一項演算子</block><block>は１引数の関数(</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Unary function</a></block><block>)と対応するのがわかります。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%8D%98%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%8D%98%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">単項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_operation" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_operation" target="_blank" style="color: inherit; text-decoration: inherit;">Unary operation</a></block><block>）とおなじものであり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block>）なら、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 300px; height: 314.12px; position: relative;"><img src="image-resources/11f33457-296a-4d02-82ac-8e6bc2504e5f.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_operation" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_operation" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operation</a></block><block>）となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、関数は一方通行で、必ずなんらかの答えが出てくる、というのは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算 </block><block style="font-weight: bold;">1 + 2 = 3 </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と必ず答えが出てくる、という事実と直結しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう</block><block style="font-weight: bold;">二項演算</block><block>というものは算数の計算なのだから答えが出てくるのが当たり前、という日常生活の刷り込みがありますが、そもそも演算の対象となっている</block><block style="font-weight: bold;">集合（被演算子）</block><block>というのは、</block><block style="font-weight: bold; font-style: italic;">わかりやすい、型（Type）の説明</block><block>で示したとおり、別に日常生活でいうところの数字である必要もなく、このように</block><block style="font-weight: bold;">国</block><block>でも</block><block style="font-weight: bold;">都市</block><block>でも</block><block style="font-weight: bold;">色</block><block>なんでも良いのですから、いかなる概念であっても、関数で一方向へ演算している、ということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>首都関数を使う</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 384.727px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".12780967384403952" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.12780967384403952)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M180,109.77 C180,89.76 207.4,73.55 241.2,73.55 C275.01,73.55 302.41,89.76 302.41,109.77 C302.41,129.78 275.01,146 241.2,146 C207.4,146 180,129.78 180,109.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,171 L229.65,171 L229.65,147 L252.76,147 L252.76,171 L264.31,171 L241.2,187 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,276 L229.65,276 L229.65,252 L252.76,252 L252.76,276 L264.31,276 L241.2,292 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M180,331.77 C180,311.76 207.4,295.55 241.2,295.55 C275.01,295.55 302.41,311.76 302.41,331.77 C302.41,351.78 275.01,368 241.2,368 C207.4,368 180,351.78 180,331.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M523,109.77 C523,89.76 550.4,73.55 584.2,73.55 C618.01,73.55 645.41,89.76 645.41,109.77 C645.41,129.78 618.01,146 584.2,146 C550.4,146 523,129.78 523,109.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M561.1,171 L572.65,171 L572.65,147 L595.76,147 L595.76,171 L607.31,171 L584.2,187 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M561.1,276 L572.65,276 L572.65,252 L595.76,252 L595.76,276 L607.31,276 L584.2,292 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M523,331.77 C523,311.76 550.4,295.55 584.2,295.55 C618.01,295.55 645.41,311.76 645.41,331.77 C645.41,351.78 618.01,368 584.2,368 C550.4,368 523,351.78 523,331.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M178,190 L306,190 L306,251 L178,251 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M521,191 L649,191 L649,252 L521,252 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 189px; top: 783px;"><dg-editor-container data-editor-id="de6177219382407597" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">イギリス</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 156px; top: 29px;"><dg-editor-container data-editor-id="de43552637098047864" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">イギリスの首都は？</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 190px; top: 314px;"><dg-editor-container data-editor-id="de7393345289305637" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">ロンドン</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 556px; top: 93px;"><dg-editor-container data-editor-id="de3032116887555747" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">日本</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 518px; top: 29px;"><dg-editor-container data-editor-id="de8422356373995196" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">日本の首都は？</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 554px; top: 314px;"><dg-editor-container data-editor-id="de5517294878120936" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">東京</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 188.591px; top: 204px;"><dg-editor-container data-editor-id="de2603477759582853" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">首都関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 531.591px; top: 205px;"><dg-editor-container data-editor-id="de818974414287404" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">首都関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 185px; top: 91px;"><dg-editor-container data-editor-id="de16186785182340802" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">イギリス</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>国をインプットしたらその通貨をアウトプットする 通貨関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 315.818px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".1634363223805173" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.1634363223805173)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M369,52 C369,33.77 393.27,19 423.2,19 C453.14,19 477.41,33.77 477.41,52 C477.41,70.23 453.14,85 423.2,85 C393.27,85 369,70.23 369,52 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M361,129 L490.41,129 L490.41,190 L361,190 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M373,266 C373,247.77 397.27,233 427.2,233 C457.14,233 481.41,247.77 481.41,266 C481.41,284.23 457.14,299 427.2,299 C397.27,299 373,284.23 373,266 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M401.1,110 L412.65,110 L412.65,86 L435.76,86 L435.76,110 L447.31,110 L424.2,126 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M403.1,214 L414.65,214 L414.65,190 L437.76,190 L437.76,214 L449.31,214 L426.2,230 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 406px; top: 32px;"><dg-editor-container data-editor-id="de43517785439128787" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">国</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 372px; top: 141px;"><dg-editor-container data-editor-id="de9903575967681365" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">通貨関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 397px; top: 247px;"><dg-editor-container data-editor-id="de1169927634286545" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">通貨</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>通貨関数を使う</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 384.727px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".9753662737054833" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.9753662737054833)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M180,109.77 C180,89.76 207.4,73.55 241.2,73.55 C275.01,73.55 302.41,89.76 302.41,109.77 C302.41,129.78 275.01,146 241.2,146 C207.4,146 180,129.78 180,109.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,171 L229.65,171 L229.65,147 L252.76,147 L252.76,171 L264.31,171 L241.2,187 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,276 L229.65,276 L229.65,252 L252.76,252 L252.76,276 L264.31,276 L241.2,292 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M180,331.77 C180,311.76 207.4,295.55 241.2,295.55 C275.01,295.55 302.41,311.76 302.41,331.77 C302.41,351.78 275.01,368 241.2,368 C207.4,368 180,351.78 180,331.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M523,109.77 C523,89.76 550.4,73.55 584.2,73.55 C618.01,73.55 645.41,89.76 645.41,109.77 C645.41,129.78 618.01,146 584.2,146 C550.4,146 523,129.78 523,109.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M561.1,171 L572.65,171 L572.65,147 L595.76,147 L595.76,171 L607.31,171 L584.2,187 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M561.1,276 L572.65,276 L572.65,252 L595.76,252 L595.76,276 L607.31,276 L584.2,292 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M523,331.77 C523,311.76 550.4,295.55 584.2,295.55 C618.01,295.55 645.41,311.76 645.41,331.77 C645.41,351.78 618.01,368 584.2,368 C550.4,368 523,351.78 523,331.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M178,190 L306,190 L306,251 L178,251 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M521,191 L649,191 L649,252 L521,252 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 184px; top: 94px;"><dg-editor-container data-editor-id="de9083963481201983" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">イギリス</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 159px; top: 29px;"><dg-editor-container data-editor-id="de38817189597541457" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">イギリスの通貨は？</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 190px; top: 314px;"><dg-editor-container data-editor-id="de34564291312361806" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;"> ポンド</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 556px; top: 93px;"><dg-editor-container data-editor-id="de8328358593256372" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">日本</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 518px; top: 29px;"><dg-editor-container data-editor-id="de4067061338662561" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">日本の通貨は？</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 554px; top: 314px;"><dg-editor-container data-editor-id="de023053578496556093" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">  円</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 188.591px; top: 204px;"><dg-editor-container data-editor-id="de24539216581384005" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">通貨関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 531.591px; top: 205px;"><dg-editor-container data-editor-id="de7894706645790978" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">通貨関数</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 英単語をインプットしたら対応する日本語の単語をアウトプットする 英和関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 315.818px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".560509787689264" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.560509787689264)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M369,52 C369,33.77 393.27,19 423.2,19 C453.14,19 477.41,33.77 477.41,52 C477.41,70.23 453.14,85 423.2,85 C393.27,85 369,70.23 369,52 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M361,129 L490.41,129 L490.41,190 L361,190 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M335.86,266 C335.86,247.77 376.16,233 425.86,233 C475.57,233 515.86,247.77 515.86,266 C515.86,284.23 475.57,299 425.86,299 C376.16,299 335.86,284.23 335.86,266 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M401.1,110 L412.65,110 L412.65,86 L435.76,86 L435.76,110 L447.31,110 L424.2,126 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M403.1,214 L414.65,214 L414.65,190 L437.76,190 L437.76,214 L449.31,214 L426.2,230 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 381px; top: 35px;"><dg-editor-container data-editor-id="de4655969232038444" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">英単語</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 372px; top: 141px;"><dg-editor-container data-editor-id="de6409466358371942" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">英和関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 343px; top: 248px;"><dg-editor-container data-editor-id="de37499698924429614" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">日本語の単語</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 526px; top: 136px;"><dg-editor-container data-editor-id="de4051118287573203" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">英和辞書</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">＝和訳する関数</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>英和関数を使う</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 384.727px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".3243281114294818" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.3243281114294818)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M180,109.77 C180,89.76 207.4,73.55 241.2,73.55 C275.01,73.55 302.41,89.76 302.41,109.77 C302.41,129.78 275.01,146 241.2,146 C207.4,146 180,129.78 180,109.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,171 L229.65,171 L229.65,147 L252.76,147 L252.76,171 L264.31,171 L241.2,187 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,276 L229.65,276 L229.65,252 L252.76,252 L252.76,276 L264.31,276 L241.2,292 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M180,331.77 C180,311.76 207.4,295.55 241.2,295.55 C275.01,295.55 302.41,311.76 302.41,331.77 C302.41,351.78 275.01,368 241.2,368 C207.4,368 180,351.78 180,331.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M523,109.77 C523,89.76 550.4,73.55 584.2,73.55 C618.01,73.55 645.41,89.76 645.41,109.77 C645.41,129.78 618.01,146 584.2,146 C550.4,146 523,129.78 523,109.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M561.1,171 L572.65,171 L572.65,147 L595.76,147 L595.76,171 L607.31,171 L584.2,187 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M561.1,276 L572.65,276 L572.65,252 L595.76,252 L595.76,276 L607.31,276 L584.2,292 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M523,331.77 C523,311.76 550.4,295.55 584.2,295.55 C618.01,295.55 645.41,311.76 645.41,331.77 C645.41,351.78 618.01,368 584.2,368 C550.4,368 523,351.78 523,331.77 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M178,190 L306,190 L306,251 L178,251 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M521,191 L649,191 L649,252 L521,252 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 199px; top: 94px;"><dg-editor-container data-editor-id="de4430505612865516" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">BOOK</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 168px; top: 29px;"><dg-editor-container data-editor-id="de235542509393459" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">BOOKの和訳は？</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 224px; top: 314px;"><dg-editor-container data-editor-id="de31176245831738236" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">本</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 536px; top: 93px;"><dg-editor-container data-editor-id="de8129609589039197" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">WATER</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 507px; top: 29px;"><dg-editor-container data-editor-id="de4629205908539278" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">WATERの和訳は？</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 567px; top: 314px;"><dg-editor-container data-editor-id="de9377248413474812" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">水</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 189px; top: 203px;"><dg-editor-container data-editor-id="de2418428393194495" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">英和関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 530px; top: 203px;"><dg-editor-container data-editor-id="de2207510232059905" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">英和関数</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>英和辞書もそうですが、データベースは関数として使えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Googleの検索エンジンは巨大なデータベースで、膨大なWeb記事がランキングされてストックされています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Google検索も、検索ワードがインプット、検索結果がアウトプットの関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 検索ワードをインプットしたら検索結果をアウトプットする Google関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 381.545px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".4765478629223361" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.4765478629223361)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M346.43,53 C346.43,34.77 381.25,20 424.2,20 C467.16,20 501.98,34.77 501.98,53 C501.98,71.23 467.16,86 424.2,86 C381.25,86 346.43,71.23 346.43,53 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M401.1,112 L412.65,112 L412.65,88 L435.76,88 L435.76,112 L447.31,112 L424.2,128 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M401.1,267 L412.65,267 L412.65,243 L435.76,243 L435.76,267 L447.31,267 L424.2,283 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M345.43,323 C345.43,304.77 380.25,290 423.2,290 C466.16,290 500.98,304.77 500.98,323 C500.98,341.23 466.16,356 423.2,356 C380.25,356 345.43,341.23 345.43,323 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M520.86,147.57 L520.86,224.89 C520.86,234.04 477.61,241.45 424.26,241.45 C370.91,241.45 327.66,234.04 327.66,224.89 L327.66,147.57 C327.66,138.42 370.91,131 424.26,131 C477.61,131 520.86,138.42 520.86,147.57 C520.86,156.72 477.61,164.14 424.26,164.14 C370.91,164.14 327.66,156.72 327.66,147.57" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 358px; top: 35px;"><dg-editor-container data-editor-id="de7306962009084358" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">検索ワード</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 369px; top: 304px;"><dg-editor-container data-editor-id="de0011055384485666453" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">検索結果</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 342px; top: 165px;"><dg-editor-container data-editor-id="de2742984738246894" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">Google関数</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">=検索エンジン</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Google関数を使う</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 718.273px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".2933346158876309" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.2933346158876309)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M163.43,52 C163.43,33.77 198.25,19 241.2,19 C284.16,19 318.98,33.77 318.98,52 C318.98,70.23 284.16,85 241.2,85 C198.25,85 163.43,70.23 163.43,52 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,111 L229.65,111 L229.65,87 L252.76,87 L252.76,111 L264.31,111 L241.2,127 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,266 L229.65,266 L229.65,242 L252.76,242 L252.76,266 L264.31,266 L241.2,282 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M337.86,146.57 L337.86,223.89 C337.86,233.04 294.61,240.45 241.26,240.45 C187.91,240.45 144.66,233.04 144.66,223.89 L144.66,146.57 C144.66,137.42 187.91,130 241.26,130 C294.61,130 337.86,137.42 337.86,146.57 C337.86,155.72 294.61,163.14 241.26,163.14 C187.91,163.14 144.66,155.72 144.66,146.57" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><image x="128" y="288" width="228.86361694335938" height="418.54541015625" preserveAspectRatio="none" xlink:href="image-resources/2eb3df19-b952-4cbb-84a0-9b7d5916573a.png"></image></g><g class="composite-shape"><path class="real" d=" M548.43,51 C548.43,32.77 590.61,18 642.65,18 C694.68,18 736.86,32.77 736.86,51 C736.86,69.23 694.68,84 642.65,84 C590.61,84 548.43,69.23 548.43,51 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M619.1,110 L630.65,110 L630.65,86 L653.76,86 L653.76,110 L665.31,110 L642.2,126 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M619.1,265 L630.65,265 L630.65,241 L653.76,241 L653.76,265 L665.31,265 L642.2,281 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M738.86,145.57 L738.86,222.89 C738.86,232.04 695.61,239.45 642.26,239.45 C588.91,239.45 545.66,232.04 545.66,222.89 L545.66,145.57 C545.66,136.42 588.91,129 642.26,129 C695.61,129 738.86,136.42 738.86,145.57 C738.86,154.72 695.61,162.14 642.26,162.14 C588.91,162.14 545.66,154.72 545.66,145.57" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><image x="521" y="284" width="243.86361694335938" height="418.54541015625" preserveAspectRatio="none" xlink:href="image-resources/b7fd6598-333b-46dc-bb00-2110e03e2818.png"></image></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 211px; top: 34px;"><dg-editor-container data-editor-id="de9619276668480211" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">緑茶</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 159px; top: 164px;"><dg-editor-container data-editor-id="de5415795044051439" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">Google関数</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">=検索エンジン</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 563px; top: 34px;"><dg-editor-container data-editor-id="de44726364427403476" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">日経平均株価</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 560px; top: 163px;"><dg-editor-container data-editor-id="de06621839027538634" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">Google関数</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">=検索エンジン</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 手書き画像をインプットしたら数字をアウトプットする AI関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 315.818px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".7553279942960718" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.7553279942960718)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M341.86,52 C341.86,33.77 378.7,19 424.14,19 C469.57,19 506.41,33.77 506.41,52 C506.41,70.23 469.57,85 424.14,85 C378.7,85 341.86,70.23 341.86,52 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M361,129 L490.41,129 L490.41,190 L361,190 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M401.1,110 L412.65,110 L412.65,86 L435.76,86 L435.76,110 L447.31,110 L424.2,126 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M403.1,214 L414.65,214 L414.65,190 L437.76,190 L437.76,214 L449.31,214 L426.2,230 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M366,271.59 C366,251.58 393.4,235.36 427.2,235.36 C461.01,235.36 488.41,251.58 488.41,271.59 C488.41,291.6 461.01,307.82 427.2,307.82 C393.4,307.82 366,291.6 366,271.59 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 357px; top: 35px;"><dg-editor-container data-editor-id="de8769212388299668" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">手書き画像</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 381px; top: 141px;"><dg-editor-container data-editor-id="de23702642068866286" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">AI関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 526px; top: 123px;"><dg-editor-container data-editor-id="de8720488129091166" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">手書き画像から</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">数字を判別する</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">機械学習モデル</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 398px; top: 253.818px;"><dg-editor-container data-editor-id="de9221349529668426" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">数字</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>AI関数を使う</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 355.92px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".5388362910700559" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.5388362910700559)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M187,155 L316.41,155 L316.41,216 L187,216 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M227.1,136 L238.65,136 L238.65,112 L261.76,112 L261.76,136 L273.31,136 L250.2,152 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M229.1,240 L240.65,240 L240.65,216 L263.76,216 L263.76,240 L275.31,240 L252.2,256 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M203,297.59 C203,277.58 225.21,261.36 252.6,261.36 C279.99,261.36 302.2,277.58 302.2,297.59 C302.2,317.6 279.99,333.82 252.6,333.82 C225.21,333.82 203,317.6 203,297.59 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><image x="197" y="12" width="102.92001342773438" height="96.760009765625" preserveAspectRatio="none" xlink:href="image-resources/1fa9a2b4-ed9e-44bf-ad40-b452e9cc3364.png"></image></g><g class="composite-shape"><path class="real" d=" M553,154.54 L682.41,154.54 L682.41,215.54 L553,215.54 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M593.1,135.54 L604.65,135.54 L604.65,111.54 L627.76,111.54 L627.76,135.54 L639.31,135.54 L616.2,151.54 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M595.1,239.54 L606.65,239.54 L606.65,215.54 L629.76,215.54 L629.76,239.54 L641.31,239.54 L618.2,255.54 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M569,297.13 C569,277.12 591.21,260.91 618.6,260.91 C645.99,260.91 668.2,277.12 668.2,297.13 C668.2,317.14 645.99,333.36 618.6,333.36 C591.21,333.36 569,317.14 569,297.13 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><image x="561" y="6.660003662109375" width="109.39999389648438" height="102" preserveAspectRatio="none" xlink:href="image-resources/15ea0b71-27d7-41f5-b98f-1cc65b6c01a3.png"></image></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 207px; top: 167px;"><dg-editor-container data-editor-id="de48572419011421697" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">AI関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 370px; top: 149px;"><dg-editor-container data-editor-id="de09995759087717071" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">手書き画像から</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">数字を判別する</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">機械学習モデル</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 235px; top: 279.818px;"><dg-editor-container data-editor-id="de3249703169621082" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">３</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 573px; top: 166.542px;"><dg-editor-container data-editor-id="de19760983152496947" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">AI関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 608px; top: 279.36px;"><dg-editor-container data-editor-id="de17320298843646942" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">9</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>事前に数万以上の手書き画像のデータを使って、アウトプット精度の高い関数を学習させておく（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92" target="_blank" style="color: inherit; text-decoration: inherit;">機械学習</a></block><block>）</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 537.8px; height: 278.803px; position: relative;"><img src="image-resources/75ad955e-0b42-4d27-bd5e-0456fbb1b74a.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7531312371758475" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7531312371758475"><prefix style="text-align: left; padding-right: 0.25em;">10.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>かんたんにテーブルで表される関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>簡単な構造の関数は単純なテーブル（表）で表現できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>首都関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.43934417940433657" style="position: relative; top: 0px; left: 256.96px; width: 346.44px;"><colgroup><col><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">インプット</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アウトプット</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>イギリス</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ロンドン</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>日本</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>東京</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>フランス</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パリ</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アメリカ</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ワシントンD.C.</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>通貨関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5579889169131351" style="position: relative; top: 0px; left: 256.96px; width: 346.44px;"><colgroup><col><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">インプット</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アウトプット</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>イギリス</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>UKポンド</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>日本</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>円</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>フランス</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ユーロ</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アメリカ</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>USドル</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>英和関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9291314102803114" style="position: relative; top: 0px; left: 256.96px; width: 346.44px;"><colgroup><col><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">インプット</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アウトプット</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>CAT</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>猫</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>DOG</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>犬</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>WATER</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>水</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>BYCYCLE</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>自転車</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>他方でGoogle検索やAI(機械学習)のコンピュータビジョンの関数は単純なテーブルで表現するのは極めて困難でしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.567930290499625" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.567930290499625"><prefix style="text-align: left; padding-right: 0.25em;">10.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>テーブルからかんたんにグラフにできる関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「気温　東京　年間」でGoogle検索すると、「過去の平均気温」という「データベース系の関数のテーブル」が出てきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>気温関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 392.04px; height: 333.234px; position: relative;"><img src="image-resources/908c879c-32f4-4ae8-9f46-884bdee4199b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>よく見ると、</block><block style="font-weight: bold;">グラフというタブも用意されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>気温関数(グラフ)</block></blocks></line><line class="root text-mode align-center full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 634.2px; height: 340.441px; position: relative;"><img src="image-resources/e949cece-f227-47a0-8b2c-0ecbae0e6978.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>インプットが数値</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>アウトプットが数値</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の場合、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>インプットをX軸</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>アウトプットをY軸</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とした２次元平面上にプロットし、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数をグラフとして視覚化すれば便利なケースがあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>念の為に繰り返しますが今まで見てきたように、関数はインプットとアウトプットがシンプルなテーブル(表)で表現できて、なおかつXY平面上にプロットが可能な数値であるとは限定されているわけではないので、あくまで特別なケースでしかありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5804725291846669" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5804725291846669"><prefix style="text-align: left; padding-right: 0.25em;">10.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>数学法則を使う関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Google検索、それから手書き文字などを識別するコンピュータビジョンのAIも含め、過去に蓄積されたデータベースを利用する関数がある一方で、そのようなデータベースを利用しない、必要としない関数もあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学法則を使う関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学法則というのは、なぜか最初から存在しているので、人為的に蓄積しておくべきデータは必要ありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>絶対値を求める関数を使う</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable" style="font-family: Asana-Math, Asana;"><area-baseline aria-hidden="true">a</area-baseline><area-container><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Closing">|</block><block class="Binary">-</block><block class="Normal">5</block><block class="Closing">|</block><block class="Normal"> </block><block class="Relation">=</block><block class="Normal"> 5</block></line><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Closing">|</block><block class="Normal">8</block><block class="Closing">|</block><block class="Normal"> </block><block class="Relation">=</block><block class="Normal"> 8</block></line></area-container></editarea></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 315.818px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".7495200378658393" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.7495200378658393)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M224,48 C224,29.77 248.27,15 278.2,15 C308.14,15 332.41,29.77 332.41,48 C332.41,66.23 308.14,81 278.2,81 C248.27,81 224,66.23 224,48 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M229.24,125 L332.41,125 L332.41,186 L229.24,186 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M228,262 C228,243.77 252.27,229 282.2,229 C312.14,229 336.41,243.77 336.41,262 C336.41,280.23 312.14,295 282.2,295 C252.27,295 228,280.23 228,262 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M256.1,106 L267.65,106 L267.65,82 L290.76,82 L290.76,106 L302.31,106 L279.2,122 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M258.1,210 L269.65,210 L269.65,186 L292.76,186 L292.76,210 L304.31,210 L281.2,226 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M500,47.82 C500,29.59 524.27,14.82 554.2,14.82 C584.14,14.82 608.41,29.59 608.41,47.82 C608.41,66.04 584.14,80.82 554.2,80.82 C524.27,80.82 500,66.04 500,47.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M505.24,124.82 L608.41,124.82 L608.41,185.82 L505.24,185.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M504,261.82 C504,243.59 528.27,228.82 558.2,228.82 C588.14,228.82 612.41,243.59 612.41,261.82 C612.41,280.04 588.14,294.82 558.2,294.82 C528.27,294.82 504,280.04 504,261.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M532.1,105.82 L543.65,105.82 L543.65,81.82 L566.76,81.82 L566.76,105.82 L578.31,105.82 L555.2,121.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M534.1,209.82 L545.65,209.82 L545.65,185.82 L568.76,185.82 L568.76,209.82 L580.31,209.82 L557.2,225.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 262px; top: 28px;"><dg-editor-container data-editor-id="de8726706372192847" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">-5</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 250px; top: 132px;"><dg-editor-container data-editor-id="de7167095714890507" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;"> |  |</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 271px; top: 243px;"><dg-editor-container data-editor-id="de45635014477460734" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">5</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 544px; top: 27.8182px;"><dg-editor-container data-editor-id="de12367288854975311" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">8</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 526px; top: 131.818px;"><dg-editor-container data-editor-id="de2037888599834019" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;"> |  |</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 547px; top: 242.818px;"><dg-editor-container data-editor-id="de4647921318196696" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">8</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで</block><block style="font-weight: bold;">絶対値を求める関数</block><block>というのは</block><block style="font-weight: bold;">単項演算子</block><block>ですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>２倍する関数を使う</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable" style="font-family: Asana-Math, Asana;"><area-baseline aria-hidden="true">a</area-baseline><area-container><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">1 </block><block class="Binary">×</block><block class="Normal"> 2 </block><block class="Relation">=</block><block class="Normal"> 2</block></line><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">2 </block><block class="Binary">×</block><block class="Normal"> 2 </block><block class="Relation">=</block><block class="Normal"> 4</block></line></area-container></editarea></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 315.818px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".16969983818588652" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.16969983818588652)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M224,48 C224,29.77 248.27,15 278.2,15 C308.14,15 332.41,29.77 332.41,48 C332.41,66.23 308.14,81 278.2,81 C248.27,81 224,66.23 224,48 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M229.24,125 L332.41,125 L332.41,186 L229.24,186 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M228,262 C228,243.77 252.27,229 282.2,229 C312.14,229 336.41,243.77 336.41,262 C336.41,280.23 312.14,295 282.2,295 C252.27,295 228,280.23 228,262 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M256.1,106 L267.65,106 L267.65,82 L290.76,82 L290.76,106 L302.31,106 L279.2,122 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M258.1,210 L269.65,210 L269.65,186 L292.76,186 L292.76,210 L304.31,210 L281.2,226 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M500,47.82 C500,29.59 524.27,14.82 554.2,14.82 C584.14,14.82 608.41,29.59 608.41,47.82 C608.41,66.04 584.14,80.82 554.2,80.82 C524.27,80.82 500,66.04 500,47.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M504,261.82 C504,243.59 528.27,228.82 558.2,228.82 C588.14,228.82 612.41,243.59 612.41,261.82 C612.41,280.04 588.14,294.82 558.2,294.82 C528.27,294.82 504,280.04 504,261.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M532.1,105.82 L543.65,105.82 L543.65,81.82 L566.76,81.82 L566.76,105.82 L578.31,105.82 L555.2,121.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M534.1,209.82 L545.65,209.82 L545.65,185.82 L568.76,185.82 L568.76,209.82 L580.31,209.82 L557.2,225.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M505.24,125 L608.41,125 L608.41,186 L505.24,186 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 270px; top: 28px;"><dg-editor-container data-editor-id="de11357511571338941" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">1</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 250px; top: 132px;"><dg-editor-container data-editor-id="de49604104326458154" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;"> </block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 271px; top: 243px;"><dg-editor-container data-editor-id="de26556971121953876" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">2</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 545px; top: 27.8182px;"><dg-editor-container data-editor-id="de39149308008257455" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">2</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 547px; top: 242.818px;"><dg-editor-container data-editor-id="de9448296543977937" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">4</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 252px; top: 137px;"><dg-editor-container data-editor-id="de48459752382730625" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.73em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Binary" style="font-family: Asana-Mathrm, Asana-Math, Asana; font-weight: bold;">×</block><block class="Normal" style="font-family: Asana-Mathrm, Asana-Math, Asana; font-weight: bold;">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 526px; top: 132px;"><dg-editor-container data-editor-id="de028869451572813176" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;"> </block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 528px; top: 137px;"><dg-editor-container data-editor-id="de8908071226139318" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.73em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Binary" style="font-family: Asana-Mathrm, Asana-Math, Asana; font-weight: bold;">×</block><block class="Normal" style="font-family: Asana-Mathrm, Asana-Math, Asana; font-weight: bold;">2</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>２倍する関数(テーブル表現)</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7634177679907784" style="position: relative; top: 0px; left: 256.96px; width: 346.44px;"><colgroup><col><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">インプット</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アウトプット</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>1</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>4</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>3</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>6</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>4</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>8</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、気温のテーブルを二次元平面にプロットしてグラフにしたら役立ったのとまったく同じ原理で、XY軸のグラフにプロットできます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>２倍する関数(XY軸のグラフ)</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 310px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape" data-amt="diagram/shapes/plot" transform="matrix(1,0,0,1,20,10)"><g><g><g class="test-xgi"><line x1="4.733319225641798" y1="0" x2="4.733319225641798" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="49.90188598271902" y1="0" x2="49.90188598271902" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="95.07045273979625" y1="0" x2="95.07045273979625" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="140.23901949687348" y1="0" x2="140.23901949687348" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="185.40758625395068" y1="0" x2="185.40758625395068" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="230.5761530110279" y1="0" x2="230.5761530110279" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="275.74471976810514" y1="0" x2="275.74471976810514" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="320.9132865251824" y1="0" x2="320.9132865251824" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="366.0818532822596" y1="0" x2="366.0818532822596" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="411.2504200393368" y1="0" x2="411.2504200393368" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="456.41898679641406" y1="0" x2="456.41898679641406" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="501.5875535534913" y1="0" x2="501.5875535534913" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="546.7561203105685" y1="0" x2="546.7561203105685" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="591.9246870676457" y1="0" x2="591.9246870676457" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="637.093253824723" y1="0" x2="637.093253824723" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="682.2618205818002" y1="0" x2="682.2618205818002" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="727.4303873388773" y1="0" x2="727.4303873388773" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="772.5989540959546" y1="0" x2="772.5989540959546" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="817.7675208530317" y1="0" x2="817.7675208530317" y2="270" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line></g><g class="test-ygi"><line x1="0" y1="225.22426874311492" x2="821" y2="225.22426874311492" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="0" y1="180.05570198603772" x2="821" y2="180.05570198603772" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="0" y1="134.8871352289605" x2="821" y2="134.8871352289605" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="0" y1="89.71856847188323" x2="821" y2="89.71856847188323" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line><line x1="0" y1="44.55000171480603" x2="821" y2="44.55000171480603" fill="none" stroke="#c3c3c3" stroke-width="0.5"></line></g></g><g><g class="test-xti" style="font-family: Asana-Math, Asana;"><line x1="0" y1="134.8871352289605" x2="817" y2="134.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="4.733319225641798" y1="130.8871352289605" x2="4.733319225641798" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="49.90188598271902" y1="130.8871352289605" x2="49.90188598271902" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="95.07045273979625" y1="130.8871352289605" x2="95.07045273979625" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="140.23901949687348" y1="130.8871352289605" x2="140.23901949687348" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="185.40758625395068" y1="130.8871352289605" x2="185.40758625395068" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="230.5761530110279" y1="130.8871352289605" x2="230.5761530110279" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="275.74471976810514" y1="130.8871352289605" x2="275.74471976810514" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="320.9132865251824" y1="130.8871352289605" x2="320.9132865251824" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="366.0818532822596" y1="130.8871352289605" x2="366.0818532822596" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="456.41898679641406" y1="130.8871352289605" x2="456.41898679641406" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="501.5875535534913" y1="130.8871352289605" x2="501.5875535534913" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="546.7561203105685" y1="130.8871352289605" x2="546.7561203105685" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="591.9246870676457" y1="130.8871352289605" x2="591.9246870676457" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="637.093253824723" y1="130.8871352289605" x2="637.093253824723" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="682.2618205818002" y1="130.8871352289605" x2="682.2618205818002" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="727.4303873388773" y1="130.8871352289605" x2="727.4303873388773" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="772.5989540959546" y1="130.8871352289605" x2="772.5989540959546" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="817.7675208530317" y1="130.8871352289605" x2="817.7675208530317" y2="138.8871352289605" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><path d="M812,131.2871352289605 L820,134.8871352289605 L812,138.48713522896048 Z" stroke="none" stroke-width="1" fill="rgb(50,50,50)" fill-opacity="1"></path></g><g class="test-yti" style="font-family: Asana-Math, Asana;"><line x1="411.2504200393368" y1="4" x2="411.2504200393368" y2="270" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="407.2504200393368" y1="225.22426874311492" x2="415.2504200393368" y2="225.22426874311492" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="407.2504200393368" y1="180.05570198603772" x2="415.2504200393368" y2="180.05570198603772" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="407.2504200393368" y1="89.71856847188323" x2="415.2504200393368" y2="89.71856847188323" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><line x1="407.2504200393368" y1="44.55000171480603" x2="415.2504200393368" y2="44.55000171480603" fill="none" stroke="rgb(50,50,50)" stroke-opacity="1" stroke-width="1"></line><path d="M407.6504200393368,9 L411.2504200393368,1 L414.8504200393368,9 Z" stroke="none" stroke-width="1" fill="rgb(50,50,50)" fill-opacity="1"></path></g><g class="test-plot-expression"><defs><clipPath id="cpfu28l40bc"><rect x="1" y="1" width="819" height="268"></rect></clipPath></defs><g clip-path="url(#cpfu28l40bc)"><path d=" M0.00,540.00 L0.75,540.00 L1.49,540.00 L2.24,540.00 L2.99,540.00 L3.74,540.00 L4.48,540.00 L5.23,540.00 L5.98,540.00 L6.72,540.00 L7.47,540.00 L8.22,540.00 L8.96,540.00 L9.71,540.00 L10.46,540.00 L11.21,540.00 L11.95,540.00 L12.70,540.00 L13.45,540.00 L14.19,540.00 L14.94,540.00 L15.69,540.00 L16.43,540.00 L17.18,540.00 L17.93,540.00 L18.68,540.00 L19.42,540.00 L20.17,540.00 L20.92,540.00 L21.66,540.00 L22.41,540.00 L23.16,540.00 L23.91,540.00 L24.65,540.00 L25.40,540.00 L26.15,540.00 L26.89,540.00 L27.64,540.00 L28.39,540.00 L29.13,540.00 L29.88,540.00 L30.63,540.00 L31.38,540.00 L32.12,540.00 L32.87,540.00 L33.62,540.00 L34.36,540.00 L35.11,540.00 L35.86,540.00 L36.61,540.00 L37.35,540.00 L38.10,540.00 L38.85,540.00 L39.59,540.00 L40.34,540.00 L41.09,540.00 L41.83,540.00 L42.58,540.00 L43.33,540.00 L44.08,540.00 L44.82,540.00 L45.57,540.00 L46.32,540.00 L47.06,540.00 L47.81,540.00 L48.56,540.00 L49.30,540.00 L50.05,540.00 L50.80,540.00 L51.55,540.00 L52.29,540.00 L53.04,540.00 L53.79,540.00 L54.53,540.00 L55.28,540.00 L56.03,540.00 L56.78,540.00 L57.52,540.00 L58.27,540.00 L59.02,540.00 L59.76,540.00 L60.51,540.00 L61.26,540.00 L62.00,540.00 L62.75,540.00 L63.50,540.00 L64.25,540.00 L64.99,540.00 L65.74,540.00 L66.49,540.00 L67.23,540.00 L67.98,540.00 L68.73,540.00 L69.47,540.00 L70.22,540.00 L70.97,540.00 L71.72,540.00 L72.46,540.00 L73.21,540.00 L73.96,540.00 L74.70,540.00 L75.45,540.00 L76.20,540.00 L76.95,540.00 L77.69,540.00 L78.44,540.00 L79.19,540.00 L79.93,540.00 L80.68,540.00 L81.43,540.00 L82.17,540.00 L82.92,540.00 L83.67,540.00 L84.42,540.00 L85.16,540.00 L85.91,540.00 L86.66,540.00 L87.40,540.00 L88.15,540.00 L88.90,540.00 L89.65,540.00 L90.39,540.00 L91.14,540.00 L91.89,540.00 L92.63,540.00 L93.38,540.00 L94.13,540.00 L94.87,540.00 L95.62,540.00 L96.37,540.00 L97.12,540.00 L97.86,540.00 L98.61,540.00 L99.36,540.00 L100.10,540.00 L100.85,540.00 L101.60,540.00 L102.34,540.00 L103.09,540.00 L103.84,540.00 L104.59,540.00 L105.33,540.00 L106.08,540.00 L106.83,540.00 L107.57,540.00 L108.32,540.00 L109.07,540.00 L109.82,540.00 L110.56,540.00 L111.31,540.00 L112.06,540.00 L112.80,540.00 L113.55,540.00 L114.30,540.00 L115.04,540.00 L115.79,540.00 L116.54,540.00 L117.29,540.00 L118.03,540.00 L118.78,540.00 L119.53,540.00 L120.27,540.00 L121.02,540.00 L121.77,540.00 L122.52,540.00 L123.26,540.00 L124.01,540.00 L124.76,540.00 L125.50,540.00 L126.25,540.00 L127.00,540.00 L127.74,540.00 L128.49,540.00 L129.24,540.00 L129.99,540.00 L130.73,540.00 L131.48,540.00 L132.23,540.00 L132.97,540.00 L133.72,540.00 L134.47,540.00 L135.21,540.00 L135.96,540.00 L136.71,540.00 L137.46,540.00 L138.20,540.00 L138.95,540.00 L139.70,540.00 L140.44,540.00 L141.19,540.00 L141.94,540.00 L142.69,540.00 L143.43,540.00 L144.18,540.00 L144.93,540.00 L145.67,540.00 L146.42,540.00 L147.17,540.00 L147.91,540.00 L148.66,540.00 L149.41,540.00 L150.16,540.00 L150.90,540.00 L151.65,540.00 L152.40,540.00 L153.14,540.00 L153.89,540.00 L154.64,540.00 L155.38,540.00 L156.13,540.00 L156.88,540.00 L157.63,540.00 L158.37,540.00 L159.12,540.00 L159.87,540.00 L160.61,540.00 L161.36,540.00 L162.11,540.00 L162.86,540.00 L163.60,540.00 L164.35,540.00 L165.10,540.00 L165.84,540.00 L166.59,540.00 L167.34,540.00 L168.08,540.00 L168.83,540.00 L169.58,540.00 L170.33,540.00 L171.07,540.00 L171.82,540.00 L172.57,540.00 L173.31,540.00 L174.06,540.00 L174.81,540.00 L175.56,540.00 L176.30,540.00 L177.05,540.00 L177.80,540.00 L178.54,540.00 L179.29,540.00 L180.04,540.00 L180.78,540.00 L181.53,540.00 L182.28,540.00 L183.03,540.00 L183.77,540.00 L184.52,540.00 L185.27,540.00 L186.01,540.00 L186.76,540.00 L187.51,540.00 L188.25,540.00 L189.00,540.00 L189.75,540.00 L190.50,540.00 L191.24,540.00 L191.99,540.00 L192.74,540.00 L193.48,540.00 L194.23,540.00 L194.98,540.00 L195.73,540.00 L196.47,540.00 L197.22,540.00 L197.97,540.00 L198.71,540.00 L199.46,540.00 L200.21,540.00 L200.95,540.00 L201.70,540.00 L202.45,540.00 L203.20,540.00 L203.94,540.00 L204.69,540.00 L205.44,540.00 L206.18,540.00 L206.93,540.00 L207.68,540.00 L208.42,540.00 L209.17,539.04 L209.92,537.55 L210.67,536.06 L211.41,534.56 L212.16,533.07 L212.91,531.57 L213.65,530.08 L214.40,528.59 L215.15,527.09 L215.90,525.60 L216.64,524.10 L217.39,522.61 L218.14,521.11 L218.88,519.62 L219.63,518.13 L220.38,516.63 L221.12,515.14 L221.87,513.64 L222.62,512.15 L223.37,510.66 L224.11,509.16 L224.86,507.67 L225.61,506.17 L226.35,504.68 L227.10,503.19 L227.85,501.69 L228.60,500.20 L229.34,498.70 L230.09,497.21 L230.84,495.72 L231.58,494.22 L232.33,492.73 L233.08,491.23 L233.82,489.74 L234.57,488.25 L235.32,486.75 L236.07,485.26 L236.81,483.76 L237.56,482.27 L238.31,480.77 L239.05,479.28 L239.80,477.79 L240.55,476.29 L241.29,474.80 L242.04,473.30 L242.79,471.81 L243.54,470.32 L244.28,468.82 L245.03,467.33 L245.78,465.83 L246.52,464.34 L247.27,462.85 L248.02,461.35 L248.77,459.86 L249.51,458.36 L250.26,456.87 L251.01,455.38 L251.75,453.88 L252.50,452.39 L253.25,450.89 L253.99,449.40 L254.74,447.90 L255.49,446.41 L256.24,444.92 L256.98,443.42 L257.73,441.93 L258.48,440.43 L259.22,438.94 L259.97,437.45 L260.72,435.95 L261.46,434.46 L262.21,432.96 L262.96,431.47 L263.71,429.98 L264.45,428.48 L265.20,426.99 L265.95,425.49 L266.69,424.00 L267.44,422.51 L268.19,421.01 L268.94,419.52 L269.68,418.02 L270.43,416.53 L271.18,415.03 L271.92,413.54 L272.67,412.05 L273.42,410.55 L274.16,409.06 L274.91,407.56 L275.66,406.07 L276.41,404.58 L277.15,403.08 L277.90,401.59 L278.65,400.09 L279.39,398.60 L280.14,397.11 L280.89,395.61 L281.64,394.12 L282.38,392.62 L283.13,391.13 L283.88,389.64 L284.62,388.14 L285.37,386.65 L286.12,385.15 L286.86,383.66 L287.61,382.17 L288.36,380.67 L289.11,379.18 L289.85,377.68 L290.60,376.19 L291.35,374.69 L292.09,373.20 L292.84,371.71 L293.59,370.21 L294.33,368.72 L295.08,367.22 L295.83,365.73 L296.58,364.24 L297.32,362.74 L298.07,361.25 L298.82,359.75 L299.56,358.26 L300.31,356.77 L301.06,355.27 L301.81,353.78 L302.55,352.28 L303.30,350.79 L304.05,349.30 L304.79,347.80 L305.54,346.31 L306.29,344.81 L307.03,343.32 L307.78,341.82 L308.53,340.33 L309.28,338.84 L310.02,337.34 L310.77,335.85 L311.52,334.35 L312.26,332.86 L313.01,331.37 L313.76,329.87 L314.51,328.38 L315.25,326.88 L316.00,325.39 L316.75,323.90 L317.49,322.40 L318.24,320.91 L318.99,319.41 L319.73,317.92 L320.48,316.43 L321.23,314.93 L321.98,313.44 L322.72,311.94 L323.47,310.45 L324.22,308.95 L324.96,307.46 L325.71,305.97 L326.46,304.47 L327.20,302.98 L327.95,301.48 L328.70,299.99 L329.45,298.50 L330.19,297.00 L330.94,295.51 L331.69,294.01 L332.43,292.52 L333.18,291.03 L333.93,289.53 L334.68,288.04 L335.42,286.54 L336.17,285.05 L336.92,283.56 L337.66,282.06 L338.41,280.57 L339.16,279.07 L339.90,277.58 L340.65,276.08 L341.40,274.59 L342.15,273.10 L342.89,271.60 L343.64,270.11 L344.39,268.61 L345.13,267.12 L345.88,265.63 L346.63,264.13 L347.37,262.64 L348.12,261.14 L348.87,259.65 L349.62,258.16 L350.36,256.66 L351.11,255.17 L351.86,253.67 L352.60,252.18 L353.35,250.69 L354.10,249.19 L354.85,247.70 L355.59,246.20 L356.34,244.71 L357.09,243.22 L357.83,241.72 L358.58,240.23 L359.33,238.73 L360.07,237.24 L360.82,235.74 L361.57,234.25 L362.32,232.76 L363.06,231.26 L363.81,229.77 L364.56,228.27 L365.30,226.78 L366.05,225.29 L366.80,223.79 L367.55,222.30 L368.29,220.80 L369.04,219.31 L369.79,217.82 L370.53,216.32 L371.28,214.83 L372.03,213.33 L372.77,211.84 L373.52,210.35 L374.27,208.85 L375.02,207.36 L375.76,205.86 L376.51,204.37 L377.26,202.87 L378.00,201.38 L378.75,199.89 L379.50,198.39 L380.24,196.90 L380.99,195.40 L381.74,193.91 L382.49,192.42 L383.23,190.92 L383.98,189.43 L384.73,187.93 L385.47,186.44 L386.22,184.95 L386.97,183.45 L387.72,181.96 L388.46,180.46 L389.21,178.97 L389.96,177.48 L390.70,175.98 L391.45,174.49 L392.20,172.99 L392.94,171.50 L393.69,170.00 L394.44,168.51 L395.19,167.02 L395.93,165.52 L396.68,164.03 L397.43,162.53 L398.17,161.04 L398.92,159.55 L399.67,158.05 L400.41,156.56 L401.16,155.06 L401.91,153.57 L402.66,152.08 L403.40,150.58 L404.15,149.09 L404.90,147.59 L405.64,146.10 L406.39,144.61 L407.14,143.11 L407.89,141.62 L408.63,140.12 L409.38,138.63 L410.13,137.14 L410.87,135.64 L411.62,134.15 L412.37,132.65 L413.11,131.16 L413.86,129.66 L414.61,128.17 L415.36,126.68 L416.10,125.18 L416.85,123.69 L417.60,122.19 L418.34,120.70 L419.09,119.21 L419.84,117.71 L420.59,116.22 L421.33,114.72 L422.08,113.23 L422.83,111.74 L423.57,110.24 L424.32,108.75 L425.07,107.25 L425.81,105.76 L426.56,104.27 L427.31,102.77 L428.06,101.28 L428.80,99.78 L429.55,98.29 L430.30,96.79 L431.04,95.30 L431.79,93.81 L432.54,92.31 L433.28,90.82 L434.03,89.32 L434.78,87.83 L435.53,86.34 L436.27,84.84 L437.02,83.35 L437.77,81.85 L438.51,80.36 L439.26,78.87 L440.01,77.37 L440.76,75.88 L441.50,74.38 L442.25,72.89 L443.00,71.40 L443.74,69.90 L444.49,68.41 L445.24,66.91 L445.98,65.42 L446.73,63.92 L447.48,62.43 L448.23,60.94 L448.97,59.44 L449.72,57.95 L450.47,56.45 L451.21,54.96 L451.96,53.47 L452.71,51.97 L453.45,50.48 L454.20,48.98 L454.95,47.49 L455.70,46.00 L456.44,44.50 L457.19,43.01 L457.94,41.51 L458.68,40.02 L459.43,38.53 L460.18,37.03 L460.93,35.54 L461.67,34.04 L462.42,32.55 L463.17,31.05 L463.91,29.56 L464.66,28.07 L465.41,26.57 L466.15,25.08 L466.90,23.58 L467.65,22.09 L468.40,20.60 L469.14,19.10 L469.89,17.61 L470.64,16.11 L471.38,14.62 L472.13,13.13 L472.88,11.63 L473.63,10.14 L474.37,8.64 L475.12,7.15 L475.87,5.66 L476.61,4.16 L477.36,2.67 L478.11,1.17 L478.85,-0.32 L479.60,-1.81 L480.35,-3.31 L481.10,-4.80 L481.84,-6.30 L482.59,-7.79 L483.34,-9.29 L484.08,-10.78 L484.83,-12.27 L485.58,-13.77 L486.32,-15.26 L487.07,-16.76 L487.82,-18.25 L488.57,-19.74 L489.31,-21.24 L490.06,-22.73 L490.81,-24.23 L491.55,-25.72 L492.30,-27.21 L493.05,-28.71 L493.80,-30.20 L494.54,-31.70 L495.29,-33.19 L496.04,-34.68 L496.78,-36.18 L497.53,-37.67 L498.28,-39.17 L499.02,-40.66 L499.77,-42.16 L500.52,-43.65 L501.27,-45.14 L502.01,-46.64 L502.76,-48.13 L503.51,-49.63 L504.25,-51.12 L505.00,-52.61 L505.75,-54.11 L506.49,-55.60 L507.24,-57.10 L507.99,-58.59 L508.74,-60.08 L509.48,-61.58 L510.23,-63.07 L510.98,-64.57 L511.72,-66.06 L512.47,-67.55 L513.22,-69.05 L513.97,-70.54 L514.71,-72.04 L515.46,-73.53 L516.21,-75.03 L516.95,-76.52 L517.70,-78.01 L518.45,-79.51 L519.19,-81.00 L519.94,-82.50 L520.69,-83.99 L521.44,-85.48 L522.18,-86.98 L522.93,-88.47 L523.68,-89.97 L524.42,-91.46 L525.17,-92.95 L525.92,-94.45 L526.67,-95.94 L527.41,-97.44 L528.16,-98.93 L528.91,-100.42 L529.65,-101.92 L530.40,-103.41 L531.15,-104.91 L531.89,-106.40 L532.64,-107.90 L533.39,-109.39 L534.14,-110.88 L534.88,-112.38 L535.63,-113.87 L536.38,-115.37 L537.12,-116.86 L537.87,-118.35 L538.62,-119.85 L539.36,-121.34 L540.11,-122.84 L540.86,-124.33 L541.61,-125.82 L542.35,-127.32 L543.10,-128.81 L543.85,-130.31 L544.59,-131.80 L545.34,-133.29 L546.09,-134.79 L546.84,-136.28 L547.58,-137.78 L548.33,-139.27 L549.08,-140.76 L549.82,-142.26 L550.57,-143.75 L551.32,-145.25 L552.06,-146.74 L552.81,-148.24 L553.56,-149.73 L554.31,-151.22 L555.05,-152.72 L555.80,-154.21 L556.55,-155.71 L557.29,-157.20 L558.04,-158.69 L558.79,-160.19 L559.54,-161.68 L560.28,-163.18 L561.03,-164.67 L561.78,-166.16 L562.52,-167.66 L563.27,-169.15 L564.02,-170.65 L564.76,-172.14 L565.51,-173.63 L566.26,-175.13 L567.01,-176.62 L567.75,-178.12 L568.50,-179.61 L569.25,-181.11 L569.99,-182.60 L570.74,-184.09 L571.49,-185.59 L572.23,-187.08 L572.98,-188.58 L573.73,-190.07 L574.48,-191.56 L575.22,-193.06 L575.97,-194.55 L576.72,-196.05 L577.46,-197.54 L578.21,-199.03 L578.96,-200.53 L579.71,-202.02 L580.45,-203.52 L581.20,-205.01 L581.95,-206.50 L582.69,-208.00 L583.44,-209.49 L584.19,-210.99 L584.93,-212.48 L585.68,-213.98 L586.43,-215.47 L587.18,-216.96 L587.92,-218.46 L588.67,-219.95 L589.42,-221.45 L590.16,-222.94 L590.91,-224.43 L591.66,-225.93 L592.40,-227.42 L593.15,-228.92 L593.90,-230.41 L594.65,-231.90 L595.39,-233.40 L596.14,-234.89 L596.89,-236.39 L597.63,-237.88 L598.38,-239.37 L599.13,-240.87 L599.88,-242.36 L600.62,-243.86 L601.37,-245.35 L602.12,-246.84 L602.86,-248.34 L603.61,-249.83 L604.36,-251.33 L605.10,-252.82 L605.85,-254.32 L606.60,-255.81 L607.35,-257.30 L608.09,-258.80 L608.84,-260.29 L609.59,-261.79 L610.33,-263.28 L611.08,-264.77 L611.83,-266.27 L612.58,-267.76 L613.32,-269.26 L614.07,-270.00 L614.82,-270.00 L615.56,-270.00 L616.31,-270.00 L617.06,-270.00 L617.80,-270.00 L618.55,-270.00 L619.30,-270.00 L620.05,-270.00 L620.79,-270.00 L621.54,-270.00 L622.29,-270.00 L623.03,-270.00 L623.78,-270.00 L624.53,-270.00 L625.27,-270.00 L626.02,-270.00 L626.77,-270.00 L627.52,-270.00 L628.26,-270.00 L629.01,-270.00 L629.76,-270.00 L630.50,-270.00 L631.25,-270.00 L632.00,-270.00 L632.75,-270.00 L633.49,-270.00 L634.24,-270.00 L634.99,-270.00 L635.73,-270.00 L636.48,-270.00 L637.23,-270.00 L637.97,-270.00 L638.72,-270.00 L639.47,-270.00 L640.22,-270.00 L640.96,-270.00 L641.71,-270.00 L642.46,-270.00 L643.20,-270.00 L643.95,-270.00 L644.70,-270.00 L645.44,-270.00 L646.19,-270.00 L646.94,-270.00 L647.69,-270.00 L648.43,-270.00 L649.18,-270.00 L649.93,-270.00 L650.67,-270.00 L651.42,-270.00 L652.17,-270.00 L652.92,-270.00 L653.66,-270.00 L654.41,-270.00 L655.16,-270.00 L655.90,-270.00 L656.65,-270.00 L657.40,-270.00 L658.14,-270.00 L658.89,-270.00 L659.64,-270.00 L660.39,-270.00 L661.13,-270.00 L661.88,-270.00 L662.63,-270.00 L663.37,-270.00 L664.12,-270.00 L664.87,-270.00 L665.62,-270.00 L666.36,-270.00 L667.11,-270.00 L667.86,-270.00 L668.60,-270.00 L669.35,-270.00 L670.10,-270.00 L670.84,-270.00 L671.59,-270.00 L672.34,-270.00 L673.09,-270.00 L673.83,-270.00 L674.58,-270.00 L675.33,-270.00 L676.07,-270.00 L676.82,-270.00 L677.57,-270.00 L678.31,-270.00 L679.06,-270.00 L679.81,-270.00 L680.56,-270.00 L681.30,-270.00 L682.05,-270.00 L682.80,-270.00 L683.54,-270.00 L684.29,-270.00 L685.04,-270.00 L685.79,-270.00 L686.53,-270.00 L687.28,-270.00 L688.03,-270.00 L688.77,-270.00 L689.52,-270.00 L690.27,-270.00 L691.01,-270.00 L691.76,-270.00 L692.51,-270.00 L693.26,-270.00 L694.00,-270.00 L694.75,-270.00 L695.50,-270.00 L696.24,-270.00 L696.99,-270.00 L697.74,-270.00 L698.48,-270.00 L699.23,-270.00 L699.98,-270.00 L700.73,-270.00 L701.47,-270.00 L702.22,-270.00 L702.97,-270.00 L703.71,-270.00 L704.46,-270.00 L705.21,-270.00 L705.96,-270.00 L706.70,-270.00 L707.45,-270.00 L708.20,-270.00 L708.94,-270.00 L709.69,-270.00 L710.44,-270.00 L711.18,-270.00 L711.93,-270.00 L712.68,-270.00 L713.43,-270.00 L714.17,-270.00 L714.92,-270.00 L715.67,-270.00 L716.41,-270.00 L717.16,-270.00 L717.91,-270.00 L718.66,-270.00 L719.40,-270.00 L720.15,-270.00 L720.90,-270.00 L721.64,-270.00 L722.39,-270.00 L723.14,-270.00 L723.88,-270.00 L724.63,-270.00 L725.38,-270.00 L726.13,-270.00 L726.87,-270.00 L727.62,-270.00 L728.37,-270.00 L729.11,-270.00 L729.86,-270.00 L730.61,-270.00 L731.35,-270.00 L732.10,-270.00 L732.85,-270.00 L733.60,-270.00 L734.34,-270.00 L735.09,-270.00 L735.84,-270.00 L736.58,-270.00 L737.33,-270.00 L738.08,-270.00 L738.83,-270.00 L739.57,-270.00 L740.32,-270.00 L741.07,-270.00 L741.81,-270.00 L742.56,-270.00 L743.31,-270.00 L744.05,-270.00 L744.80,-270.00 L745.55,-270.00 L746.30,-270.00 L747.04,-270.00 L747.79,-270.00 L748.54,-270.00 L749.28,-270.00 L750.03,-270.00 L750.78,-270.00 L751.53,-270.00 L752.27,-270.00 L753.02,-270.00 L753.77,-270.00 L754.51,-270.00 L755.26,-270.00 L756.01,-270.00 L756.75,-270.00 L757.50,-270.00 L758.25,-270.00 L759.00,-270.00 L759.74,-270.00 L760.49,-270.00 L761.24,-270.00 L761.98,-270.00 L762.73,-270.00 L763.48,-270.00 L764.22,-270.00 L764.97,-270.00 L765.72,-270.00 L766.47,-270.00 L767.21,-270.00 L767.96,-270.00 L768.71,-270.00 L769.45,-270.00 L770.20,-270.00 L770.95,-270.00 L771.70,-270.00 L772.44,-270.00 L773.19,-270.00 L773.94,-270.00 L774.68,-270.00 L775.43,-270.00 L776.18,-270.00 L776.92,-270.00 L777.67,-270.00 L778.42,-270.00 L779.17,-270.00 L779.91,-270.00 L780.66,-270.00 L781.41,-270.00 L782.15,-270.00 L782.90,-270.00 L783.65,-270.00 L784.39,-270.00 L785.14,-270.00 L785.89,-270.00 L786.64,-270.00 L787.38,-270.00 L788.13,-270.00 L788.88,-270.00 L789.62,-270.00 L790.37,-270.00 L791.12,-270.00 L791.87,-270.00 L792.61,-270.00 L793.36,-270.00 L794.11,-270.00 L794.85,-270.00 L795.60,-270.00 L796.35,-270.00 L797.09,-270.00 L797.84,-270.00 L798.59,-270.00 L799.34,-270.00 L800.08,-270.00 L800.83,-270.00 L801.58,-270.00 L802.32,-270.00 L803.07,-270.00 L803.82,-270.00 L804.57,-270.00 L805.31,-270.00 L806.06,-270.00 L806.81,-270.00 L807.55,-270.00 L808.30,-270.00 L809.05,-270.00 L809.79,-270.00 L810.54,-270.00 L811.29,-270.00 L812.04,-270.00 L812.78,-270.00 L813.53,-270.00 L814.28,-270.00 L815.02,-270.00 L815.77,-270.00 L816.52,-270.00 L817.26,-270.00 L818.01,-270.00 L818.76,-270.00 L819.51,-270.00 L820.25,-270.00 L821.00,-270.00" style="stroke-width: 2; stroke: rgb(74, 144, 226); stroke-opacity: 0.8;"></path></g></g><g class="test-xtl" style="font-family: &quot;Open Sans&quot;, verdana, arial, sans-serif;"><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="2.4533192256417986" y="141.8871352289605">-9</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="47.62188598271902" y="141.8871352289605">-8</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="92.79045273979625" y="141.8871352289605">-7</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="137.95901949687348" y="141.8871352289605">-6</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="183.12758625395068" y="141.8871352289605">-5</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="228.2961530110279" y="141.8871352289605">-4</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="273.46471976810517" y="141.8871352289605">-3</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="318.6332865251824" y="141.8871352289605">-2</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="363.80185328225963" y="141.8871352289605">-1</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="456.41898679641406" y="141.8871352289605">1</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="501.5875535534913" y="141.8871352289605">2</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="546.7561203105685" y="141.8871352289605">3</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="591.9246870676457" y="141.8871352289605">4</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="637.093253824723" y="141.8871352289605">5</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="682.2618205818002" y="141.8871352289605">6</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="727.4303873388773" y="141.8871352289605">7</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="772.5989540959546" y="141.8871352289605">8</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="817.7675208530317" y="141.8871352289605">9</text><text text-anchor="middle" font-size="8" dominant-baseline="hanging" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="403.2504200393368" y="139.8871352289605">0</text></g><g class="test-ytl" style="font-family: &quot;Open Sans&quot;, verdana, arial, sans-serif;"><text text-anchor="end" dominant-baseline="middle" font-size="11" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="403.2504200393368" y="225.22426874311492">-2</text><text text-anchor="end" dominant-baseline="middle" font-size="11" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="403.2504200393368" y="180.05570198603772">-1</text><text text-anchor="end" dominant-baseline="middle" font-size="11" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="403.2504200393368" y="89.71856847188323">1</text><text text-anchor="end" dominant-baseline="middle" font-size="11" stroke="none" fill="rgb(50,50,50)" fill-opacity="1" x="403.2504200393368" y="44.55000171480603">2</text></g><rect class="real" x="1" y="1" width="819" height="268" style="fill: transparent; stroke: none;"></rect></g></g></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>どうせ、X軸とY軸の二次元平面にプロットすることも見越して、一石二鳥を狙うような感じで、数学世界の慣習で、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>インプット側の数値の変数はXとする</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>アウトプット側の数値の変数はYとする</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ことに暗黙の了解としてなっており、変数XとYのテーブルで関数表現がされることも多いです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>２倍する関数(XY変数のテーブル)</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.320659404474788" style="position: relative; top: 0px; left: 256.96px; width: 346.44px;"><colgroup><col><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">X</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Y</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>1</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>4</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>3</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>6</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>4</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>8</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>・・・</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>義務教育では、</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">y</block><block class="Relation">=</block><block class="Normal">2x</block></line></editarea></compositeblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という方程式が２倍する関数になる、とヤブから棒に教えられることが多く、世の中高生が混乱しているようです。</block></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7088424194893628" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7088424194893628"><prefix style="text-align: left; padding-right: 0.25em;">10.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>数式だけが関数なのではない</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「数学法則を使う関数」と例のひとつであげたということは、数式だけが関数ではないことを意味します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%A2%E6%95%B0_(%E6%95%B0%E5%AD%A6)" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%A2%E6%95%B0_(%E6%95%B0%E5%AD%A6)" target="_blank" style="color: inherit; text-decoration: inherit;">関数 (数学)</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>には、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.1249052180606316"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">かつては、ある変数に依存して決まる値あるいはその対応を表す式の事であった</block><block>。この言葉はライプニッツによって導入された。その後定義が一般化されて行き、</block><block style="font-weight: bold;">現代的には数の集合に値をとる写像の一種であると理解される</block><block>。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この f(x) という表記法は18世紀の数学者オイラーによるものである。</block><block style="font-weight: bold;">オイラー自身は、変数や定数を組み合わせてできた数式の事を関数と定義していた</block><block>が、コーシーは上に述べたように、y という変数を関数と定義した。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">現代的解釈</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ディリクレは、x と f(x) の対応関係に対して一定の法則性を持たせる必要は無いとした。つまり、個々の独立変数と従属変数の対応そのものが関数であり、その対応は数式などで表す必要はないという、オイラーとは異なる立場をとっている。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合論的立場に立つ現代数学では、ディリクレのように関数を対応規則 f のことであると解釈する。それは二項関係の特別の場合として関数を定義するということであり、その意味で関数は写像の同義語である[注釈 2]。</block><block>より細かく、「数」の集合への写像に限る場合もある[注釈 3]。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>だいたい筆者が義務教育から高校にかけて数学の授業で「関数」を教わった記憶で言うと、おおよそ「関数」とは、オイラーが主張していたような数式として導入されたように思います。ところが実際には現代的な解釈では、そうではない、本稿であげたようなテーブルのようなものでも関数で、概念的には集合論の写像のイメージが正しいのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>次の章では、写像（Map）について調べましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.3836461398847524" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.3836461398847524"><prefix style="text-align: left; padding-right: 0.5em;">11. </prefix><blocks><baselineblock class="inline"></baselineblock><block>写像（Map）</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.4335511845157264" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.4335511845157264"><prefix style="text-align: left; padding-right: 0.25em;">11.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>写像（Map）という概念の定義</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Map_(mathematics)" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Map_(mathematics)" target="_blank" style="color: inherit; text-decoration: inherit;">https://en.wikipedia.org/wiki/Map_(mathematics)</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4165688133896198"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In mathematics, a map is often used as a synonym for a function, but may also refer to some generalizations. </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学では、</block><block style="font-weight: bold;">写像(map)</block><block>は</block><block style="font-weight: bold;">関数(function)</block><block>の</block><block style="font-weight: bold;">同義語</block><block>として使われることが多いですが、いくつかの一般化を指すこともあります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%86%99%E5%83%8F" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%86%99%E5%83%8F" target="_blank" style="color: inherit; text-decoration: inherit;">https://ja.wikipedia.org/wiki/写像</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.37814192638993793"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像（しゃぞう、英: mapping, map、 仏: application）</block><block>とは、二つの集合が与えられたときに、一方の集合の各元に対し、他方の集合のただひとつの元を指定して結びつける対応のことである。</block><block style="font-weight: bold;">関数、変換、作用素、射</block><block>などが</block><block style="font-weight: bold;">写像の同義語</block><block>として用いられることもある。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ブルバキに見られるように、写像は集合とともに現代数学の基礎となる道具の一つである。現代的な立場では、</block><block style="font-weight: bold;">「写像」と（一価の）「関数」は論理的におなじ概念を表すものと理解されている</block><block>(略)</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ざっくり、写像とは関数を別の観点から描き直したものです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 315.818px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".35570611630816673" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.35570611630816673)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M361.41,793 L489.41,793 L489.41,854 L361.41,854 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M391,46.59 C391,26.58 418.4,10.36 452.2,10.36 C486.01,10.36 513.41,26.58 513.41,46.59 C513.41,66.6 486.01,82.82 452.2,82.82 C418.4,82.82 391,66.6 391,46.59 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M429.1,107.82 L440.65,107.82 L440.65,83.82 L463.76,83.82 L463.76,107.82 L475.31,107.82 L452.2,123.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M429.1,212.82 L440.65,212.82 L440.65,188.82 L463.76,188.82 L463.76,212.82 L475.31,212.82 L452.2,228.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M391,268.59 C391,248.58 418.4,232.36 452.2,232.36 C486.01,232.36 513.41,248.58 513.41,268.59 C513.41,288.6 486.01,304.82 452.2,304.82 C418.4,304.82 391,288.6 391,268.59 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M389,126.82 L517,126.82 L517,187.82 L389,187.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M214,50.82 C214,32.59 238.27,17.82 268.2,17.82 C298.14,17.82 322.41,32.59 322.41,50.82 C322.41,69.04 298.14,83.82 268.2,83.82 C238.27,83.82 214,69.04 214,50.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M217,265.82 C217,247.59 241.27,232.82 271.2,232.82 C301.14,232.82 325.41,247.59 325.41,265.82 C325.41,284.04 301.14,298.82 271.2,298.82 C241.27,298.82 217,284.04 217,265.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M246.1,108.82 L257.65,108.82 L257.65,84.82 L280.76,84.82 L280.76,108.82 L292.31,108.82 L269.2,124.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M247.1,213.82 L258.65,213.82 L258.65,189.82 L281.76,189.82 L281.76,213.82 L293.31,213.82 L270.2,229.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M207,126.82 L335,126.82 L335,187.82 L207,187.82 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: -34.1818px;"><dg-editor-container data-editor-id="de4438115363700603" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">イギリスの首都は？</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 401px; top: 250.818px;"><dg-editor-container data-editor-id="de44794264231242087" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">ロンドン</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 399.591px; top: 140.818px;"><dg-editor-container data-editor-id="de43697839086994716" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">首都関数</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 396px; top: 27.8182px;"><dg-editor-container data-editor-id="de6183463747857807" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">イギリス</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 251px; top: 30.8182px;"><dg-editor-container data-editor-id="de24836754057999344" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">国</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 241px; top: 246.818px;"><dg-editor-container data-editor-id="de33272080510362745" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">都市</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 217.591px; top: 140.818px;"><dg-editor-container data-editor-id="de8219244148670344" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">首都関数</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>首都関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 538px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".9870248721569066" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.9870248721569066)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M121,369 C121,306.32 176.29,255.5 244.5,255.5 C312.71,255.5 368,306.32 368,369 C368,431.68 312.71,482.5 244.5,482.5 C176.29,482.5 121,431.68 121,369 Z" style="stroke-width: 3; stroke: rgb(65, 117, 5); stroke-opacity: 1; fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M486,368.5 C486,305.54 541.96,254.5 611,254.5 C680.04,254.5 736,305.54 736,368.5 C736,431.46 680.04,482.5 611,482.5 C541.96,482.5 486,431.46 486,368.5 Z" style="stroke-width: 3; stroke: rgb(65, 117, 5); stroke-opacity: 1; fill: none; fill-opacity: 1;"></path></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M207,291 C207,279.95 223.57,271 244,271 C264.43,271 281,279.95 281,291 C281,302.05 264.43,311 244,311 C223.57,311 207,302.05 207,291 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M254,424 C254,412.95 270.57,404 291,404 C311.43,404 328,412.95 328,424 C328,435.05 311.43,444 291,444 C270.57,444 254,435.05 254,424 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M164,410 C164,398.95 180.57,390 201,390 C221.43,390 238,398.95 238,410 C238,421.05 221.43,430 201,430 C180.57,430 164,421.05 164,410 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M268,353 C268,341.95 284.57,333 305,333 C325.43,333 342,341.95 342,353 C342,364.05 325.43,373 305,373 C284.57,373 268,364.05 268,353 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M159,350 C159,338.95 175.57,330 196,330 C216.43,330 233,338.95 233,350 C233,361.05 216.43,370 196,370 C175.57,370 159,361.05 159,350 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M602,291 C602,279.95 618.57,271 639,271 C659.43,271 676,279.95 676,291 C676,302.05 659.43,311 639,311 C618.57,311 602,302.05 602,291 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M647,386 C647,374.95 663.57,366 684,366 C704.43,366 721,374.95 721,386 C721,397.05 704.43,406 684,406 C663.57,406 647,397.05 647,386 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="composite-shape"><path class="real" d=" M514,384 C514,372.95 539.07,364 570,364 C600.93,364 626,372.95 626,384 C626,395.05 600.93,404 570,404 C539.07,404 514,395.05 514,384 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M609,339 C609,329.34 633.4,321.5 663.5,321.5 C693.6,321.5 718,329.34 718,339 C718,348.66 693.6,356.5 663.5,356.5 C633.4,356.5 609,348.66 609,339 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M522,330 C522,318.95 538.57,310 559,310 C579.43,310 596,318.95 596,330 C596,341.05 579.43,350 559,350 C538.57,350 522,341.05 522,330 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M532,432 C532,420.95 548.57,412 569,412 C589.43,412 606,420.95 606,432 C606,443.05 589.43,452 569,452 C548.57,452 532,443.05 532,432 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="composite-shape"><path class="real" d=" M619,436 C619,424.95 635.57,416 656,416 C676.43,416 693,424.95 693,436 C693,447.05 676.43,456 656,456 C635.57,456 619,447.05 619,436 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M281,291 L597,291" style="stroke: rgb(245, 166, 35); stroke-opacity: 1; stroke-width: 3; fill: none; fill-opacity: 1;"></path><g stroke="none" fill="rgb(245,166,35)" fill-opacity="1" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,602,291.00000000000006)" style="stroke: none; fill: rgb(245, 166, 35); stroke-width: 3;"><path d=" M24.65,-11.84 L0,0 L24.65,11.84 L16.37,0 Z"></path></g></g><g class="composite-shape"><path class="real" d=" M101,105.5 L756,105.5 L756,499.5 L101,499.5 Z" style="stroke-width: 4; stroke: rgb(245, 166, 35); stroke-opacity: 1; fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 211px; top: 279px;"><dg-editor-container data-editor-id="de739713464763756" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>イギリス</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 258px; top: 412px;"><dg-editor-container data-editor-id="de9594587748105117" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>イタリア</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 168px; top: 398px;"><dg-editor-container data-editor-id="de8376980342719359" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アメリカ</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 272px; top: 341px;"><dg-editor-container data-editor-id="de9455945333126723" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>フランス</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 163px; top: 338px;"><dg-editor-container data-editor-id="de12857181890616043" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　日本</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 526px; top: 318px;"><dg-editor-container data-editor-id="de5678435211662862" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　パリ</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 616px; top: -54px;"><dg-editor-container data-editor-id="de34521868635026154" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ワシントンDC</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 523.743px; top: 372px;"><dg-editor-container data-editor-id="de6467916732641367" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ニューヨーク</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 651px; top: 374px;"><dg-editor-container data-editor-id="de041617278714983774" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　東京</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 606px; top: 279px;"><dg-editor-container data-editor-id="de5837074365616307" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ロンドン</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 536px; top: 420px;"><dg-editor-container data-editor-id="de8810520192879662" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　大阪</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 617px; top: 424px;"><dg-editor-container data-editor-id="de8925872146462867" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　ローマ</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 613px; top: 327px;"><dg-editor-container data-editor-id="de8924098998365521" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ワシントンDC</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 224px; top: 204px;"><dg-editor-container data-editor-id="de43048564480564366" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="color: rgb(65, 117, 5); fill: rgb(65, 117, 5); stroke: rgb(65, 117, 5); border-color: rgb(65, 117, 5); font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;">国</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 579px; top: 202px;"><dg-editor-container data-editor-id="de2674877366837195" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="color: rgb(65, 117, 5); fill: rgb(65, 117, 5); stroke: rgb(65, 117, 5); border-color: rgb(65, 117, 5); font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;">都市</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 396px; top: 243px;"><dg-editor-container data-editor-id="de7402130811989697" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;">首都</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 265px; top: 8.5px;"><dg-editor-container data-editor-id="de8041024802965624" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(245, 166, 35);">         関数 = 写像</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(245, 166, 35);">( function = map )</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 206px; top: 118px;"><dg-editor-container data-editor-id="de40677901559118346" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="color: rgb(65, 117, 5); fill: rgb(65, 117, 5); stroke: rgb(65, 117, 5); border-color: rgb(65, 117, 5); font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(65, 117, 5);">集合</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(65, 117, 5);">(set)</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 576px; top: 117px;"><dg-editor-container data-editor-id="de028482286751781327" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(65, 117, 5);">集合</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(65, 117, 5);">(set)</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こう描き直してみると、当初の関数の図解は直感的で、とっつきやすいものの、集合（型）と要素である値がごっちゃになっていて、どこからどこまでが関数なのかも適当に議論していたことが明確になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>英和関数（英和写像）の場合はもちろん、こうなります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 600px; height: 346.933px; position: relative;"><img src="image-resources/c6c4c892-390d-42fa-aebe-7d06362559fa.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「サイコロの目が偶数か奇数か？」と振り分ける事も関数（写像）です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 600px; height: 328.27px; position: relative;"><img src="image-resources/1dcfe561-81ec-4569-b3ae-6e47cfa96659.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">一般化して、</block><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="center"><div class="image-content" style="width: 600px; height: 285.233px; position: relative;"><img src="image-resources/eca718bf-fe7e-4447-bee7-61d110f9cbb2.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合 X</block><block> の各</block><block style="font-weight: bold;">要素 x</block><block> に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合 Y</block><block> の1つの</block><block style="font-weight: bold;">要素 y</block><block> を対応させる規則を</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">XからYへの写像=関数</block><block>と呼びます。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3890231060400593" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3890231060400593"><prefix style="text-align: left; padding-right: 0.25em;">11.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>写像（Map）と集合（Set）と型（Type）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_(mathematics)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_(mathematics)" target="_blank" style="color: inherit; text-decoration: inherit;">Set</a></block><block style="font-weight: bold;">）とは、型（Type）のこと</block><block>なので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">TypeScript</block><block>の型定義は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（type）X </block><block>から</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（type）Y </block><block>への写像のとき</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="function-variable function token">FunctionType</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">X</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">Y</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型 Country </block><block>から</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型 City </block><block>への写像のとき</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="function-variable function token">FunctionType</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> Country</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> City</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型 English </block><block>から</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型 Japanese </block><block>への写像のとき</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="function-variable function token">FunctionType</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> English</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> Japanese</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型 number </block><block>から</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型 number </block><block>への写像のとき</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="function-variable function token">FunctionType</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> number</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>より具体的なコードとしては</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="function-variable function token">Plus</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> number</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="function-variable function token">Plus</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">x</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> x </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>サイコロ関数では</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型 Dice </block><block>から</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型 Even | Odd </block><block>への写像のとき</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="function-variable function token">DiceFunction</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> Dice</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> Even </block><block class="operator token">|</block><block class=" token"> Odd</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>サイコロ関数のフルコード</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> even </block><block class="operator token">=</block><block class=" token"> </block><block class="string token">"even"</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> odd </block><block class="operator token">=</block><block class=" token"> </block><block class="string token">"odd"</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type Even </block><block class="operator token">=</block><block class=" token"> </block><block class="keyword token">typeof</block><block class=" token"> even</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type Odd </block><block class="operator token">=</block><block class=" token"> </block><block class="keyword token">typeof</block><block class=" token"> odd</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type Dice </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">1</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="number token">2</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="number token">4</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="number token">5</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="function-variable function token">DiceFunction</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> Dice</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> Even </block><block class="operator token">|</block><block class=" token"> Odd</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> evenOdd</block><block class="punctuation token">:</block><block class=" token"> </block><block class="function-variable function token">DiceFunction</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">x</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    x </block><block class="operator token">%</block><block class=" token"> </block><block class="number token">2</block><block class=" token"> </block><block class="operator token">===</block><block class=" token"> </block><block class="number token">0</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="operator token">?</block><block class=" token"> even</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">:</block><block class=" token"> odd</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">log</block><block class="punctuation token">(</block><block class="function token">evenOdd</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// "odd"</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5459369221427866" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5459369221427866"><prefix style="text-align: left; padding-right: 0.25em;">11.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>型（type）集合（set）写像（map）関数（function）定義域（domain）値域（range）終域（codomain）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>型とは集合のことであり、二つの集合が与えられたときに、一方の集合の各元に対し、他方の集合のただひとつの元を指定して結びつける対応のことを写像と呼び、写像が関数と同じ概念である、とわかりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、関数では、集合という用語を使っているのか？と言うと、中学の数学の授業を思い出してもらえればわかりますが、使われていないことが多いです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>複数の分野にまたがって、基本、同じ概念を違う用語で表現しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9916892565745383" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">型理論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Type_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Type_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Type theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（type）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）/ 写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">集合論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Set theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">始集合（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">終集合（codomain）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">解析学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Mathematical_analysis" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Mathematical_analysis" target="_blank" style="color: inherit; text-decoration: inherit;">Analysis</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">定義域（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">値域（range）と終域（codomain）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">代数学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Algebra" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Algebra" target="_blank" style="color: inherit; text-decoration: inherit;">Algebra</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）/  被演算子（operand）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">演算子（operator）</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">オブジェクト指向</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Object-oriented_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Object-oriented_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Object-oriented programming</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト（object）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">メソッド（method）</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="関数（function）" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="関数（function）" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">対象（object）/  圏（category）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">射（morphism）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6321777262768993" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">情報処理・プログラミング</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">データ（data）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">処理（operation）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数は、解析学として発展してきた歴史的な経緯から、集合に該当する概念を</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">定義域（domain）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">値域（range）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現することが多いです。おそらく義務教育ではこの路線で最初に学習させられたはずです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 190.21px; position: relative;"><img src="image-resources/6766bf3d-16f1-4acc-937d-a2fa3df4c309.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.mathsisfun.com/sets/domain-range-codomain.html" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.mathsisfun.com/sets/domain-range-codomain.html" target="_blank" style="color: inherit; text-decoration: inherit;">https://www.mathsisfun.com/sets/domain-range-codomain.html</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 225px; position: relative;"><img src="image-resources/3d792347-55d0-4548-a50f-642e6b42fe3c.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>写像(関数)</block><block style="font-weight: bold;"> f </block><block>の</block><block style="font-weight: bold;">定義域/始域(domain)</block><block>は </block><block style="font-weight: bold;">X</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>写像(関数) </block><block style="font-weight: bold;">f</block><block> の</block><block style="font-weight: bold;">値域(range)</block><block>は </block><block style="font-weight: bold;">f(x)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>写像(関数) </block><block style="font-weight: bold;">f </block><block>の</block><block style="font-weight: bold;">終域(codomain)</block><block>は</block><block style="font-weight: bold;"> Y</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%AE%9A%E7%BE%A9%E5%9F%9F" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%AE%9A%E7%BE%A9%E5%9F%9F" target="_blank" style="color: inherit; text-decoration: inherit;">定義域</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Domain_of_a_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Domain_of_a_function" target="_blank" style="color: inherit; text-decoration: inherit;">Domain</a></block><block>）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9420993221437983"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学における写像の定義域（ていぎいき、英: domain of definition）あるいは始域（しいき、英: domain; 域, 領域[1]）とは、写像の値の定義される引数（「入力」）の取り得る値全体からなる集合である。つまり、写像はその定義域の各元に対して（「出力」としての）値を与える。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%80%A4%E5%9F%9F" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%80%A4%E5%9F%9F" target="_blank" style="color: inherit; text-decoration: inherit;">値域</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Range_of_a_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Range_of_a_function" target="_blank" style="color: inherit; text-decoration: inherit;">Range</a></block><block>）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8666014076852042"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学、特に素朴集合論における写像の値域（ちいき、英: range）は、その写像の終域または像の何れかの意味で用いられる。現代的な用法ではほとんど全ての場合において「像」の意味である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">注意</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「値域」("range") は異なる意味で用いられうるから、教科書や論文を読む際にいずれの意味であるかを確かめるのは初手の演習として手頃であろう。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>古い本では「値域」を今日でいうところの終域の意味で用いている傾向がある[1][2]。より現代的な本では大半が今日でいう像の意味で用いる[3]。紛れを無くす目的で「値域」という語は用いないという本もある[4]。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%82%E5%9F%9F" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%82%E5%9F%9F" target="_blank" style="color: inherit; text-decoration: inherit;">終域</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Codomain" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Codomain" target="_blank" style="color: inherit; text-decoration: inherit;">Codomain</a></block><block>）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7242889309509213"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学において写像の終域（しゅういき、英: codomain; 余域）あるいは終集合（しゅうしゅうごう、英: target set）は、写像を f: X → Y と表すときの集合 Y、すなわち写像 f の出力する値がその中に属するべきという制約を定める集合をいう。終域の代わりに「値域」という語を用いる場合もあるが、値域は写像の像（出力される値すべてからなる集合、f: X → Y で言えば f(X)）の意味で用いることが多いので注意すべきである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">定義と注意</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さて Bourbaki (1954) の意味で写像（函数）を定義するのであれば、終域は写像 f の一部として含まれる[1]。即ち、写像 f とは三つ組 (X, Y, F) であって F が直積集合 X × Y の函数的部分集合（すなわち函数関係）[2]かつ F に属する順序対の第一成分の成す集合（すなわち定義域）が X に一致するものをいう。このとき集合 F はこの写像のグラフと呼ばれる。また、x が写像 f の定義域 X の元を亙るとき、f(x) の形に書ける元全てからなる集合を f の値域と呼ぶ。一般に値域は終域の部分集合であって、従って一般には両者は一致しないことが起こり得る。一致する場合（すなわち全射）でないならば、終域に属する適当な元 y に対して、方程式 f(x) = y は解を持たない。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ブルバキはまた別な定義として、「写像」を単に函数的グラフそのものと定め[3]、これはまた広く用いられている定義である[4]が、これには終域が定義として含まれない。例えば集合論（英語版）において、定義域 X が真の類であることを許す方が望ましいという場合には、三つ組 (X, Y, F) といったものは厳密な意味では存在しないため定義に用いるには不適当だが、グラフによる定義ならば自然である。ただ、文献によっては f: X → Y という見かけ上終域に言及する形で写像を導入していながら、その後は暗黙にこの終域を含めない定義を用いる場合もあるので注意が必要である[5][6][7][8][9]。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もう数学用語としても</block><block style="font-weight: bold;">値域</block><block>と</block><block style="font-weight: bold;">終域</block><block>に至っては定義に「注意」とかあって地獄のような混乱ぶりです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし実際は、よほどのことがない限り関数型プログラミングでは、そこまで厳密になる必要はありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>型システムはおそらく、</block><block style="font-weight: bold;">定義域/始域(domain)</block><block>から推論される</block><block style="font-weight: bold;">値域(range)＝f(x)</block><block>を暗黙の</block><block style="font-weight: bold;">終域(codomain)</block><block>としているはずです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう事情においてもプログラミング界隈では、ざっくり</block><block style="font-weight: bold;">「型（type）」というたったひとつの言葉</block><block>でまとめて表現して議論していて、プログラミング界隈での数学への意識の低さが適当に誤魔化されながら、あたかも厳密な定義をもとに運用しているようには見えることが再確認できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>重要なのは、プログラマーは最低限、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>写像(関数)</block><block style="font-weight: bold;"> f </block><block>の</block><block style="font-weight: bold;">定義域/始域(domain)</block><block>は </block><block style="font-weight: bold;">X</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という宣言くらいはしたほうが良いだろう、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScirptを含めて最近の型システムは優秀なので、かなりの精度で、</block><block style="font-weight: bold;">値域(range)＝f(x)</block><block>は暗黙の</block><block style="font-weight: bold;">終域(codomain)</block><block>として推論されるので、そこは原則放置していれば良いですし、うまく推論されていないな、という場合は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プログラマ自身が</block><block style="font-weight: bold;">型アサーション(</block><block class="role-hyper-link" data-hyper-link-url="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions" target="_blank" style="color: inherit; text-decoration: inherit;">Type Assertion</a></block><block style="font-weight: bold;">)</block><block>で、</block><block style="font-weight: bold;">終域(codomain)</block><block>を決め打ち宣言してやれば良いでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block><block style="font-weight: bold;">y = 2x</block><block>という関数で、</block><block style="font-weight: bold;">定義域</block><block>すら定義していないとどういいうことになるか？というと</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>定義域が実数全体の場合</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 265.61px; position: relative;"><img src="image-resources/50e4f680-452b-40f5-a8ac-f8184955309b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>定義域が 0 ⩽ x ⩽2 の場合 </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 271.32px; position: relative;"><img src="image-resources/5c7fce5c-1618-4acc-99e8-7aad4125d36c.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>定義域が自然数（x ⩾ 0）の場合</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 311.11px; position: relative;"><img src="image-resources/d4ee64c8-547d-431e-b10f-d0ad0922bfbb.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">y = 2x</block><block>という関数は定義域によってグラフは別物になっていますが、コード上ではまったく区別しない、ということになってしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以前はJavaScriptの制約により、TypeScriptでも整数（integer）型は存在しておらず、ざっくりNumber型しかなかったので、</block><block style="font-weight: bold;">「関数の定義域や値域・終域は整数である」ということですら型システムで保証することができなかった</block><block>、つまり、上記のグラフの関数は全部一緒くたの扱いという結構悲惨な状況でしたが、TypeScriptも普及している現代でこれはさすがにまずい、ということになったんでしょう、ES2020から</block><block style="font-weight: bold;">整数を扱える</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/BigInt" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" style="color: inherit; text-decoration: inherit;">BigInt</a></block><block style="font-weight: bold;">が導入</block><block>されました。当然、関数（演算）の定義域からすると別物の形になるので、混ぜるな危険的なことが書かれています。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5513009368590638"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>BigInt はいくつかの点で Number と似ていますが、重要ないくつかの点が異なります。組み込みの Math オブジェクト内のメソッドでは利用できず、演算で Number の値と混ぜることができません。同じ型に統一する必要があります。ただし、BigInt を Number へ変換する際には精度が落ちることがあるので、相互に変化する場合には注意が必要です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">定義域が 0 ⩽ x ⩽2</block><block> と書けるような、部分集合型をサポートしている型システムはあまり存在しないかもしれませんが、NumberあるいあBigIntから派生して</block><block class="role-hyper-link" data-hyper-link-url="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates" target="_blank" style="color: inherit; text-decoration: inherit;"> user-defined type guard</a></block><block>などを利用することである程度は定義域がある独自の型を実現可能であると思われます。TypeScriptで他にやり方があるでしょうし（</block><block class="role-hyper-link" data-hyper-link-url="https://javascript.plainenglish.io/coding-adventure-positivenumber-in-typescript-8c642c17bc76" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://javascript.plainenglish.io/coding-adventure-positivenumber-in-typescript-8c642c17bc76" target="_blank" style="color: inherit; text-decoration: inherit;">Coding Adventure: PositiveNumber in TypeScript</a></block><block>）、本稿ではTypeScriptの個別の高度な機能の解説を目的としてはいないので、ここは踏み込みません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>可能な限り定義域についても、そして整数と実数の区別くらいはしたほうが良いですし、さすがにいくらなんでも数と文字列との区別くらいはしっかり区別しておかないとまずいでしょう、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが</block><block style="font-weight: bold;">型（Type）＝ 集合（Set）＝ 定義域（Domain）の重要性</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.4251677074497646" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.4251677074497646"><prefix style="text-align: left; padding-right: 0.5em;">12. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数の表記法</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.02405794841881237" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.02405794841881237"><prefix style="text-align: left; padding-right: 0.25em;">12.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>f(x) 記法とアロー記法</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合 X</block><block> の各</block><block style="font-weight: bold;">要素 x</block><block> に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合 Y</block><block> の1つの</block><block style="font-weight: bold;">要素 y</block><block> を対応させる</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">XからYへの写像=関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 285.233px; position: relative;"><img src="image-resources/94a511f9-61b9-4d61-b6a3-b3da62827072.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>があるとき、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x)記法</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アロー記法</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と2系統の記法が存在すると分類した上で、説明します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.15747764916574414" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.15747764916574414"><prefix style="text-align: left; padding-right: 0.25em;">12.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>プレースホルダ（placeholder）という概念</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>下準備として、</block><block class="role-hyper-link" data-hyper-link-url="https://e-words.jp/w/%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80.html" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://e-words.jp/w/%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80.html" target="_blank" style="color: inherit; text-decoration: inherit;">プレースホルダ（placeholder）</a></block><block>という概念を確認しておかなければなりません。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.05555034358448463"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プレースホルダとは、実際の内容を後から挿入するために、とりあえず仮に確保した場所のこと。また、そのことを示す標識などのこと。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プレースホルダのことは多分みんなよく知っていて、こういうやつです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 523.316px; position: relative;"><img src="image-resources/111fd296-0356-4131-91ed-c06186678159.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">姓 名 ユーザー名 パスワード</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と仮の標識が入っていますね。「仮なんですよ？わかってますよね？？」ということをあえて示すためにたいていグレー色で仮っぽい雰囲気を醸し出しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>英語のアカウント登録ならばもちろん</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 199.467px; position: relative;"><img src="image-resources/9a309dde-d8d1-411f-a8c5-cfc2b80430c0.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>仮にこうなってるわけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プレースホルダだという理解さえ共有されたら、字面なんてものは適当に何でも良いわけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 285.233px; position: relative;"><img src="image-resources/eca718bf-fe7e-4447-bee7-61d110f9cbb2.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上の図の</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合 X</block><block> の各</block><block style="font-weight: bold;">要素 x</block><block> に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合 Y</block><block> の1つの</block><block style="font-weight: bold;">要素 y</block><block> を対応させる</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">XからYへの写像=関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のうち</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x</block><block>と</block><block style="font-weight: bold;">y</block><block>という小文字だけが</block><block style="font-weight: bold;">プレースホルダ</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Googleアカウントの登録ならば、灰色の文字面がプレースホルダであるという共通の理解が、今どきのIT世界の住人の我々には広く教育されているわけですが、こういう数学の</block><block style="font-weight: bold;">x</block><block>とか</block><block style="font-weight: bold;">y</block><block>になると、まともに啓蒙される機会はほぼないので理解されておらず、おそらくほとんどの高校1年生は混乱しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この関数の概念図で、</block><block style="font-weight: bold;">X</block><block>と</block><block style="font-weight: bold;">Y</block><block>は、なんらかの具体的な型（type）を意味して、その写像として</block><block style="font-weight: bold;"> f </block><block>と具体名をつけたのですが、この</block><block style="font-weight: bold;">x</block><block>と</block><block style="font-weight: bold;">y</block><block>は、この概念図の関係性のなかで、各要素を抽象化した仮の名前であって</block><block style="font-weight: bold;">プレースホルダ</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、国から都市へ対応させる首都関数の場合は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 419px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".6929459743332005" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.6929459743332005)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M14,256 C14,193.32 69.29,142.5 137.5,142.5 C205.71,142.5 261,193.32 261,256 C261,318.68 205.71,369.5 137.5,369.5 C69.29,369.5 14,318.68 14,256 Z" style="stroke-width: 3; stroke: rgb(65, 117, 5); stroke-opacity: 1; fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M379,255.5 C379,192.54 434.96,141.5 504,141.5 C573.04,141.5 629,192.54 629,255.5 C629,318.46 573.04,369.5 504,369.5 C434.96,369.5 379,318.46 379,255.5 Z" style="stroke-width: 3; stroke: rgb(65, 117, 5); stroke-opacity: 1; fill: none; fill-opacity: 1;"></path></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M101,178 C101,166.95 117.57,158 138,158 C158.43,158 175,166.95 175,178 C175,189.05 158.43,198 138,198 C117.57,198 101,189.05 101,178 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M68,326 C68,314.95 84.57,306 105,306 C125.43,306 142,314.95 142,326 C142,337.05 125.43,346 105,346 C84.57,346 68,337.05 68,326 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M22,270 C22,258.95 38.57,250 59,250 C79.43,250 96,258.95 96,270 C96,281.05 79.43,290 59,290 C38.57,290 22,281.05 22,270 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M100,258 C100,246.95 116.57,238 137,238 C157.43,238 174,246.95 174,258 C174,269.05 157.43,278 137,278 C116.57,278 100,269.05 100,258 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M32,222 C32,210.95 48.57,202 69,202 C89.43,202 106,210.95 106,222 C106,233.05 89.43,242 69,242 C48.57,242 32,233.05 32,222 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M495,178 C495,166.95 511.57,158 532,158 C552.43,158 569,166.95 569,178 C569,189.05 552.43,198 532,198 C511.57,198 495,189.05 495,178 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M546,264 C546,252.95 562.57,244 583,244 C603.43,244 620,252.95 620,264 C620,275.05 603.43,284 583,284 C562.57,284 546,275.05 546,264 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="composite-shape"><path class="real" d=" M426,249 C426,237.95 451.07,229 482,229 C512.93,229 538,237.95 538,249 C538,260.05 512.93,269 482,269 C451.07,269 426,260.05 426,249 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M508,217 C508,207.34 532.4,199.5 562.5,199.5 C592.6,199.5 617,207.34 617,217 C617,226.66 592.6,234.5 562.5,234.5 C532.4,234.5 508,226.66 508,217 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M403,206 C403,194.95 419.57,186 440,186 C460.43,186 477,194.95 477,206 C477,217.05 460.43,226 440,226 C419.57,226 403,217.05 403,206 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="grouped-shape"><g class="composite-shape"><path class="real" d=" M444,297 C444,285.95 460.57,277 481,277 C501.43,277 518,285.95 518,297 C518,308.05 501.43,317 481,317 C460.57,317 444,308.05 444,297 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g></g><g class="composite-shape"><path class="real" d=" M535,306 C535,294.95 551.57,286 572,286 C592.43,286 609,294.95 609,306 C609,317.05 592.43,326 572,326 C551.57,326 535,317.05 535,306 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M174,178 L490,178" style="stroke: rgb(245, 166, 35); stroke-opacity: 1; stroke-width: 3; fill: none; fill-opacity: 1;"></path><g stroke="none" fill="rgb(245,166,35)" fill-opacity="1" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,495,178)" style="stroke: none; fill: rgb(245, 166, 35); stroke-width: 3;"><path d=" M24.65,-11.84 L0,0 L24.65,11.84 L16.37,0 Z"></path></g></g><g class="composite-shape"><path class="real" d=" M193,274.29 C193,263.4 205.98,254.58 222,254.58 C238.02,254.58 251,263.4 251,274.29 C251,285.18 238.02,294 222,294 C205.98,294 193,285.18 193,274.29 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M166,219 C166,207.95 182.57,199 203,199 C223.43,199 240,207.95 240,219 C240,230.05 223.43,239 203,239 C182.57,239 166,230.05 166,219 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M166,321.29 C166,310.4 178.31,301.58 193.5,301.58 C208.69,301.58 221,310.4 221,321.29 C221,332.18 208.69,341 193.5,341 C178.31,341 166,332.18 166,321.29 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M476,341.29 C476,330.4 492.57,321.58 513,321.58 C533.43,321.58 550,330.4 550,341.29 C550,352.18 533.43,361 513,361 C492.57,361 476,352.18 476,341.29 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M392,280.29 C392,269.4 403.86,260.58 418.5,260.58 C433.14,260.58 445,269.4 445,280.29 C445,291.18 433.14,300 418.5,300 C403.86,300 392,291.18 392,280.29 Z" style="stroke-width: 2; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 435.743px; top: 237px;"><dg-editor-container data-editor-id="de08407113443410696" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ニューヨーク</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 533px; top: 294px;"><dg-editor-container data-editor-id="de12587300391466272" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　ローマ</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 512px; top: 205px;"><dg-editor-container data-editor-id="de14270377960337965" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ワシントンDC</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 117px; top: 91px;"><dg-editor-container data-editor-id="de3626543695134097" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="color: rgb(65, 117, 5); fill: rgb(65, 117, 5); stroke: rgb(65, 117, 5); border-color: rgb(65, 117, 5); font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;">国</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 472px; top: 89px;"><dg-editor-container data-editor-id="de5842814337134918" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="color: rgb(65, 117, 5); fill: rgb(65, 117, 5); stroke: rgb(65, 117, 5); border-color: rgb(65, 117, 5); font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;">都市</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 289px; top: 130px;"><dg-editor-container data-editor-id="de7411662401375458" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold;">首都</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 99px; top: 5px;"><dg-editor-container data-editor-id="de897731876931519" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="color: rgb(65, 117, 5); fill: rgb(65, 117, 5); stroke: rgb(65, 117, 5); border-color: rgb(65, 117, 5); font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(65, 117, 5);">集合</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(65, 117, 5);">(set)</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 469px; top: 4px;"><dg-editor-container data-editor-id="de41014029857259904" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(65, 117, 5);">集合</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 2.07em; font-weight: bold; color: rgb(65, 117, 5);">(set)</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 448px; top: 285px;"><dg-editor-container data-editor-id="de3466079037538694" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　大阪</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 407px; top: 194px;"><dg-editor-container data-editor-id="de1965485820922337" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　パリ</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 550px; top: 252px;"><dg-editor-container data-editor-id="de40542531625312095" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　東京</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 499px; top: 166px;"><dg-editor-container data-editor-id="de5804441874190707" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ロンドン</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 36px; top: 210px;"><dg-editor-container data-editor-id="de6573697752738967" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　日本</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 104px; top: 246px;"><dg-editor-container data-editor-id="de45944992138541263" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>フランス</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 26px; top: 258px;"><dg-editor-container data-editor-id="de4995381395387253" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アメリカ</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 72px; top: 314px;"><dg-editor-container data-editor-id="de1834068468542449" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>イタリア</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 105px; top: 166px;"><dg-editor-container data-editor-id="de9789963567415245" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>イギリス</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 207px; top: 252.333px;"><dg-editor-container data-editor-id="de6873655894798665" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em;">ｘ</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 168px; top: 202px;"><dg-editor-container data-editor-id="de6672933100401277" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">county</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 183px; top: 299.333px;"><dg-editor-container data-editor-id="de891436204811956" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em;">a</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 504px; top: 319.333px;"><dg-editor-container data-editor-id="de8131035113496543" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em;">y</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 409.5px; top: 258.333px;"><dg-editor-container data-editor-id="de7668290065418626" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em;">b</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>単に適当な文字の割当に過ぎず、集合である</block><block style="font-weight: bold;">国、都市</block><block>、そして関数名である</block><block style="font-weight: bold;">首都</block><block>という具体性な概念と名前と異なり、単にそれぞれの集合の一要素であるという属性に仮の名前をつけているだけの</block><block style="font-weight: bold;">プレースホルダ</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">xでもaでも、あるいはもっと属性がわかりやすくcountryという名前のプレースホルダでも構いません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">country</block><block>であるとか、あるいは</block><block style="font-weight: bold;">First name</block><block>とか書いていると、これは</block><block style="font-weight: bold;">集合の名前</block><block>を表しているのではないか？という捉え方もできますが、たしかに、後々わかりやすいように</block><block style="font-weight: bold;">集合の名前</block><block>そのままを</block><block style="font-weight: bold;">プレースホルダ</block><block>として使ったとしても別に構わないし、あるいは集合と関係ない</block><block style="font-weight: bold;">x</block><block>でも</block><block style="font-weight: bold;">a</block><block>でも構わない、どのようにしてもよい、その</block><block style="font-weight: bold;">シンボル自体にID的な機能などない</block><block>というのが</block><block style="font-weight: bold;">プレースホルダ</block><block>なのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にたとえば、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 350px; height: 92.1519px; position: relative;"><img src="image-resources/6e692869-926c-4d34-89d3-e20fa7d07289.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっている場合は、</block><block style="font-weight: bold;">確認</block><block>となっている</block><block style="font-weight: bold;">プレースホルダ</block><block>であとで決まる</block><block style="font-weight: bold;">値</block><block>は、</block><block style="font-weight: bold;">集合</block><block>としてはもちろん</block><block style="font-weight: bold;">パスワード</block><block>となるのですが、別に</block><block style="font-weight: bold;">集合</block><block>と一致させて</block><block style="font-weight: bold;">パスワード</block><block>とするよりあえて工夫した別の名前にしたほうがユーザにとってわかりやすい表示になるので、なんでもいいから</block><block style="font-weight: bold;">確認</block><block>という名前の</block><block style="font-weight: bold;">プレースホルダ</block><block>にできているわけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.034047292125263695" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.034047292125263695"><prefix style="text-align: left; padding-right: 0.25em;">12.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>f(x) </block><block style="font-weight: bold;">記法の関数の定義</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 100px; height: 60.241px; position: relative;"><img src="image-resources/ca78468e-a8be-497e-b551-3dea78ebe533.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>中学数学では導入されませんが高校数学でまっさきに習う関数の記法です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは実は、既に説明したとおり、</block><block style="font-weight: bold;">関数</block><block>を</block><block style="font-weight: bold;">ある単項演算子 f </block><block>として扱った 表現にほかなりません。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.555226470105197"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">単項演算（Unary operation） の場合</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2150005104126138"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">単項演算とは、数学で、被作用子（オペランド）が一つだけであるような演算（つまり、入力が一つの演算）のこと</block><block>。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、論理否定は真理値に対する単項演算であり、自乗は実数に対する単項演算である。階乗 n! も単項演算である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">与えられた集合 S に対する単項演算は、関数 S→S に他ならない。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、論理否定の演算子  !</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="boolean token">true</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="boolean token">false</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="operator token">!</block><block class=" token">a</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">false</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と関数表記へそのまま置き換えることができ、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>一項演算子は１引数の関数(Unary function)と対応するのがわかります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすれば、単にシンボルの割当ての違いにすぎない、とはっきりとわかります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに一般的な数学では、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2つのある集合</block><block style="font-weight: bold;">X</block><block>と</block><block style="font-weight: bold;">Y</block><block>のうちの要素である</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">xとyというプレースホルダ</block><block>を用意することで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">y = f(x)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書くことができて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f </block><block>の </block><block style="font-weight: bold;">x</block><block> における値が</block><block style="font-weight: bold;"> y </block><block>である</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という意味合いになり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x</block><block>と </block><block style="font-weight: bold;">y </block><block>というプレースホルダを含む、なんらかの写像の対応法則 </block><block style="font-weight: bold;">f </block><block>であると明示できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コードではプレースホルダである </block><block style="font-weight: bold;">y </block><block>については言及することはなく、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x) = x + 1 </block><block>のとき、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">function</block><block class=" token"> </block><block class="function token">f</block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="keyword token">return</block><block class=" token"> x </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書きます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/function" target="_blank" style="color: inherit; text-decoration: inherit;">関数宣言</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.010221861346255467"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数宣言 (関数文) は、指定された引数を使用して関数を定義します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であり、</block><block style="font-weight: bold;">文（statement）</block><block>ですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学で一般的に利用されている</block><block style="font-weight: bold;">f(x)記法</block><block>そのまま踏襲した感じではありますが、まずは</block><block style="font-weight: bold;">文</block><block>であることも災いして、簡潔ではなく、文字数も多く、たいへん打ちにくく読みにくいです。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.11441227385363595" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.11441227385363595"><prefix style="text-align: left; padding-right: 0.25em;">12.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>f(x) 記法の</block><block style="font-weight: bold;">関数の適用</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数を定義することを普通に、</block><block style="font-weight: bold;">関数定義（function definition）</block><block>と呼ぶとして、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数を使うことは、</block><block style="font-weight: bold;">適用（application）</block><block>、</block><block style="font-weight: bold;">関数適用（</block><block class="role-hyper-link" data-hyper-link-url="https://ncatlab.org/nlab/show/function+application" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ncatlab.org/nlab/show/function+application" target="_blank" style="color: inherit; text-decoration: inherit;">function application</a></block><block style="font-weight: bold;">）</block><block>と呼びます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数定義（function definition）</block><block>とセットで使う言葉なので覚えておくと話が通じやすくなって便利です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x) </block><block>記法の関数の適用をするときには、</block><block style="font-weight: bold;">x</block><block>が</block><block style="font-weight: bold; font-style: italic;">プレースホルダ</block><block>なので、そこに具体的な値を入力してやれば良いはずです。</block><block style="font-weight: bold;">Googleアカウントの登録時のプレースホルダに具体的な値を入力するのと全く同じ作法</block><block>であるとは言えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="number token">10</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 11</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちなみにここで</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7763510850322553"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">関数型コードは値が変化するようなことはない</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">let</block><block> で定義した</block><block style="font-weight: bold;"> i x sum</block><block> のようにコードの流れで値がコロコロと変化していくようなことはなく、</block><block style="font-weight: bold;">const</block><block> で定義するように値は定数として（一発で）定義されます。あとから値を二重に</block><block style="font-weight: bold;">破壊的代入</block><block>しようとするとエラーが出ます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// error</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型では、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">let</block><block class=" token"> x</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というコードがJavaScriptでもちろん有効で、実際、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">for</block><block class=" token"> </block><block class="punctuation token">(</block><block class="keyword token">let</block><block class=" token"> i </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">;</block><block class=" token"> i </block><block class="operator token">&lt;</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">;</block><block class=" token"> i</block><block class="operator token">++</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class="comment token">//....</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように命令型コードの</block><block style="font-weight: bold;">for</block><block>ループを回すときなどに必要になってくるのですが、関数型コードではアンチパターンです。理由はコードの位置、上下関係で値が変化すると式自体に明示されていない余剰の要素が紛れ込んで論理構成が破綻するからです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードでは命令型コードのように命令文の上下の並びから発生するコードの流れ（フロー）をベースにするのではなく、式の構成によってプログラミングしていきます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということを再確認してください。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数のパラメータである </block><block style="font-weight: bold;">x</block><block>は</block><block style="font-weight: bold;">プレースホルダ</block><block>なので、</block><block style="font-weight: bold;">あとから別の値を適用可能</block><block>なのですが、関数のパラメータでもない通常の</block><block style="font-weight: bold;">変数</block><block>（関数型コードでは常に</block><block style="font-weight: bold;">定数</block><block>）は</block><block style="font-weight: bold;">プレースホルダではありません。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.09850860315124654" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.09850860315124654"><prefix style="text-align: left; padding-right: 0.25em;">12.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>f(x) 記法でも</block><block style="font-weight: bold;">アロー記法でも</block><block>ない</block><block style="font-weight: bold;">関数の定義</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url=" https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href=" https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/function" target="_blank" style="color: inherit; text-decoration: inherit;">関数式</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5610655967916498"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>function キーワードは、</block><block style="font-weight: bold;">式</block><block>の中で関数を定義するために使用されます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">文（Statement）</block><block>ではなく</block><block style="font-weight: bold;">式（Expression）</block><block>のバージョンの関数定義です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">return</block><block class=" token"> x</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数定義時に </block><block style="font-weight: bold;">f(x) </block><block>という字面はなくなり、</block><block style="font-weight: bold;">f</block><block>という関数名で新しい関数を定義している、ということが明示的になりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同時に、</block><block style="font-weight: bold;">x</block><block>はプレースホルダとして右辺へと分離されたことも進歩ではあるでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、the中途半端で、式とは言いつつも、関数文を入れ替えただけで冗長さはそのまま残っており、だらだらと長く読みづらいです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9410380565810172" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9410380565810172"><prefix style="text-align: left; padding-right: 0.25em;">12.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アロー記法の関数の定義</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 52.2222px; position: relative;"><img src="image-resources/1a46f001-376a-48b4-bdb1-c62949ff1fc6.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" style="color: inherit; text-decoration: inherit;">アロー関数式</a></block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん</block><block style="font-weight: bold;">文</block><block>ではなく</block><block style="font-weight: bold;">式</block><block>であり、プログラミング界隈では</block><block style="font-weight: bold;">ラムダ式</block><block>という名称のほうが有名で通用しやすいはずです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>簡潔で美しいですね。無駄を取り去った機能美です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 293.379px; position: relative;"><img src="image-resources/614e28ab-96eb-4ebe-afab-80bb3aa7f74b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x</block><block>と</block><block style="font-weight: bold;">y</block><block>は</block><block style="font-weight: bold;">プレースホルダ</block><block>であることを考慮して、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x </block><block>が </block><block style="font-weight: bold;">x + 1 </block><block>に写像される、というイメージそのままになっています。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7736506177800437"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">二項演算子（Binary operator）はとてつもなく強力な記法である</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まったく同じ意味のコードであっても、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" target="_blank" style="color: inherit; text-decoration: inherit;">べき乗 (**)</a></block><block>という新しい</block><block style="font-weight: bold;">二項演算子を導入</block><block>した結果、いかに</block><block style="font-weight: bold;">コードが無駄なく簡潔になり、数学的な構造が読みやすくなった</block><block>のかは明白です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>特にこのように連鎖してネスト構造になった場合、非常にシンプルに記述できます。これは</block><block style="font-weight: bold;">バグの混入を事前に防ぐことができ、プログラミングの生産効率が飛躍的に向上する</block><block>ことに直結します。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;">  </block><block>とは</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.44em; font-weight: bold;">ｆ(x, y) </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のことであり、概念としては、関数だけで統合できてしまうのですが、数式の表記方法としてはむしろ、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;"> </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のほうが圧倒的に優れており、なにより、これは繰り返しになりますが我々が小学校の算数の時間から徹底的にトレーニングされてきた慣れ親しんでいる表記でもあります。非常に</block><block style="font-weight: bold;">直感的に理解可能</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのと全く同じ原理で、</block><block style="font-weight: bold;">簡潔で美しい本質的なイメージを表現した記法というのは大変強力</block><block>なのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ラムダ式（アロー関数式）は写像を表現するプレースホルダだけで構成されています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 52.2222px; position: relative;"><img src="image-resources/1a46f001-376a-48b4-bdb1-c62949ff1fc6.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、この</block><block style="font-weight: bold;"> x </block><block>というのは</block><block style="font-weight: bold;">あくまでプレースホルダにすぎないので、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 201.366px; height: 48px; position: relative;"><img src="image-resources/3d4f04ff-27fe-45fb-8453-132b203377e8.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>別のシンボルたとえば </block><block style="font-weight: bold;">a </block><block>であっても</block><block style="font-weight: bold;">全く同じ意味になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、その上でここには、</block><block style="font-weight: bold;">プレースホルダではない、意味がちゃんとある名前である関数名</block><block>の </block><block style="font-weight: bold;">f </block><block>はありません。</block><block style="font-weight: bold;">関数に名前をつける、という行為はまた別の概念</block><block>だからですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>別の概念ならば一緒くたにせずに、表記としてもしっかり分離したほうが、このようにプレースホルダのシンボルなんだから別のシンボルでも構わない、であるとか、関数名はプレースホルダではないので命名には特段の意味がある、という概念の混同が発生していません。それに関連もしますが、概念の粒度が小さいので混乱もないし構成の自由度で優れています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">こちらの表記のほうが概念的にミニマルでコンパクトで、写像（Map）の概念そのままのイメージ的に自然</block><block>なのですが、あまりにも、</block><block style="font-weight: bold;">f(x) </block><block>という関数名とプレースホルダは同時にセットで定義する、混沌とした数学の流儀が当たり前に数学世界とプログラミング世界に浸透しているため、ラムダ式は</block><block style="font-weight: bold;">無名関数</block><block>という奇妙なネーミングさえあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もし関数名が必要なのであれば、単純に、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 40.37px; position: relative;"><img src="image-resources/4467400f-bad8-4e04-bcd2-970ecb9d56cb.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように関数名</block><block style="font-weight: bold;"> f </block><block>を別途割り当てて定義すれば良いだけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" style="color: inherit; text-decoration: inherit;">アロー関数式</a></block><block>には、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7800045315316992" style="width: 718px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 700px; height: 288.948px; position: relative;"><img src="image-resources/cd8825fc-0355-4a7d-8f69-f293b639c80e.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数で非常に扱いづらい</block><block style="font-weight: bold;">this</block><block>をはじめとするオブジェクト指向、それから命令型の、まさに関数型コードの式とは相容れないキーワードがズラリと並んでいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これらは</block><block style="font-weight: bold;">関数型では脱却すべきアンチパターン</block><block>ということになり、むしろ制限がかかっているほうがアンチパターンを関数型プログラマが不用意に書くことを未然に防止してくれるので歓迎すべきことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>本稿において、すでに</block><block style="font-weight: bold;">function this</block><block>は利用しました。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" style="color: inherit; text-decoration: inherit;">Arrayオブジェクト</a></block><block style="font-weight: bold;"> </block><block>に</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">+ </block><block>という記号のプロパティで</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" target="_blank" style="color: inherit; text-decoration: inherit;">Array.concat()</a></block><block style="font-weight: bold;"> </block><block>というメソッドを拡張してしまいます。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="class-name token">Array</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"+"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token">        </block><block class="comment token">// R is Right hand side or the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="keyword token">this</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="constant token">R</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// `this` is Left hand side of the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このコードでは、</block><block style="font-weight: bold;">this.concat(R) </block><block>と単純に</block><block style="font-weight: bold;">Array</block><block>オブジェクトメソッドを</block><block style="font-weight: bold;">  + </block><block>というオブジェクトプロパティにコピーしています。その結果、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算子であるカスタムオペレータを定義する際に、JavaScriptのArrayオブジェクトをthisで自己参照して、それを左辺のオペランド（被演算子）にする必要があったからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように</block><block style="font-weight: bold;">オブジェクト指向のメソッドを関数型の二項演算子として置き換える</block><block>という、ハックコードのときだけオブジェクト指向のコードを触るので必然的に例外的にラムダ式以外の関数定義をします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆にそこ集約されてそれ以降は一切オブジェクト指向のコードや</block><block style="font-weight: bold;">this</block><block>を書く必要はなくなります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.12922445142277939" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.12922445142277939"><prefix style="text-align: left; padding-right: 0.25em;">12.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アロー記法の関数の適用</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 100px; height: 60.241px; position: relative;"><img src="image-resources/ddfe2e92-a0f9-4a61-bdb7-a3cd3ed1ebd5.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>慣れ親しんでいる</block><block style="font-weight: bold;">単項演算子</block><block>である</block><block style="font-weight: bold;">f(x) </block><block>という関数定義には、</block><block style="font-weight: bold;">x</block><block>というプレースホルダがセット組み込まれていて、関数適用の際にはプレースホルダを具体的な値で置き換える、という自然で合理的な作法ですが、問題があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アロー記法のラムダ式の定義は、プレースホルダだけで構成されており、関数名 </block><block style="font-weight: bold;">f </block><block>は独立して扱われています。関数の適用についても、関数名とプレースホルダが渾然一体となった</block><block style="font-weight: bold;"> f(x) </block><block>記法を踏襲しなければいけない理由はない気がします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数の定義の表記法としてアロー記法は機能美があり優れていました。アロー記法の関数適用というのはないのでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.6490064739754935" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.6490064739754935"><prefix style="text-align: left; padding-right: 0.5em;">13. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x) 記法からの脱却　パイプライン演算子（Pipeline Operator） </block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9254469612485201" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9254469612485201"><prefix style="text-align: left; padding-right: 0.25em;">13.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>f(x) 記法の</block><block style="font-weight: bold;">問題点</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 100px; height: 60.241px; position: relative;"><img src="image-resources/cca136fa-288c-45f9-a6d0-d1db12189755.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>慣れ親しんでいる</block><block style="font-weight: bold;">単項演算子</block><block>である</block><block style="font-weight: bold;">f(x) </block><block>という関数定義には、2つ問題があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>ネスト地獄</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>同一の</block><block style="font-weight: bold;">()</block><block>というシンボルで、異なる意味の機能</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x)表記方</block><block>では、データの流れの左右が逆になってしまう</block><block style="font-weight: bold;">入れ子（nesting）構造</block><block>つまり </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x を f 次に g 次に h</block><block> に適用という概念が</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">h(g(f(x)))</block><block>となっており、「まあいいじゃないか、数学でもそういう記法が普通なんだし・・・」と甘くみていると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6341664744738515"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" target="_blank" style="color: inherit; text-decoration: inherit;">べき乗 (**)</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という二項演算子がES2016で導入されました。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Math</block><block class="punctuation token">.</block><block class="function token">pow</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">==</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">2</block><block class=" token"> </block><block class="operator token">**</block><block class=" token"> </block><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Math</block><block class="punctuation token">.</block><block class="function token">pow</block><block class="punctuation token">(</block><block class=" token">Math</block><block class="punctuation token">.</block><block class="function token">pow</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">==</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">2</block><block class=" token"> </block><block class="operator token">**</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="operator token">**</block><block class=" token"> </block><block class="number token">5</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、まさに、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.2em; font-weight: bold;">Math.pow(x, y)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.2em; font-weight: bold;">x ** y</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>へ置き換えたものです。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、関数適用が連続的になると、入れ子構造が発生して、コードのリーダビリティが損なわれてしまいます。コードの構造が読み取りにくくなるので非常にデバッグしにくなります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算では左右のパイプで簡潔に表現され理解もできるものが、入れ子（nesting）構造となり地獄のような有様になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは根本的には、</block><block style="font-weight: bold;">単項演算子としてのf(x)表記法に不合理なレベルで執着し続けてきた悪しき帰結</block><block>であると言えます。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9375595493268909"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%8D%98%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-size: 1.44em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%8D%98%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">単項演算</a></block><block style="font-size: 1.44em;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_operation" style="text-decoration: underline; font-size: 1.44em; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_operation" target="_blank" style="color: inherit; text-decoration: inherit;">Unary operation</a></block><block style="font-size: 1.44em;">） の場合</block></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.000287155706544695"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">単項演算とは、数学で、被作用子（オペランド）が一つだけであるような演算（つまり、入力が一つの演算）のこと</block><block>。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、論理否定は真理値に対する単項演算であり、自乗は実数に対する単項演算である。階乗 n! も単項演算である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">与えられた集合 S に対する単項演算は、関数 S→S に他ならない。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" target="_blank" style="color: inherit; text-decoration: inherit;">論理否定の演算子  </a></block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" style="text-decoration: underline; font-size: 1.73em; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_NOT" target="_blank" style="color: inherit; text-decoration: inherit;">!</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="boolean token">true</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="boolean token">false</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="operator token">!</block><block class=" token">a</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">false</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と関数表記へそのまま置き換えることができ、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">一項演算子</block><block>は１引数の関数(</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Unary function</a></block><block>)と対応するのがわかります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">!</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">f</block><block class="punctuation token">(</block><block class="boolean token">true</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// false</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすれば、単にシンボルの割当ての違いにすぎない、とはっきりとわかります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>シンボルの割当てといえば、2つ目の問題もあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">演算子とともに</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" target="_blank" style="color: inherit; text-decoration: inherit;">グループ化演算子 ( ) </a></block><block style="font-weight: bold;">を組み合わせることで依存グラフを構成し、演算はその依存グラフを解決する形で進んでいきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とするわけですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x) </block><block>という単項演算子としての記法のカッコ</block><block style="font-weight: bold;">（）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Grouping" target="_blank" style="color: inherit; text-decoration: inherit;">グループ化演算子 ( )</a></block><block style="font-weight: bold;"> </block><block>のカッコ</block><block style="font-weight: bold;">（）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block><block style="font-weight: bold;">異なる概念</block><block>の機能を</block><block style="font-weight: bold;">同一のシンボル( )で表現しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>意味が異なる同じ記号が入れ子を繰り返しながら式の依存グラフを構成していくので、読解は非常厄介なコードになってしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コードというより、これはベースとなる数学の「ミス」とも言えて、おそらくこれも手書き時代にオイラーが発明した記法でしょうが、概念が別ものならば、本来ならば別のシンボル&lt;&gt; [] で表しても良かったのでしょうが、この具体的なシンボルでも重複はするので問題があります。 　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型言語のHaskellでは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x)</block><block> は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f x </block><block>と書けて、たいがいのコードでは（）なしの関数適用の表記がなされています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>筆者は最初、なんでこんな（JavaScriptやC系のプログラマにとって）わかりにくい記法なのだろうか？と謎だったのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上述のような</block><block style="font-weight: bold;">（）の概念の混同</block><block>や、とにかく</block><block style="font-weight: bold;">関数型コードでは（）だらけになって大変</block><block>なことや、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに後述するカリー化で、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2引数の関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x, y) </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は１引数の関数(</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Unary function</a></block><block>)の高階関数として表すので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x)(y)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となりますが、（）を書かないことで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f x y </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>カリー化した１引数の関数(</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Unary function</a></block><block>)の高階関数と2引数関数の表記差異がなくなる、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>などとメリットはあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>一般的な数学でも、高校数学では、三角関数でも、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">sin</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">x</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表記する煩雑さを嫌って、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">sin x</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書く流儀と一緒で、関数適用まで</block><block style="font-weight: bold;">()</block><block>を使うのは混乱するし煩雑で面倒だから避ける、という流儀は存在しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この無用に複雑で意味さえ異なる</block><block style="font-weight: bold;">（）の入れ子構造</block><block>を生み出し続ける</block><block style="font-weight: bold;">f(x)</block><block>記法以外の関数適用の記法はないでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;"> </block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.827490587583035" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.827490587583035"><prefix style="text-align: left; padding-right: 0.25em;">13.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">データファーストになるパイプ構造</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f(x)</block><block>とあるとき、</block><block style="font-weight: bold;">データは x </block><block>のほうなので</block><block style="font-weight: bold;">データファースト</block><block>にするならば</block><block style="font-weight: bold;"> f よりむしろ x のほうが最初に来るべき</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>我々は</block><block style="font-weight: bold;">データである x と関数である f の関係を今一度とらえなおして、単項演算の表記に執着するのではなく、二項演算にしたほうが良いでしょう。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 130px; height: 44.4737px; position: relative;"><img src="image-resources/37b64413-af32-45bc-a21e-03be01b91473.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数適用を二項演算と見做したときの二項演算子がパイプライン演算子（Pipe Operator）</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>データファーストのパイプラインを実現するための二項演算子なので、自然な呼称です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block><block style="font-weight: bold;">f(x)</block><block> 記法では　</block><block style="font-weight: bold;">g(f(x))</block><block>とネストしてしまっているものは、パイプライン記法で、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x |&gt; f |&gt; g </block><block>と表現できます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 204.9px; position: relative;"><img src="image-resources/e231dcf7-752f-46af-b852-2261bd1927a7.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="color: rgb(208, 2, 27);">赤の波線</block><block>が出ているのは、JavaScriptでもTypeScriptでも実装されていないからですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%91%E3%82%A4%E3%83%97%E3%83%A9%E3%82%A4%E3%83%B3%E6%BC%94%E7%AE%97%E5%AD%90" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%91%E3%82%A4%E3%83%97%E3%83%A9%E3%82%A4%E3%83%B3%E6%BC%94%E7%AE%97%E5%AD%90" target="_blank" style="color: inherit; text-decoration: inherit;">パイプライン演算子</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.31314846755197623"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算子（パイプラインえんざんし、英語: Pipe Operator）(|&gt;)は、ある式の結果を別の式に1つ目の引数として渡す演算子である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>主に、関数の引数に他の関数を書くことにネストが深くなり、コードが読みにくくなるのを防ぐためにある。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Elixir、F#、R言語などにある。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型プログラミングは式（Expression）を組み立てていく作業に他なりません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>前述したとおり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.07776994194669573"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のオブジェクトは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">(Sets)</block><block>に相当し、</block><block style="font-weight: bold;">二項演算の左側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算子</a></block><block style="font-weight: bold;">(Binary operatior)</block><block>に相当しており、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドの引数は、</block><block style="font-weight: bold;">二項演算の右側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、</block><block style="font-weight: bold;">オブジェクトのメソッドチェーンは、二項演算の連鎖と同じもの</block><block>である、という事実を認識できるでしょう。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクトのメソッドチェーンは、二項演算の連鎖と同じ</block><block>という事実は、別の言葉でいうと、</block><block style="font-weight: bold;">データファーストのパイプ構造になっている</block><block>、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算では、小学校の算数の授業で習ったとおりに、</block><block style="font-weight: bold;">左から右に演算が進んで行く</block><block>作法で、それはこういう文章の読解が左から右である事実とも一致しますし、</block><block style="font-weight: bold;">データが左から右に、上から下へと流れていくというのはすべてにおいて自然</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">データファーストのパイプ構造</block><block>である</block><block style="font-weight: bold;">二項演算</block><block>は非常にわかりやすく、メンタルの負荷を劇的に軽減させ無用なミスを減らしBUGがなくなるのでコーディングの生産性を劇的にあげることができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その証拠というか、実際にこのパイプラインオペレータがもたらすであろうメリットはJavaScriptコミュニティでは広く認識されているようで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://2020.stateofjs.com/en-us/opinions/missing_from_js/" target="_blank" style="color: inherit; text-decoration: inherit;">#StateOfJS 2020: What do you feel is currently missing from JavaScript?</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-style: italic;">2020サーベイ:JavaScriptに欠けていると感じるものは？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 750px; height: 318.381px; position: relative;"><img src="image-resources/1cdd9850-a8dd-4652-aae3-4690489414c8.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Pipe Operator</block><block>は</block><block style="font-weight: bold;">Pattern Maching</block><block>に次ぐ</block><block style="font-weight: bold;">第４位</block><block>となっており、</block><block style="font-weight: bold;">現在のJavaScriptプログラマーにとって特段に需要が高い機能であることが確認できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.41304429186822245" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.41304429186822245"><prefix style="text-align: left; padding-right: 0.25em;">13.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>独自のパイプライン演算子をJavaScriptで実装する試み</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上記2020サーベイの</block><block style="font-weight: bold;">第3位であるパターンマッチング</block><block>の余談でも論じましたが、</block><block style="font-weight: bold;">TC39による標準的な実装というのは迷走しておりけしてアテにしてはいけないので、自前で実装するしかありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パターンマッチングの著名ライブラリであるts-patternでは、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7820987897033636"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パターンマッチングは、Haskell、Rust、Swift、Elixir、その他多くの言語で実装されています。EcmaScript仕様にパターンマッチングを追加するための</block><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-pattern-matching" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-pattern-matching" target="_blank" style="color: inherit; text-decoration: inherit;">tc39プロポーザル</a></block><block>がありますが、まだステージ1であり、この先数年は実装されそうにありません（仮に実装されることがあったとしても）。幸運なことに、パターンマッチングはユーザーランドで実装することができます。</block><block style="font-weight: bold;"> ts-pattern</block><block>は、タイプセーフなパターンマッチングの実装を提供しており、今日から使い始めることができます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とユーザランドで実装することが容易であることが書かれていますが、</block><block style="font-weight: bold;">関数適用の演算子</block><block>などというJavaScriptのすべての値に深いれベルでコミットする二項演算子を実装するのは工夫が必要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際の実装、コードについては後回しにします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>現在の説明の到達点ではコードの解説のオーバーヘッドが大きすぎるからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算子はすでに実装できた、ということで話をすすめます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6562500608770725" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6562500608770725"><prefix style="text-align: left; padding-right: 0.25em;">13.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数（写像）の連鎖をイメージ通りに表現できるパイプライン演算子</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この項目は、あとから出てくる説明のコピペです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>構成の都合上</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「</block><block style="font-weight: bold;">関数（写像）の連鎖と関数（写像）の合成</block><block>」これも少し後回しにしているのですが、パイプライン演算子の実装が、現時点では混乱を招く、というのと逆に、コピペの箇所に限っては現段階の知識レベルですんなりと理解できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてその内容こそが、パイプライン演算子を導入したい動機であり、実際の使い方もわかります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3811957740368761"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">関数（写像）の連鎖と関数（写像）の合成（Function composition）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">関数（写像）の連鎖</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 293.379px; position: relative;"><img src="image-resources/614e28ab-96eb-4ebe-afab-80bb3aa7f74b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という写像は、アロー関数式で、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 40.37px; position: relative;"><img src="image-resources/4467400f-bad8-4e04-bcd2-970ecb9d56cb.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように関数 f が定義する表現ができますが、写像を連鎖させることができます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 320px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="grouped-shape"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M188.5,48.74 C235.27,75.6 406.77,81.68 466.61,52.19" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8914023663176295,0.4532127770962892,-0.4532127770962892,-0.8914023663176295,467.5,51.73957824707031)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="composite-shape"><path class="real" d=" M123,196.75 C123,169.27 145.27,147 172.75,147 C200.23,147 222.5,169.27 222.5,196.75 C222.5,224.23 200.23,246.5 172.75,246.5 C145.27,246.5 123,224.23 123,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M281,196.75 C281,169.27 303.27,147 330.75,147 C358.23,147 380.5,169.27 380.5,196.75 C380.5,224.23 358.23,246.5 330.75,246.5 C303.27,246.5 281,224.23 281,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M439,196.75 C439,169.27 461.27,147 488.75,147 C516.23,147 538.5,169.27 538.5,196.75 C538.5,224.23 516.23,246.5 488.75,246.5 C461.27,246.5 439,224.23 439,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M194.5,199.74 L319.26,199.87" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.9999994516886945,-0.001047197359800095,0.001047197359800095,-0.9999994516886945,321.2604217529297,199.86978912353513)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M327.75,199.75 L492.5,199.74" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,3.6739403974420594e-16,-3.6739403974420594e-16,-1,494.49999999999994,199.7395782470703)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M191.63,202.61 C290.01,285.32 395.44,273.86 495.86,203.67" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8172454923071096,0.5762896887015332,-0.5762896887015332,-0.8172454923071096,497.36978912353516,202.60936737060547)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="composite-shape"><path class="real" d=" M188.76,199.74 C188.76,198.15 190.05,196.87 191.63,196.87 C193.22,196.87 194.5,198.15 194.5,199.74 C194.5,201.32 193.22,202.61 191.63,202.61 C190.05,202.61 188.76,201.32 188.76,199.74 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M321.26,199.87 C321.26,198.28 322.55,197 324.13,197 C325.72,197 327,198.28 327,199.87 C327,201.45 325.72,202.74 324.13,202.74 C322.55,202.74 321.26,201.45 321.26,199.87 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M494.5,199.74 C494.5,198.15 495.78,196.87 497.37,196.87 C498.95,196.87 500.24,198.15 500.24,199.74 C500.24,201.32 498.95,202.61 497.37,202.61 C495.78,202.61 494.5,201.32 494.5,199.74 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M187,42.58 L283,43.4" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,285.00000000000006,43.41525423728813)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M305,43.5 L466,43.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,468,43.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 178px; top: 164px;"><dg-editor-container data-editor-id="de004237683007810578" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 313px; top: 164px;"><dg-editor-container data-editor-id="de6959074426656615" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 486px; top: 163px;"><dg-editor-container data-editor-id="de804760275975871" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 159px; top: 111px;"><dg-editor-container data-editor-id="de6162690976084972" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 318px; top: 113px;"><dg-editor-container data-editor-id="de06344536132171519" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 477px; top: 112px;"><dg-editor-container data-editor-id="de9672729346808586" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">C</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 233px; top: 168px;"><dg-editor-container data-editor-id="de4329097910987836" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 391px; top: 168px;"><dg-editor-container data-editor-id="de4431643375417347" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 327px; top: 259px;"><dg-editor-container data-editor-id="de24953915190753606" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 168px; top: 27px;"><dg-editor-container data-editor-id="de8047817352143185" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 286px; top: 28px;"><dg-editor-container data-editor-id="de5678799601865681" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 469px; top: 28px;"><dg-editor-container data-editor-id="de5845821847937867" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 221px; top: 2px;"><dg-editor-container data-editor-id="de3224132462893843" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 366px; top: 5px;"><dg-editor-container data-editor-id="de21492897727051274" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 314px; top: 73px;"><dg-editor-container data-editor-id="de42134810160760305" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">x</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> x </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">g</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">x</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> x </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすると、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>fx表記法では、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">g</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">     </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>入れ子構造になっており写像のイメージで直感的ではないので、独自に実装した、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算子（Pipeline Operator）を活用して、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token">　　</block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8483446151041676" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8483446151041676"><prefix style="text-align: left; padding-right: 0.25em;">13.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算子で式を書けばコードはシンプルになりType定義の構造と一致しやすい</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以下は、本稿の最後のほうで出てくる、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミングを机上の空論で終わらすことなく、リアルに実用的である為に欠かすことができない、</block><block style="font-weight: bold;">FRP（Functional Reactive Programming）関数</block><block>を定義するコード（</block><block style="font-weight: bold;">タイプコンストラクタ</block><block>）なのなのですが、これはオブジェクト指向プログラミングにおける</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%AF%E3%83%A9%E3%82%B9_(%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%AF%E3%83%A9%E3%82%B9_(%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF)" target="_blank" style="color: inherit; text-decoration: inherit;">クラス</a></block><block style="font-weight: bold;">のコンストラクタ</block><block>に該当します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 373.832px; position: relative;"><img src="image-resources/ca8be4ad-464b-4610-baca-50631248d6f8.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>  </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向や命令型の幾多のキーワードの文（Statement）を一切つかうことはなく、型（type）定義を別にすると、単に、</block><block style="font-weight: bold;">関数と二項演算子のみで構成した単一の式（Expression）</block><block>でしかありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん</block><block style="font-weight: bold;">reactive</block><block>や</block><block style="font-weight: bold;">flatReactive</block><block>という名前の関数は見えるのですが、それは別の所で定義されていて、</block><block style="font-weight: bold;">この単一の式の構造こそがこのFRP関数の概略の表現</block><block>なのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にこの</block><block style="font-weight: bold;">式の構造</block><block>は、それ自体そのまま、</block><block style="font-weight: bold;">完全にTypeScriptの型（type）定義と一致</block><block>しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">TypeScriptの交差型(Intersection Types)</block><block>の </block><block style="font-weight: bold;">&amp; </block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>独自に定義した</block><block style="font-weight: bold;">二項演算子（Custom operator）</block><block>である</block><block style="font-weight: bold;">パイプラインオペレータ（Pipeline Operator）</block><block>の </block><block style="font-weight: bold;">['&gt;']</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それらがうまく呼応しており、</block><block style="font-weight: bold;">簡潔なコードとして表現できている</block><block>ことに注目してください。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptでコーディングするときには、コードがオブジェクト指向のスタイルであろうと関数型のスタイルであろうと、最終的に、あるいは最初から決まる型（Type）は同一でしょう。そして関数型のコードでは特に二項演算子を活用する式を構成すれば、自動的にTypeScriptの型定義と一致するコードになります。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.25634118123911254"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算子（Binary operator）はオブジェクト指向のコードを置き換え可能な、強力な表記法</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を体現するものと言えます、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算子（Custom operator）を適切に定義しながら活用することで、構造が明確なコードが表現できるようになり、結果的に自然とTypeScriptによる型定義とも簡単に対応させやすくなり、より厳密な型構造を維持するBUGのないコードを書けるようになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.05538134665775063" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.05538134665775063"><prefix style="text-align: left; padding-right: 0.25em;">13.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算子（Custom operator）は見やすくて書きやすい</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まず、大変重要なことですが、TypeScriptで普通にタイプが効きます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>連想配列表記のメソッドになっているから、型推論が破綻する、ということはありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>次に見た目ですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>次に、最初見た目やっぱり煩雑だな、と思っていたのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>VSCode　August 2021 (version 1.60)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://code.visualstudio.com/updates/v1_60#:~:text=Built%2Din%20fast%20bracket%20colorization%20%2D" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://code.visualstudio.com/updates/v1_60#:~:text=Built%2Din%20fast%20bracket%20colorization%20%2D" target="_blank" style="color: inherit; text-decoration: inherit;">Built-in fast bracket colorization</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://code.visualstudio.com/blogs/2021/09/29/bracket-pair-colorization" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://code.visualstudio.com/blogs/2021/09/29/bracket-pair-colorization" target="_blank" style="color: inherit; text-decoration: inherit;">Bracket pair colorization 10,000x faster</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>昔は、外部エクステンションであったブラケットの色付け機能が最近VSCode組み込み機能となりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>組み込みですがデフォルトでは有効ではないので設定する必要があります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 772.152px; position: relative;"><img src="image-resources/a5e1127e-a884-43d2-8498-f44fde396648.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ブラケットの色付けにより、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>CustomOperatorの[ ]が式の階層によって正確に色分けされるようになりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、JavaScriptに最初から実装されている二項演算子たとえば + などでは</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 150px; height: 39.5706px; position: relative;"><img src="image-resources/3d23e365-3571-4b16-aa15-d5e42f7f819b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、どの式の階層でも同じ色なのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Custom operatorを使ったコードでは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 440px; height: 63.4698px; position: relative;"><img src="image-resources/ebcc46b8-76f4-4e0e-8815-e726a4b87b46.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 40.5954px; position: relative;"><img src="image-resources/e5452811-6be5-499d-be11-e86290b72fa3.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように式の階層によって自動的に色分けがなされるので非常に見やすいです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 650px; height: 788.213px; position: relative;"><img src="image-resources/808f2362-ffd7-48a6-8ab4-5a43029e65ca.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 470px; height: 631.818px; position: relative;"><img src="image-resources/c0c4892a-33ac-4476-8e9e-5798fd77bb32.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>特に筆者が利用しているテーマ　</block><block style="font-weight: bold;">Monokai Pro</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、二項演算子は黄色で目立ってわかりやすいです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同じ色の演算子でもブラケット[]がトップレベルでは紫ですが、一段階層が下がると青になっているのがひと目で判別できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>書きにくさの問題が懸念されるところですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>User SnippetsあるいはKeyboard Shorcutsを活用することでその問題はなくなります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 350px; height: 476.26px; position: relative;"><img src="image-resources/c53f3c33-5d9c-4ac4-a772-6e70dd223ffe.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 350px; height: 475.49px; position: relative;"><img src="image-resources/63f38040-5856-428b-b0a0-7fe8550c543b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 124.113px; position: relative;"><img src="image-resources/025661fa-afc0-40c8-8807-ff39f5bd88f6.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 100px; height: 88.2353px; position: relative;"><img src="image-resources/25e7f057-e56e-46b0-9c64-bf4418b7c810.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 650px; height: 381.034px; position: relative;"><img src="image-resources/181e8256-bec6-432b-837a-199412df71da.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="string token">"key"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="string token">"F1"</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="string token">"command"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="string token">"editor.action.insertSnippet"</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="string token">"args"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="string token">"snippet"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="string token">" =&gt; "</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="string token">"key"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="string token">"F2"</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="string token">"command"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="string token">"editor.action.insertSnippet"</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="string token">"args"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="string token">"snippet"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="string token">"['&gt;']("</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>デフォルトのままだと気になるレベルですが、VSCodeにあらかじめ搭載されている機能を活用することで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>独自に定義した二項演算子（Custom operator）は、読みやすく書きやすいものとなります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.07833473411391578" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.07833473411391578"><prefix style="text-align: left; padding-right: 0.5em;">14. </prefix><blocks><baselineblock class="inline"></baselineblock><block>代数構造（代数的構造）（Algebraic structure）</block><block style="font-weight: bold;">と有向非巡回グラフ（DAG）＝依存グラフ</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.21036825326460984" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.21036825326460984"><prefix style="text-align: left; padding-right: 0.25em;">14.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">これまでのまとめ</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型コードは式（Expression）</block><block>である。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数型プログラミングは式を組み立てていく作業。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">式</block><block>の中心となる素材が、</block><block style="font-weight: bold;">関数（Function）</block><block>と</block><block style="font-weight: bold;">二項演算子（Binary operator）。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（Function）</block><block>と</block><block style="font-weight: bold;">演算子（Operator）</block><block>は本当は</block><block style="font-weight: bold;">同じもの。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.647377982780512"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">二項演算子（Binary operator）はとてつもなく強力な記法である</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まったく同じ意味のコードであっても、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" target="_blank" style="color: inherit; text-decoration: inherit;">べき乗 (**)</a></block><block>という新しい</block><block style="font-weight: bold;">二項演算子を導入</block><block>した結果、いかに</block><block style="font-weight: bold;">コードが無駄なく簡潔になり、数学的な構造が読みやすくなった</block><block>のかは明白です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>特にこのように連鎖してネスト構造になった場合、非常にシンプルに記述できます。これは</block><block style="font-weight: bold;">バグの混入を事前に防ぐことができ、プログラミングの生産効率が飛躍的に向上する</block><block>ことに直結します。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;">  </block><block>とは</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.44em; font-weight: bold;">ｆ(x, y) </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のことであり、概念としては、関数だけで統合できてしまうのですが、数式の表記方法としてはむしろ、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;"> </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のほうが圧倒的に優れており、なにより、これは繰り返しになりますが我々が小学校の算数の時間から徹底的にトレーニングされてきた慣れ親しんでいる表記でもあります。非常に</block><block style="font-weight: bold;">直感的に理解可能</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型のコードでは、</block><block style="font-weight: bold;">二項演算子</block><block>とともに</block><block style="font-weight: bold;">グループ化演算子 ( ) </block><block>を組み合わせることで</block><block style="font-weight: bold;">依存グラフを構成</block><block>し、</block><block style="font-weight: bold;">演算はその依存グラフを解決する形で進んでいく。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">依存グラフ</block><block>を構成する</block><block style="font-weight: bold;">二項演算</block><block>を最大限に活用した式の組み立てに注力することで、</block><block style="font-weight: bold;">バグの入り込む余地が極小</block><block>の関数型コードを書くことが実現できる。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（Type）とは</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_(mathematics)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_(mathematics)" target="_blank" style="color: inherit; text-decoration: inherit;">Set</a></block><block style="font-weight: bold;">）のこと。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のオブジェクトは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">(Sets)</block><block>に相当し、</block><block style="font-weight: bold;">二項演算の左側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算子</a></block><block style="font-weight: bold;">(Binary operatior)</block><block>に相当しており、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドの引数は、</block><block style="font-weight: bold;">二項演算の右側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5639922583096322" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">型理論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Type_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Type_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Type theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（type）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）/ 写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">集合論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Set theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">始集合（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">終集合（codomain）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">解析学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Mathematical_analysis" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Mathematical_analysis" target="_blank" style="color: inherit; text-decoration: inherit;">Analysis</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">定義域（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">値域（range）と終域（codomain）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">代数学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Algebra" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Algebra" target="_blank" style="color: inherit; text-decoration: inherit;">Algebra</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）/  被演算子（operand）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">演算子（operator）</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">オブジェクト指向</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Object-oriented_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Object-oriented_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Object-oriented programming</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト（object）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">メソッド（method）</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="関数（function）" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="関数（function）" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">対象（object）/  圏（category）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">射（morphism）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7880365753984468" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">情報処理・プログラミング</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">データ（data）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">処理（operation）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 0.9em;">このなかで、最も根底となる、すべての概念の包括的な枠組みが</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block style="font-size: 0.9em;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Category_theory" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Category_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block style="font-size: 0.9em;">）で、これまで永らく数学の基礎であった</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">集合論</a></block><block style="font-size: 0.9em;">でさえも圏論の言葉で再定義されます（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E3%81%AE%E5%9C%8F" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E3%81%AE%E5%9C%8F" target="_blank" style="color: inherit; text-decoration: inherit;">集合の圏</a></block><block style="font-size: 0.9em;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Category_of_sets" style="text-decoration: underline; font-size: 0.9em; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Category_of_sets" target="_blank" style="color: inherit; text-decoration: inherit;">category of sets</a></block><block style="font-size: 0.9em;">）における</block><block style="font-size: 0.9em; font-weight: bold;">射（morphism）</block><block style="font-size: 0.9em;">は</block><block style="font-size: 0.9em; font-weight: bold;">関数（function）</block><block style="font-size: 0.9em;">になる）。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>本稿の方針は、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算子</a></block><block style="font-weight: bold;">(Binary operatior)</block><block>を最大限に活用することなので、このなかでどの分野の言葉をもってコードを書いていくのか？となると、当然、</block><block class="role-hyper-link" data-hyper-link-url="代数学" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="代数学" target="_blank" style="color: inherit; text-decoration: inherit;">代数学</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Algebra" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Algebra" target="_blank" style="color: inherit; text-decoration: inherit;">Algebra</a></block><block style="font-weight: bold;">）</block><block>。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数適用のf(x)記法からの脱却をし二項演算子であるパイプライン演算子にしていく。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア開発、あるいはプログラミングにおける</block><block style="font-weight: bold;">「本質的な複雑性」（essential complexity）</block><block>とは、ほんとうは</block><block style="font-weight: bold;">数学的な概念で、それは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%84%E5%90%88%E3%81%9B%E7%88%86%E7%99%BA" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%84%E5%90%88%E3%81%9B%E7%88%86%E7%99%BA" target="_blank" style="color: inherit; text-decoration: inherit;">組合せ爆発</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Combinatorial_explosion" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Combinatorial_explosion" target="_blank" style="color: inherit; text-decoration: inherit;">Combinatorial explosion</a></block><block style="font-weight: bold;">）</block><block>。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">『銀の弾丸』</block><block>、複雑性を解決する唯一の</block><block style="font-weight: bold;">「唯一正しい工学的アプローチ」</block><block>とは「</block><block style="font-weight: bold;">数学的アプローチ」</block><block>でしかありえず、</block><block style="font-weight: bold;">組合せ爆発を回避する「等しい（Equality）」</block><block style="font-weight: bold;">という超強力な概念。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.431021277434108" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.431021277434108"><prefix style="text-align: left; padding-right: 0.25em;">14.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Twitterは代数構造と有向非巡回グラフ（DAG）＝依存グラフを活用して自社システムを組んでいる</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>いろんなSNSプラットフォームがありますが、個人的な印象ではTwitterの技術水準が格段に高いと評価しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/twitter/algebird" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/twitter/algebird" target="_blank" style="color: inherit; text-decoration: inherit;">https://github.com/twitter/algebird</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://twitter.github.io/algebird/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://twitter.github.io/algebird/" target="_blank" style="color: inherit; text-decoration: inherit;">https://twitter.github.io/algebird/</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 212.951px; position: relative;"><img src="image-resources/77d67da9-0df9-4c30-81c3-be852f316c00.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3053498661129852"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Algebird is a library which provides abstractions for abstract algebra in the Scala programming language.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>This code is targeted at building aggregation systems (via Scalding, Apache Storm or Summingbird). It was originally developed as part of Scalding’s Matrix API, where Matrices had values which are elements of </block><block style="font-weight: bold;">Monoids</block><block>, Groups, or Rings. </block><block style="font-weight: bold;">Subsequently, it was clear that the code had broader application within Scalding and on other projects within Twitter.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Algebirdは、Scalaプログラミング言語で抽象代数のための抽象化を提供するライブラリです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このコードは、(Scalding, </block><block style="font-weight: bold;">Apache Storm</block><block>, Summingbirdを介した)アグリゲーションシステムの構築を対象としています。元々はScaldingのMatrix APIの一部として開発されたもので、Matrixは</block><block style="font-weight: bold;">モノイド</block><block>、群、環（</block><block style="font-weight: bold;">Monoids</block><block>、Group、Ring）の要素である値を持っていました。その後、</block><block style="font-weight: bold;">このコードがScaldingやTwitterの他のプロジェクトで、より幅広い用途に使えることが明らかになりました。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Apache_Storm" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Apache_Storm" target="_blank" style="color: inherit; text-decoration: inherit;">Apache Storm</a></block><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 156.718px; position: relative;"><img src="image-resources/9fedbdd3-68d5-4c59-b3d3-6df424e10dc6.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2865831502451164"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Apache Storm is a distributed stream processing computation framework written predominantly in the Clojure programming language. Originally created by Nathan Marz[1] and team at BackType,[2]</block><block style="font-weight: bold;"> the project was open sourced after being acquired by Twitter.</block><block>[3] It uses custom created "spouts" and "bolts" to define information sources and manipulations to allow batch, distributed processing of streaming data. The initial release was on 17 September 2011.[4]</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A Storm application is designed as a "topology" in the shape of a </block><block style="font-weight: bold;">directed acyclic graph (DAG) </block><block>with spouts and bolts acting as the graph vertices. Edges on the graph are named streams and direct data from one node to another. Together, the topology acts as a data transformation pipeline. At a superficial level the general topology structure is similar to a MapReduce job, with the main difference being that data is processed in real time as opposed to in individual batches. Additionally, Storm topologies run indefinitely until killed, while a MapReduce job DAG must eventually end.[5]</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Storm became an Apache Top-Level Project in September 2014[6] and was previously in incubation since September 2013.[7][8]</block></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Apache Stormは、主にClojureプログラミング言語で記述された分散型ストリーム処理計算フレームワークです。元々はBackType社のNathan Marz[1]とそのチームによって作成されたが[2]、</block><block style="font-weight: bold;">Twitter社に買収された後にオープンソース化された。</block><block>[3]カスタムで作成された「spout」と「bolt」を使用して情報源と操作を定義し、ストリーミングデータのバッチ分散処理を可能にしている。2011年9月17日に最初のリリースが行われた[4]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Stormアプリケーションは、</block><block style="font-weight: bold;">有向非巡回グラフ（DAG）</block><block>の形をした「トポロジー」として設計されており、スパウトとボルトはグラフの頂点として機能します。グラフ上のエッジはストリームと呼ばれ、あるノードから別のノードへデータを転送します。これらのトポロジーは、データ変換のパイプラインとして機能します。一般的なトポロジーの構造は、表面的にはMapReduceジョブに似ていますが、主な違いは、データが個々のバッチではなく、リアルタイムで処理されることです。さらに、MapReduceジョブのDAGが最終的に終了しなければならないのに対し、Stormのトポロジーはキルされるまで無限に実行される[5]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Stormは2014年9月にApache Top-Level Projectとなったが[6]、それ以前は2013年9月からインキュベーション中であった[7][8]。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">有向非巡回グラフ（DAG）</block><block>という依存グラフ構造の構成のことを、Apache Stormでは「トポロジー」と表現しており、実際そのとおりなのですが、別にトポロジーのことは、少なくともこの程度のレベルでは代数構造に統合して考えられるし、必要以上に概念や用語を積み増すことは無用な混乱につながるだけなので、代数構造と、表裏一体である、依存グラフ、という概念に統合して考えていきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5696827124692767" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5696827124692767"><prefix style="text-align: left; padding-right: 0.25em;">14.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">代数構造（代数的構造）（Algebraic structure）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E7%9A%84%E6%A7%8B%E9%80%A0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E7%9A%84%E6%A7%8B%E9%80%A0" target="_blank" style="color: inherit; text-decoration: inherit;">代数的構造</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.42034861362102705"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学において</block><block style="font-weight: bold;">代数的構造</block><block>（だいすうてきこうぞう、</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Algebraic_structure" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Algebraic_structure" target="_blank" style="color: inherit; text-decoration: inherit;">algebraic structure</a></block><block>）とは、</block><block style="font-weight: bold;">集合</block><block>に定まっている</block><block style="font-weight: bold;">算法（演算ともいう）</block><block>や作用によって決まる構造のことである。</block><block style="font-weight: bold;">代数的構造の概念は、数学全体を少数の概念のみを用いて見通しよく記述するため</block><block>にブルバキによって導入された。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、代数的構造を持つ集合は</block><block style="font-weight: bold;">代数系</block><block>（だいすうけい、algebraic system）であるといわれる。すなわち、代数系というのは、集合 A とそこでの算法（演算の規則）の族 R の組 (A, R) のことを指す。逆に、具体的なさまざまな代数系から、それらが共通してもつ原理的な性質を抽出して抽象化・公理化したものが、代数的構造と呼ばれるのである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なお、分野（あるいは人）によっては代数系そのもの、あるいは代数系のもつ算法族のことを代数的構造とよぶこともあるようである。 後者は、代数系の</block><block style="font-weight: bold;">代数構造</block><block>とも呼ばれる。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>現代では、</block><block style="font-weight: bold;">代数学とは代数系を研究する学問のこと</block><block>であると捉えられている。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6395574431024262"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">代数的構造の概念は、数学全体を少数の概念のみを用いて見通しよく記述するため</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">これが、関数型プログラミングで「代数構造」という概念をわざわざ持ち出してくるメリット、モティベーションのすべてです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>既に何度も強調しているとおり、</block><block style="font-weight: bold;">二項演算子は根本的は二項関数でしかない</block><block>のですが、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.673997460502963"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">二項演算子（Binary operator）はとてつもなく強力な記法である</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まったく同じ意味のコードであっても、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Exponentiation" target="_blank" style="color: inherit; text-decoration: inherit;">べき乗 (**)</a></block><block>という新しい</block><block style="font-weight: bold;">二項演算子を導入</block><block>した結果、いかに</block><block style="font-weight: bold;">コードが無駄なく簡潔になり、数学的な構造が読みやすくなった</block><block>のかは明白です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>特にこのように連鎖してネスト構造になった場合、非常にシンプルに記述できます。これは</block><block style="font-weight: bold;">バグの混入を事前に防ぐことができ、プログラミングの生産効率が飛躍的に向上する</block><block>ことに直結します。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;">  </block><block>とは</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.44em; font-weight: bold;">ｆ(x, y) </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のことであり、概念としては、関数だけで統合できてしまうのですが、数式の表記方法としてはむしろ、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;"> </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のほうが圧倒的に優れており、なにより、これは繰り返しになりますが我々が小学校の算数の時間から徹底的にトレーニングされてきた慣れ親しんでいる表記でもあります。非常に</block><block style="font-weight: bold;">直感的に理解可能</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>要するに、関数そのもので議論したりコードに書き込むよりも、</block><block style="font-weight: bold;">二項演算</block><block>として表記したほうが圧倒的にコードが簡単になり、</block><block style="font-weight: bold;">直感的に理解が可能</block><block>で、見通しがよくなりメンテナンスが楽になる、つまりバグが紛れ込むリスクが激減するというとてつもないメリットがあるので、二項演算のほうを採用したい、そして、</block><block style="font-weight: bold;">関数型プログラミングでは、二つの演算によって決まる代数的構造、つまり二項演算だけで、ほぼほぼ事が足りてしまう</block><block>のです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">代数構造</block><block>というのは</block><block class="role-hyper-link" data-hyper-link-url="代数学" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="代数学" target="_blank" style="color: inherit; text-decoration: inherit;">代数学</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Algebra" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Algebra" target="_blank" style="color: inherit; text-decoration: inherit;">Algebra</a></block><block style="font-weight: bold;">）</block><block>という学問で研究しつくされていて、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 450px; height: 296.029px; position: relative;"><img src="image-resources/3be5fa6b-2072-4734-8aa5-22dfd86a5373.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 232.746px; position: relative;"><img src="image-resources/763b1ca8-c68b-47c2-bff5-6abb3beeef18.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>といろいろあるのですが、このリストのなかで関数型コードの基礎レベルあるいは、たいていのプログラミング要素をカバーできる特に有用な養素は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 58.8px; position: relative;"><img src="image-resources/45846e41-3c30-421a-bb0f-8b215012f610.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この辺です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7807046928215546" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7807046928215546"><prefix style="text-align: left; padding-right: 0.25em;">14.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">３つの代数構造と「等しい（Equality）」</block><block style="font-weight: bold;">という概念</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「法則」であるとか「律」と書いていると面倒くさいことになった、と感じがちでなのですが、これこそが</block><block style="font-weight: bold;">「等しい（Equality）」という超強力な概念</block><block>のことなのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア危機＝</block><block style="font-weight: bold;">「本質的な複雑性」（essential complexity）＝組合せ爆発を回避する「等しい（Equality）」</block><block style="font-weight: bold;">という超強力な概念</block><block>が体系的に整理されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>いろんな代数構造が体系的に分類されているのですが、そのそれぞれにおいて、何かが</block><block style="font-weight: bold;">「等しい（Equality）」</block><block>という条件で絞り込みがなされています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>本稿で気にする、扱うのはせいぜい、</block><block style="font-weight: bold;">結合性</block><block>と</block><block style="font-weight: bold;">単位元</block><block>という２つの要素だけで、双方とも、何かが</block><block style="font-weight: bold;">「等しい（Equality）」</block><block>というルールです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして本稿で具体的に扱うのは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイド（Monoid）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ファンクタ（Functor）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モナド（Monad）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以上の、</block><block style="font-weight: bold;">3つの代数構造</block><block>だけで、これら</block><block style="font-weight: bold;">3つともすべて二項演算</block><block>の名前です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>おおよそこれだけで、</block><block style="font-weight: bold;">有向非巡回グラフ（DAG）</block><block>による</block><block style="font-weight: bold;">関数型リアクティブプログラミング（FunctionalReactiveProgramming）FRP</block><block>までカバーし、最終的には具体的なコードも示します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.2917413197109895" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.2917413197109895"><prefix style="text-align: left; padding-right: 0.5em;">15. </prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイド（Monoid）複雑性を排除してくれるシンプルな二項演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7850549632026209" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7850549632026209"><prefix style="text-align: left; padding-right: 0.25em;">15.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイド（Monoid）の具体例</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイドとは以下のような二項演算で表現される代数構造です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">+</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">+</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">+</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">+</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">×</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">×</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">×</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">×</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>式をコードで書くと、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="operator token">===</block><block class=" token"> </block><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="punctuation token">(</block><block class="number token">2</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class=" token"> </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="operator token">===</block><block class=" token"> </block><block class="number token">1</block><block class=" token"> </block><block class="operator token">*</block><block class=" token"> </block><block class="punctuation token">(</block><block class="number token">2</block><block class=" token"> </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="string token">"Hello"</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="string token">" "</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="string token">"world"</block><block class=" token"> </block><block class="operator token">===</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"Hello"</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="punctuation token">(</block><block class="string token">" "</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="string token">"world"</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">2</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">===</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">2</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最後の</block><block style="font-weight: bold;">Array.concat()</block><block>については、すでに独自の二項演算子のくだりで取り上げたので問題はないと思いますが、直近の</block><block style="font-weight: bold;">String.concat()</block><block>と同等である </block><block style="font-weight: bold;">+ 演算子</block><block>と一緒で、念の為に1つ演算をすすめると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">===</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と同じになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5961780533682861" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5961780533682861"><prefix style="text-align: left; padding-right: 0.25em;">15.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイド（Monoid）の定義</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%A2%E3%83%8E%E3%82%A4%E3%83%89" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%A2%E3%83%8E%E3%82%A4%E3%83%89" target="_blank" style="color: inherit; text-decoration: inherit;">モノイド</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Monoid" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Monoid" target="_blank" style="color: inherit; text-decoration: inherit;">Monoid</a></block><block>）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5114281571050496"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学、とくに抽象代数学における</block><block style="font-weight: bold;">単系（たんけい、英: monoid; モノイド）はひとつの二項演算と単位元をもつ代数的構造</block><block>である。モノイドは単位元をもつ半群（単位的半群）であるので、半群論の研究対象の範疇に属する。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイドの概念は数学のさまざまな分野に現れる。たとえば、モノイドはそれ自身が「ただひとつの対象をもつ圏」と見ることができ、したがって「集合上の写像とその合成」といった概念を捉えたものと考えることもできる。</block><block style="font-weight: bold;">モノイドの概念は計算機科学の分野でも、その基礎付けや実用プログラミングの両面で広く用いられる。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">定義</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>集合 S とその上の二項演算 •: S × S → S が与えられ、以下の条件</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" style="text-decoration: underline; font-size: 1.2em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" target="_blank" style="color: inherit; text-decoration: inherit;">結合法則</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>S の任意の元 a, b, c に対して、(a • b) • c = a • (b • c).</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%8D%98%E4%BD%8D%E5%85%83" style="text-decoration: underline; font-size: 1.2em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%8D%98%E4%BD%8D%E5%85%83" target="_blank" style="color: inherit; text-decoration: inherit;">単位元</a></block><block style="font-size: 1.2em;">の存在</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>S の元 e が存在して、S の任意の元 a に対して e • a = a • e = a.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を満たすならば、組 (S, •, e) を</block><block style="font-weight: bold;">モノイド</block><block>という。まぎれの虞のない場合、対 (S, •) あるいは単に S のみでも表す。 二項演算の結果 a • b を a と b の積[注釈 1]と呼ぶ。手短に述べれば、モノイドとは単位元を持つ半群のことである。モノイドに各元の可逆性を課せば、群が得られる。逆に任意の群はモノイドである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算の記号は省略されることが多く、たとえば先ほどの公理に現れる等式は (ab)c = a(bc), ea = ae = a と書かれる。本項でも明示する理由がない限り二項演算の記号を省略する。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>先に、モノイドの具体例を示しており、小学校の算数の時間に習った加法と乗法の二項演算であったり、JavaScript文字列（Strings）の結合とか、お馴染みの概念であるわけですが、以上が厳密な定義です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>定義を見ると3つの要素があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合 S とその上の二項演算 •: S × S → S </block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">結合法則（結合律）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">単位元の存在</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9880247229742132" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9880247229742132"><prefix style="text-align: left; padding-right: 0.25em;">15.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイドの素晴らしさ①　型（Type）が単一の閉じた二項演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">mono- </block><block>というのはモノトーンという言葉などがありますが</block><block style="font-weight: bold;">「単一」</block><block>という意味がある接頭語です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>日本語でも、</block><block style="font-weight: bold;">単系（たんけい、英: monoid; モノイド）</block><block>と和訳されているようですが、あまり使わず、カタカナの</block><block style="font-weight: bold;">モノイド</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なにが</block><block style="font-weight: bold;">単一（モノ）</block><block>なのか？というと、</block><block style="font-weight: bold;">型（Type）が単一</block><block>で、それが、</block><block style="font-weight: bold;">S × S → S</block><block>という式で表されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">+</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">+</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">+</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">+</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">×</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">×</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">×</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">×</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で言えば、</block><block style="font-weight: bold;">Number × Number → Number</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>文字列結合なら、</block><block style="font-weight: bold;">String + String</block><block> </block><block style="font-weight: bold;">→ String</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>配列結合なら、　</block><block style="font-weight: bold;">Array concat Array → Array</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と扱う</block><block style="font-weight: bold;">型（＝集合 S）が１つだけで閉じた演算</block><block>です。つまり、</block><block style="font-weight: bold;">すべて「等しい」</block><block>わけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.04632053263875657"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">『銀の弾丸』等しくすれば組合せ爆発（Combinatorial explosion）を回避可能</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">『銀の弾などない』（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/No_Silver_Bullet" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/No_Silver_Bullet" target="_blank" style="color: inherit; text-decoration: inherit;">No Silver Bullet</a></block><block style="font-weight: bold;"> ）</block><block>というのは誤りで、</block><block style="font-weight: bold;">『銀の弾』</block><block>は実は存在していて、それは</block><block style="font-weight: bold;">「等しい（Equality）」</block><block>という超強力な概念に他なりません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア開発、あるいはプログラミングにおける</block><block style="font-weight: bold;">「本質的な複雑性」（essential complexity）</block><block>とは、ほんとうは</block><block style="font-weight: bold;">数学的な概念で、それは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%84%E5%90%88%E3%81%9B%E7%88%86%E7%99%BA" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%84%E5%90%88%E3%81%9B%E7%88%86%E7%99%BA" target="_blank" style="color: inherit; text-decoration: inherit;">組合せ爆発</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Combinatorial_explosion" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Combinatorial_explosion" target="_blank" style="color: inherit; text-decoration: inherit;">Combinatorial explosion</a></block><block style="font-weight: bold;">）</block><block>です。</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.23676732022183833"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>組合せ爆発（くみあわせばくはつ、英: combinatorial explosion）は、計算機科学、応用数学、情報工学、人工知能などの分野では、解が組合せ（combination）的な条件で定義される離散最適化問題で、問題の大きさn に対して解の数が指数関数や階乗などのオーダーで急激に大きくなってしまうために、有限時間で解あるいは最適解を発見することが困難になることをいう。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>念の為ですが、解決したい課題の対象が本質的に原理的に内在している組み合わせ爆発のことではなく、</block><block style="font-weight: bold;">プログラマが書いてしまいがちで、不注意な、あるいは、不適切な工学的アプローチによるコード自体が本質的には回避可能であるのにもかかわらず、非合理的に、無用に、組みわせ爆発を起こしている</block><block>、ということです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>無用な組合せ爆発を回避するためには、可能な限り要素を減らすこと、そして何より肝要なことは、本質的に等しいものは、等しいものとして徹底的に扱うこと、さらに必ずしも等しくなければならない要請はなくても、等しいものとして扱うことができるならば等しくする、ということです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">要素が1つしかなければ、組み合わせというのが原理的に存在しないので、組合せ爆発による問題など起こりようがありません。しかし、それぞれの要素に区別があるときは、指数関数的に組み合わせ爆発が起こり収集はつかなくなります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">数学の範疇外での余剰の工学的発明は複雑さの元凶でしかない</block><block>のですが、裏を返すと</block><block style="font-weight: bold;">「唯一正しい工学的アプローチ」『銀の弾丸』</block><block>とは、</block><block style="font-weight: bold;">組合せ爆発を回避する「等しくする」という数学的アプローチ</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイド</block><block>はまさに</block><block style="font-weight: bold;">要素が1つしかなければ、組み合わせというのが原理的に存在しない</block><block>パターンに該当していて、</block><block style="font-weight: bold;">本質的な複雑性</block><block>である</block><block style="font-weight: bold;">組合せ爆発を回避できる非常に安全な代数構造</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイド</block><block>は</block><block style="font-weight: bold;">工学的な観点からみると、工業規格と同じ</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2089722253948958"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">数学の範疇外での余剰の工学的発明は複雑さの元凶でしかない</block><block>のですが、裏を返すと</block><block style="font-weight: bold;">「唯一正しい工学的アプローチ」『銀の弾丸』</block><block>とは、</block><block style="font-weight: bold;">組合せ爆発を回避する「等しくする」という数学的アプローチ</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際これはソフトウェア開発に限らない一般的な工学的な問題として死活問題なので、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%B7%A5%E6%A5%AD%E8%A6%8F%E6%A0%BC" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%B7%A5%E6%A5%AD%E8%A6%8F%E6%A0%BC" target="_blank" style="color: inherit; text-decoration: inherit;">工業規格</a></block><block>という人類の経験則による知見が存在しています。ISO規格（国際標準化機構）があり、JIS（日本）など各国に規格が決定されています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>身近なところでは、電気のコンセントプラグがあり、特にプログラマにとっては、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%A6%E3%83%8B%E3%83%90%E3%83%BC%E3%82%B5%E3%83%AB%E3%83%BB%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%AB%E3%83%BB%E3%83%90%E3%82%B9" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%A6%E3%83%8B%E3%83%90%E3%83%BC%E3%82%B5%E3%83%AB%E3%83%BB%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%AB%E3%83%BB%E3%83%90%E3%82%B9" target="_blank" style="color: inherit; text-decoration: inherit;">USB</a></block><block>規格があります。</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 212.4px; position: relative;"><img src="image-resources/df86fc82-9d25-4147-a169-3c6ca02db909.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8414679137370793"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ユニバーサル・シリアル・バス（英: Universal Serial Bus、略称：USB、ユーエスビー）は、コンピュータ等の情報機器に周辺機器を接続するためのシリアルバス規格の1つ。ユニバーサル（汎用）の名の示す通り、ホスト機器にさまざまな周辺機器を接続するためのペリフェラルバス規格であり、最初の規格となるUSB 1.0は1996年に登場した。現在のパーソナルコンピュータ周辺機器において、最も普及した汎用インターフェース規格である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん、Appleのように独自の規格、つまり自前機器のエコだけで完結すれば良いだろう、というのもひとつの主張ではありますが、最近排除されて消費者に歓迎された事案は記憶に新しいところです。</block><block class="role-hyper-link" data-hyper-link-url="https://www.broadcreation.com/blog/news/83958.html" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.broadcreation.com/blog/news/83958.html" target="_blank" style="color: inherit; text-decoration: inherit;">EU スマートフォンの充電器をUSB Type-Cへ統一へ（iPhoneのLightningケーブル排除へ）</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>USBなどを使っているとわかりますが、こういう「等しさ」が担保されている概念は</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Building_block" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Building_block" target="_blank" style="color: inherit; text-decoration: inherit;">Building block</a></block><block>になります。その定められた規格内に収まってさえおれば、それらは「等しい」と見做され、自由自在に組み合わせても壊れる心配がありません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.lego.com/ja-jp" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.lego.com/ja-jp" target="_blank" style="color: inherit; text-decoration: inherit;">LEGO</a></block><block>もそれ自体がBuilding blockであり単一の接続規格で、自由自在に構築可能です。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 200px; position: relative;"><img src="image-resources/c0777480-a775-4d5f-8734-6f7af5beb5f1.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>根源的には、</block><block style="font-weight: bold;">コードの要素を等しく保つというアプローチ</block><block>で、</block><block style="font-weight: bold;">コードをUSBデバイスやLEGOブロックのように自由自在に組み合わせてもコードは壊れないと担保される、バグのでないメンテナンス性の高いコードをプログラミング可能</block><block>となります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8610932187740379" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8610932187740379"><prefix style="text-align: left; padding-right: 0.25em;">15.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイドの素晴らしさ②　組み合わせ方に依存しない、結合法則（Associativity）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">組合せ爆発を回避できる非常に安全な代数構造</block><block>であるためにもうひとつ肝要なことは、組合わ方、組み合わせの順序に依存しない、</block><block style="font-weight: bold;">組み合わせの順序が異なっても「等しい」</block><block>という性質です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">+</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">+</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">+</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">+</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">×</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">×</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">×</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">×</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、</block><block style="font-weight: bold;">型（Type）が単一</block><block>、</block><block style="font-weight: bold;">S × S → S </block><block>にさらに上乗せした性質（法則）であることに留意してください。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">組み合わせの順序が異なっても「等しい」</block><block>という性質のことを、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" target="_blank" style="color: inherit; text-decoration: inherit;">結合法則</a></block><block style="font-weight: bold;">（結合律、結合性）（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Associative_property" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Associative_property" target="_blank" style="color: inherit; text-decoration: inherit;">Associativity</a></block><block>）と呼びます。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7272665389068063"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学における</block><block style="font-weight: bold;">結合性（けつごうせい、英: associative property[1], associativity）</block><block>は、</block><block style="font-weight: bold;">一部の二項演算が持つ性質である。演算が結合的であるために満たされるべき条件を結合法則（けつごうほうそく、英: associative law; 結合律、結合則）</block><block>という。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>S の各元 a, b, c に対して、等式 (a • b) • c = a • (b • c) が満たされる。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ひとつの式の中に同じ結合的演算が一度に複数現れる場合、それらの演算を施す順番は、被演算子の並びの順を変えない限りにおいて、結果に影響を与えない。つまり、（必要ならば中置記法と括弧を使った式に書き換えて）そのような式における括弧の位置を入れ替えても、式の値は変わることはない。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>USB機器やLEGOブロックも結合法則を満たしていて、つまり結合性があって、パーツの組み合わせ順序に依存しません。どのように組み立てを構成していっても結果は同じになるはずです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆に、</block><block style="font-weight: bold;">もしUSB機器やLEGOブロックで、組み合わせ順序によって結果が異なる、ということになれば、非常に面倒くさく扱うのにかなりの注意が必要な代物になる</block><block>ことは想像に難くありません。組合せ爆発が起こるからですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>世の中には、構成の順序こそが重要という工業製品などはいくらでもありますが、プログラミングにおいては、</block><block style="font-weight: bold;">なるだけ、構成順序に依存せず結果が等しくなる結合法則を満たすモノイドを選ぶべき</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">+</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">+</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">+</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">+</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">×</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">×</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">×</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">×</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という加法と乗法の演算は結合性がありますが、</block><block style="font-weight: bold;">同じ四則演算でも減法と除法は結合性がなく、モノイドではありません</block><block>。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">3 </block><block class="Binary">-</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">-</block><block class="Normal"> 1  </block><block class="Relation">≠</block><block class="Normal"> 3 </block><block class="Binary">-</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">-</block><block class="Normal"> 1</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">4 </block><block class="Binary">÷</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">÷</block><block class="Normal"> 2  </block><block class="Relation">≠</block><block class="Normal"> 4 </block><block class="Binary">÷</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">÷</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、引き算、割り算の演算をコードに安易に組み込んでしまうと、演算順序によって結果が異なる組合せ爆発の危険性があるという留意はしておいたほうが良いです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん、ケースバイケースで程度にもよりますが、必要な値はマイナスや逆数へ加工して取り扱うことにより、加法と乗法という安全なモノイドの演算に統一できるので、そのほうが予見できないバグの危険性は回避できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">3 </block><block class="Binary">+</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">-</block><block class="Normal">2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">+</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">-</block><block class="Normal">1</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal">  </block><block class="Relation">=</block><block class="Normal"> 3 </block><block class="Binary">+</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">-</block><block class="Normal">2 </block><block class="Binary">+</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">-</block><block class="Normal">1</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">4 </block><block class="Binary">×</block><block class="Normal"> 1</block><block class="Binary">/</block><block class="Normal">2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">×</block><block class="Normal"> 1</block><block class="Binary">/</block><block class="Normal">2  </block><block class="Relation">=</block><block class="Normal">  4 </block><block class="Binary">×</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1</block><block class="Binary">/</block><block class="Normal">2 </block><block class="Binary">×</block><block class="Normal"> 1</block><block class="Binary">/</block><block class="Normal">2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.18164694844794105" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.18164694844794105"><prefix style="text-align: left; padding-right: 0.25em;">15.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイドの素晴らしさ③　単位元（Identity element）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>単位元とは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>加法でいうと、</block><block style="font-weight: bold;">ゼロ 0</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">0 </block><block class="Binary">+</block><block class="Normal"> 5 </block><block class="Relation">=</block><block class="Normal"> 5 </block><block class="Relation">=</block><block class="Normal">5 </block><block class="Binary">+</block><block class="Normal"> 0 </block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>乗法でいうと、</block><block style="font-weight: bold;">1</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">1 </block><block class="Binary">×</block><block class="Normal"> 5 </block><block class="Relation">=</block><block class="Normal"> 5 </block><block class="Relation">=</block><block class="Normal">5 </block><block class="Binary">×</block><block class="Normal"> 1 </block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>文字列結合でいうと、""</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal"> "" </block><block class="Binary">+</block><block class="Normal"> "Hello"</block><block class="Relation">=</block><block class="Normal"> "Hello" </block><block class="Relation">=</block><block class="Normal">  "Hello" </block><block class="Binary">+</block><block class="Normal">""</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>配列結合でいうと、</block><block style="font-weight: bold;">[]</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">===</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">]</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">===</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">]</block><block class=" token"> </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、二項演算のオペランドとして演算前と「等しい」結果を演算する特別な値です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%8D%98%E4%BD%8D%E5%85%83" style="text-decoration: underline; font-size: 1.2em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%8D%98%E4%BD%8D%E5%85%83" target="_blank" style="color: inherit; text-decoration: inherit;">単位元</a></block><block style="font-size: 1.2em;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Identity_element" style="text-decoration: underline; font-size: 1.2em; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Identity_element" target="_blank" style="color: inherit; text-decoration: inherit;">Identity element</a></block><block style="font-size: 1.2em;">）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9454561054778965"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学、とくに抽象代数学において、単位元（たんいげん, 英: identity element）あるいは中立元（ちゅうりつげん, 英: neutral element）は、</block><block style="font-weight: bold;">二項演算を備えた集合の特別な元で、ほかのどの元もその二項演算による単位元との結合の影響を受けない</block><block>。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>(M, ∗) を集合 M とその上の二項演算 ∗ のなすマグマとする。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>S の元 e が存在して、S の任意の元 a に対して</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>e ∗ a = a ∗ e = a</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を満たすときにいう。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なるほど、ではそういうものを満たす単位元の何がいいのか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイドの素晴らしさ①　型（Type）が単一の閉じた二項演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイドの素晴らしさ②　組み合わせ方に依存しない、結合法則</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>双方ともUSB工業規格であったりレゴブロックであったり、その「等しさ」のメリットが明白であり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">複雑性を排除してくれるシンプルな二項</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という観点でたいへんわかりやすいのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイドの素晴らしさ③　単位元</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのはちょっと毛色が違うというか、説明がしにくいです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>どの程度説明がしにくいのか？というと、加法における</block><block style="font-weight: bold;">ゼロ 0</block><block>の存在の便利さを説明してみろ、というのと同じレベルで、あえていうならば、絶対に必要になってくることは日常レベルでも結構わかっているから、もし現代文明で</block><block style="font-weight: bold;">ゼロ０がなければ非常に世界が複雑になり困る</block><block>だろう、という感じでしょうか。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に、単位元の有用性というのものはかなり認識しにくいので、認識もせず、使わなくてもそこそこイケる、というか、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/0#%E6%AD%B4%E5%8F%B2" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/0#%E6%AD%B4%E5%8F%B2" target="_blank" style="color: inherit; text-decoration: inherit;">0　</a></block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/0#%E6%AD%B4%E5%8F%B2" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/0#%E6%AD%B4%E5%8F%B2" target="_blank" style="color: inherit; text-decoration: inherit;">歴史</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2502173685785316"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">0 の起源</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ゼロの発明は、数学史の飛躍の一つである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>紀元前2500年頃のピラミッドの幾何学的な正確性は、古代エジプト人が高度な数学を持っていたことを示す。しかし古代エジプトでは数学は主に暦法と土地測量の手法として発展したため、零の研究は発達せず、それを表す記号もなかった。面積がゼロの土地はなく、0日めのあるカレンダーもない。よってゼロは不要であった[。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という感じなで、実際に人類はゼロ０なしで高度な数学を使ったピラミッドでも建てられたらしいですから、</block><block style="font-weight: bold;">単位元の有用さは当たり前のことだ、と説明するのはレゴブロックの結合性の有用性を説明するのとは多分レベルは違う</block><block>と思います。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9264889239087997" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9264889239087997"><prefix style="text-align: left; padding-right: 0.25em;">15.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>半群（Semigroup）にはいつでも単位元を追加してモノイドにできる</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、</block><block style="font-weight: bold;">単位元なしで、結合性だけがある数学構造</block><block>は、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%8D%8A%E7%BE%A4" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%8D%8A%E7%BE%A4" target="_blank" style="color: inherit; text-decoration: inherit;">半群</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Semigroup" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Semigroup" target="_blank" style="color: inherit; text-decoration: inherit;">Semigroup</a></block><block>）といって、</block><block style="font-weight: bold;">単位元のルールまで要請はせず、結合法則だけあればいい</block><block>、というものです。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8397577295449181"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">定義</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>集合 S とその上の二項演算 •: S × S → S が与えられ、以下の条件</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" style="text-decoration: underline; font-size: 1.2em; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" target="_blank" style="color: inherit; text-decoration: inherit;">結合法則</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>S の各元 a, b, c に対して</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>(a • b) • c = a • (b • c) </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を満たすならば、組 (S, •, e) を</block><block style="font-weight: bold;">半群</block><block>という。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>少なくとも、人類がゼロ０を発明するまでは、世界の素朴な見方としては半群の世界でしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、小学校の算数の最初のほうでは、おはじきや数え棒みたいな算数セットを購入させられてそこから数という抽象概念を刷り込まれていくわけですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikibooks.org/wiki/%E5%B0%8F%E5%AD%A6%E6%A0%A1%E7%AE%97%E6%95%B0/1%E5%AD%A6%E5%B9%B4#%E3%82%8C%E3%81%84_0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikibooks.org/wiki/%E5%B0%8F%E5%AD%A6%E6%A0%A1%E7%AE%97%E6%95%B0/1%E5%AD%A6%E5%B9%B4#%E3%82%8C%E3%81%84_0" target="_blank" style="color: inherit; text-decoration: inherit;">れい 0</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4435764179611088"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>1 から 1 を ひいた かず を れい と いいます。 レイは 0 と かきます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しき で かくと</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>1 - 1 = 0</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>です。「いち ひく いち は (わ) れい」と、よみます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>0は、なにも、ない　かず です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>だから、 かず に 0 を たしても、 かわりません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>7 + 0 = 7</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「なな たす レイは (わ) なな」です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と人類が結構最近発明したゼロという概念をしれっと当たり前のように教えてしまっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>特に、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3324526197943689"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>0 (レイ) の たしざん</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>0は、なにも、ない　かず です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>だから、 かず に 0 を たしても、 かわりません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>1+0=1　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「いち たす レイは (わ) いち」</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>0+1=1　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「レイたす いち は (わ) いち」</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2+0=2　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「に たす ゼロ (レイ) は (わ) に」</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>0+2=2　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>3+0=3　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>4+0=4　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>10+0=10　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「じゅう たす レイは (わ) じゅう」</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>0+10=10　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>17+0=17　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>0+0＝0</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「レイたす レイ は (わ) ゼロ (レイ) 」</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>です。レイをゼロ (レイ) ということはふつうありません。ただしここからはゼロ (レイ) と書きます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、小学生相手に結構な離れ業をやりのけています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そもそも、おはじきや数え棒、それからUSBデバイスやレゴブロックでも同じですが、人類の素朴な感覚としてはそういう具体的な物体は、結合法則が満たされていて便利だ、というのは直感的に理解していますが、それらが「ない」概念を扱うのは直感的ではないので、半群の概念しかないはずです。つまり</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E8%87%AA%E7%84%B6%E6%95%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E8%87%AA%E7%84%B6%E6%95%B0" target="_blank" style="color: inherit; text-decoration: inherit;">自然数</a></block><block>とは１から始まるものであり、自然数に０を含めるとする流儀は、歴史上は最近のことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">加法＋</block><block>についても、その１からはじまる自然数として成立していた半群だったのですが、０をあとから発明して追加することにより、０と正の整数、負の整数と範囲が広がりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういうトリックを</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%8D%98%E4%BD%8D%E5%85%83#%E6%80%A7%E8%B3%AA" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%8D%98%E4%BD%8D%E5%85%83#%E6%80%A7%E8%B3%AA" target="_blank" style="color: inherit; text-decoration: inherit;">単位元の添加</a></block><block>といいます。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4869415846441161"><colgroup><col></colgroup><tbody><tr style="height: 221.594px;"><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 650px; height: 180.87px; position: relative;"><img src="image-resources/18c121fd-e4c7-4af3-9a61-835284b07a09.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、素朴な感覚としては結合性だけがある半群であっても、どうせすべての半群には、加法の単位元０のように、必ず単位元を追加できるので、小学校の授業のように、もう最初から半群ではなく単位元が込みのモノイドとして用意する、という理屈ですし、どうせモノイドとセットになっているようなFoldで単位元のことは必要になってきます。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.10357819722013506" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.10357819722013506"><prefix style="text-align: left; padding-right: 0.25em;">15.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイドとFold（Reduce）の強力さ</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%A2%E3%83%8E%E3%82%A4%E3%83%89#%E8%A8%88%E7%AE%97%E6%A9%9F%E7%A7%91%E5%AD%A6%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%A2%E3%83%8E%E3%82%A4%E3%83%89" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%A2%E3%83%8E%E3%82%A4%E3%83%89#%E8%A8%88%E7%AE%97%E6%A9%9F%E7%A7%91%E5%AD%A6%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%A2%E3%83%8E%E3%82%A4%E3%83%89" target="_blank" style="color: inherit; text-decoration: inherit;">計算機科学におけるモノイド</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.23962159573507935"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>計算機科学において、多くの抽象データ型はモノイド構造を持つ。よくあるパターンとして、モノイド構造を持つデータ型の元の列を考えよう。この列に対して 「重畳」(f</block><block style="font-weight: bold;">old</block><block>) あるいは「堆積」(accumulate) の操作を施すことで、列が含む元の総和のような値が取り出される。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>例えば、多くの反復アルゴリズムは各反復段階である種の「累計」を更新していく必要があるが、モノイド演算の重畳を使うとこの累計をすっきりと表記できる。別の例として、モノイド演算の結合性は、多コアや多CPUを効果的に利用するために、prefix sumあるいは同様のアルゴリズムによって、計算を並列化できることを保証する。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1から10までの数を足すコード</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのをみて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>反射的に</block><block style="font-weight: bold;">Forループ</block><block>という制御フロー構文の列挙を考えるのが命令型プログラマであり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「モノイドのFold(畳み込み)のことか・・・」</block><block>と考え、</block><block style="font-weight: bold;">fold（reduce）</block><block>という</block><block style="font-weight: bold;">高階関数</block><block>で、</block><block style="font-weight: bold;">再帰的なデータ構造（モノイド）を分析し、結合操作（add）を使用して、その構成部分を再帰的に処理した結果を再結合し、戻り値を構築する依存グラフ</block><block>の</block><block style="font-weight: bold;">式を書けば良い</block><block>、とわかっていれば、関数型プログラマであると言えるでしょう。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 427.807px; position: relative;"><img src="image-resources/9aa79464-8f92-472a-b5ce-64cd27eef31f.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">add</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> sum </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">sum</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">55</block><block class=" token">   </block><block class="comment token">// sum</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、同時に、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2923460799907682"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>別の例として、</block><block style="font-weight: bold;">モノイド演算の結合性</block><block>は、多コアや多CPUを効果的に利用するために、prefix sumあるいは同様のアルゴリズムによって、計算を</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%B8%A6%E5%88%97%E5%8C%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%B8%A6%E5%88%97%E5%8C%96" target="_blank" style="color: inherit; text-decoration: inherit;">並列化</a></block><block>できることを保証する。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とありますが、</block><block style="font-weight: bold;">モノイドというのは結合性（演算の順番に依存せず「等しい」）ことが保証されているので、なにかのクラウドの並列計算でも計算結果の正しさは保証されています。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型プログラミングというのは、コード自体が逐次処理であり、基本的にはフローのことしか考えていないので、並列計算というのは、まさに水と油の異なるパラダイムであり、これを解消したいとおもって、オブジェクト指向で誰かが発明したフレームワークを使えばいい、みたいなことが往々にして喧伝されているわけですが、根本的に、このような</block><block style="font-weight: bold;">モノイドという極めてシンプルで安全で堅牢な代数構造のこと、関数型プログラミングの基本的作法を知っていれば、そのような余計なフレームワークに手を出す合理性はまったくありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6371054781919829" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6371054781919829"><prefix style="text-align: left; padding-right: 0.25em;">15.8. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Fold（Reduce）と単位元</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" target="_blank" style="color: inherit; text-decoration: inherit;">Array.prototype.reduce()</a></block><block>を含む各プログラミング言語のFoldの仕様には、一見不可解な仕様があり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2756461721282031"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>引数</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">initialValue 省略可</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コールバックが初めて呼び出されたときの previousValue の初期値です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> initialValue が指定された場合は、 currentValue も配列の最初の値に初期化されます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> initialValue が指定されなかった場合、 previousValue は配列の最初の値で初期化され、 currentValue は配列の 2 番目の値で初期化されます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">add</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> sum </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="comment token">//1+2+3+4+5+6+7+8+9+10</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">sum</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 55</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、</block><block style="font-weight: bold;">initialValue</block><block>は省略されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この場合、initialValueを省略しない場合、その値は、加法＋の単位元の</block><block style="font-weight: bold;">0</block><block>となります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">add</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> sum </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">6</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">7</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">8</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">9</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">10</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">add</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">0</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="comment token">//0+1+2+3+4+5+6+7+8+9+10</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">sum</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 55</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>乗法では、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">multiply</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> product </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">multiply</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="comment token">// 1 * 2 * 3 * 4</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">product</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 24</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">multiply</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> product </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class=" token">multiply</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="comment token">// １ * 1 * 2 * 3 * 4</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">product</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 24</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と乗法の単位元である</block><block style="font-weight: bold;">1</block><block>が、</block><block style="font-weight: bold;">initialValue</block><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>多くの場合、単位元は省略できるのですが、あえて指定しなければならない局面はあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6761361135104631" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6761361135104631"><prefix style="text-align: left; padding-right: 0.25em;">15.9. </prefix><blocks><baselineblock class="inline"></baselineblock><block>論理演算もモノイド</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>exprは</block><block style="font-weight: bold;">式（expression）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のとき、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_OR" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_OR" target="_blank" style="color: inherit; text-decoration: inherit;">論理和 (||)</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>expr1 || expr2</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_AND" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Logical_AND" target="_blank" style="color: inherit; text-decoration: inherit;">論理積 (&amp;&amp;)</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>expr1 &amp;&amp; expr2</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という論理演算もモノイドです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>a,b,c は true/false</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>x は true/false</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のとき、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">(a || b) || c  =  a || (b || c) </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">false || x  =  x  =  x || false</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">false</block><block> を単位元としたモノイド</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">(a &amp;&amp; b) &amp;&amp; c  =  a &amp;&amp; (b &amp;&amp; c) </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">false &amp;&amp; x  =  x  =  x &amp;&amp; false</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">true</block><block> を単位元としたモノイド</block></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.5798234378404825" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.5798234378404825"><prefix style="text-align: left; padding-right: 0.5em;">16. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数（写像）の連鎖と関数（写像）の合成（Function composition）</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.744049085360756" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.744049085360756"><prefix style="text-align: left; padding-right: 0.25em;">16.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数（写像）の連鎖</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 293.379px; position: relative;"><img src="image-resources/614e28ab-96eb-4ebe-afab-80bb3aa7f74b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という写像は、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" style="color: inherit; text-decoration: inherit;">アロー関数式</a></block><block>で、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 40.37px; position: relative;"><img src="image-resources/4467400f-bad8-4e04-bcd2-970ecb9d56cb.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように関数 </block><block style="font-weight: bold;">f </block><block>が定義する表現ができますが、写像を連鎖させることができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 320px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="grouped-shape"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M188.5,48.74 C235.27,75.6 406.77,81.68 466.61,52.19" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8914023663176295,0.4532127770962892,-0.4532127770962892,-0.8914023663176295,467.5,51.73957824707031)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="composite-shape"><path class="real" d=" M123,196.75 C123,169.27 145.27,147 172.75,147 C200.23,147 222.5,169.27 222.5,196.75 C222.5,224.23 200.23,246.5 172.75,246.5 C145.27,246.5 123,224.23 123,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M281,196.75 C281,169.27 303.27,147 330.75,147 C358.23,147 380.5,169.27 380.5,196.75 C380.5,224.23 358.23,246.5 330.75,246.5 C303.27,246.5 281,224.23 281,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M439,196.75 C439,169.27 461.27,147 488.75,147 C516.23,147 538.5,169.27 538.5,196.75 C538.5,224.23 516.23,246.5 488.75,246.5 C461.27,246.5 439,224.23 439,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M194.5,199.74 L319.26,199.87" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.9999994516886945,-0.001047197359800095,0.001047197359800095,-0.9999994516886945,321.2604217529297,199.86978912353513)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M327.75,199.75 L492.5,199.74" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,3.6739403974420594e-16,-3.6739403974420594e-16,-1,494.49999999999994,199.7395782470703)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M191.63,202.61 C290.01,285.32 395.44,273.86 495.86,203.67" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8172454923071096,0.5762896887015332,-0.5762896887015332,-0.8172454923071096,497.36978912353516,202.60936737060547)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="composite-shape"><path class="real" d=" M188.76,199.74 C188.76,198.15 190.05,196.87 191.63,196.87 C193.22,196.87 194.5,198.15 194.5,199.74 C194.5,201.32 193.22,202.61 191.63,202.61 C190.05,202.61 188.76,201.32 188.76,199.74 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M321.26,199.87 C321.26,198.28 322.55,197 324.13,197 C325.72,197 327,198.28 327,199.87 C327,201.45 325.72,202.74 324.13,202.74 C322.55,202.74 321.26,201.45 321.26,199.87 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M494.5,199.74 C494.5,198.15 495.78,196.87 497.37,196.87 C498.95,196.87 500.24,198.15 500.24,199.74 C500.24,201.32 498.95,202.61 497.37,202.61 C495.78,202.61 494.5,201.32 494.5,199.74 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M187,42.58 L283,43.4" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,285.00000000000006,43.41525423728813)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M305,43.5 L466,43.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,468,43.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 178px; top: 164px;"><dg-editor-container data-editor-id="de5973918463924996" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 313px; top: 164px;"><dg-editor-container data-editor-id="de3699864339983512" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 486px; top: 163px;"><dg-editor-container data-editor-id="de6697814973002616" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 159px; top: 111px;"><dg-editor-container data-editor-id="de8192551305899942" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 318px; top: 113px;"><dg-editor-container data-editor-id="de10922829863948635" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 477px; top: 112px;"><dg-editor-container data-editor-id="de9466761611800922" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">C</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 233px; top: 168px;"><dg-editor-container data-editor-id="de3902663636385404" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 391px; top: 168px;"><dg-editor-container data-editor-id="de3909352969589881" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 327px; top: 259px;"><dg-editor-container data-editor-id="de30741778449515444" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 168px; top: 27px;"><dg-editor-container data-editor-id="de09533348062797375" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 286px; top: 28px;"><dg-editor-container data-editor-id="de4016372189011148" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 469px; top: 28px;"><dg-editor-container data-editor-id="de7964509377825248" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 221px; top: 2px;"><dg-editor-container data-editor-id="de5871839799881529" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 366px; top: 5px;"><dg-editor-container data-editor-id="de19578140213537565" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 314px; top: 73px;"><dg-editor-container data-editor-id="de4151439434090711" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">x</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> x </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">g</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">x</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> x </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>fx表記法では、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">g</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">     </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>入れ子構造になっており写像のイメージで直感的ではないので、独自に実装した、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算子（Pipeline Operator）</block><block>を活用して、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token">　　</block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できます。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3089746376554374" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3089746376554374"><prefix style="text-align: left; padding-right: 0.25em;">16.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数（写像）の合成（Function composition）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このとき自然と、</block><block style="font-weight: bold;">関数（写像）の合成</block><block>という概念が出てきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block><block style="font-weight: bold;">f</block><block>と</block><block style="font-weight: bold;">g</block><block>から合成された関数を </block><block style="font-weight: bold;">fg </block><block>とすると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">fg</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">     </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">fg</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%86%99%E5%83%8F%E3%81%AE%E5%90%88%E6%88%90" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%86%99%E5%83%8F%E3%81%AE%E5%90%88%E6%88%90" target="_blank" style="color: inherit; text-decoration: inherit;">写像の合成</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Function_composition" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Function_composition" target="_blank" style="color: inherit; text-decoration: inherit;">Function composition</a></block><block>）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.35201761076309546"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>数学において写像あるいは函数の合成（ごうせい、英: composition）とは、ある写像を施した結果に再び別の写像を施すことである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>例えば、二つの写像 f: X → Y および g: Y → Z について、g の引数を x の代わりに f(x) とすることにより、f と g を「合成」(compose) することができる。直観的には、z が写像 g で対応する y の函数で、y が写像 f で対応付けられる x の函数ならば、z は x の函数であるということを述べている。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これにより、写像 f: X → Y と写像 g: Y → Z との</block><block style="font-weight: bold;">合成写像</block><block> (composite function/mapping)</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 79.62px; position: relative;"><img src="image-resources/8203acbf-9627-4417-9b4a-bf95e002b1df.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が X の各元 x に対して</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 250px; height: 39.1414px; position: relative;"><img src="image-resources/4f5e28b2-44df-4d53-a2a1-b134ebc6b126.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とおくことによって定まる</block><block style="font-weight: bold;">。"g ∘ f" は図式的に写像 f, g を施す順番とは逆順となるため、しばしば正順に "fg", "f ; g" などと記す流儀もみられる（後述）。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 229.352px; position: relative;"><img src="image-resources/5e5964ec-b61b-48de-8b24-6075a49463a8.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5690377472542201"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">合成の記法について</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>g ∘ f の合成の記号を落として、単に gf と書かれることも多い。</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>20世紀のなかごろ、</block><block style="font-weight: bold;">（左から右へ読む文章中で）"g ∘ f" と書いたものが "最初に f を施してから g を施す" という意味になるのは非常にややこしいため、記号を改めて "f(x)" の代わりに "xf" と書き、"g(f(x))" の代わりに "(xf)g" と書いた者もあった。このような記法は後置記法と呼ばれる。分野によってはこのようにしたほうが、写像を左から作用させるよりも自然で単純であるようにも思われる</block><block>（例えば線型代数学では x を行ベクトルとして、行列 f および g と右からの行列の積によって合成を行うことができる。行列の積は可換ではないから、順番は重要である）。連続して変換することと合成とが、合成の列を左から右に読むことによってちょうど一致する。</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">後置記法を採用している文脈では、"fg" と書くことで、初めに f を適用してから g を適用するという意味となるが、後置記法では記号の現れる順番を保たなければならないので、"fg" と書くのは（どこまでが一つの記号なのかわかりにくいため）曖昧さを含んでしまう。計算機科学者はこれを "f;g" と書き、これによって合成の順番に関する曖昧さを除くことができる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>本稿では、合成関数について、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>g ∘ fという記法ではなく</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f.g</block><block> あるいは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">fg</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表記します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また引用で言及されているセミコロン（</block><block style="font-weight: bold;">；</block><block>）を関数合成演算子のシンボルとする、というのは、そんなポピュラーではないと感じますし、特にJavaScriptでセミコロン（</block><block style="font-weight: bold;">；</block><block>）というのは、まったく違う意味なので引用箇所はともかく、本文では避けます。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8981921399443564" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8981921399443564"><prefix style="text-align: left; padding-right: 0.25em;">16.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数（写像）合成（Function composition）は二項演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f と g という2つの関数（写像）の合成</block><block>というのは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f と g という2つの関数の間の二項演算 f . g </block><block>であると捉えることができます。ここで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-style: italic;">.</block><block>　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算子（Pipeline Operator）</block><block>を活用して、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">3 &gt; f &gt; g</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token">　　</block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現して、さらに、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">a </block><block class="Relation">&gt;</block><block class="Normal"> f </block><block class="Relation">&gt;</block><block class="Normal">g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Punctuation">.</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">fg = f.g</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">3 &gt; fg</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">3 &gt; (f.g)</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> fg </block><block class="operator token">=</block><block class=" token"> f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">fg</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となるような</block><block style="font-weight: bold;">関数合成の二項演算子を定義</block><block>することができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>基本的には、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト指向のメソッドを関数型の二項演算子として置き換える</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptで独自の二項演算子（Custom operator）を定義する</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で説明した手法を踏襲しますが、特にTypeScriptのコードは簡単ではありませんし、ここで一気に実装までやってしまうと、肝心の</block><block style="font-weight: bold;">関数（写像）の合成</block><block>それ自体の概念説明にとってオーバーヘッドが大きくなりすぎて論点がブレてしまうので、かなり後回しにします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">今のところは、実装できた、という前提で話をすすめます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.06786516864530201" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.06786516864530201"><prefix style="text-align: left; padding-right: 0.25em;">16.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数（写像）合成（Function composition）はモノイド（Monoid）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%86%99%E5%83%8F%E3%81%AE%E5%90%88%E6%88%90" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%86%99%E5%83%8F%E3%81%AE%E5%90%88%E6%88%90" target="_blank" style="color: inherit; text-decoration: inherit;">写像の合成</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Function_composition" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Function_composition" target="_blank" style="color: inherit; text-decoration: inherit;">Function composition</a></block><block>）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5182298569578085"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像の合成は、それが定義される限りにおいて常に</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" target="_blank" style="color: inherit; text-decoration: inherit;">結合的</a></block><block style="font-weight: bold;">である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>すなわち、f, g, h がそれぞれ（合成が定義できるように）適当に選ばれた始域および終域を備えた写像であるとするならば、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 36.689px; position: relative;"><img src="image-resources/50704bcc-2cd0-4df6-9bad-0e97f2963237.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が成り立つ。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、括弧はそれが付いているところから先に合成を計算することを指し示すためのものである。これは括弧をつける位置の選び方は写像の合成の結果に影響を及ぼさないということを意味しているから、括弧を取り除いても意味を損なうことは無く、しばしば括弧を省略して</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 180px; height: 34.5813px; position: relative;"><img src="image-resources/70c9bad5-6fe2-4bef-837b-57cbb4e22ad7.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g </block><block class="Binary">⋅</block><block class="Normal"> h</block></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書かれる。写像の数がさらに増えても同様である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像の合成は、二項演算であり、それが定義される限りにおいて常に</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" target="_blank" style="color: inherit; text-decoration: inherit;">結合的</a></block><block>ということは、要するに写像の連鎖が成立している限り、結合性がある</block><block style="font-weight: bold;">半群（Semigroup）</block><block>であり、半群には必ず単位元がいつでも追加できるのは保証されているので、</block><block style="font-weight: bold;">写像の合成はモノイド</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これから、そのことについて説明、証明していきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold; font-style: italic;">関数（写像）の連鎖</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の例にふたたび注目します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 320px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="grouped-shape"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M188.5,48.74 C235.27,75.6 406.77,81.68 466.61,52.19" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8914023663176295,0.4532127770962892,-0.4532127770962892,-0.8914023663176295,467.5,51.73957824707031)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="composite-shape"><path class="real" d=" M123,196.75 C123,169.27 145.27,147 172.75,147 C200.23,147 222.5,169.27 222.5,196.75 C222.5,224.23 200.23,246.5 172.75,246.5 C145.27,246.5 123,224.23 123,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M281,196.75 C281,169.27 303.27,147 330.75,147 C358.23,147 380.5,169.27 380.5,196.75 C380.5,224.23 358.23,246.5 330.75,246.5 C303.27,246.5 281,224.23 281,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M439,196.75 C439,169.27 461.27,147 488.75,147 C516.23,147 538.5,169.27 538.5,196.75 C538.5,224.23 516.23,246.5 488.75,246.5 C461.27,246.5 439,224.23 439,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M194.5,199.74 L319.26,199.87" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.9999994516886945,-0.001047197359800095,0.001047197359800095,-0.9999994516886945,321.2604217529297,199.86978912353513)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M327.75,199.75 L492.5,199.74" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,3.6739403974420594e-16,-3.6739403974420594e-16,-1,494.49999999999994,199.7395782470703)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M191.63,202.61 C290.01,285.32 395.44,273.86 495.86,203.67" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8172454923071096,0.5762896887015332,-0.5762896887015332,-0.8172454923071096,497.36978912353516,202.60936737060547)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="composite-shape"><path class="real" d=" M188.76,199.74 C188.76,198.15 190.05,196.87 191.63,196.87 C193.22,196.87 194.5,198.15 194.5,199.74 C194.5,201.32 193.22,202.61 191.63,202.61 C190.05,202.61 188.76,201.32 188.76,199.74 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M321.26,199.87 C321.26,198.28 322.55,197 324.13,197 C325.72,197 327,198.28 327,199.87 C327,201.45 325.72,202.74 324.13,202.74 C322.55,202.74 321.26,201.45 321.26,199.87 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M494.5,199.74 C494.5,198.15 495.78,196.87 497.37,196.87 C498.95,196.87 500.24,198.15 500.24,199.74 C500.24,201.32 498.95,202.61 497.37,202.61 C495.78,202.61 494.5,201.32 494.5,199.74 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M187,42.58 L283,43.4" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,285.00000000000006,43.41525423728813)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M305,43.5 L466,43.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,468,43.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 178px; top: 164px;"><dg-editor-container data-editor-id="de9638177335933045" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 313px; top: 164px;"><dg-editor-container data-editor-id="de417179087822674" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 486px; top: 163px;"><dg-editor-container data-editor-id="de9464647091139191" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 159px; top: 111px;"><dg-editor-container data-editor-id="de4920265550945455" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 318px; top: 113px;"><dg-editor-container data-editor-id="de8900431899372168" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 477px; top: 112px;"><dg-editor-container data-editor-id="de6201741699758132" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">C</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 233px; top: 168px;"><dg-editor-container data-editor-id="de9241219244597496" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 391px; top: 168px;"><dg-editor-container data-editor-id="de9964963855648474" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 327px; top: 259px;"><dg-editor-container data-editor-id="de6407802959493456" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 168px; top: 27px;"><dg-editor-container data-editor-id="de19071882020683262" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 286px; top: 28px;"><dg-editor-container data-editor-id="de6134363458600076" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 469px; top: 28px;"><dg-editor-container data-editor-id="de5467018066777332" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 221px; top: 2px;"><dg-editor-container data-editor-id="de49793653633653756" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 366px; top: 5px;"><dg-editor-container data-editor-id="de7625481149775812" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 314px; top: 73px;"><dg-editor-container data-editor-id="de5379314673975895" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、関数（写像）は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f:  +1</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">g: +2</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と２つあって、写像が連鎖した結果、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f.g: +3</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という関数合成ができているということでした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>どうしても、必要、というわけでもないですが、全く同じグラフを</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 206px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M274,54.5 L370,54.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,372,54.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M382,71 L382,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,382,157.99999999999994)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M274,64.67 L370.6,162.9" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.7011581929675424,-0.7130057422170528,0.7130057422170528,-0.7011581929675424,372,164.33050847457628)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 255px; top: 39px;"><dg-editor-container data-editor-id="de9831004816751359" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 39px;"><dg-editor-container data-editor-id="de07541118681404546" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 159px;"><dg-editor-container data-editor-id="de7159882037252043" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 310px; top: 19px;"><dg-editor-container data-editor-id="de1733530202867133" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 386px; top: 89px;"><dg-editor-container data-editor-id="de3053096332647953" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 283px; top: 107px;"><dg-editor-container data-editor-id="de7321804581297628" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 42px; top: 62px;"><dg-editor-container data-editor-id="de9268283956265766" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">   </block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、トライアングルにすることができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まずデメリットは、いきなりこのグラフを示されると、最初の数直線的なグラフのイメージが湧きにくいことがあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>メリットは、まず </block><block style="font-weight: bold;">f.g: +3 </block><block>の合成関数が曲線で書かなくてすむことや、また、そもそも関数というのは、</block><block style="font-weight: bold;">+1,+2</block><block>というような数直線上に並ぶ四則演算とは限らないので、より抽象的な操作ぽいこと、それから後々わかりますが、このほうがスペースを効率的に使っており、あとからグラフを追加しやすい、ことなどがあるでしょうか。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そのとおり、より抽象的に表現すると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 201.906px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M282,54.61 L372,55.38" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,374.00000000000006,55.40128755364807)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M385.36,72 L384.65,157" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.008377482414770796,-0.9999649082784806,0.9999649082784806,0.008377482414770796,384.6375,158.99999999999994)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M282,68.12 L370.62,160.96" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6905037716770935,-0.7233287919747895,0.7233287919747895,-0.6905037716770935,372,162.40476190476193)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 257px; top: 39px;"><dg-editor-container data-editor-id="de3685116988820101" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 375px; top: 40px;"><dg-editor-container data-editor-id="de7496931791042278" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 160px;"><dg-editor-container data-editor-id="de4550481539978781" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">C</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 324px; top: 19px;"><dg-editor-container data-editor-id="de07858167251187775" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 388px; top: 90px;"><dg-editor-container data-editor-id="de973277626009218" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 278px; top: 103px;"><dg-editor-container data-editor-id="de06066630906377757" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">:</block><block class="Normal">A</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">B</block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block><block class="Binary">:</block><block class="Normal">B</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">C</block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block><block class="Binary">:</block><block class="Normal">A</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">C     </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">   a</block><block class="Relation">&gt;</block><block class="Normal"> f</block><block class="Binary">⋅</block><block class="Normal">g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal">a</block><block class="Relation">&gt;</block><block class="Normal">f</block><block class="Relation">&gt;</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal">c                  </block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが、関数 f と g と合成された関数である f.g の一般的なイメージとして使えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5790585347462487" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5790585347462487"><prefix style="text-align: left; padding-right: 0.25em;">16.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数の合成という二項演算には結合性がある</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成自体が二項演算であることはすでに説明しましたが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では関数合成という二項演算を連鎖するとどうなるでしょうか？？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>別に複雑なことはなく、単にこういうことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 260px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M61.5,172.74 C81.15,184.03 122.83,191.65 169,194.5 C232.28,198.4 303.98,193.35 338.93,176.52" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8914023663176295,0.4532127770962892,-0.4532127770962892,-0.8914023663176295,340.5,175.7395782470703)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M-403,332.45 C-383.35,343.74 -373,362.45 -316,377.45 C-259,392.45 -270,398.45 -119,397.45 C29.74,396.47 -95.13,404.22 -136.18,419.74" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.9251434767008606,-0.3796176333073111,0.3796176333073111,0.9251434767008606,-138,420.453125)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M180,157.45 C191,142.45 279,113.45 413,113.45 C545.66,113.45 585.21,131.09 627.71,152.79" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8902128046111266,-0.4555449072335153,0.4555449072335153,-0.8902128046111266,629,153.453125)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M178,167.5 L339,167.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,341,167.50000000000003)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M60,166.58 L156,167.4" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,158.00000000000003,167.4152542372881)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M361,167.5 L630,167.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,632,167.49999999999997)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 187px; top: 197px;"><dg-editor-container data-editor-id="de2985384769410653" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 241px; top: 130px;"><dg-editor-container data-editor-id="de7316325378618067" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 93px; top: 131px;"><dg-editor-container data-editor-id="de051365730366284" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 342px; top: 152px;"><dg-editor-container data-editor-id="de46427843006790925" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 159px; top: 152px;"><dg-editor-container data-editor-id="de6195974226019156" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 41px; top: 151px;"><dg-editor-container data-editor-id="de7730452034759456" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 633px; top: 152px;"><dg-editor-container data-editor-id="de4517407607613697" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(208, 2, 27); fill: rgb(208, 2, 27); stroke: rgb(208, 2, 27); border-color: rgb(208, 2, 27); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">9</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 470.1px; top: 131px;"><dg-editor-container data-editor-id="de45308110385353983" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 378px; top: 77px;"><dg-editor-container data-editor-id="de21657612508328938" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">5</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f:  +1</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">g: +2</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それから合成関数である</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f.g: +3</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>にさらにつけ加えて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">h: +3</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これをトライアングルのグラフに描き直すことができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 208px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M342,65.41 L430.65,162.12" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6757188764954565,-0.7371594128461754,0.7371594128461754,-0.6757188764954565,432,163.59090909090907)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M340,174.5 L430,174.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,432,174.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M224,63.93 L318.62,162.63" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6920171924052004,-0.7218810188775043,0.7218810188775043,-0.6920171924052004,320,164.0689655172414)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M331.73,71 L330.31,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.016579868187697203,-0.9998625445384374,0.9998625445384374,0.016579868187697203,330.275,158)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M224,53.58 L320,54.4" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,322,54.41525423728813)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 388px; top: 79px;"><dg-editor-container data-editor-id="de7678427485303676" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">5</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 230px; top: 112px;"><dg-editor-container data-editor-id="de1127077307618245" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 366px; top: 173px;"><dg-editor-container data-editor-id="de7420217272564338" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 332px; top: 103px;"><dg-editor-container data-editor-id="de5441703993744498" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 260px; top: 18px;"><dg-editor-container data-editor-id="de3920776037935756" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 433px; top: 159px;"><dg-editor-container data-editor-id="de15262481943488337" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(208, 2, 27); fill: rgb(208, 2, 27); stroke: rgb(208, 2, 27); border-color: rgb(208, 2, 27); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">9</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 321px; top: 159px;"><dg-editor-container data-editor-id="de23055213330382007" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 323px; top: 39px;"><dg-editor-container data-editor-id="de21648051379514177" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 205px; top: 38px;"><dg-editor-container data-editor-id="de24537100770719866" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Dとhを付けて</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">h</block><block class="Binary">:</block><block class="Normal">C</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">D</block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block><block class="Binary">:</block><block class="Normal">B</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">D     </block></line></editarea></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 208px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M345,66.82 L430.64,158.57" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6823812024608394,-0.7309965078768154,0.7309965078768154,-0.6823812024608394,431.99999999999994,160.03571428571428)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M345,174.5 L430,174.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,432,174.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M230,67.12 L318.62,159.96" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6905037716770935,-0.7233287919747895,0.7233287919747895,-0.6905037716770935,320,161.40476190476187)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M333.36,71 L332.65,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.008377482414770796,-0.9999649082784806,0.9999649082784806,0.008377482414770796,332.6375,158)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M230,53.61 L320,54.38" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,322.00000000000006,54.40128755364807)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 388px; top: 79px;"><dg-editor-container data-editor-id="de09544249725210663" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 226px; top: 102px;"><dg-editor-container data-editor-id="de9721396690778756" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 378px; top: 172px;"><dg-editor-container data-editor-id="de2908871969105702" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">h</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 336px; top: 89px;"><dg-editor-container data-editor-id="de9749116055793912" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 272px; top: 18px;"><dg-editor-container data-editor-id="de7799027507493781" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 433px; top: 159px;"><dg-editor-container data-editor-id="de830258836387106" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(208, 2, 27); fill: rgb(208, 2, 27); stroke: rgb(208, 2, 27); border-color: rgb(208, 2, 27); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">D</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 321px; top: 159px;"><dg-editor-container data-editor-id="de8100273443589652" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">C</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 323px; top: 39px;"><dg-editor-container data-editor-id="de5083628417673403" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 205px; top: 38px;"><dg-editor-container data-editor-id="de406793730963545" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Binary">⋅</block><block class="Normal">h</block><block class="Relation">=</block><block class="Normal">f</block><block class="Binary">⋅</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成という二項演算は、連鎖が成立している限り必ず結合性があるのがわかります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型プログラミングのマインドセットになっていると、こういう「自由自在」の関数合成の二項演算の結合性（つなげる順序で結果が変化せず「等しい」）という話になった場合、「そんな都合よく？」と思いがちです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>理由は、暗黙に時間依存する関数を取り扱うことが当たり前なので、関数を組み合わせる順序によって結果が変化して、コードが当初の想定から外れて壊れてしまうからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>純粋に関数に渡される引数とその他定数だけか、もしくは時間依存していても明示的に時間依存グラフを構成しているFRPの値のみで構成されている、いわゆる「純粋」な関数の合成ならば、組み合わせる順序に依存せず等しくなる結合性が必ずあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.4828458390418551" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.4828458390418551"><prefix style="text-align: left; padding-right: 0.25em;">16.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数の合成という二項演算には左右の単位元が存在する</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>恒等関数(identity function)</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">:</block><block class="Normal"> x</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">x</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は関数合成という二項演算の単位元です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">:</block><block class="Normal">A</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">B</block></line></editarea></compositeblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>（これにはもちろんid自身も f にふくまれる）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">:</block><block class="Normal">A</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">A</block></line></editarea></compositeblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">:</block><block class="Normal">B</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">B</block></line></editarea></compositeblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> が自明なこととして上の図を再構成すると</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 207px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="grouped-shape"></g><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M345,165.5 L432,165.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,434,165.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M350,59.88 L432.66,151.3" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6706855765367201,-0.7417417727387391,0.7417417727387391,-0.6706855765367201,434,152.78110599078343)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M336.52,62 L334.04,147" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.02914287172354524,-0.9995752563102515,0.9995752563102515,0.02914287172354524,333.98125,149)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M232,58.24 L320.63,151.89" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6873410913449092,-0.7263347879241289,0.7263347879241289,-0.6873410913449092,322,153.3471615720524)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M232,44.61 L322,45.37" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,323.99999999999994,45.389830508474574)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 392px; top: 70px;"><dg-editor-container data-editor-id="de6991214562941099" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">id</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 216px; top: 99px;"><dg-editor-container data-editor-id="de3006514358796477" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">⋅</block><block class="Normal">f</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 375px; top: 165px;"><dg-editor-container data-editor-id="de9159668779217363" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 338px; top: 80px;"><dg-editor-container data-editor-id="de5617088271679127" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 268px; top: 10px;"><dg-editor-container data-editor-id="de7084452886709949" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 435px; top: 150px;"><dg-editor-container data-editor-id="de10328032117107577" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 323px; top: 150px;"><dg-editor-container data-editor-id="de24469108205900136" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 325px; top: 30px;"><dg-editor-container data-editor-id="de691515515477904" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 207px; top: 29px;"><dg-editor-container data-editor-id="de942148386769752" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">⋅</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">id</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成演算は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>結合性があり、結果的に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>left-right identity</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>左右の単位元idが</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が自動的に存在している。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3114790582035363" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3114790582035363"><prefix style="text-align: left; padding-right: 0.25em;">16.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成という二項演算はモノイド（証明終わり）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><ref-tag data-tag-position="line" class="line-tag automatic" data-tag-id="tid0.036182499745263996" style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;" id="tid0.036182499745263996"><label>(1)</label></ref-tag><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">⋅</block><block class="Normal"> h</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g </block><block class="Binary">⋅</block><block class="Normal"> h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><ref-tag data-tag-position="line" class="line-tag automatic" data-tag-id="tid0.22231056172899866" style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;" id="tid0.22231056172899866"><label>(2)</label></ref-tag><block class="Normal">id </block><block class="Binary">⋅</block><block class="Normal"> f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> id</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と結合性があり、左右の単位元が存在しているので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数合成はモノイド</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>極めて重要なことなので念の為に繰り返しますが、</block><block style="font-weight: bold;">関数合成という関数型プログラミングで極めて根本的な二項演算において、結合性がある</block><block>こと、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.1914061892686485"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>括弧をつける位置の選び方は写像の合成の結果に影響を及ぼさないということを意味しているから、括弧を取り除いても意味を損なうことは無く、しばしば括弧を省略して</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 180px; height: 34.5813px; position: relative;"><img src="image-resources/70c9bad5-6fe2-4bef-837b-57cbb4e22ad7.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g </block><block class="Binary">⋅</block><block class="Normal"> h</block></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書かれる。写像の数がさらに増えても同様である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Binary">⋅</block><block class="Normal">h</block><block class="Relation">=</block><block class="Normal">f</block><block class="Binary">⋅</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が成立しているということは、</block><block style="font-weight: bold;">グルーピング演算子（）の位置は気にする必要がなく（）をつけてもつけなくても「等しい」こと</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g </block><block class="Binary">⋅</block><block class="Normal"> h</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">が保証されている</block><block>わけですから、組み合わせ爆発の危険性がない、</block><block style="font-weight: bold;">安全な代数構造</block><block>である、ということを意味しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.7226038808888653" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.7226038808888653"><prefix style="text-align: left; padding-right: 0.5em;">17. </prefix><blocks><baselineblock class="inline"></baselineblock><block>高階関数（Higher-order function）</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5273355130113686" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5273355130113686"><prefix style="text-align: left; padding-right: 0.25em;">17.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function compositon）と</block><block>高階関数（Higher-order function）という用語</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ようやく</block><block style="font-weight: bold;">高階関数（Higher-oder function）</block><block>の説明にまで辿り着きました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これまで何度か高階関数という言葉を出さざるを得ないほど、関数型コードにとっては必要な概念です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数とは関数の組み合わせ方法のひとつ</block><block>で、前述の関数合成とあわせて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function compositon）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数（Higher-oder function）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのが、おおまかな関数の組み合わせの方法のツートップであると言えるでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ところが、</block><block style="font-weight: bold;">日常的な言語感覚でいうと、今から説明するほうの高階関数（Higher-oder function）のほうが、関数の合成（Function compositon）の意味に近いです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block><block style="font-weight: bold;">関数の合成（Function compositon）というのは、前述のとおり二項演算であり、まさに二項演算の定義そのものとして「連結（Concat）」という用語のほうがその素性を正確に表現しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">用語の命名というのは非常に重要</block><block>で、もし</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function compositon）→　関数の連結 / 連結関数（Function concatenation/ Joint function）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数（Higher-oder function）→　関数の合成 / 合成関数（Function compositon / Composed function）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすれば、より数学や関数型プログラミングの理解が簡単になった、と思います。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう用語の混乱というのは、数学そのものでもそうですし、プログラミング分野ではあまり注意を払われておらず、あとから概念を学習する学習者の負担になっていますが、解説書でもろくに注意を払われず、大上段から「高階関数という」とだけ説明されていることがほぼすべてですし、じゃあむしろ高階関数の概念そのものに近い語感である</block><block style="font-weight: bold;">関数の合成（Function compositon）</block><block>との関係はどうなっているのか？ということもほぼ説明はされていません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>本稿ではそこも含めてきちんと解説していきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.1334798640681334" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.1334798640681334"><prefix style="text-align: left; padding-right: 0.25em;">17.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>高階関数（Higher-order function）は世界にありふれている</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まず、前述のとおり、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数（Higher-oder function）→　関数の合成 / 合成関数（Function compositon / Composed function）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という言葉の意味に近いということを念頭においてください。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>前述の従来表現の</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成 / 合成関数（Function compositon / Composed function）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が、二項演算であり２つの関数の連結で、その二項演算を連鎖して、モノイドだ、とやったわけですが、</block><block style="font-weight: bold;">連結、連鎖という「左から右」</block><block>の方向に組み合わせであるといえます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>他方でこちらの</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数（Higher-oder function）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、その名の「</block><block style="font-weight: bold;">高階（Higher-oder）</block><block>」のとおり、「</block><block style="font-weight: bold;">上下方向」</block><block>で</block><block style="font-weight: bold;">積み増し</block><block>て</block><block style="font-weight: bold;">合成する組み合わせ</block><block>であると言えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん、念の為ですが抽象概念であるので、本当は左だの右だのはないわけですが、実際に数式は左右に並んでおり、連結方向で、左と右とは表現しますし、その左右方向の接続とは異なる、というのであれば、上下方向である、と表現してもそんなにデタラメであるというわけではないはずです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数（Higher-oder function）</block><block>というのは、実は世界にありふれていて、その概念の理解は難しくありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、コンピュータのハードウェアというのは、ひとつのよくできた関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに、その各種ハードウェアの仕様に沿ったOS(オペレーティング・システム)という基本ソフトウェアというのも、関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ハードウェアにOSをインストールすることで、こ2つの関数を合成可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>ハードウェア（Windows）= Windowsマシン</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>ハードウェア（MacOS）= Mac</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>ハードウェア（Linux）= Linuxマシン</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが</block><block style="font-weight: bold;">高階関数（Higher-oder function）</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん、すべてのハードウェアに任意のOSがインストールできるわけではなく、最初から高階関数としてうまく仕様を一致させておく必要があります。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>Androidスマホハードウェア（Android）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>iPhone（iOS）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と互換性がまったくないハードウェアは当たり前に存在しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう高階関数は、そもそものあり方として入れ子構造になっており、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>Windowsマシン(Chromeブラウザ) </block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>Mac(Chromeブラウザ) </block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>Linuxマシン(Chromeブラウザ) </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、今度は、各種OSという基本ソフトウェアの上にアプリケーション・ソフトウェアをインストールすることで、より高度な目的の関数合成ができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>OSというのは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2" target="_blank" style="color: inherit; text-decoration: inherit;">システムソフトウェア</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2" target="_blank" style="color: inherit; text-decoration: inherit;">アプリケーションソフトウェア</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Application_software" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Application_software" target="_blank" style="color: inherit; text-decoration: inherit;">application software</a></block><block>、最近は略すとapp(s)）と対になる概念です。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3598873953614785"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アプリケーションソフトウェア（英: application software、最近は略すとapp(s)）は、ある特定の機能や目的のために開発・使用されるソフトウェア[1][2] で、コンピュータの操作自体のためのものではないもの[2]。たとえば、ワープロソフト、表計算ソフトウェア、イラスト作成（お絵かき）用ソフトウェア、写真加工用ソフトウェアなど。 アプリケーションと（2番目の語を省略して）も呼ばれ[1]、特に最近ではアプリと略されることも多い[1]。「アプリケーション」は「応用」という意味なので日本語では「応用ソフト」とも呼ぶ[1]（が、最近はかなり使用頻度が減った）。アプリケーションプログラム（応用プログラム）ともいい、コンピュータ・プログラムの一種である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、「OSにアプリをインストールする」ということは、特にスマートフォンの普及以降ではIT技術者のみならず、一般人が日常的に繰り返している、</block><block style="font-weight: bold;">高階関数（Higher-oder function）</block><block>、関数合成の行為であると言えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに、Chromeブラウザや、AdobeのPhotoshopなどでもエクステンションやプラグインと呼ばれる追加機能があり、これも</block><block style="font-weight: bold;">高階関数（Higher-oder function）</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>Chromeブラウザ（エクステンション）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>アプリ（プラグイン）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2332945062172782"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">プラグイン関数</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アプリ関数</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">OS関数</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ハードウェア関数</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう</block><block style="font-weight: bold;">レイヤを下から上の方向へ積み増す</block><block>ことは、</block><block style="font-weight: bold;">高階関数（Higher-oder function）</block><block>を作り出しているということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは、もっと範囲を広げると、すべての「設定（Setting）」というのは高階関数であると言えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Google検索が関数であることは説明しました。</block></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8920797653601704"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Googleの検索エンジンは巨大なデータベースで、膨大なWeb記事がランキングされてストックされています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Google検索も、検索ワードがインプット、検索結果がアウトプットの関数です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 検索ワードをインプットしたら検索結果をアウトプットする Google関数</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 381.545px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".18567533308546968" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.18567533308546968)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M346.43,53 C346.43,34.77 381.25,20 424.2,20 C467.16,20 501.98,34.77 501.98,53 C501.98,71.23 467.16,86 424.2,86 C381.25,86 346.43,71.23 346.43,53 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M401.1,112 L412.65,112 L412.65,88 L435.76,88 L435.76,112 L447.31,112 L424.2,128 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M401.1,267 L412.65,267 L412.65,243 L435.76,243 L435.76,267 L447.31,267 L424.2,283 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M345.43,323 C345.43,304.77 380.25,290 423.2,290 C466.16,290 500.98,304.77 500.98,323 C500.98,341.23 466.16,356 423.2,356 C380.25,356 345.43,341.23 345.43,323 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M520.86,147.57 L520.86,224.89 C520.86,234.04 477.61,241.45 424.26,241.45 C370.91,241.45 327.66,234.04 327.66,224.89 L327.66,147.57 C327.66,138.42 370.91,131 424.26,131 C477.61,131 520.86,138.42 520.86,147.57 C520.86,156.72 477.61,164.14 424.26,164.14 C370.91,164.14 327.66,156.72 327.66,147.57" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 358px; top: 35px;"><dg-editor-container data-editor-id="de028204743684417055" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">検索ワード</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 369px; top: 304px;"><dg-editor-container data-editor-id="de9332200995071669" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">検索結果</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 342px; top: 165px;"><dg-editor-container data-editor-id="de06460344481140434" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">Google関数</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">=検索エンジン</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Google関数を使う</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 718.273px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg><g><defs><pattern id=".0892372773677872" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="lightgray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#.0892372773677872)" stroke="lightgray" stroke-width="0.5"></rect></g></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M163.43,52 C163.43,33.77 198.25,19 241.2,19 C284.16,19 318.98,33.77 318.98,52 C318.98,70.23 284.16,85 241.2,85 C198.25,85 163.43,70.23 163.43,52 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,111 L229.65,111 L229.65,87 L252.76,87 L252.76,111 L264.31,111 L241.2,127 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M218.1,266 L229.65,266 L229.65,242 L252.76,242 L252.76,266 L264.31,266 L241.2,282 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M337.86,146.57 L337.86,223.89 C337.86,233.04 294.61,240.45 241.26,240.45 C187.91,240.45 144.66,233.04 144.66,223.89 L144.66,146.57 C144.66,137.42 187.91,130 241.26,130 C294.61,130 337.86,137.42 337.86,146.57 C337.86,155.72 294.61,163.14 241.26,163.14 C187.91,163.14 144.66,155.72 144.66,146.57" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><image x="128" y="288" width="228.86361694335938" height="418.54541015625" preserveAspectRatio="none" xlink:href="image-resources/2eb3df19-b952-4cbb-84a0-9b7d5916573a.png"></image></g><g class="composite-shape"><path class="real" d=" M548.43,51 C548.43,32.77 590.61,18 642.65,18 C694.68,18 736.86,32.77 736.86,51 C736.86,69.23 694.68,84 642.65,84 C590.61,84 548.43,69.23 548.43,51 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M619.1,110 L630.65,110 L630.65,86 L653.76,86 L653.76,110 L665.31,110 L642.2,126 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M619.1,265 L630.65,265 L630.65,241 L653.76,241 L653.76,265 L665.31,265 L642.2,281 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M738.86,145.57 L738.86,222.89 C738.86,232.04 695.61,239.45 642.26,239.45 C588.91,239.45 545.66,232.04 545.66,222.89 L545.66,145.57 C545.66,136.42 588.91,129 642.26,129 C695.61,129 738.86,136.42 738.86,145.57 C738.86,154.72 695.61,162.14 642.26,162.14 C588.91,162.14 545.66,154.72 545.66,145.57" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><image x="521" y="284" width="243.86361694335938" height="418.54541015625" preserveAspectRatio="none" xlink:href="image-resources/b7fd6598-333b-46dc-bb00-2110e03e2818.png"></image></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 211px; top: 34px;"><dg-editor-container data-editor-id="de25903836615138465" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">緑茶</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 159px; top: 164px;"><dg-editor-container data-editor-id="de8785317564785566" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">Google関数</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">=検索エンジン</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 563px; top: 34px;"><dg-editor-container data-editor-id="de80290167743354" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">日経平均株価</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 560px; top: 163px;"><dg-editor-container data-editor-id="de5391355340422883" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">Google関数</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-weight: bold;">=検索エンジン</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このとき、Google検索は、暗黙に裏側で設定、あるいはパーソナライゼーションというものがなされていて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 796.067px; position: relative;"><img src="image-resources/9f8fd40f-0494-47a6-b5b3-ec6d3e1ac6de.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この設定は、</block><block style="font-weight: bold;">各種のインプットがあり設定が保存されて反映されるアウトプットがある関数</block><block>になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Google検索（設定） =  パーソナライズされたGoogle検索</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という高階関数になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7354417023247528" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7354417023247528"><prefix style="text-align: left; padding-right: 0.25em;">17.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算子をつかって</block><block>高階関数を表現する</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8326487405378327"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">プラグイン関数</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アプリ関数</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">OS関数</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ハードウェア関数</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう</block><block style="font-weight: bold;">レイヤを下から上の方向へ積み増す高階関数（Higher-oder function）</block><block>をパイプライン演算子（Pipe Operator）をつかって表現してみましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アプリ関数（プラグイン関数）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、データファーストのパイプライン化すると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">プラグイン関数 &gt; アプリ関数 </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ユーザ入力 &gt; (プラグイン関数 &gt; (アプリ関数 &gt;  (OS関数 &gt; ハードウェア関数)))</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という構造になっていることがわかります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もっと抽象的に、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ユーザ入力 </block><block style="font-weight: bold;">a</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数</block><block style="font-weight: bold;"> f, g </block><block>で表現するらば、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">a </block><block class="Relation">&gt;</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f</block><block class="Relation">&gt;</block><block class="Normal">g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6970394168593432" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6970394168593432"><prefix style="text-align: left; padding-right: 0.25em;">17.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function compositon）と</block><block>高階関数（Higher-order function）の比較</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、従来表現の</block><block style="font-weight: bold;">関数の合成（Function composition）は関数の連結</block><block>であり、二項演算であり関数合成の二項演算子をつかって表現することもできるモノイドでした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まとめると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function composition）</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">a </block><block class="Relation">&gt;</block><block class="Normal"> f </block><block class="Relation">&gt;</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Punctuation">.</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">fg </block><block class="Relation">=</block><block class="Normal"> f </block><block class="Punctuation">.</block><block class="Normal"> g</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数（Higher-oder function）</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">a </block><block class="Relation">&gt;</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f</block><block class="Relation">&gt;</block><block class="Normal">g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">fg </block><block class="Relation">=</block><block class="Normal"> f</block><block class="Relation">&gt;</block><block class="Normal">g</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9622301767448331" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9622301767448331"><prefix style="text-align: left; padding-right: 0.25em;">17.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数同士の組み合わせでない</block><block>高階関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>用語と定義と分類の問題ですが、以上のように関数２つを上下に積み上げてより高度な関数を合成する、という以外に、インプットあるいはアウトプットのどちらかひとつでも関数であれば、それも高階関数と呼ぶ、という決まりになっているようです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%AB%98%E9%9A%8E%E9%96%A2%E6%95%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%AB%98%E9%9A%8E%E9%96%A2%E6%95%B0" target="_blank" style="color: inherit; text-decoration: inherit;">高階関数</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.20648748200533773"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>高階関数（こうかいかんすう、英: higher-order function）とは、第一級関数をサポートしているプログラミング言語において少なくとも以下のうち1つを満たす関数である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数（手続き）を引数に取る</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数を返す</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8708155058706526" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8708155058706526"><prefix style="text-align: left; padding-right: 0.25em;">17.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>高階関数（Higher-order function）とラムダ式（アロー関数式）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>高階関数のざっくりとした一番外側の概念を理解したところで、次は具体的な実装を具体的な表記とともに研究します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">表記というのは非常に重要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆に言うと表記を軽んじていると、単純なケースに限ってはうまくいくだろうというある種のプログラミングの複雑性にまつわるリスクへの楽観視、軽視や思い上がりで、結局複雑性によってバグまみれのコードを書くことになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>すでに説明したとおり、高階関数というものは非常にありふれた当たり前の概念なのですが、ES6のラムダ式（アロー関数式）の導入以前は、function文、あるいは中途半端なfunction式しか存在しなかったため、普通のこと、つまり高階関数の取り扱いをするのにも地獄のような様相でした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptはES6のラムダ式導入以前と以降でまるで別モノで、ES6以降は、関数型プログラミング、つまり式の表現が飛躍的に楽になりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.36115620076044075"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">アロー記法の関数の定義</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 52.2222px; position: relative;"><img src="image-resources/73b5fcf0-7270-477e-8e6e-a939d28ee186.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" style="color: inherit; text-decoration: inherit;">アロー関数式</a></block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん</block><block style="font-weight: bold;">文</block><block>ではなく</block><block style="font-weight: bold;">式</block><block>であり、プログラミング界隈では</block><block style="font-weight: bold;">ラムダ式</block><block>という名称のほうが有名で通用しやすいはずです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>簡潔で美しいですね。無駄を取り去った機能美です。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 293.379px; position: relative;"><img src="image-resources/614e28ab-96eb-4ebe-afab-80bb3aa7f74b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x</block><block>と</block><block style="font-weight: bold;">y</block><block>は</block><block style="font-weight: bold;">プレースホルダ</block><block>であることを考慮して、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">x </block><block>が </block><block style="font-weight: bold;">x + 1 </block><block>に写像される、というイメージそのままになっています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ラムダ式（アロー関数式）は写像を表現するプレースホルダだけで構成されています。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 52.2222px; position: relative;"><img src="image-resources/1a46f001-376a-48b4-bdb1-c62949ff1fc6.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、この</block><block style="font-weight: bold;"> x </block><block>というのは</block><block style="font-weight: bold;">あくまでプレースホルダにすぎないので、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 201.366px; height: 48px; position: relative;"><img src="image-resources/3d4f04ff-27fe-45fb-8453-132b203377e8.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>別のシンボルたとえば </block><block style="font-weight: bold;">a </block><block>であっても</block><block style="font-weight: bold;">全く同じ意味になります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、その上でここには、</block><block style="font-weight: bold;">プレースホルダではない、意味がちゃんとある名前である関数名</block><block>の </block><block style="font-weight: bold;">f </block><block>はありません。</block><block style="font-weight: bold;">関数に名前をつける、という行為はまた別の概念</block><block>だからですね。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>別の概念ならば一緒くたにせずに、表記としてもしっかり分離したほうが、このようにプレースホルダのシンボルなんだから別のシンボルでも構わない、であるとか、関数名はプレースホルダではないので命名には特段の意味がある、という概念の混同が発生していません。それに関連もしますが、概念の粒度が小さいので混乱もないし構成の自由度で優れています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">こちらの表記のほうが概念的にミニマルでコンパクトで、写像（Map）の概念そのままのイメージ的に自然</block><block>なのですが、あまりにも、</block><block style="font-weight: bold;">f(x) </block><block>という関数名とプレースホルダは同時にセットで定義する、混沌とした数学の流儀が当たり前に数学世界とプログラミング世界に浸透しているため、ラムダ式は</block><block style="font-weight: bold;">無名関数</block><block>という奇妙なネーミングさえあります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もし関数名が必要なのであれば、単純に、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 40.37px; position: relative;"><img src="image-resources/4467400f-bad8-4e04-bcd2-970ecb9d56cb.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように関数名</block><block style="font-weight: bold;"> f </block><block>を別途割り当てて定義すれば良いだけです。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.29418856649632974" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.29418856649632974"><prefix style="text-align: left; padding-right: 0.25em;">17.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ラムダ式（アロー関数式）で遊ぶ identity関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もっともシンプルなラムダ式は</block><block style="font-weight: bold;">恒等関数(identity function)</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.42593133907426517"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">関数の合成という二項演算には左右の単位元が存在する</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">恒等関数(identity function)</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">:</block><block class="Normal"> x</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">x</block></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は関数合成という二項演算の単位元です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">:</block><block class="Normal">A</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">B</block></line></editarea></compositeblock><block> </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>（これにはもちろんid自身も f にふくまれる）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">:</block><block class="Normal">A</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">A</block></line></editarea></compositeblock><block> </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">:</block><block class="Normal">B</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">B</block></line></editarea></compositeblock><block> </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> が自明なこととして上の図を再構成すると</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 207px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="grouped-shape"></g><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M345,165.5 L432,165.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,434,165.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M350,59.88 L432.66,151.3" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6706855765367201,-0.7417417727387391,0.7417417727387391,-0.6706855765367201,434,152.78110599078343)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M336.52,62 L334.04,147" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.02914287172354524,-0.9995752563102515,0.9995752563102515,0.02914287172354524,333.98125,149)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M232,58.24 L320.63,151.89" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6873410913449092,-0.7263347879241289,0.7263347879241289,-0.6873410913449092,322,153.3471615720524)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M232,44.61 L322,45.37" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,323.99999999999994,45.389830508474574)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 392px; top: 70px;"><dg-editor-container data-editor-id="de34142594192673825" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">id</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 216px; top: 99px;"><dg-editor-container data-editor-id="de24127714070435036" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">⋅</block><block class="Normal">f</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 375px; top: 165px;"><dg-editor-container data-editor-id="de21130029703651276" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 338px; top: 80px;"><dg-editor-container data-editor-id="de7725639110816078" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 268px; top: 10px;"><dg-editor-container data-editor-id="de07048176315236687" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 435px; top: 150px;"><dg-editor-container data-editor-id="de43721314898164665" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 323px; top: 150px;"><dg-editor-container data-editor-id="de9933403151473452" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 325px; top: 30px;"><dg-editor-container data-editor-id="de7293209038074393" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 207px; top: 29px;"><dg-editor-container data-editor-id="de3973134911088838" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id</block><block class="Binary">⋅</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">id</block></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成演算は</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>結合性があり、結果的に</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>left-right identity</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>左右の単位元idが</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が自動的に存在している。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちなみにTypeScriptではインプットは任意のタイプなのでジェネリックでこのように表現できます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> identity </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>インプットはそのまま素通りしてアウトプットになります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">identity</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// 5</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7437333867944824" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7437333867944824"><prefix style="text-align: left; padding-right: 0.25em;">17.8. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ラムダ式（アロー関数式）で遊ぶ right関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、恒等関数である</block><block style="font-weight: bold;">identity</block><block>をアウトプットにもつ高階関数を定義します。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> identity</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>どうなるでしょうか？</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">right</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// [Function: identity] a =&gt; a</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>当然の如く、identity関数が帰ってきました。インプットである５は無視されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">right(5) = identity </block><block>関数であるので、この関数にさらに値が入るはずです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">right</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// 3</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>identity関数に3を適用したので、3が帰ってきました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Chromeブラウザ &gt; F12 &gt; Console</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 800px; height: 410.162px; position: relative;"><img src="image-resources/0d5f2f0d-4f46-4996-8960-631444494643.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さてここで、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> identity</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>rightの定義のidentityは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と定義されているので、そっくり置き換えて</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書きなおせます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">right</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// 3</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この場合でも、全く同じ挙動です。書き換える前の関数と同じものだからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>より意味的にわかりやすく</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="parameter token">　　　　　　　　　　a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//identity</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このような構造となっており、最初のほう、上段のaのインプットは捨てられます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>下の段がidentity関数であり、この下段のaのインプットが素通りして出てきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この構造をわかりやすくするために、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">identity</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と予めグルーピング演算子（）で分けておいて、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>としても構いません。同じものになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>今後は、ためしに、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>としてみます。このとき、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">identity</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と同じものになるはずですが、この構造ではアウトプットのaに該当するインプットが存在しないことになってしまっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 69.5444px; position: relative;"><img src="image-resources/48bf6966-30e0-4fb4-b697-aaccc4a35b9a.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とエラーになってしまいました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>意味不明に無闇矢鱈にアローシンボルを()で括ると、構造が壊れかねないということがわかります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ラムダ式は所詮プレースホルダだけで構成されているので、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ではなくて、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">b</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と考えて、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> identity</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">b</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいはカッコは不要なので、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">b</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>としておれば、間違いないです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こうしておけば、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>としてしまうと明らかに定義上おかしいプレイースホルダの配置になっていることがわかります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆に言うと、このような高階関数で、意味がわかっておれば、（）はつけても構わないし、後々自身や別のレビュワーが高階関数の意味を解釈しやすいようにあえて（）をつけておくことも賢明な方法です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">right</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">b</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を使うとき、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">right</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// 3</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となりますが、これはidentityを一旦忘れて見方を変えると、</block><block style="font-weight: bold;">rightという関数に5と3という２つの値が左右に入って、そのうち、左側の5は無視されて捨てられてしまい、右側の3だけが素通りしてでてくる、という関数</block><block>であると考えることもできます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5877928029570094" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5877928029570094"><prefix style="text-align: left; padding-right: 0.25em;">17.9. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ラムダ式（アロー関数式）で遊ぶ log関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こんなことをして何か役に立つのか？というと、役立ちます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういうlog関数をright関数を利用して定義します。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">log</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　right</block><block class="punctuation token">(</block><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>log関数はインプットとしてaを取るのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>right関数はインプットとして、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>console.log(a)</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>a</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という2つの値を取ります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%85%88%E8%A1%8C%E8%A9%95%E4%BE%A1" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%85%88%E8%A1%8C%E8%A9%95%E4%BE%A1" target="_blank" style="color: inherit; text-decoration: inherit;">先行評価</a></block><block>（Eager evaluation）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7083429351401522"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>先行評価（せんこうひょうか、英: eager evaluation）、正格評価（せいかくひょうか、英: strict evaluation）、厳密評価とは、プログラミング言語における評価戦略の一種であり、多くの言語処理系で標準的に使われている戦略である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">概要</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>先行評価では、変数の値が得られた時点で即座に数式が評価される。一般に、評価の済んでいない数式を表す中間的なデータ構造を構築・管理する必要がないため、単純なプログラミング言語ではこれが最も効率的である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なので、()の中の引数はEager（熱心）に、与えられた途端に評価してしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その結果、</block><block style="font-weight: bold;">console.log(a)</block><block>が即座に実行され、</block><block style="font-weight: bold;">undefined</block><block>という値が帰ってくるのですが、これはright関数なので、その左の値は無視されて捨てられてしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>結果、右側のaだけがすり抜けて出てきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>大枠では、最初に与えられたほうの左側の値は捨てられ、あとの右側の値はidentity関数を通ってそのままアウトプットになりますから、log関数というのは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>input a</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>output a</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっていて大枠ではidentity関数と同じような挙動を示します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>違うのは、その値aをコンソールに表示してくる、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このlog関数は、元のコードにとってはidentity関数と同じインパクトしかない、つまりスリぬけるだけなので、コードの挙動を確認するDebugに使えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型コードのように、値がコロコロと変化するわけではないのですが、それでも関数型コードの構造が正しいことを確認するために、この値はどうなっているんだ？と確認したいときに、しれっとこのlog()で、その値を囲むだけで、Debug対象のコードに全くインパクトを与えることなしで、コンソールに値を表示して確認することができるわけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、console.log()と打つのは長いので、代わりにlog()関数を使うこともできます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.53323813808083" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.53323813808083"><prefix style="text-align: left; padding-right: 0.25em;">17.10. </prefix><blocks><baselineblock class="inline"></baselineblock><block>right関数で命令型コードの順次実行をエミュレートしてしまう</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、right関数は、log関数の実装のために使えますが、要するに、関数型コードのグラフ構造、依存グラフと関係ないところで、IO(入出力)をしたい、とにかくある値をコンソールの出力しておいて、そのconsole.log関数の返り値などどうでも良いので捨てた上で演算を継続したいときに役立ちます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは、IOを広く捉えると、right関数の左側では、メモリへの値の書き出し、これはつまり関数型コードではアンチパターンの値の更新であるわけですが、その値の更新を済ませたあとで、right関数の右側で、その左側でやってのけた更新された値に依存する演算をする、という利用方法があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして実は、両者ともに、</block><block style="font-weight: bold; font-style: italic;">命令型では普通にやっている、文（Statement）の上下の羅列による順次実行と全く同じこと</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>right関数を利用したlog関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">log</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　　</block><block class="punctuation token">(</block><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　　</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">log</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という命令型のコードを書いているのと全く同じです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードでも、たとえば、特に、本書であとからやるFRPの実装では、原理的にIOを弄り倒すので、そういうIOと関与しない範囲の関数型コードではアンチパターンである、このような命令型の列挙をしたくなる局面が非常に多いのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そこで諦めて｛｝を使って、冗長なreturn文（Statement）などを書きたくない場合は、right関数を利用することで、あくまで式（Expression）としてスッキリと書き下すことが可能になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、ただ値が素通りするだけのidentity関数って一体なんの意味があるのか？なんの役に立つのか？とか、identity関数から構成したrightという高階関数はなんの意味があるのか？という至極当然の疑問が当初あっても、使い方によって下手なDebugツールを使うよりも便利なlog関数を構成できたり、また命令型コードの順次実行をエミュレートできたりと、高階関数はこれだけシンプルなレベルでも非常に大きな力を秘めています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.43568168219263925" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.43568168219263925"><prefix style="text-align: left; padding-right: 0.25em;">17.11. </prefix><blocks><baselineblock class="inline"></baselineblock><block>コンビネータ論理</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際この高階関数のバリエーションは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%B3%E3%83%93%E3%83%8D%E3%83%BC%E3%82%BF%E8%AB%96%E7%90%86" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%B3%E3%83%93%E3%83%8D%E3%83%BC%E3%82%BF%E8%AB%96%E7%90%86" target="_blank" style="color: inherit; text-decoration: inherit;">コンビネータ論理</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6092173066594027"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コンビネータ論理（英: combinatory logic、組み合わせ論理）は、モイセイ・シェインフィンケリ（ロシア語版、英語版）（露: Моисей Эльевич Шейнфинкель、英: Moses Ilyich Schönfinkel）とハスケル・カリー（英: Haskell Brooks Curry）によって、記号論理での変数を消去するために導入された記法である。最近では、計算機科学において計算の理論的モデルで利用されてきている。また、</block><block style="font-weight: bold;">関数型プログラミング言語の理論（意味論など）や実装にも応用がある</block><block>。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コンビネータ論理は、コンビネータまたは引数のみからなる関数適用によって結果が定義されている</block><block style="font-weight: bold;">高階関数</block><block>、コンビネータに基づいている。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/SKI%E3%82%B3%E3%83%B3%E3%83%93%E3%83%8D%E3%83%BC%E3%82%BF%E8%A8%88%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/SKI%E3%82%B3%E3%83%B3%E3%83%93%E3%83%8D%E3%83%BC%E3%82%BF%E8%A8%88%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">SKIコンビネータ計算</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9323364145480808"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>SKIコンビネータ計算は型無しラムダ計算を単純化した、ひとつの計算モデルである。このモデルは、ある種のプログラミング言語と考えることができるが、人間によるソースコードの記述には適さない（難解プログラミング言語には時折採用される）。その代わり、このモデルは非常に単純なチューリング完全な言語であるため、アルゴリズムの数学理論においては重要である。また関数型言語を実行する抽象機械のモデルとして使っている例もある[1]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ラムダ計算におけるあらゆる演算は、SKIにおいて3つの定数記号S, KおよびI（これらをコンビネータと呼ぶ）および変数記号によって表現できる。2引数の関数適用演算のみを持つ形式言語の構文木と考えれば、定数記号と変数記号を葉とする二分木と捉えることもできる。 実際には、 I はモデルを簡単にするために導入されたものであり、SKIシステムを展開するにはSとKの2つで十分である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/B,C,K,W%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/B,C,K,W%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0" target="_blank" style="color: inherit; text-decoration: inherit;">B,C,K,Wシステム</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8612146919763173"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>B, C, K, Wシステムは、基本的な4つの定数記号 B, C, K, W からなるコンビネータ論理の変種である。この体系はハスケル・カリーの博士論文Grundlagen der kombinatorischen Logikによるもので、その結論部分はCurry 1930において示された。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>など研究しつくされています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ラムダ計算、関数型プログラミングの理論的基礎となっていますが、コーディングの実用上はどの程度深入りするか？は好奇心の問題と言えるでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、identity関数ってなんの役に立つのか？right関数は？と純粋に理論的であると思っていたものに思わぬ実用性が見いだせたりすることが往々にしてあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.534427946483687" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.534427946483687"><prefix style="text-align: left; padding-right: 0.25em;">17.12. </prefix><blocks><baselineblock class="inline"></baselineblock><block>2+引数関数は使わず単項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Unary function</a></block><block>）を使う　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数の合成や高階関数を使いこなせるようになって、そのパワフルさ、便利さを体感しはじめると、その</block><block style="font-weight: bold;">力の源泉は、単項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Unary function</a></block><block style="font-weight: bold;">）であること</block><block>がわかってきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>理由はかんたんで、</block><block style="font-weight: bold;">2引数以上の関数であれば、連結するとき（関数の合成）や高階関数として合成することが極めて厄介になるから</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">単項</block><block>関数は、ある意味、規格が1引数と決め打ちされており、それ以上でもそれ以下でもない、と厳密に規定されている、扱いやすいのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に前述の</block><block style="font-weight: bold;">コンビネータ論理では単項関数のみの体系</block><block>にすることが可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>またそこまで踏み込まずとも、たとえば、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（連結）の結合性</block><block>を考えるとき、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8105609622117234"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">h</block><block class="Binary">:</block><block class="Normal">C</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">D</block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block><block class="Binary">:</block><block class="Normal">B</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">D     </block></line></editarea></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 208px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M345,66.82 L430.64,158.57" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6823812024608394,-0.7309965078768154,0.7309965078768154,-0.6823812024608394,431.99999999999994,160.03571428571428)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M345,174.5 L430,174.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,432,174.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M230,67.12 L318.62,159.96" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6905037716770935,-0.7233287919747895,0.7233287919747895,-0.6905037716770935,320,161.40476190476187)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M333.36,71 L332.65,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.008377482414770796,-0.9999649082784806,0.9999649082784806,0.008377482414770796,332.6375,158)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M230,53.61 L320,54.38" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,322.00000000000006,54.40128755364807)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 388px; top: 79px;"><dg-editor-container data-editor-id="de40763594748049536" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 226px; top: 102px;"><dg-editor-container data-editor-id="de7518242608215182" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 378px; top: 172px;"><dg-editor-container data-editor-id="de7283769931453059" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">h</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 336px; top: 89px;"><dg-editor-container data-editor-id="de45826805351014643" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 272px; top: 18px;"><dg-editor-container data-editor-id="de7670247608261862" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 433px; top: 159px;"><dg-editor-container data-editor-id="de9392410821618584" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(208, 2, 27); fill: rgb(208, 2, 27); stroke: rgb(208, 2, 27); border-color: rgb(208, 2, 27); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">D</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 321px; top: 159px;"><dg-editor-container data-editor-id="de5833110369174219" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">C</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 323px; top: 39px;"><dg-editor-container data-editor-id="de4957925210723406" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 205px; top: 38px;"><dg-editor-container data-editor-id="de407434167315754" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Binary">⋅</block><block class="Normal">h</block><block class="Relation">=</block><block class="Normal">f</block><block class="Binary">⋅</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成という二項演算は、連鎖が成立している限り必ず結合性があるのがわかります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それから、</block><block style="font-weight: bold;">高階関数を合成</block><block>しようとしているとき、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.14083345939928926"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算子をつかって</block><block>高階関数を表現する</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9684578586053898"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">プラグイン関数</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アプリ関数</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">OS関数</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode align-center" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ハードウェア関数</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう</block><block style="font-weight: bold;">レイヤを下から上の方向へ積み増す高階関数（Higher-oder function）</block><block>をパイプライン演算子（Pipe Operator）をつかって表現してみましょう。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アプリ関数（プラグイン関数）</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、データファーストのパイプライン化すると、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">プラグイン関数 &gt; アプリ関数 </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ユーザ入力 &gt; (プラグイン関数 &gt; (アプリ関数 &gt;  (OS関数 &gt; ハードウェア関数)))</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という構造になっていることがわかります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もっと抽象的に、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ユーザ入力 </block><block style="font-weight: bold;">a</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数</block><block style="font-weight: bold;"> f, g </block><block>で表現するらば、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">a </block><block class="Relation">&gt;</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f</block><block class="Relation">&gt;</block><block class="Normal">g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block></line></editarea></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もしfやgの接続、つまり引数の数、インプットの数が1つに統一されていないのであれば、非常に厄介なことになる、というのは直感的に理解できるのではないでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.44794853295886417" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.44794853295886417"><prefix style="text-align: left; padding-right: 0.25em;">17.13. </prefix><blocks><baselineblock class="inline"></baselineblock><block>カリー化(currying)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">99の表を考えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以下の表では、たまたま0まで含まれていますが本質ではないです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 275.56px; position: relative;"><img src="image-resources/b9b2da9e-60d7-457a-813d-04fac19ffbbf.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>値を求めるための関数を素朴に考えるならば、それはインプットとなる引数が２つの</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block>で、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">table</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">table</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//15</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となるでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、このような</block><block style="font-weight: bold;">2引数関数、二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）は使わず単項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Unary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Unary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Unary function</a></block><block style="font-weight: bold;">）を使いたい</block><block>ので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数</block><block>を使って、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">table</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">b</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">table</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//15</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書くこともできます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>自分で最初から実装するときは自由に単項の高階関数でやればいいのですが、概念的に最初二項以上の関数を単項関数に修正することを、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%AB%E3%83%AA%E3%83%BC%E5%8C%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%AB%E3%83%AA%E3%83%BC%E5%8C%96" target="_blank" style="color: inherit; text-decoration: inherit;">カリー化</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Currying" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Currying" target="_blank" style="color: inherit; text-decoration: inherit;">currying</a></block><block>）といいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4137183018348518"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>カリー化 (currying, カリー化された=curried) とは、複数の引数をとる関数を、引数が「もとの関数の最初の引数」で戻り値が「もとの関数の残りの引数を取り結果を返す関数」であるような関数にすること（あるいはその関数のこと）である。クリストファー・ストレイチーにより論理学者ハスケル・カリーにちなんで名付けられたが、実際に考案したのはMoses Schönfinkelとゴットロープ・フレーゲである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数 f が</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 150px; height: 33.5404px; position: relative;"><img src="image-resources/a937dcf5-c3e1-4de5-a363-e5fe6d8ccca1.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> の形のとき、f をカリー化したものを g とすると、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 150px; height: 34.472px; position: relative;"><img src="image-resources/4ea9e888-1889-4e73-bd00-9e89c2a233ee.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の形を取る。uncurryingは、これの逆の変換である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold; font-style: italic;">理論計算機科学の分野では、カリー化を利用すると、複数の引数をとる関数を、一つの引数のみを取る複数の関数のラムダ計算などの単純な理論的モデルと見なして研究できるようになる。 </block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>今回、この99の表の関数を素朴に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block>で実装し、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">table</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">table</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//　NaN</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、二項関数であるのにも関わらず、1引数だけを満たして関数適用した場合、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 350px; height: 113.205px; position: relative;"><img src="image-resources/ec2ae5bd-e6ba-417e-9f76-e0f82719afae.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>NaNが帰ってきて、これ以上使い物にはなりません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>他方で、二項関数ではない</block><block style="font-weight: bold;">カリー化された単項関数</block><block>で実装したときは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">table</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">b</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">table</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// b =&gt; a * b</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 350px; height: 118.338px; position: relative;"><img src="image-resources/20e7897b-1e44-402b-8951-e751d7d4eda3.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>今度は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">b =&gt; a * b</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という関数が帰ってきました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最初の引数であるaは3として適用済みで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>残った引数であるbを適用したら、最終的な値を出しますよ、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">table</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">b</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">table</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// b =&gt; a * b</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">table</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//15</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 340px; height: 165.487px; position: relative;"><img src="image-resources/89b23b6d-52d7-4894-a78c-3c387c6d52ef.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは素朴に二項関数で実装するよりも柔軟でたいへん素晴らしいことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">table</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">b</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">table</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// b =&gt; a * b</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっているとき、実際これは、</block><block style="font-weight: bold;">全体の99の表</block><block>から </block><block style="font-weight: bold;">a=3 </block><block>という値で絞り込んだ、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 350px; height: 34.6045px; position: relative;"><img src="image-resources/279b2422-d185-4a41-8b85-4a7a2b894d16.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という</block><block style="font-weight: bold;">「3の段」の表を表す関数</block><block>を返していると見做せます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてこの</block><block style="font-weight: bold;">「3の段」関数</block><block>に、さらに</block><block style="font-weight: bold;">b=5</block><block>となる値を与えれば</block><block style="font-weight: bold;">15</block><block>という計算結果が帰ってきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.13593814935380877" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.13593814935380877"><prefix style="text-align: left; padding-right: 0.25em;">17.14. </prefix><blocks><baselineblock class="inline"></baselineblock><block>カリー化(currying)する関数とアン・カリー化（uncurrying）する関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項以上の関数を単項関数に加工するための、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">カリー化(currying)する関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その逆の、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アン・カリー化（uncurrying）する関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、引数の数を限っておれば結構かんたんに実装できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Before:カリー化されていない関数（uncurried funciton）  </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">After: カリー化された関数（curried function）  </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">という関数（currying）</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">curry</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token">                 </block><block class="comment token">//before (uncurried)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">b</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">,</block><block class=" token"> b</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//after  (curried)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Before:カリー化された関数（curried function）  </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">After: カリー化されていない関数（uncurried funciton）  </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">という関数（uncurrying）</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">uncurry</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token">                 </block><block class="comment token">//before (curried)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">b</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//after  (uncurried)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これらの関数の実装でも高階関数を自由に活用しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これらはパラメータが2個の関数を扱うもっともシンプルなケースですが、3個の場合でもabcと増えるだけで同じようになります。パラメータの個数が決まっていない、というよりどんなパラメータ数の関数でも扱えるようにするには、もうちょっと工夫が必要で複雑になってきますが、ここでは踏み込みません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ちなみにこの章では、高階関数の概念の説明に注力するために、あえて型（Type）は外しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">より厳密で実用的な関数型コードではもちろん高階関数であっても型（Type）は積極的につけていきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.7833752792962816" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.7833752792962816"><prefix style="text-align: left; padding-right: 0.5em;">18. </prefix><blocks><baselineblock class="inline"></baselineblock><block>独自の二項演算（Custom operator）、関数合成の二項演算子、パイプライン演算子の実装</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.905910029594194" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.905910029594194"><prefix style="text-align: left; padding-right: 0.25em;">18.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>道具立てを揃える</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">　関数の組み合わせ方法　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function compositon）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数（Higher-oder function）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function compositon）→　関数の連結 / 連結関数（Function concatenation/ Joint function）</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">高階関数（Higher-oder function）→　関数の合成 / 合成関数（Function compositon / Composed function）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というところまで終わったので、これで関数型プログラミングの初歩レベル、と言っても世間一般でいう初歩ではなく、相当詳細にしっかり網羅できたと思います。このことは次のレベルに進むにあたりたいへん重要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この章では、これまでの知見を踏まえて、忘れないうちに早めに道具立てを揃えておきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その上で、続く章からより深く実用性も兼ね備えた理論面に続きます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">次の項目は、あえて、すでに書かれた項目のまるまるコピペです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">その次の項目が、そのコピペの流れの続き再開ということになります。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7027727364698275" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7027727364698275"><prefix style="text-align: left; padding-right: 0.25em;">18.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Ja</block><block>vaScriptで独自の二項演算子（Custom operator）を定義する</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptでは現在このような機能はありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-operator-overloading" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-operator-overloading" target="_blank" style="color: inherit; text-decoration: inherit;">tc39/proposal-operator-overloading</a></block><block>という既存の演算子のオーバーロードの検討はあるにはありますが、まったく活発ではないようですし、残念ながらTC39にはあまり期待できません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、多少のハック的手法を許容するならば、</block><block style="font-weight: bold;">なんとかはなります</block><block>。それが本書の手法です。すべては二項演算子を活用するという根幹の目的を達成するためです。逆にこの最難関ポイントを突破することさえできれば、関数型プログラミングの見通しがクリアになり、視野は広がり、理解を深めることが容易になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、はじめてみましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>シンプルなお馴染みの </block><block style="font-weight: bold;">+</block><block> という二項演算子を用いた、加法の二項演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1 + 2 = 3</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1 + 2 + 3 = 6</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">＋</block><block>という二項演算子によって、JavaScriptのオブジェクトとして</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Number</block><block>と</block><block style="font-weight: bold;">Number</block><block>いう集合同士から</block><block style="font-weight: bold;">Number</block><block>が演算される、と代数的に定義されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、オブジェクト指向の世界に翻訳すると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Number" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank" style="color: inherit; text-decoration: inherit;">Numberオブジェクト</a></block><block>に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">＋(Number)</block><block>というメソッドが実装されていて</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Number</block><block>を返す</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということと同じです。つまり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="class-name token">Number</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"plus"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token">  </block><block class="comment token">// R is Right hand side or the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="keyword token">this</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// `this` is Left hand side of the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、</block><block style="font-weight: bold;">Number</block><block>オブジェクトに</block><block style="font-weight: bold;">plus</block><block>メソッドを拡張してやることで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とオブジェクト指向の表記で記述することも可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに、</block><block style="font-weight: bold;">plus</block><block>ではなく本当に </block><block style="font-weight: bold;">+ </block><block>という記号で拡張定義することも可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="class-name token">Number</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"+"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token">  </block><block class="comment token">// R is Right hand side or the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="keyword token">this</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// `this` is Left hand side of the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この場合は、オブジェクト指向的な </block><block style="font-size: 1.73em; font-weight: bold;">. </block><block>(ドット)記法ではSyntaxErrorになるので、代わりにプロパティ/連想配列形式でうまく書けます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と</block><block style="font-weight: bold;">車輪の再発明</block><block>をすることも可能です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同様に、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" style="color: inherit; text-decoration: inherit;">Arrayオブジェクト</a></block><block style="font-weight: bold;"> </block><block>に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">+ </block><block>という記号のプロパティで</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" target="_blank" style="color: inherit; text-decoration: inherit;">Array.concat()</a></block><block style="font-weight: bold;"> </block><block>というメソッドを拡張してしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="class-name token">Array</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"+"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token">        </block><block class="comment token">// R is Right hand side or the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="keyword token">this</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class="constant token">R</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// `this` is Left hand side of the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このコードでは、</block><block style="font-weight: bold;">this.concat(R) </block><block>と単純に</block><block style="font-weight: bold;">Array</block><block>オブジェクトメソッドを</block><block style="font-weight: bold;">  + </block><block>というオブジェクトプロパティにコピーしています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その結果、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="string token">"a"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"b"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"c"</block><block class="punctuation token">]</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="punctuation token">[</block><block class="string token">"d"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"e"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"f"</block><block class="punctuation token">]</block><block class="punctuation token">;</block><block class=" token">      </block><block class="comment token">// ["a", "b", "c", "d", "e", "f"]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書くのは言語仕様的に無理でも、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="string token">"a"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"b"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"c"</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="string token">"d"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"e"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"f"</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// ["a", "b", "c", "d", "e", "f"]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書くことは可能になりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptで独自の二項演算子（Custom operator）を定義することに成功しました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" style="color: inherit; text-decoration: inherit;">Object.defineProperty()</a></block><block style="font-weight: bold;">では、デフォルトの設定では、プロパティの値は変更することはできず、プロパティ列挙可能性がfalseになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Enumerability_and_ownership_of_properties" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Enumerability_and_ownership_of_properties" target="_blank" style="color: inherit; text-decoration: inherit;">プロパティの列挙可能性と所有権</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2963121454290285"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>列挙可能プロパティは、内部の列挙可能enumerableフラグが true に設定されているプロパティです。これは、単純な代入や初期化で作成されたプロパティのデフォルトです (Object.defineProperty で追加したプロパティはデフォルトで列挙可能性が false になります）。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6477847250540825" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6477847250540825"><prefix style="text-align: left; padding-right: 0.25em;">18.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Ja</block><block>vaScriptで独自の二項演算子（Custom operator）を定義するための関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>前項を一般化します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">この作業をここまで保留していたのは、高階関数を全力で活用するからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>高階関数の知識がないと、一体何をやっているのかわけがわからないでしょうし、誤魔化しながら説明するのは無理があったからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まず、</block><block style="font-weight: bold;">plus</block><block>関数を定義してみましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>素朴な感覚では、</block><block style="font-weight: bold;">左右にオペランドがある二項演算なので、引数が2つの二項関数の定義</block><block>になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、すでに説明した以下のとおりの考え方です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4269139432434541"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では実際に、</block><block style="font-weight: bold;">式を組み立てていく</block><block>として、</block><block style="font-weight: bold;">もっとも単純なコード</block><block>は何でしょうか？</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>おそらく</block><block style="font-weight: bold;">もっとも単純な式</block><block>とは、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">"hello"</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こんな感じでしょう。</block><block style="font-weight: bold;">これがもっとも単純な関数型のコードです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ではもう少し進んで、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class=" token"> </block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">より関数型コードらしくなりました。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なぜならば、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（Function）</block><block>と</block><block style="font-weight: bold;">演算子（Operator）</block><block>は本当は</block><block style="font-weight: bold;">同じもの</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;">  </block><block>とは</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.44em; font-weight: bold;">ｆ(x, y) </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 250px; height: 269.71px; position: relative;"><img src="image-resources/90f1aa59-c5a1-4395-923f-54580c3a44b9.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であることはすでに確認済みなので、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">1 + 2 </block><block>は実際に</block><block style="font-weight: bold;">関数（Function）</block><block>を扱う</block><block style="font-weight: bold;">式（Expression）</block><block>である関数型コードです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>よく考えると、我々は全員、小学校の義務教育の範囲内ですでに関数型コードを書いていた、ということになります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">plus(1, 2) = 3</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">plus</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">L</block><block class="parameter punctuation token">,</block><block class="parameter token"> </block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token">  </block><block class="constant token">L</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ラムダ式のプレースホルダの名前は、</block><block style="font-weight: bold;">a, b </block><block>などでは、あとあと混乱するので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算の</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">左オペランド:   L</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">右オペランド:   R</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>として表現しています。</block><block style="font-weight: bold;">表記の工夫は非常に重要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.22710128729525714"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（Function）</block><block>と</block><block style="font-weight: bold;">演算子（Operator）</block><block>は本当は</block><block style="font-weight: bold;">同じもの</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block><block style="font-size: 1.2em; font-weight: bold;">  </block><block>とは</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Binary_function" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Binary_function" target="_blank" style="color: inherit; text-decoration: inherit;">Binary function</a></block><block style="font-weight: bold;">）</block><block style="font-size: 1.44em; font-weight: bold;">ｆ(x, y) </block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ではあるのですが、すでに散々研究した諸々の明らかな理由で、</block><block style="font-weight: bold;">二項関数は使わずに、単項関数としておきたい</block><block>ので、</block><block style="font-weight: bold;">カリー化されている高階関数</block><block>を定義します。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">plus</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">R</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">L</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">L</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>高階関数の引数で、RがLより先に来ています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、最初にRの値が関数適用されたら、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;"> L =&gt; L + R</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という関数が返ってくる、という構造になっています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 155.779px; position: relative;"><img src="image-resources/f04ebd2b-0de2-48e0-ac76-dbed708f52b9.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう構造になっている理由は、この順番のほうがパイプライン演算子やCustomeOperator関数その他と整合性があるからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">plus</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">R</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">L</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">L</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block><block class=" token">              </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">         </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 3</block></blocks></line></editarea></div></compositeblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 249.765px; position: relative;"><img src="image-resources/5260f530-d987-4c78-b834-a96f32b50d31.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">;</block><block class=" token">                </block><block class="comment token">// 6</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">      </block><block class="comment token">// 6</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 55.4273px; position: relative;"><img src="image-resources/c91f4370-4a0e-427a-874b-3f3f228c4250.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この作法に合うように</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Object.defineProperty のコードを一般化すると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">customOperator</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">op</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter keyword token">set</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="keyword token">set</block><block class="punctuation token">,</block><block class=" token"> op</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token">    </block><block class="comment token">// R is Right hand side or the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">return</block><block class=" token"> </block><block class="function token">f</block><block class="punctuation token">(</block><block class="constant token">R</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="keyword token">this</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// `this` is Left hand side of the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">//returns new set/object</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptでは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">customOperator</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">op</block><block class="parameter punctuation token">:</block><block class="parameter token"> string</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="parameter token">f</block><block class="parameter punctuation token">:</block><block class="parameter token"> Function</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="operator token">&lt;</block><block class="constant token">T</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter keyword token">set</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">T</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="keyword token">set</block><block class="punctuation token">,</block><block class=" token"> op</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="parameter keyword token">this</block><block class="parameter punctuation token">:</block><block class="parameter token"> object</block><block class="parameter punctuation token">,</block><block class="parameter token"> </block><block class="parameter constant token">R</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter punctuation token">,</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="parameter operator token">&gt;</block><block class="parameter punctuation token">(</block><block class="parameter parameter token">a</block><block class="parameter parameter punctuation token">:</block><block class="parameter parameter token"> </block><block class="parameter parameter constant token">A</block><block class="parameter punctuation token">)</block><block class="parameter token"> </block><block class="parameter operator token">=&gt;</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="keyword token">return</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class="constant token">R</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="keyword token">this</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>利用方法は、以下の通り。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">plus</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">R</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">L</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">L</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'+'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">plus</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="class-name token">Number</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class=" token">         </block><block class="comment token">// 7</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 8</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">minus</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">R</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">L</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">L</block><block class=" token"> </block><block class="operator token">-</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'-'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">minus</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="class-name token">Number</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'-'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class=" token">         </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'-'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'-'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 2</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7311477713690613" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7311477713690613"><prefix style="text-align: left; padding-right: 0.25em;">18.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成の二項演算子の実装　グローバル</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算子（Pipeline Operator）</block><block>の場合は、二項演算の対象となるオペランドがすべてのJavaScriptの値であり、</block><block style="font-weight: bold;">Object.prototype</block><block>を触るのは流石に気が引けたので、逐一、値を</block><block style="font-weight: bold;">P</block><block>で包むというローカルアプローチで、いろいろ試した結果それで十分でした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、</block><block style="font-weight: bold;">関数合成演算</block><block>の場合は、</block><block style="font-weight: bold;">二項演算の対象となるオペランドは関数だけ</block><block>で、また、すべての関数には関数合成のための演算子が使えて当然だと考えるので、ローカルではなくグローバル、つまり</block><block style="font-weight: bold;">Function.prototype</block><block>を拡張してしまうアプローチを採用します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>本稿では今後この方法をメインに活用します、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>加法の二項演算の関数</block><block style="font-weight: bold;">plus</block><block>を定義したのと同様に、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成の二項演算の関数</block><block style="font-weight: bold;">compose</block><block>をまず定義します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数 f と g の合成関数は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f </block><block class="Punctuation">.</block><block class="Normal"> g </block><block class="Relation">=</block><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なので、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">compose</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="parameter token">　　g</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="parameter token">　　　　　　a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは、f(x)記法で、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">compose</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="parameter token">　　g</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="parameter token">　　　　　　a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">g</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">totype</block><block>に</block><block style="font-weight: bold;">customeOperator</block><block>を拡張します。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'.'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">compose</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="class-name token">Function</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptでは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> compose </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">C</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">g</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">b</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">C</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">g</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">declare global </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">interface</block><block class=" token"> </block><block class="class-name token">Function</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">C</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="function-variable function token">g</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">b</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">C</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">C</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>使い方は以下の通り。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">compose</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">g</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">g</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'.'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">compose</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="class-name token">Function</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">g</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> fg </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// Function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">fg</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 11</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.37009409101762736" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.37009409101762736"><prefix style="text-align: left; padding-right: 0.25em;">18.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成の二項演算子の実装　ローカル</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アプローチの2つ目は、</block><block style="font-weight: bold;">パイプライン演算子（Pipeline Operator）</block><block>における</block><block style="font-weight: bold;">P</block><block>のように、任意の関数に関数合成の二項演算子を追加するための</block><block style="font-weight: bold;">F</block><block>を定義してやることです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptのコード</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"."</block><block class=" token"> </block><block class="keyword token">in</block><block class=" token"> f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">?</block><block class=" token"> f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">:</block><block class=" token"> Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"."</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">g</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">g</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="comment token">// P(a)['&gt;'](f)['&gt;'](g))</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"."</block><block class=" token"> </block><block class="keyword token">in</block><block class=" token"> f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">?</block><block class=" token"> f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">:</block><block class=" token"> </block><block class="comment token">//.....</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、すでにメソッド（オブジェクトプロパティ）を持っている関数に重複して</block><block style="font-weight: bold;">Object.defineProperty</block><block>をしないためです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptのコード</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"."</block><block class=" token"> </block><block class="keyword token">in</block><block class=" token"> f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">?</block><block class=" token"> f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">:</block><block class=" token"> Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"."</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">C</block><block class="punctuation token">,</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">g</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">b</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">C</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">g</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//Function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="comment token">// P(a)['&gt;'](f)['&gt;'](g))</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> any</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//call signatures for js function objects</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"."</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">C</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">g</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">b</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">C</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">C</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">/* call signatures for js function objects</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">((a: A) =&gt; B)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">{ (a: A): B }</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">*/</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">//https://www.typescriptlang.org/docs/handbook/2/functions.html#call-signatures</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.typescriptlang.org/play?ts=4.4.4#code/ATDGHsDsGcBdgGLALzADwEEA0wBCA+ACgDMAuYQgQ3IwEoV89byFMcCGAoEEAIgDpewAJaRgxbjxAB+cZKnkA8gCMAVgFNQsfgBN1xUeoAKAJ3AAHdSdgBPEjgG8cAb3lTgAN0oAbAK7ryNABhLCIAc3JCZXJcemRGILjGBEIqGiTgMJIqWly3KQB6AuAjHIBtAHJ8CoBdElpK6rqwvPdgAF96SmhgSkgbAG5OSVtLRDY8RlRXKTTgOhiB4CLQH29gaGEwyEpYXxN1HuJwE2BVI99ILWEoYHA1TVhoN0dAoPDI6KYGYESf1mwv3wQxA7SGkgKACowGsNlsdnsDkcTmcLldYDcxPcNFpniBUtR5hlYpJnBRCQs8B1JJCChCCgALWCwczQUhFADuXP4o0OoBMwnMsG8fTC-BOYQKOnAoGgjL6OmU4HAAGsCgAmArES7XKDQfhMgC23gAxKtvN4ALSbba7faHYYgIqWl2ut3uj2er1u0luCAweDEACMKHJ5EgvkNyisGUowAA1MAgyCeP64OJ1aG5hGozGfpQeeAAMqwAWQLK0FMgNPwYR6SAY2yhtAAFVCcxbsarywK3r7-Zdfr18AQmdQKWI6srbiKFGzkejJgycDLLSdxTCyp0Q4DiCDY8QJCDDQq-FqJCn3dnBPDC7z8Q2pdEa57mS3M97A6-Hp36dHwizUcTzPOo63UBthFsadCmKG9gBzRdlyfct6FfTdwG3KQa3EfcANQQgEH3YDzzAiCoKvWD51zJcfhXZ8eFndDMIYz9vzYy1JHaIA" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.typescriptlang.org/play?ts=4.4.4#code/ATDGHsDsGcBdgGLALzADwEEA0wBCA+ACgDMAuYQgQ3IwEoV89byFMcCGAoEEAIgDpewAJaRgxbjxAB+cZKnkA8gCMAVgFNQsfgBN1xUeoAKAJ3AAHdSdgBPEjgG8cAb3lTgAN0oAbAK7ryNABhLCIAc3JCZXJcemRGILjGBEIqGiTgMJIqWly3KQB6AuAjHIBtAHJ8CoBdElpK6rqwvPdgAF96SmhgSkgbAG5OSVtLRDY8RlRXKTTgOhiB4CLQH29gaGEwyEpYXxN1HuJwE2BVI99ILWEoYHA1TVhoN0dAoPDI6KYGYESf1mwv3wQxA7SGkgKACowGsNlsdnsDkcTmcLldYDcxPcNFpniBUtR5hlYpJnBRCQs8B1JJCChCCgALWCwczQUhFADuXP4o0OoBMwnMsG8fTC-BOYQKOnAoGgjL6OmU4HAAGsCgAmArES7XKDQfhMgC23gAxKtvN4ALSbba7faHYYgIqWl2ut3uj2er1u0luCAweDEACMKHJ5EgvkNyisGUowAA1MAgyCeP64OJ1aG5hGozGfpQeeAAMqwAWQLK0FMgNPwYR6SAY2yhtAAFVCcxbsarywK3r7-Zdfr18AQmdQKWI6srbiKFGzkejJgycDLLSdxTCyp0Q4DiCDY8QJCDDQq-FqJCn3dnBPDC7z8Q2pdEa57mS3M97A6-Hp36dHwizUcTzPOo63UBthFsadCmKG9gBzRdlyfct6FfTdwG3KQa3EfcANQQgEH3YDzzAiCoKvWD51zJcfhXZ8eFndDMIYz9vzYy1JHaIA" target="_blank" style="color: inherit; text-decoration: inherit;">TS Playground</a></block><block>で、タイプチェックの挙動が確認できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このローカルアプローチはもちろん機能しますが、思ったより煩雑になるので、最初のグローバルアプローチのほうを採用します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数の合成演算はモノイドなので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F関数</block><block>を使ったローカル拡張</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">F</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっているのは、結構気持ち悪くて、素直に、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Function.prototype</block><block>のグローバル拡張</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とシンプルに表現しておきたいです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ただし、あとから実装するFRPライブラリでは、ライブラリなのでグローバルスペースに干渉するのは良くないので、自己完結しておくために、このローカルアプローチを採用しています。（どうせ関数合成は1箇所しか使っていない）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8629399176152406" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8629399176152406"><prefix style="text-align: left; padding-right: 0.25em;">18.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算子の実装</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>どうせ</block><block style="font-weight: bold;">” ”</block><block>で囲まれるので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">"|&gt;"</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ではなく一番シンプルに</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">"&gt;"</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を</block><block style="font-weight: bold;">パイプライン演算子のシンボルとして割り当てる</block><block>ことにします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.568362366044945"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">オブジェクト指向のメソッドを関数型の二項演算子として置き換える</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">JavaScriptで独自の二項演算子（Custom operator）を定義する</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="class-name token">Number</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"+"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="keyword token">function</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token">  </block><block class="comment token">// R is Right hand side or the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> </block><block class="keyword token">this</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// `this` is Left hand side of the Binary operator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この場合は、オブジェクト指向的な </block><block style="font-size: 1.73em; font-weight: bold;">. </block><block>(ドット)記法ではSyntaxErrorになるので、代わりにプロパティ/連想配列形式でうまく書けます。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と</block><block style="font-weight: bold;">車輪の再発明</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、すでにデモンストレーションした手法を利用して</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="class-name token">Object</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="string token">"&gt;"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">f</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">Object</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすればいいはずで、現代では、こういう</block><block style="font-weight: bold;">Object.defineProperty</block><block>を利用することで、オブジェクトプロパティの列挙はデフォルトで見えないようにできたり、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Symbol" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Symbol" target="_blank" style="color: inherit; text-decoration: inherit;">Symbol</a></block><block>を活用して、プロパティ名の衝突という、いわゆる</block><block style="font-weight: bold;">オブジェクト汚染も回避できる</block><block>のですが、いちおうさすがに</block><block style="font-weight: bold;">Object.prototype</block><block>を触るのは抵抗があることと、</block><block style="font-weight: bold;">Symbol</block><block>であると演算子のシンボル名がJavaScript変数名のルールに束縛されてしまう不自由があるので、このアプローチは選択しません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>代替案として、パイプが必要なときだけ、其の場でPipeの</block><block style="font-weight: bold;">P</block><block>という名前の関数でパイプライン演算子メソッドをもつオブジェクトで包む、というアプローチを試しましたが、実際にパイプが必要なときだけ適時使う、というのはコードはさほど煩雑にならないことが判明したので結局このアプローチを選択します。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.64304360996092" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.64304360996092"><prefix style="text-align: left; padding-right: 0.25em;">18.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block>null問題とオプション型（OptionType）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ただしいずれのケースにおいても任意のJavaScriptの値にパイプライン演算子を実装するには、</block><block style="font-weight: bold;">undefined</block><block>と</block><block style="font-weight: bold;">null</block><block>の問題があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>念の為ですが、言語組み込みでパイプライン演算子を実装する際には、コードで表記されているパイプラインを既存の関数適用のして解釈しなおせばよい、SyntaxSugaarでさえあればよい、Macroでも何でも良いですが要するに単にコード上の表記に限る問題なので、何の問題もありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そういう言語ベースでの実装ならば何の問題もないものを言語ベースでないユーザランドで実装する際に問題が出るので厄介なわけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">null</block><block>はJavaScriptにおいて例外的で特殊なオブジェクトですがメソッドを追加できません。エラーが出ます。また</block><block style="font-weight: bold;">undefined</block><block>もオブジェクトで包む</block><block style="font-weight: bold;">Object(undefined)</block><block>としても、</block><block style="font-weight: bold;">{}</block><block>と空オブジェクトになり、意味が異なってしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際これはソフトウェア開発でよく知られた問題で、一般的には</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%8C%E3%83%AB%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF#%E6%AD%B4%E5%8F%B2" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%8C%E3%83%AB%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF#%E6%AD%B4%E5%8F%B2" target="_blank" style="color: inherit; text-decoration: inherit;">ヌルポインタ</a></block><block>の問題が著名です。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.519331140232562"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2009年にアントニー・ホーアは、彼が1965年にALGOL Wの一部としてヌル参照を発明したと述べている。2009年のカンファレンスでホーアはこの発明を「10億ドルの誤り」と述べた。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それは10億ドルにも相当する私の誤りだ。null参照を発明したのは1965年のことだった。当時、私はオブジェクト指向言語 (ALGOL W) における参照のための包括的型システムを設計していた。目標は、コンパイラでの自動チェックで全ての参照が完全に安全であることを保証することだった。しかし、私は単にそれが容易だというだけで、無効な参照を含める誘惑に抵抗できなかった。これは、後に数え切れない過ち、脆弱性、システムクラッシュを引き起こし、過去40年間で10億ドル相当の苦痛と損害を引き起こしたとみられる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ただしこれは空の値をプログラミング言語がどのように実装しているか？によって別に</block><block style="font-weight: bold;">ヌルポインタに限らず問題の出方は様々</block><block>で、根本的には、実装されている</block><block style="font-weight: bold;">演算子と特殊な空の値の親和性、互換性がなく、演算が破綻する、タイプの不一致の問題です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、どのようなアプローチが正解か？というと、</block><block style="font-weight: bold;">空の値であっても明示的に、その演算が対象とするオペランドの型、あるいは集合、別の言い方では、その関数の定義域に含めれば良い</block><block>わけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このアプローチは、</block><block style="font-weight: bold;">オプション型（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Option_type" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Option_type" target="_blank" style="color: inherit; text-decoration: inherit;">Option type</a></block><block style="font-weight: bold;">）</block><block>としてよく知られています。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5912817753045427"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In programming languages (especially functional programming languages) and type theory, an </block><block style="font-weight: bold;">option type</block><block> or maybe type is a polymorphic type that represents encapsulation of an optional value; e.g., it is used as the return type of functions which may or may not return a meaningful value when they are applied. It consists of a constructor which either is empty (often named None or Nothing), or which encapsulates the original data type A (often written Just A or Some A).</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A distinct, but related concept outside of functional programming, which is popular in object-oriented programming, is called nullable types (often expressed as A?). The core difference between option types and nullable types is that option types support nesting (Maybe (Maybe A) ≠ Maybe A), while nullable types do not (String?? = String?).</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プログラミング言語（特に関数型言語）や型理論において、</block><block style="font-weight: bold;">オプション型</block><block>またはmay型は、オプション値のカプセル化を表す多相型である。例えば、関数を適用したときに意味のある値を返すかどうかわからない関数の戻り値の型として使用される。この型は、空であるか（</block><block style="font-weight: bold;">None</block><block>または</block><block style="font-weight: bold;">Nothing</block><block>と呼ばれることが多い）、または元のデータ型Aをカプセル化する（Just AまたはSome Aと呼ばれることが多い）コンストラクタで構成されます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミングとは別の概念ですが、オブジェクト指向プログラミングでよく使われる関連概念として、Nullable type（しばしば A? と表記される） オプション型とヌルアブル型の主な違いは、オプション型はネストをサポートしている（Maybe (Maybe A) ≠ Maybe A）のに対し、ヌルアブル型はサポートしていない（String??? = String?）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptにおいても、実は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Optional_chaining" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Optional_chaining" target="_blank" style="color: inherit; text-decoration: inherit;">オプショナルチェーン (?.)</a></block><block> (optional chaining)なるものが実装されていて、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8024579714986795"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">?. </block><block>演算子の機能は . チェーン演算子と似ていますが、参照が nullish (</block><block style="font-weight: bold;">null </block><block>または </block><block style="font-weight: bold;">undefined</block><block>) の場合にエラーとなるのではなく、式が短絡され </block><block style="font-weight: bold;">undefined </block><block>が返されるところが異なります。関数呼び出しで使用すると、与えられた関数が存在しない場合、</block><block style="font-weight: bold;"> undefined </block><block>を返します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、JavaScriptオブジェクトのメソッドチェーンにおいて、それなりに</block><block style="font-weight: bold;">オプション型（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Option_type" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Option_type" target="_blank" style="color: inherit; text-decoration: inherit;">Option type</a></block><block style="font-weight: bold;">）</block><block>の機能もネイティブに存在していることがわかります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ただし残念ながら今回のパイプライン演算子の実装には役立たないので、素のJavaScriptの値をオプション型に拡張すると見做し、</block><block style="font-weight: bold;">None</block><block>というパイプライン演算子と互換性のある値を新たに添加する方針で行きます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.03024857881868126" style="line-height: 1.4; font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5);" id="n0.03024857881868126"><prefix style="text-align: left; padding-right: 0.25em;">18.8. </prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算子のコード</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">None</block><block>という新しい値と型、それを判別する仕組みを取り入れると、コードは相応に複雑になり、こうなります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">customType</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">type</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter keyword token">set</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="keyword token">set</block><block class="punctuation token">,</block><block class=" token"> type</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    value</block><block class="punctuation token">:</block><block class=" token"> type</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> typeNone </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">Symbol</block><block class="punctuation token">(</block><block class="string token">"None"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> typeP </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">Symbol</block><block class="punctuation token">(</block><block class="string token">"P"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> None </block><block class="operator token">=</block><block class=" token"> Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="function token">Object</block><block class="punctuation token">(</block><block class=" token">typeNone</block><block class="punctuation token">)</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="string token">"&gt;"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">f</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">isNone</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class=" token">x </block><block class="operator token">===</block><block class=" token"> </block><block class="keyword token">undefined</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">||</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">x </block><block class="operator token">===</block><block class=" token"> </block><block class="keyword token">null</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">||</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">x </block><block class="operator token">===</block><block class=" token"> None</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">P</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function token">isNone</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">?</block><block class=" token"> None</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">X</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      typeP </block><block class="keyword token">in</block><block class=" token"> </block><block class="constant token">X</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="operator token">?</block><block class=" token"> </block><block class="constant token">X</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">:</block><block class=" token"> </block><block class="function token">customType</block><block class="punctuation token">(</block><block class=" token">typeP</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="constant token">X</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="string token">"&gt;"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="function-variable function token">value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">f</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="function token">Object</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数適用などという一番根本の部分でTypeScriptの型チェックが効いてくれないと非常に困るので、それも頑張って実装</block><block>すると、さらに複雑になります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">customType</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="parameter token">type</block><block class="parameter punctuation token">:</block><block class="parameter token"> symbol</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="operator token">&lt;</block><block class="constant token">T</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter keyword token">set</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">T</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="keyword token">set</block><block class="punctuation token">,</block><block class=" token"> type</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          value</block><block class="punctuation token">:</block><block class=" token"> type</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> typeNone </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">Symbol</block><block class="punctuation token">(</block><block class="string token">"None"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> typeP </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">Symbol</block><block class="punctuation token">(</block><block class="string token">"P"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  type None </block><block class="operator token">=</block><block class=" token"> </block><block class="keyword token">undefined</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="keyword token">null</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="keyword token">void</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="keyword token">typeof</block><block class=" token"> None</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> None </block><block class="operator token">=</block><block class=" token"> Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function token">Object</block><block class="punctuation token">(</block><block class=" token">typeNone</block><block class="punctuation token">)</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">"&gt;"</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">{</block><block class=" token"> value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> None</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="keyword token">typeof</block><block class=" token"> typeNone</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> isNone </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> None</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> x is </block><block class="parameter token">None</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class=" token">x </block><block class="operator token">===</block><block class=" token"> </block><block class="keyword token">undefined</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">||</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">x </block><block class="operator token">===</block><block class=" token"> </block><block class="keyword token">null</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">||</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">x </block><block class="operator token">===</block><block class=" token"> None</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">P</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="function token">isNone</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="operator token">?</block><block class=" token"> None</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">X</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">P</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class=" token">typeP </block><block class="keyword token">in</block><block class=" token"> </block><block class="constant token">X</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="operator token">?</block><block class=" token"> </block><block class="constant token">X</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">:</block><block class=" token"> </block><block class="function token">customType</block><block class="punctuation token">(</block><block class=" token">typeP</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="constant token">X</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="string token">"&gt;"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">}</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="function token">Object</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="keyword token">extends</block><block class=" token"> </block><block class="class-name token">P</block><block class="operator token">&lt;</block><block class=" token">unknown</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">?</block><block class=" token"> </block><block class="constant token">A</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="constant token">A</block><block class=" token"> </block><block class="keyword token">extends</block><block class=" token"> </block><block class="class-name token">None</block><block class=" token"> </block><block class="operator token">?</block><block class=" token"> None </block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  type map</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">B</block><block class=" token"> </block><block class="keyword token">extends</block><block class=" token"> </block><block class="class-name token">P</block><block class="operator token">&lt;</block><block class=" token">unknown</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">?</block><block class=" token"> </block><block class="constant token">B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="constant token">B</block><block class=" token"> </block><block class="keyword token">extends</block><block class=" token"> </block><block class="class-name token">None</block><block class=" token"> </block><block class="operator token">?</block><block class=" token"> None </block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  type </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;"</block><block class="punctuation token">:</block><block class=" token"> map</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.typescriptlang.org/play?ts=4.4.4#code/ATDGHsDsGcBcwK53AWwCoE8AOBTYBeAKBBAApZscAuYaDFAI3ABsBKAgPmJJAB40ANB1LQcsGmnb4uPHgHkGAKxyhYAOgAmOAGYBLSDgAKAJ3C5jFEWIHAKuGwG9uskgDcAhswTVblZ7IBfVgBuQm4IGHg7HAA5KDx8YABleiZmUgAiOIMMkPCoOF9cQwJk1JZMw1zQ7mjgbITgBEgtPQMNYAAfYEgEZmYu4FdwXQ7u6PBtevjQkAjChtKFZVVNHX0jU3NLf2WVWHJKBtYbDI4MgX8HIc9vGl4AISFSbRpSdxpjzmAHqQ5gQwvUjHdgBbjsdzQIo4SbQho1OYFeC6aCLRK8ACCzwAHjQMYNjjRscAUdMDJx-KRSMT8LSmi11u12J1utSCHTev1mayaXSQQiwEiAaVMTi8X9KSiGtTWP4QAB+Mk4OXAN6kAAaNEMmI4Epch2KJMgwHVKoVJrNqsQyHQlANRllLh4pD2q1aGxMZhwFgwGsuTtkZwuwCcAZ4Hi8Pkez1ewHe4u+v2+gO0MsdYaClpA6Z4rFYLqU+zT-ghUPxOGxsBwLSh2uaAGtIOAAO6Qf6KjH+N7lyvVjRQxaKxYJgBkAJ1ArqKHcWB1Ioewlj8eAGL+Pz1JAewArVZr44bTdb7Z+XbjW53fYH8WAQ+vNCTY+1C8nlHHGP+iWuQZo09n7+AAQCsAAD0wEALQQZBUHQTBsFwZBzihiQ8zIlokCwLoFAiliwgfCua7uLMyFCsYugAOYABbwOiOHLqu3zRsIDD3muDBEYikTAMw4Bkdhzx4fR0gqqRlGwJapDzCwOBqNxZHvHm4nuHkPCgfBanqfB-gocAUyJMuvSMN6BHAAA1MAACM7GCpxvF6XhBkMEZ3zuGosDgEksCkZAcnKSQqkaQFAVaUKNIAqQACsvkcYU2KhYCgKRVF1mFO4pQJawADaADkHBZQAui8SXaZCaURZlOX5YV2W5QVZFFUK7iNY1pWRdVlXaOVNVVRVBUdW1vVJf5gXDXBwWcQgpXNO6TJWdpxqJICxyzUKkDzWFi3xHmy2cZAuilcc-WkKM1YYRQITbYUCB7QtpCcmwh3HehmEYPVnEdDdU2MjgGidZV-BisAkjfOZr2FI0gJ3b9BWyVDpAwxd8A4ODpA4IN4EjRj0FjTFowtbDj2nS9CPALFuM3el+NoYToPwO4ZNha1PXdV1BPPTTwCQvT6WHX1TN1Q9VNs8TTWNVzZU87DvNdVL7WUydQvOAEQA" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://www.typescriptlang.org/play?ts=4.4.4#code/ATDGHsDsGcBcwK53AWwCoE8AOBTYBeAKBBAApZscAuYaDFAI3ABsBKAgPmJJAB40ANB1LQcsGmnb4uPHgHkGAKxyhYAOgAmOAGYBLSDgAKAJ3C5jFEWIHAKuGwG9uskgDcAhswTVblZ7IBfVgBuQm4IGHg7HAA5KDx8YABleiZmUgAiOIMMkPCoOF9cQwJk1JZMw1zQ7mjgbITgBEgtPQMNYAAfYEgEZmYu4FdwXQ7u6PBtevjQkAjChtKFZVVNHX0jU3NLf2WVWHJKBtYbDI4MgX8HIc9vGl4AISFSbRpSdxpjzmAHqQ5gQwvUjHdgBbjsdzQIo4SbQho1OYFeC6aCLRK8ACCzwAHjQMYNjjRscAUdMDJx-KRSMT8LSmi11u12J1utSCHTev1mayaXSQQiwEiAaVMTi8X9KSiGtTWP4QAB+Mk4OXAN6kAAaNEMmI4Epch2KJMgwHVKoVJrNqsQyHQlANRllLh4pD2q1aGxMZhwFgwGsuTtkZwuwCcAZ4Hi8Pkez1ewHe4u+v2+gO0MsdYaClpA6Z4rFYLqU+zT-ghUPxOGxsBwLSh2uaAGtIOAAO6Qf6KjH+N7lyvVjRQxaKxYJgBkAJ1ArqKHcWB1Ioewlj8eAGL+Pz1JAewArVZr44bTdb7Z+XbjW53fYH8WAQ+vNCTY+1C8nlHHGP+iWuQZo09n7+AAQCsAAD0wEALQQZBUHQTBsFwZBzihiQ8zIlokCwLoFAiliwgfCua7uLMyFCsYugAOYABbwOiOHLqu3zRsIDD3muDBEYikTAMw4Bkdhzx4fR0gqqRlGwJapDzCwOBqNxZHvHm4nuHkPCgfBanqfB-gocAUyJMuvSMN6BHAAA1MAACM7GCpxvF6XhBkMEZ3zuGosDgEksCkZAcnKSQqkaQFAVaUKNIAqQACsvkcYU2KhYCgKRVF1mFO4pQJawADaADkHBZQAui8SXaZCaURZlOX5YV2W5QVZFFUK7iNY1pWRdVlXaOVNVVRVBUdW1vVJf5gXDXBwWcQgpXNO6TJWdpxqJICxyzUKkDzWFi3xHmy2cZAuilcc-WkKM1YYRQITbYUCB7QtpCcmwh3HehmEYPVnEdDdU2MjgGidZV-BisAkjfOZr2FI0gJ3b9BWyVDpAwxd8A4ODpA4IN4EjRj0FjTFowtbDj2nS9CPALFuM3el+NoYToPwO4ZNha1PXdV1BPPTTwCQvT6WHX1TN1Q9VNs8TTWNVzZU87DvNdVL7WUydQvOAEQA" target="_blank" style="color: inherit; text-decoration: inherit;">TypeScript Playground</a></block><block style="font-weight: bold;">で、実際の型の挙動が確認できます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 583.054px; position: relative;"><img src="image-resources/130cdb86-cee1-4259-8dee-4c2d05150a9e.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 212.727px; position: relative;"><img src="image-resources/f1e5b5d8-8cd0-4bfc-9c61-1ed55a2dd475.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 96.9582px; position: relative;"><img src="image-resources/030bb8ab-289a-4092-be7a-effdedc64055.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際、以下のようなコード</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  type map</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">B</block><block class=" token"> </block><block class="keyword token">extends</block><block class=" token"> </block><block class="class-name token">P</block><block class="operator token">&lt;</block><block class=" token">unknown</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">?</block><block class=" token"> </block><block class="constant token">B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="constant token">B</block><block class=" token"> </block><block class="keyword token">extends</block><block class=" token"> </block><block class="class-name token">None</block><block class=" token"> </block><block class="operator token">?</block><block class=" token"> None </block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  type </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;"</block><block class="punctuation token">:</block><block class=" token"> map</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">typeP </block><block class="keyword token">in</block><block class=" token"> </block><block class="constant token">X</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="operator token">?</block><block class=" token"> </block><block class="constant token">X</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">:</block><block class=" token"> </block><block class="function token">customType</block><block class="punctuation token">(</block><block class=" token">typeP</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class=" token">Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="constant token">X</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="string token">"&gt;"</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            value</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">}</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>については特別な説明が必要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算子の特徴的な型（Type）については、次の章から説明していきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.40997325559315434" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.40997325559315434"><prefix style="text-align: left; padding-right: 0.5em;">19. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ファンクタ（Functor）すべてを包括するような代数構造</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8543204702790752" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8543204702790752"><prefix style="text-align: left; padding-right: 0.25em;">19.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>モノイド（Monoid）と同じくらい重要なファンクタ（Functor）という代数構造</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7195175207487077"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">３つの代数構造と「等しい（Equality）」という概念</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「法則」であるとか「律」と書いていると面倒くさいことになった、と感じがちでなのですが、これこそが</block><block style="font-weight: bold;">「等しい（Equality）」という超強力な概念</block><block>のことなのです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア危機＝</block><block style="font-weight: bold;">「本質的な複雑性」（essential complexity）＝組合せ爆発を回避する「等しい（Equality）」</block><block style="font-weight: bold;">という超強力な概念</block><block>が体系的に整理されています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>いろんな代数構造が体系的に分類されているのですが、そのそれぞれにおいて、何かが</block><block style="font-weight: bold;">「等しい（Equality）」</block><block>という条件で絞り込みがなされています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>本稿で気にする、扱うのはせいぜい、</block><block style="font-weight: bold;">結合性</block><block>と</block><block style="font-weight: bold;">単位元</block><block>という２つの要素だけで、双方とも、何かが</block><block style="font-weight: bold;">「等しい（Equality）」</block><block>というルールです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして本稿で具体的に扱うのは</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイド（Monoid）</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ファンクタ（Functor）</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モナド（Monad）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以上の、</block><block style="font-weight: bold;">3つの代数構造</block><block>だけで、これら</block><block style="font-weight: bold;">3つともすべて二項演算</block><block>の名前です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>おおよそこれだけで、</block><block style="font-weight: bold;">有向非巡回グラフ（DAG）</block><block>による</block><block style="font-weight: bold;">関数型リアクティブプログラミング（FunctionalReactiveProgramming）FRP</block><block>までカバーし、最終的には具体的なコードも示します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイド（Monoid）の次に同じくらい重要な代数構造が、ファンクタ（Functor）です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8478544792078755"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして本稿で具体的に扱うのは</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイド（Monoid）</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ファンクタ（Functor）</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">3. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モナド（Monad）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以上の、</block><block style="font-weight: bold;">3つの代数構造</block><block>だけで、これら</block><block style="font-weight: bold;">3つともすべて二項演算</block><block>の名前です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と予告しているとおり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functor</block><block>も</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">Binary operattion</a></block><block>）</block><block style="font-size: 1.44em; font-weight: bold;">x ◦ y</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">  </block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.022953479817873657"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">モノイドの素晴らしさ①　型（Type）が単一の閉じた二項演算</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">mono- </block><block>というのはモノトーンという言葉などがありますが</block><block style="font-weight: bold;">「単一」</block><block>という意味がある接頭語です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>日本語でも、</block><block style="font-weight: bold;">単系（たんけい、英: monoid; モノイド）</block><block>と和訳されているようですが、あまり使わず、カタカナの</block><block style="font-weight: bold;">モノイド</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なにが</block><block style="font-weight: bold;">単一（モノ）</block><block>なのか？というと、</block><block style="font-weight: bold;">型（Type）が単一</block><block>で、それが、</block><block style="font-weight: bold;">S × S → S</block><block>という式で表されています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">+</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">+</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">+</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">+</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">1 </block><block class="Binary">×</block><block class="Normal"> 2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">×</block><block class="Normal"> 3 </block><block class="Relation">=</block><block class="Normal"> 1 </block><block class="Binary">×</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">2 </block><block class="Binary">×</block><block class="Normal"> 3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で言えば、</block><block style="font-weight: bold;">Number × Number → Number</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>文字列結合なら、</block><block style="font-weight: bold;">String + String</block><block> </block><block style="font-weight: bold;">→ String</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>配列結合なら、　</block><block style="font-weight: bold;">Array concat Array → Array</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と扱う</block><block style="font-weight: bold;">型（＝集合 S）が１つだけで閉じた演算</block><block>です。つまり、</block><block style="font-weight: bold;">すべて「等しい」</block><block>わけです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5571722233051675"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">『銀の弾丸』等しくすれば組合せ爆発（Combinatorial explosion）を回避可能</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">『銀の弾などない』（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/No_Silver_Bullet" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/No_Silver_Bullet" target="_blank" style="color: inherit; text-decoration: inherit;">No Silver Bullet</a></block><block style="font-weight: bold;"> ）</block><block>というのは誤りで、</block><block style="font-weight: bold;">『銀の弾』</block><block>は実は存在していて、それは</block><block style="font-weight: bold;">「等しい（Equality）」</block><block>という超強力な概念に他なりません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェア開発、あるいはプログラミングにおける</block><block style="font-weight: bold;">「本質的な複雑性」（essential complexity）</block><block>とは、ほんとうは</block><block style="font-weight: bold;">数学的な概念で、それは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%84%E5%90%88%E3%81%9B%E7%88%86%E7%99%BA" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%84%E5%90%88%E3%81%9B%E7%88%86%E7%99%BA" target="_blank" style="color: inherit; text-decoration: inherit;">組合せ爆発</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Combinatorial_explosion" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Combinatorial_explosion" target="_blank" style="color: inherit; text-decoration: inherit;">Combinatorial explosion</a></block><block style="font-weight: bold;">）</block><block>です。</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8190024550684105"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>組合せ爆発（くみあわせばくはつ、英: combinatorial explosion）は、計算機科学、応用数学、情報工学、人工知能などの分野では、解が組合せ（combination）的な条件で定義される離散最適化問題で、問題の大きさn に対して解の数が指数関数や階乗などのオーダーで急激に大きくなってしまうために、有限時間で解あるいは最適解を発見することが困難になることをいう。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>念の為ですが、解決したい課題の対象が本質的に原理的に内在している組み合わせ爆発のことではなく、</block><block style="font-weight: bold;">プログラマが書いてしまいがちで、不注意な、あるいは、不適切な工学的アプローチによるコード自体が本質的には回避可能であるのにもかかわらず、非合理的に、無用に、組みわせ爆発を起こしている</block><block>、ということです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>無用な組合せ爆発を回避するためには、可能な限り要素を減らすこと、そして何より肝要なことは、本質的に等しいものは、等しいものとして徹底的に扱うこと、さらに必ずしも等しくなければならない要請はなくても、等しいものとして扱うことができるならば等しくする、ということです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">要素が1つしかなければ、組み合わせというのが原理的に存在しないので、組合せ爆発による問題など起こりようがありません。しかし、それぞれの要素に区別があるときは、指数関数的に組み合わせ爆発が起こり収集はつかなくなります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">数学の範疇外での余剰の工学的発明は複雑さの元凶でしかない</block><block>のですが、裏を返すと</block><block style="font-weight: bold;">「唯一正しい工学的アプローチ」『銀の弾丸』</block><block>とは、</block><block style="font-weight: bold;">組合せ爆発を回避する「等しくする」という数学的アプローチ</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイド</block><block>はまさに</block><block style="font-weight: bold;">要素が1つしかなければ、組み合わせというのが原理的に存在しない</block><block>パターンに該当していて、</block><block style="font-weight: bold;">本質的な複雑性</block><block>である</block><block style="font-weight: bold;">組合せ爆発を回避できる非常に安全な代数構造</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モノイド</block><block>は</block><block style="font-weight: bold;">工学的な観点からみると、工業規格と同じ</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9568381962146644"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">数学の範疇外での余剰の工学的発明は複雑さの元凶でしかない</block><block>のですが、裏を返すと</block><block style="font-weight: bold;">「唯一正しい工学的アプローチ」『銀の弾丸』</block><block>とは、</block><block style="font-weight: bold;">組合せ爆発を回避する「等しくする」という数学的アプローチ</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際これはソフトウェア開発に限らない一般的な工学的な問題として死活問題なので、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%B7%A5%E6%A5%AD%E8%A6%8F%E6%A0%BC" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%B7%A5%E6%A5%AD%E8%A6%8F%E6%A0%BC" target="_blank" style="color: inherit; text-decoration: inherit;">工業規格</a></block><block>という人類の経験則による知見が存在しています。ISO規格（国際標準化機構）があり、JIS（日本）など各国に規格が決定されています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>身近なところでは、電気のコンセントプラグがあり、特にプログラマにとっては、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%A6%E3%83%8B%E3%83%90%E3%83%BC%E3%82%B5%E3%83%AB%E3%83%BB%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%AB%E3%83%BB%E3%83%90%E3%82%B9" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%A6%E3%83%8B%E3%83%90%E3%83%BC%E3%82%B5%E3%83%AB%E3%83%BB%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%AB%E3%83%BB%E3%83%90%E3%82%B9" target="_blank" style="color: inherit; text-decoration: inherit;">USB</a></block><block>規格があります。</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 212.4px; position: relative;"><img src="image-resources/df86fc82-9d25-4147-a169-3c6ca02db909.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9905199793478721"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ユニバーサル・シリアル・バス（英: Universal Serial Bus、略称：USB、ユーエスビー）は、コンピュータ等の情報機器に周辺機器を接続するためのシリアルバス規格の1つ。ユニバーサル（汎用）の名の示す通り、ホスト機器にさまざまな周辺機器を接続するためのペリフェラルバス規格であり、最初の規格となるUSB 1.0は1996年に登場した。現在のパーソナルコンピュータ周辺機器において、最も普及した汎用インターフェース規格である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん、Appleのように独自の規格、つまり自前機器のエコだけで完結すれば良いだろう、というのもひとつの主張ではありますが、最近排除されて消費者に歓迎された事案は記憶に新しいところです。</block><block class="role-hyper-link" data-hyper-link-url="https://www.broadcreation.com/blog/news/83958.html" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.broadcreation.com/blog/news/83958.html" target="_blank" style="color: inherit; text-decoration: inherit;">EU スマートフォンの充電器をUSB Type-Cへ統一へ（iPhoneのLightningケーブル排除へ）</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>USBなどを使っているとわかりますが、こういう「等しさ」が担保されている概念は</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Building_block" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Building_block" target="_blank" style="color: inherit; text-decoration: inherit;">Building block</a></block><block>になります。その定められた規格内に収まってさえおれば、それらは「等しい」と見做され、自由自在に組み合わせても壊れる心配がありません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.lego.com/ja-jp" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.lego.com/ja-jp" target="_blank" style="color: inherit; text-decoration: inherit;">LEGO</a></block><block>もそれ自体がBuilding blockであり単一の接続規格で、自由自在に構築可能です。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 200px; position: relative;"><img src="image-resources/c0777480-a775-4d5f-8734-6f7af5beb5f1.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>根源的には、</block><block style="font-weight: bold;">コードの要素を等しく保つというアプローチ</block><block>で、</block><block style="font-weight: bold;">コードをUSBデバイスやLEGOブロックのように自由自在に組み合わせてもコードは壊れないと担保される、バグのでないメンテナンス性の高いコードをプログラミング可能</block><block>となります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と示したとおり、</block><block style="font-weight: bold;">モノイドは極めてシンプルな単一タイプの代数構造</block><block>で、同じタイプのブロックを安全に連結できて、</block><block style="font-weight: bold;">プログラミングのコードをレゴブロック、USBのように構築できる</block><block>、というものすごいアドバンテージがあるわけですが、逆に</block><block style="font-weight: bold;">シンプルすぎて、このモノイドだけでは関数コードを記述しきれません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.691965656634518" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.691965656634518"><prefix style="text-align: left; padding-right: 0.25em;">19.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ファンクタ（Functor）すべてを包括するような代数構造</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それというのも、そもそも、情報処理、プログラミングとは原理的に、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9682233789230692" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">型理論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Type_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Type_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Type theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（type）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）/ 写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">集合論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Set theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">始集合（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">終集合（codomain）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">解析学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Mathematical_analysis" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Mathematical_analysis" target="_blank" style="color: inherit; text-decoration: inherit;">Analysis</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">定義域（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">値域（range）と終域（codomain）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">代数学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Algebra" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Algebra" target="_blank" style="color: inherit; text-decoration: inherit;">Algebra</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）/  被演算子（operand）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">演算子（operator）</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">オブジェクト指向</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Object-oriented_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Object-oriented_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Object-oriented programming</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト（object）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">メソッド（method）</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="関数（function）" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="関数（function）" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">対象（object）/  圏（category）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">射（morphism）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.11627332957359693" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">情報処理・プログラミング</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">データ（data）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">処理（operation）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このような構造になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block><block style="font-weight: bold;">この図そのものがFunctorの概念を表しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block><block style="font-weight: bold;">Functorは二項演算で、演算子（オペレータ）と左右のオペランドがある</block><block>わけですが、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">左オペランドは、この図の左側</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">右オペランドは、この図の右側</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">図の左右では、明らかにタイプが異なります。だから単一タイプのモノイドでは役不足</block><block>であるということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>図をさらに詳しく見ると、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">左オペランドは、型＝集合</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">右オペランドは、関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>したがって、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functor</block><block>という代数構造は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A</block><block> をある型（Type）（=集合)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>f</block><block style="font-weight: bold;"> </block><block>を関数（Function）（の集合）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">・ </block><block>を二項演算子（Binary operator）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A ・</block><block> f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できる</block><block style="font-weight: bold;">二項演算</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7145097569666619"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>要するに、関数そのもので議論したりコードに書き込むよりも、</block><block style="font-weight: bold;">二項演算</block><block>として表記したほうが圧倒的にコードが簡単になり、</block><block style="font-weight: bold;">直感的に理解が可能</block><block>で、見通しがよくなりメンテナンスが楽になる、つまりバグが紛れ込むリスクが激減するというとてつもないメリットがあるので、二項演算のほうを採用したい、そして、</block><block style="font-weight: bold;">関数型プログラミングでは、二つの演算によって決まる代数的構造、つまり二項演算だけで、ほぼほぼ事が足りてしまう</block><block>のです。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書いた意図そのものです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functor</block><block style="font-weight: bold; font-style: italic;">という二項演算で全部カバーできてしまう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 34.5369px; position: relative;"><img src="image-resources/1d9ff9ba-9da8-47fa-b56b-46aaa2d1efdc.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっているので、いわゆる循環論法というか自己言及になっていますが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold; font-style: italic;">演算子</block><block>というものは根源的には、</block><block style="font-weight: bold;">関数（function）/ 写像（map）</block><block>であるので、そう読み替えると別に問題はないです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、実際にこのようにどんどん抽象度があがっていくにつれて、演算子と関数が相互にコロコロと立場を変えるようなことことが起こってきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが一番外側のアウトラインの説明で、</block><block style="font-weight: bold;">Functorという代数構造は、情報処理、プログラミングのコードを書くとき、かなり包括的かつ根源的で極めて重要な代数構造である</block><block>、と言えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.05127048885796048" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.05127048885796048"><prefix style="text-align: left; padding-right: 0.25em;">19.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Array.map()というファンクタ（Functor）を調べればわかってくること</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>一番外側のアウトラインを理解したところで、身近で具体的な事例を研究します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" style="color: inherit; text-decoration: inherit;">Array.prototype.map()</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>については、</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.11465384370807441"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>map() メソッドは、与えられた関数を配列のすべての要素に対して呼び出し、その結果からなる新しい配列を生成します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、</block><block style="font-weight: bold;">Arrayオブジェクトの便利なメソッド</block><block>として紹介されており、その使い方がひたすら解説されているだけで、その素性が解説に含まれていることはほぼありません。JavaScriptがオブジェクト指向言語として世に広まった一つの弊害ではあるでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.41809521598525556"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">既存のオブジェクトメソッドを二項演算子として捉え直す</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上記のとおり、オブジェクトメソッド表記が、オブジェクトプロパティ/連想配列形式で表記できる、というのは、逆方向に応用することも可能です。つまり、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">.</block><block class="function token">concat</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">array1</block><block class="punctuation token">[</block><block class="string token">'concat'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">array2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書き直せるということで、すでに確認したとおり、</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8892257967016699"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のオブジェクトは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88" target="_blank" style="color: inherit; text-decoration: inherit;">集合</a></block><block style="font-weight: bold;">(Sets)</block><block>に相当し、</block><block style="font-weight: bold;">二項演算の左側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドは、数学の</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">二項演算子</a></block><block style="font-weight: bold;">(Binary operatior)</block><block>に相当しており、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向のメソッドの</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%BC%95%E6%95%B0" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%BC%95%E6%95%B0" target="_blank" style="color: inherit; text-decoration: inherit;">引数</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" target="_blank" style="color: inherit; text-decoration: inherit;">Parameter</a></block><block style="font-weight: bold;">）</block><block>は、</block><block style="font-weight: bold;">二項演算の右側</block><block>の</block><block style="font-weight: bold;">被演算子（Operand）</block><block>になります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という事実が、オブジェクトメソッド表記から一旦離れることにより、意識しやすくなります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん、既にオブジェクトメソッド表記で簡潔に書けていることは間違いないので、無理に書き直す必要性はないでしょうが、あくまで二項演算子として扱うことを常に意識するためには役立つでしょう。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同様の原理で、</block><block style="font-weight: bold;">Arrayオブジェクト</block><block>には最初から</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" style="color: inherit; text-decoration: inherit;">.mapメソッド</a></block><block>が実装されていることを考慮して、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">    </block><block class="comment token">// [2, 3, 4]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'map'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// [2, 3, 4]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、</block><block style="font-weight: bold;">Array.map(f) メソッドというのは、配列Arrayと関数f との間の二項演算子 map である</block><block>、と理解できます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">'map'</block><block> は、ArrayとFuncttionからArrayを生み出す</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array 'map' Function = Array</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>[1,2,3] ['map'] (f)  = [2,3,4]</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということなのですが、基本的にArray.mapメソッドは二項演算子であり、根本的には関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項関数であるともいえますが、カリー化されている単項関数にすれば、より詳しく調べることができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、加法の二項演算について、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">plus(1, 2) = 3</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">plus</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">L</block><block class="parameter punctuation token">,</block><block class="parameter token"> </block><block class="parameter constant token">R</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token">  </block><block class="constant token">L</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ではなく、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">plus</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">R</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">L</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">L</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'+'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">plus</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="class-name token">Number</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class=" token">         </block><block class="comment token">// 7</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'+'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 8</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とやったことの繰り返しをします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Array.mapから、純粋にmap関数だけを抽出すると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">map</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こうなります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>plusという単項の高階関数の構造と見比べると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">plus</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">R</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">L</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">L</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同じ構造であることがわかるはずです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">＋</block><block>が二項演算子であるのと同じで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">mapメソッド</block><block>はオペランドである</block><block style="font-weight: bold;">Aとfの間にある二項演算子</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、ここから、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">map</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'map'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">map</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="class-name token">Array</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすると、エラーになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なぜならば、すでに存在する</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" style="color: inherit; text-decoration: inherit;">Array.prototype.map()</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>から、</block><block style="font-weight: bold;">map</block><block>を抽出して定義したので、その同じmapを再び</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array.prototype</block><block>に上書きしようとしてしまったからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">plus</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">R</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">L</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">L</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="constant token">R</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block><block class=" token"> </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block><block class=" token">              </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">         </block><block class="comment token">// 3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">plus</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 3</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書けたのと同じように、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">map</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// [ 2, 3, 4 ]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書けます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>より純粋に数式で書くと、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">[1,2,3]  &gt; map( f )</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっており、これは、オブジェクト指向のメソッド記法</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と構造が同じであることが確認できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算子のおかげで、このようにオブジェクトメソッドと関数型コードとのつながりが明白になりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、「本来のシンプルなありかた」としては、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">map関数をなにもないところから定義して、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算子で</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[1,2,3]という左オペランド</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f という右オペランド</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">の二項演算を構成する</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というやり方で十分で、わざわざArrayオブジェクトの標準メソッドとして提供されるのを待っている、ES20XXでは、便利なメソッドが新たに追加された、であるとか、そういうアプローチは不自然であるし、不要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは、クラスを設計してメソッドを組み込む、という大掛かりな作業も本当は必要はありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクトのメソッドチェーンにしても、それは結局の所、二項演算の連鎖ですから、同様に実現できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして重要なことは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'map'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書ける二項演算であるmapは、まさに、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.17242161152333169"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functor</block><block>という代数構造は、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A</block><block> をある型（Type）（=集合)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f </block><block>を関数（Function）（の集合）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">・ </block><block>を二項演算子（Binary operator）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすると、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A ・</block><block> f</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できる</block><block style="font-weight: bold;">二項演算</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というパターンにあてはまっていて、</block><block style="font-weight: bold;">mapはFunctor</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに、</block><block style="font-weight: bold;">mapを高階関数としてきちんと分離しておく</block><block>と、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">[1,2,3]  &gt; map( f )</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">map</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// [ 2, 3, 4 ]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書けます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7745050370492563" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7745050370492563"><prefix style="text-align: left; padding-right: 0.25em;">19.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算（Pipeline operation）は Identity functor</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'map'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書ける二項演算であるmapは、まさに、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.009782733695574697"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functor</block><block>という代数構造は、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A</block><block> をある型（Type）（=集合)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F</block><block> を関数（Function）（の集合）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">・ </block><block>を二項演算子（Binary operator）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすると、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A ・ F</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できる</block><block style="font-weight: bold;">二項演算</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というパターンにあてはまっていて、</block><block style="font-weight: bold;">mapはFunctor</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのであれば、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書ける二項演算であるパイプライン演算（Pipeline operation）もFunctorでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">[1,2,3]  &gt; map( f )</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">map</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// [ 2, 3, 4 ]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のかわりに、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">1 &gt; identity( f )</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> f</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">identity</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// [Number: 2]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書くことができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、identty関数というのは素通りする関数で、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">identity(f) = f</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> f</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">identity</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">===</block><block class=" token"> f  </block><block class="comment token">// true</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なので、簡略化して、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">1 &gt; f </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// [Number: 2]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算</block><block>、これは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の適用 f(x) </block><block>であるのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functor</block><block> である、ことがわかります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>特に、</block><block style="font-weight: bold;">Identity functor</block><block>と呼ばれ、</block><block style="font-weight: bold;">もっとも基本的なFunctor</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6206105522444458" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6206105522444458"><prefix style="text-align: left; padding-right: 0.25em;">19.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>FunctorはIdentity functor（関数適用）を基本とする拡張可能な代数構造</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functorは、普通の関数適用まで包括している根源的な代数構造であることが確認できました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.733023486115143"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">ファンクタ（Functor）すべてを包括するような代数構造</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それというのも、そもそも、情報処理、プログラミングとは原理的に、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9088980552773089" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9E%8B%E7%90%86%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">型理論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Type_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Type_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Type theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型（type）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）/ 写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="1" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%9B%86%E5%90%88%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">集合論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Set_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Set_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Set theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">始集合（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">終集合（codomain）</block></blocks></line></editarea></td><td data-rindex="1" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像（map）</block></blocks></line></editarea></td></tr><tr><td data-rindex="2" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E8%A7%A3%E6%9E%90%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">解析学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Mathematical_analysis" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Mathematical_analysis" target="_blank" style="color: inherit; text-decoration: inherit;">Analysis</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">定義域（domain）と</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">値域（range）と終域（codomain）</block></blocks></line></editarea></td><td data-rindex="2" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数（function）</block></blocks></line></editarea></td></tr><tr><td data-rindex="3" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%BB%A3%E6%95%B0%E5%AD%A6" target="_blank" style="color: inherit; text-decoration: inherit;">代数学</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Algebra" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Algebra" target="_blank" style="color: inherit; text-decoration: inherit;">Algebra</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">集合（set）/  被演算子（operand）</block></blocks></line></editarea></td><td data-rindex="3" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">演算子（operator）</block></blocks></line></editarea></td></tr><tr><td data-rindex="4" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">オブジェクト指向</a></block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Object-oriented_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Object-oriented_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Object-oriented programming</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="1" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">オブジェクト（object）</block></blocks></line></editarea></td><td data-rindex="4" data-cindex="2" style="padding: 0.5em; vertical-align: middle; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">メソッド（method）</block></blocks></line></editarea></td></tr><tr><td data-rindex="5" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="関数（function）" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="関数（function）" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block>）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">対象（object）/  圏（category）</block></blocks></line></editarea></td><td data-rindex="5" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">射（morphism）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.0926125479511597" style="width: 800px;"><colgroup><col style="width: 186px;"><col style="width: 259.812px;"><col style="width: 284.5px;"></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; background-color: rgba(128, 128, 128, 0.12); border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">情報処理・プログラミング</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="1" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">データ（data）</block></blocks></line></editarea></td><td data-rindex="0" data-cindex="2" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">処理（operation）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このような構造になっています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block><block style="font-weight: bold;">この図そのものがFunctorの概念を表しています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block><block style="font-weight: bold;">Functorは二項演算で、演算子（オペレータ）と左右のオペランドがある</block><block>わけですが、</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">左オペランドは、この図の左側</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">右オペランドは、この図の右側</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">図の左右では、明らかにタイプが異なります。だから単一タイプのモノイドでは役不足</block><block>であるということになります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>図をさらに詳しく見ると、</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">左オペランドは、型＝集合</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">右オペランドは、関数</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>になっています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>したがって、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functor</block><block>という代数構造は、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A</block><block> をある型（Type）（=集合)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f</block><block> を関数（Function）（の集合）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">・ </block><block>を二項演算子（Binary operator）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすると、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A ・ f</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できる</block><block style="font-weight: bold;">二項演算</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、もっと正確には、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A ・ f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ではなくて、</block><block style="font-weight: bold;">パイプライン演算=関数適用f(x)</block><block>を基本とした、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A  &gt;  f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A &gt; identity(f)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、これが</block><block style="font-weight: bold; font-style: italic;">通常の関数適用 f(x) の世界</block><block>の範囲になっている、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらにそこから、「何もしない」</block><block style="font-weight: bold;">identity関数</block><block>の代わりに「何か構造をもつ」</block><block style="font-weight: bold;">map関数</block><block>に置き換えることで、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A &gt; map(f)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と</block><block style="font-weight: bold;">二項演算</block><block>をいくらでも</block><block style="font-weight: bold;">高機能化するように拡張可能</block><block>、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それが</block><block style="font-weight: bold;">Functorという代数構造</block><block>である、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と理解できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.2502714751066093" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.2502714751066093"><prefix style="text-align: left; padding-right: 0.25em;">19.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Functorをもっと厳密にTypeScriptで定義していく</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そもそもが、</block><block style="font-weight: bold;">Functor</block><block>とは。</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A</block><block> をある型（Type）（=集合)</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f</block><block> を関数（Function）（の集合）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というような、型（Type）の構造の話であって、我々にはその型を明示できる</block><block style="font-weight: bold;">TypeScript</block><block>があるので、FunctorをTypeScriptをもって定義していきます。その作業によってよりわかってくることがあるでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちなみにですが、</block><block style="font-weight: bold;">Functor</block><block>を定義する際に、巷の関数型プログラミングの解説で多いのが、というかほとんどがそのパターンなのですが、オブジェクﾄ、JSON、それから一番最悪なのが、ES6以降の</block><block style="font-weight: bold;">クラス（Class）</block><block>をもって定義しているコードです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型のコードで、そういう水と油というか別パラダイムの道具立てを借りて、</block><block style="font-weight: bold;">Functor</block><block>というようなかなり根源的な代数構造をほら定義できました的に披露されるのは、非常にストレスですし、何かごまかされているような気になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ある程度はJSONにしても「構造体」という抽象概念としての利用はしますが、必要がなければ使いたくはないですし本質から目をそらしやすい障害になりかねません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そこで、本稿では、JavaScriptの</block><block style="font-weight: bold;">配列（Array）</block><block>を利用します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>配列（Array）はかんたんで、ほぼすべてのプログラマーにとって馴染み深く、その構造が直接可視化しやすいこと、それから</block><block style="font-weight: bold;">Array.map() </block><block>などすでに使い倒しているメソッド、関数と親和性が高いので、うってつけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まず準備段階として、基本の基本から触っていくと、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">1 &gt; identity( f )</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> f</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">identity</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// [Number: 2]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というコードを書きました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが、Identity functorと呼ばれていて、もっとも基本的なただの関数適用のFunctorなのでした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Identity関数は</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書けば、なんということはないのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>入ってくる値のタイプが、関数fであるときは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> f</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>様子が異なります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">インプットが関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">アウトプットが関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">の高階関数</block><block>となっているのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その様子を簡略化した数式で表現すると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">identity</block><block class="Binary">:</block><block class="Normal"> f</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">f</block></line></editarea></compositeblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">identity</block><block class="Binary">:</block><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">b</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">b</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 後者のほうがより高階関数の構造が明示されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に、TypeScriptで型をつけると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> identity </block><block class="operator token">=</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">identity</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">f</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter punctuation token">,</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="parameter operator token">&gt;</block><block class="parameter punctuation token">(</block><block class="parameter parameter token">a</block><block class="parameter parameter punctuation token">:</block><block class="parameter parameter token"> </block><block class="parameter parameter constant token">A</block><block class="parameter punctuation token">)</block><block class="parameter token"> </block><block class="parameter operator token">=&gt;</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> f</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これがより複雑な構造をもつmapに置き換えられるFunctorでは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area inline" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">map</block><block class="Binary">:</block><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">b</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">b</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となりますが、プレースホルダのシンボルの種類が増えてきたので、一旦仕切り直して、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2956205957688727"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functor</block><block>という代数構造は、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A</block><block> をある型（Type）（=集合)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f</block><block> を関数（Function）（の集合）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">・ </block><block>を二項演算子（Binary operator）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とすると、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A ・ f</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できる</block><block style="font-weight: bold;">二項演算</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのを</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.00604832427723867"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[A] map f  = [B]</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現できる</block><block style="font-weight: bold;">二項演算</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とまとめます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptで型をつけると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A→B  という関数で　その関数を表す小文字の f や aはプレースホルダにすぎないことに留意して、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A[] → B[] という関数で、小文字を含むFaもプレースホルダにすぎないことに留意して、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="parameter punctuation token">[</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>今、二項演算子を構成する関数を定義しようとしていているのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ある型（Type）（=集合)</block><block>というのは、そんなどこからともなく湧いてくるわけもなくて、そもそも</block><block style="font-weight: bold;">二項演算というのは、集合と二項演算子のペア</block><block>ですから、こちらもきちんと定義しておく必要があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>今は、かんたんな配列なので、</block><block style="font-weight: bold;">[]</block><block>でくくるだけで暗黙のうちにそのArray型を生み出しているわけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>きちんと明示しておくと、単純に、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">   </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう</block><block style="font-weight: bold;">何もないところから、ある特別な型（Type）を生み出す関数</block><block>のことを、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">型構築子/タイプコンストラクタ（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Type_constructor" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Type_constructor" target="_blank" style="color: inherit; text-decoration: inherit;">Type constructor</a></block><block style="font-weight: bold;">）</block><block>といいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オブジェクト指向でいうところの、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF" target="_blank" style="color: inherit; text-decoration: inherit;">コンストラクタ</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Constructor_(object-oriented_programming)" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Constructor_(object-oriented_programming)" target="_blank" style="color: inherit; text-decoration: inherit;">Constructor</a></block><block>）に該当します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptにおいてはタイプコンストラクタにも当然きちんと型（Type）がつくのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ジェネリックを使って、以下のようにタイプ定義します。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>素の値である</block><block style="font-weight: bold;">A</block><block>から、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタである</block><block style="font-weight: bold;">F</block><block>によって　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F&lt;A&gt;</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という</block><block style="font-weight: bold;">新しい型（Type）が生み出された</block><block>、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とうまく表現されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは直感的にもわかりやすく美しい表現ですし、配列に限らず他の全ての型にも一貫して応用できるので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A[]</block><block>や</block><block style="font-weight: bold;">B[]</block><block>と書く代わりに</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F&lt;A&gt;</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F&lt;B&gt;</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書いてしまって、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> map</block><block class="punctuation token">:</block><block class=" token"> map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">             </block><block class="comment token">//  [1]  type construct</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">//  [2]  mapped</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このコードでは概念をかんたんに示す目的のために「1要素だけの配列のmap」を定義しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>型定義だけを改めて抜粋すると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">このTypeScriptのコードで、かなり正確に、Functorの概念を表現できています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちなみに、Haskellでは、型定義にプレースホルダは積み増さない流儀なので、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">fmap </block><block class="punctuation token">:</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">-</block><block class="operator token">&gt;</block><block class=" token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">-</block><block class="operator token">&gt;</block><block class=" token"> f a </block><block class="operator token">-</block><block class="operator token">&gt;</block><block class=" token"> f b</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とFunctorはよりスッキリと定義されてるのですが、全く同じ意味です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptではプレースホルダは逐一明示したほうが便利だ、という方針で、そのメリットは確かに大きいですが、こういう抽象度が高い概念になると、逆に見通しが悪くなるデメリットはありますね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>視覚的に表現するとこういう概念図になるでしょう。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 187px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M368.11,48.11 L446.39,48.11 L446.39,126.39 L368.11,126.39 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(184, 233, 134); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M521.61,47.5 L599.89,47.5 L599.89,125.78 L521.61,125.78 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(184, 233, 134); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M63,87.25 C63,71.65 75.65,59 91.25,59 C106.85,59 119.5,71.65 119.5,87.25 C119.5,102.85 106.85,115.5 91.25,115.5 C75.65,115.5 63,102.85 63,87.25 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(74, 144, 226); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M210.75,57 L240.5,86.64 L210.75,116.28 L181,86.64 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(208, 2, 27); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M129,82.74 L155.1,82.74 L155.1,77.89 L172.5,87.59 L155.1,97.28 L155.1,92.43 L129,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M48.6,44.24 L257.6,44.24 L257.6,128.63 L48.6,128.63 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M464,82.74 L490.1,82.74 L490.1,77.89 L507.5,87.59 L490.1,97.28 L490.1,92.43 L464,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M288,82.74 L314.1,82.74 L314.1,77.89 L331.5,87.59 L314.1,97.28 L314.1,92.43 L288,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M379,87.25 C379,71.65 391.65,59 407.25,59 C422.85,59 435.5,71.65 435.5,87.25 C435.5,102.85 422.85,115.5 407.25,115.5 C391.65,115.5 379,102.85 379,87.25 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(74, 144, 226); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M560.75,57 L590.5,86.64 L560.75,116.28 L531,86.64 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(208, 2, 27); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M360,42.09 L606.5,42.09 L606.5,131.95 L360,131.95 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 284px; top: 98px;"><dg-editor-container data-editor-id="de5824010648083833" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">map</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 266px; top: 36px;"><dg-editor-container data-editor-id="de02711353102336056" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Functor</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 141px; top: 98px;"><dg-editor-container data-editor-id="de4584940554182271" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">f</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 448.391px; top: 95.1094px;"><dg-editor-container data-editor-id="de6623878844903981" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">map(f)</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 101px; top: 11px;"><dg-editor-container data-editor-id="de9421712060111715" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Function</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 435px; top: 9px;"><dg-editor-container data-editor-id="de943394858917816" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Function</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 120px; top: 135px;"><dg-editor-container data-editor-id="de32629183829645747" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>morphism</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 447px; top: 135px;"><dg-editor-container data-editor-id="de2673481583864483" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>morphism</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7974612616771612" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7974612616771612"><prefix style="text-align: left; padding-right: 0.25em;">19.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block>圏論（Category theory）のFunctor</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そもそも、Functorとは</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Category_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Category_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block>）で定義された概念なのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ncatlab.org/nlab/show/functor" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ncatlab.org/nlab/show/functor" target="_blank" style="color: inherit; text-decoration: inherit;">nLabのFunctorの項目</a></block><block>によると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 625.217px; position: relative;"><img src="image-resources/ee5e6651-b399-4c1d-ba13-322d29580890.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この図をみると、ちょうど、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というコードの表現がそのまま書かれていることが感じられると思います。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あとの矢印と字面については、要するに、新しい型（Type）、これは圏論では「圏（Category）」に該当するわけですが、その世界でも、</block><block style="font-weight: bold;">関数の合成（Function composition）を維持しなければならない</block><block>、という</block><block style="font-weight: bold;">圏論におけるFunctorの定義上の要請</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> map</block><block class="punctuation token">:</block><block class=" token"> map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の一番最後に、再び</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F関数というタイプコンストラクタ</block><block>に入れてしまって、</block><block style="font-weight: bold;">配列（Array）</block><block>に戻しているので、インプットとアウトプットのタイプは同一になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>配列をmapしても配列になっている、つまり接続が保証されており、連鎖できるような構造です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function composition）</block><block>は</block><block style="font-weight: bold;">、関数が連結さえすれば自然と出てきた概念で必ず成立するので、この定義上の要請は自動的に満たしています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう、</block><block style="font-weight: bold;">インプットとアウトプットのタイプが「等しい」ことが保証されているFunctorのことを特別に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">endo-Functor</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">と呼びます。そして関数型コードで扱うのはendo-Functor一択で、特に断りのない限り関数型プログラミングでFunctorというときは、暗黙の了解のように、endo-Functorつまりこういうmapやらパイプライン演算のことを指定しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そもそも</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Category_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Category_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block>）は、関数合成やFunctorのことを研究するためにはじめられた学問であり、本稿ではすでにその要点はきっちりと抑えた、ということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こと圏論においてはWikipediaの項目はあまり役に立たないのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%A2%E6%89%8B" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%A2%E6%89%8B" target="_blank" style="color: inherit; text-decoration: inherit;">関手</a></block><block>（Functor）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.22875038986084717"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>圏論における関手（かんしゅ、英: functor）は、圏から圏への構造と両立する対応付けである。関手によって一つの数学体系から別の体系への組織的な対応が定式化される。関手は「圏の圏」における射と考えることもできる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、要するに上のnLabの引用、図と同じ意味のことを言及しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.5500476687360871" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.5500476687360871"><prefix style="text-align: left; padding-right: 0.5em;">20. </prefix><blocks><baselineblock class="inline"></baselineblock><block>モナド（Monad）はファンクタ（Functor）の特別なケース</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.2915375806225118" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.2915375806225118"><prefix style="text-align: left; padding-right: 0.25em;">20.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算は関数合成（Function composition）ができる</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算</block><block>は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の適用 f(x) </block><block>であるのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Identity functor</block><block>と呼ばれる</block><block style="font-weight: bold;">もっとも基本的なFunctor</block><block>であることは理解できました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、パイプライン演算/</block><block style="font-weight: bold;">Identity functor/関数の適用</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、関数の合成（Function composition）ができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.817875874755005"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold; font-style: italic;">関数（写像）の連鎖</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の例にふたたび注目します。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 320px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="grouped-shape"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M188.5,48.74 C235.27,75.6 406.77,81.68 466.61,52.19" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8914023663176295,0.4532127770962892,-0.4532127770962892,-0.8914023663176295,467.5,51.73957824707031)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="composite-shape"><path class="real" d=" M123,196.75 C123,169.27 145.27,147 172.75,147 C200.23,147 222.5,169.27 222.5,196.75 C222.5,224.23 200.23,246.5 172.75,246.5 C145.27,246.5 123,224.23 123,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M281,196.75 C281,169.27 303.27,147 330.75,147 C358.23,147 380.5,169.27 380.5,196.75 C380.5,224.23 358.23,246.5 330.75,246.5 C303.27,246.5 281,224.23 281,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M439,196.75 C439,169.27 461.27,147 488.75,147 C516.23,147 538.5,169.27 538.5,196.75 C538.5,224.23 516.23,246.5 488.75,246.5 C461.27,246.5 439,224.23 439,196.75 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M194.5,199.74 L319.26,199.87" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.9999994516886945,-0.001047197359800095,0.001047197359800095,-0.9999994516886945,321.2604217529297,199.86978912353513)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M327.75,199.75 L492.5,199.74" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,3.6739403974420594e-16,-3.6739403974420594e-16,-1,494.49999999999994,199.7395782470703)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M191.63,202.61 C290.01,285.32 395.44,273.86 495.86,203.67" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.8172454923071096,0.5762896887015332,-0.5762896887015332,-0.8172454923071096,497.36978912353516,202.60936737060547)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g><g class="composite-shape"><path class="real" d=" M188.76,199.74 C188.76,198.15 190.05,196.87 191.63,196.87 C193.22,196.87 194.5,198.15 194.5,199.74 C194.5,201.32 193.22,202.61 191.63,202.61 C190.05,202.61 188.76,201.32 188.76,199.74 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M321.26,199.87 C321.26,198.28 322.55,197 324.13,197 C325.72,197 327,198.28 327,199.87 C327,201.45 325.72,202.74 324.13,202.74 C322.55,202.74 321.26,201.45 321.26,199.87 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M494.5,199.74 C494.5,198.15 495.78,196.87 497.37,196.87 C498.95,196.87 500.24,198.15 500.24,199.74 C500.24,201.32 498.95,202.61 497.37,202.61 C495.78,202.61 494.5,201.32 494.5,199.74 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M187,42.58 L283,43.4" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,285.00000000000006,43.41525423728813)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M305,43.5 L466,43.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,468,43.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 178px; top: 164px;"><dg-editor-container data-editor-id="de02768824600040798" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 313px; top: 164px;"><dg-editor-container data-editor-id="de83977583611005" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 486px; top: 163px;"><dg-editor-container data-editor-id="de570690544303385" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 159px; top: 111px;"><dg-editor-container data-editor-id="de9161488629976238" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 318px; top: 113px;"><dg-editor-container data-editor-id="de11210052861656106" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 477px; top: 112px;"><dg-editor-container data-editor-id="de704031140545766" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">C</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 233px; top: 168px;"><dg-editor-container data-editor-id="de5784100576329816" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 391px; top: 168px;"><dg-editor-container data-editor-id="de06687166598451211" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 327px; top: 259px;"><dg-editor-container data-editor-id="de5765457258474718" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 168px; top: 27px;"><dg-editor-container data-editor-id="de03697079976093831" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 286px; top: 28px;"><dg-editor-container data-editor-id="de7231625485274551" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 469px; top: 28px;"><dg-editor-container data-editor-id="de35294054916780127" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 221px; top: 2px;"><dg-editor-container data-editor-id="de33565219798468116" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 366px; top: 5px;"><dg-editor-container data-editor-id="de44321817101760197" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 314px; top: 73px;"><dg-editor-container data-editor-id="de39233210727253187" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、関数（写像）は</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f:  +1</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">g: +2</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と２つあって、写像が連鎖した結果、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f.g: +3</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という関数合成ができているということでした。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>どうしても、必要、というわけでもないですが、全く同じグラフを</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 206px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M274,54.5 L370,54.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,372,54.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M382,71 L382,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,382,157.99999999999994)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M274,64.67 L370.6,162.9" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.7011581929675424,-0.7130057422170528,0.7130057422170528,-0.7011581929675424,372,164.33050847457628)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 255px; top: 39px;"><dg-editor-container data-editor-id="de2972051216928653" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 39px;"><dg-editor-container data-editor-id="de5813751605754083" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 159px;"><dg-editor-container data-editor-id="de8595218680737731" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 310px; top: 19px;"><dg-editor-container data-editor-id="de5499576051197541" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 386px; top: 89px;"><dg-editor-container data-editor-id="de032761734271157916" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 283px; top: 107px;"><dg-editor-container data-editor-id="de8918678019984416" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 42px; top: 62px;"><dg-editor-container data-editor-id="de5767949221676834" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">   </block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、トライアングルにすることができます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まずデメリットは、いきなりこのグラフを示されると、最初の数直線的なグラフのイメージが湧きにくいことがあります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>メリットは、まず </block><block style="font-weight: bold;">f.g: +3 </block><block>の合成関数が曲線で書かなくてすむことや、また、そもそも関数というのは、</block><block style="font-weight: bold;">+1,+2</block><block>というような数直線上に並ぶ四則演算とは限らないので、より抽象的な操作ぽいこと、それから後々わかりますが、このほうがスペースを効率的に使っており、あとからグラフを追加しやすい、ことなどがあるでしょうか。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そのとおり、より抽象的に表現すると、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 201.906px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M282,54.61 L372,55.38" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,374.00000000000006,55.40128755364807)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M385.36,72 L384.65,157" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.008377482414770796,-0.9999649082784806,0.9999649082784806,0.008377482414770796,384.6375,158.99999999999994)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M282,68.12 L370.62,160.96" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6905037716770935,-0.7233287919747895,0.7233287919747895,-0.6905037716770935,372,162.40476190476193)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 257px; top: 39px;"><dg-editor-container data-editor-id="de6221922127994086" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 375px; top: 40px;"><dg-editor-container data-editor-id="de7379177561700421" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 160px;"><dg-editor-container data-editor-id="de5514133789232294" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">C</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 324px; top: 19px;"><dg-editor-container data-editor-id="de011206650697491272" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 388px; top: 90px;"><dg-editor-container data-editor-id="de8158245529898129" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 278px; top: 103px;"><dg-editor-container data-editor-id="de8227984908245809" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">:</block><block class="Normal">A</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">B</block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block><block class="Binary">:</block><block class="Normal">B</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">C</block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block><block class="Binary">:</block><block class="Normal">A</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">C     </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">   a</block><block class="Relation">&gt;</block><block class="Normal"> f</block><block class="Binary">⋅</block><block class="Normal">g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal">a</block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal">c                  </block></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが、関数 f と g と合成された関数である f.g の一般的なイメージとして使えます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6178361389983744" style="position: relative; top: 0px; left: 2px; width: 865px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">関数（写像）合成（Function composition）は二項演算</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f と g という2つの関数（写像）の合成</block><block>というのは、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">f と g という2つの関数の間の二項演算 f . g </block><block>であると捉えることができます。ここで、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.73em; font-style: italic;">.</block><block>　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は</block><block style="font-weight: bold;">二項演算子</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算子（Pipeline Operator）</block><block>を活用して、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">3 &gt; f &gt; g</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token">　　</block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現して、さらに、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">a </block><block class="Relation">&gt;</block><block class="Normal"> f </block><block class="Relation">&gt;</block><block class="Normal">g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Punctuation">.</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">fg = f.g</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">3 &gt; fg</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">3 &gt; (f.g)</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> fg </block><block class="operator token">=</block><block class=" token"> f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">fg</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となるような</block><block style="font-weight: bold;">関数合成の二項演算子を定義</block><block>することができます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.21591481854791605"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像の合成は、二項演算であり、それが定義される限りにおいて常に</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" target="_blank" style="color: inherit; text-decoration: inherit;">結合的</a></block><block>ということは、要するに写像の連鎖が成立している限り、</block><block style="font-weight: bold;">常に結合性</block><block>がある</block><block style="font-weight: bold;">半群（Semigroup）</block><block>であり、半群には必ず単位元がいつでも追加できるのは保証されているので、</block><block style="font-weight: bold;">関数（写像）の合成はモノイド</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3667529033609338"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">⋅</block><block class="Normal"> h</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g </block><block class="Binary">⋅</block><block class="Normal"> h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id </block><block class="Binary">⋅</block><block class="Normal"> f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> id</block></line></editarea></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに、なんで結合性があってモノイドになると良いのか？というとレゴブロックのように、あらゆる組み合わせ順序の結果が等しくなるからですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9424949326538747"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>極めて重要なことなので念の為に繰り返しますが、</block><block style="font-weight: bold;">関数合成という関数型プログラミングで極めて根本的な二項演算において、結合性がある</block><block>こと、</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.25528910907277624"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>括弧をつける位置の選び方は写像の合成の結果に影響を及ぼさないということを意味しているから、括弧を取り除いても意味を損なうことは無く、しばしば括弧を省略して</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 180px; height: 34.5813px; position: relative;"><img src="image-resources/70c9bad5-6fe2-4bef-837b-57cbb4e22ad7.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g </block><block class="Binary">⋅</block><block class="Normal"> h</block></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書かれる。写像の数がさらに増えても同様である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Binary">⋅</block><block class="Normal">h</block><block class="Relation">=</block><block class="Normal">f</block><block class="Binary">⋅</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が成立しているということは、</block><block style="font-weight: bold;">グルーピング演算子（）の位置は気にする必要がなく（）をつけてもつけなくても「等しい」こと</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g </block><block class="Binary">⋅</block><block class="Normal"> h</block></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">が保証されている</block><block>わけですから、組み合わせ爆発の危険性がない、</block><block style="font-weight: bold;">安全な代数構造</block><block>である、ということを意味しています。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6511867111974807" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6511867111974807"><prefix style="text-align: left; padding-right: 0.25em;">20.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算は</block><block style="font-weight: bold;">Identity functorで</block><block>関数合成（Function composition）ができる特別なFunctor  </block><block style="font-weight: bold;">モナド（Monad）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算</block><block>は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の適用 f(x) </block><block>であるのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Identity functor</block><block>と呼ばれる</block><block style="font-weight: bold;">もっとも基本的なFunctor</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であり、かつ</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function composition）</block><block>ができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>a &gt; f </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は</block><block style="font-weight: bold;">Functor</block><block>で、当たり前のことですが単一タイプである</block><block style="font-weight: bold;">Monoid</block><block>ではありません。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">a</block><block class="Relation">&gt;</block><block class="Normal">f</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Relation">&gt;</block><block class="Normal">g </block><block class="Relation">≠</block><block class="Normal"> a</block><block class="Relation">&gt;</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f</block><block class="Relation">&gt;</block><block class="Normal">g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、このように</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ある二項演算の合成の演算がモノイド（Monoid）を構成しているとき、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9595815056668779"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">⋅</block><block class="Normal"> h</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g </block><block class="Binary">⋅</block><block class="Normal"> h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id </block><block class="Binary">⋅</block><block class="Normal"> f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> id</block></line></editarea></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">その二項演算をモナド（Monad）と呼びます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして実は、Functorの世界では、こういう自然に、自動的に、関数合成できて、それがMonoidという安全な代数構造だ、というのは、</block><block style="font-weight: bold;">Identity functorだけ</block><block>、なんですね。特別なのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>理由はシンプルで、</block><block style="font-weight: bold;">Identity functorのタイプコンストラクタ</block><block>が、まさに</block><block style="font-weight: bold;">Identity関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> identity </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">   </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であり、普通に考えてみるとわかりますが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">5</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であるとか</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">"Hello"</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という、値が</block><block style="font-weight: bold;">Identity functorのタイプコンストラクタ</block><block>、つまり</block><block style="font-weight: bold;">Identity関数</block><block>を通ってFunctorの型（Type）になった後でも、そのまま変わらない、つまり</block><block style="font-weight: bold;">内部構造をもっていない</block><block>、からです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>他方で、配列（Array）の</block><block style="font-weight: bold;">mapFunctor</block><block>の</block><block style="font-weight: bold;">タイプコンストラクタ</block><block>では、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">   </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、そもそもが</block><block style="font-weight: bold;">なにか特別な構造をもたせるように、新しいFunctorの型（Type）を生み出している</block><block>わけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>原理的に、</block><block style="font-weight: bold;">Identity functor以外のすべてのFunctor</block><block>がそうなっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで原理的に</block><block style="font-weight: bold; font-style: italic;">Identityの「等しい」という性質がひとつ損なわれてしまっているので、その分だけきっちりと複雑性が追加されている</block><block>ことになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが、直感的な、Functorの世界では、こういう自然に、自動的に、関数合成できて、それがMonoidという安全な代数構造だ、というのは、</block><block style="font-weight: bold;">Identity functorだけ</block><block>という理解です。一番外側のアウトラインの説明です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Identity functor</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>はMonad（モナド）でもあるので、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Identity monad（恒等モナド）</block><block>と呼ばれます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Monad_(functional_programming)#Identity_monad" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Monad_(functional_programming)#Identity_monad" target="_blank" style="color: inherit; text-decoration: inherit;">Identity monad</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.833026428079455"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 460px; height: 234.089px; position: relative;"><img src="image-resources/30296ed5-a43d-44e3-bac5-8f3acabcf255.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%A2%E3%83%8A%E3%83%89_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0)#%E6%81%92%E7%AD%89%E3%83%A2%E3%83%8A%E3%83%89" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%A2%E3%83%8A%E3%83%89_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0)#%E6%81%92%E7%AD%89%E3%83%A2%E3%83%8A%E3%83%89" target="_blank" style="color: inherit; text-decoration: inherit;">恒等モナド</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3972783945436429"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 230.637px; position: relative;"><img src="image-resources/7dab7c02-ad9a-412a-94d9-4dcd3b0a4f6e.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上記の</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 150px; height: 27.2727px; position: relative;"><img src="image-resources/7553d561-b0a5-445a-a595-c558d960fcc1.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、本稿で</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold; font-size: 1.44em;">x &gt; f  =  f(x)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算 = 関数適用</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書いているのと同じです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.2418012380640775" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.2418012380640775"><prefix style="text-align: left; padding-right: 0.25em;">20.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>mapFunctorの連結の様子 Functorの合成（composition）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、実際に身近な</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Array.map()</block><block>で検証してみましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">mapFunctor</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Identity functor</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あるいは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Identity monad</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>である、</block><block style="font-weight: bold;">パイプライン演算</block><block>では、以下のように</block><block style="font-weight: bold;">関数合成（Function composition）</block><block>ができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは素朴に</block><block style="font-weight: bold;">関数の連結</block><block>のことです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 206px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M274,54.5 L370,54.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,372,54.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M382,71 L382,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,382,157.99999999999994)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M274,64.67 L370.6,162.9" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.7011581929675424,-0.7130057422170528,0.7130057422170528,-0.7011581929675424,372,164.33050847457628)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 255px; top: 39px;"><dg-editor-container data-editor-id="de34791068964857397" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 39px;"><dg-editor-container data-editor-id="de548279304256859" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 159px;"><dg-editor-container data-editor-id="de47367401982499224" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 310px; top: 19px;"><dg-editor-container data-editor-id="de087324248285088" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 386px; top: 89px;"><dg-editor-container data-editor-id="de5757085068503678" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 283px; top: 107px;"><dg-editor-container data-editor-id="de39513324206280664" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 42px; top: 62px;"><dg-editor-container data-editor-id="de7715522291889227" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">   </block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードでは、こういうなっています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3225528835465521"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パイプライン演算子（Pipeline Operator）</block><block>を活用して、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">3 &gt; f &gt; g</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token">　　</block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と表現して、さらに、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">a </block><block class="Relation">&gt;</block><block class="Normal"> f </block><block class="Relation">&gt;</block><block class="Normal">g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Punctuation">.</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">fg = f.g</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">3 &gt; fg</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">3 &gt; (f.g)</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> fg </block><block class="operator token">=</block><block class=" token"> f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">fg</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">3</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token"> </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 6</block></blocks></line></editarea></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この f と g は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>+1と+2の関数です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">g</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この関数を共有して、mapFunctorの挙動を研究してみましょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 206px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M288,54.5 L370,54.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,372,54.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M390,71 L390,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,390,157.99999999999994)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M286.5,71 L372.09,156.59" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.7071067811865477,-0.7071067811865475,0.7071067811865475,-0.7071067811865477,373.49999999999994,158)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 253px; top: 39px;"><dg-editor-container data-editor-id="de15690206495150205" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 39px;"><dg-editor-container data-editor-id="de4727257367935085" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">4</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 159px;"><dg-editor-container data-editor-id="de4461257621211616" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">6</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 286px; top: 13px;"><dg-editor-container data-editor-id="de7236750956854039" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">map</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">+</block><block class="Normal">1</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 392px; top: 88px;"><dg-editor-container data-editor-id="de9628073261363197" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal"> map</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">+</block><block class="Normal">2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 236px; top: 112px;"><dg-editor-container data-editor-id="de5541640235566747" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">map</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">+</block><block class="Normal">3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 42px; top: 62px;"><dg-editor-container data-editor-id="de4812476637672065" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">   </block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Functorの連鎖</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// [6]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>連結されたFunctor</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> fg </block><block class="operator token">=</block><block class=" token"> f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// +3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">fg</block><block class="punctuation token">)</block><block class=" token">        </block><block class="comment token">// [6]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// [6]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは成立しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この事実がまさに、</block><block style="font-weight: bold;">関数の合成（Function composition）を維持しなければならない</block><block>、という</block><block style="font-weight: bold;">圏論におけるFunctorの定義上の要請</block><block>で、</block><block style="font-weight: bold;">Functorの連結</block><block>、あるいは、</block><block style="font-weight: bold;">Functorの合成（Functor composition）</block><block>と言えます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 340.909px; position: relative;"><img src="image-resources/ef1329c4-cfff-4b50-bdcf-0dc72c71da27.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.16103620903453253"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">圏論（Category theory）のFunctor</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そもそも、Functorとは</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%9C%8F%E8%AB%96" target="_blank" style="color: inherit; text-decoration: inherit;">圏論</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Category_theory" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Category_theory" target="_blank" style="color: inherit; text-decoration: inherit;">Category theory</a></block><block>）で定義された概念なのですが、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ncatlab.org/nlab/show/functor" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ncatlab.org/nlab/show/functor" target="_blank" style="color: inherit; text-decoration: inherit;">nLabのFunctorの項目</a></block><block>によると、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 625.217px; position: relative;"><img src="image-resources/ee5e6651-b399-4c1d-ba13-322d29580890.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この図をみると、ちょうど、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というコードの表現がそのまま書かれていることが感じられると思います。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あとの矢印と字面については、要するに、新しい型（Type）、これは圏論では「圏（Category）」に該当するわけですが、その世界でも、</block><block style="font-weight: bold;">関数の合成（Function composition）を維持しなければならない</block><block>、という</block><block style="font-weight: bold;">圏論におけるFunctorの定義上の要請</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> map</block><block class="punctuation token">:</block><block class=" token"> map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の一番最後に、再び</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F関数というタイプコンストラクタ</block><block>に入れてしまって、</block><block style="font-weight: bold;">配列（Array）</block><block>に戻しているので、インプットとアウトプットのタイプは同一になります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>配列をmapしても配列になっている、つまり接続が保証されており、連鎖できるような構造です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成（Function composition）</block><block>は</block><block style="font-weight: bold;">、関数が連結さえすれば自然と出てきた概念で必ず成立するので、この定義上の要請は自動的に満たしています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう、</block><block style="font-weight: bold;">インプットとアウトプットのタイプが「等しい」ことが保証されているFunctorのことを特別に</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">endo-Functor</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">と呼びます。そして関数型コードで扱うのはendo-Functor一択で、特に断りのない限り関数型プログラミングでFunctorというときは、暗黙の了解のように、endo-Functorつまりこういうmapやらパイプライン演算のことを指定しています。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、関数型プログラミングの範囲では、</block><block style="font-weight: bold;">endoFunctorを普通に実装している限りは自動的に成立する</block><block>ので気をもむ必要はないですが、</block><block style="font-weight: bold;">Functor則（Functor law）</block><block>などと言う言葉で大上段から解説されることが多く、多くの場合意味がわからないでしょうし、わかったつもりになることはできます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、</block><block style="font-weight: bold;">表記というのは非常に重要</block><block>なので、理解しやすいようにmapというmapFunctorの二項演算子を</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>≫</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>に置き換えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>identityFunctorであるパイプライン演算子が</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>&gt;</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なので、より複雑なFunctor一般、というイメージです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>identityFunctorであるパイプライン演算では、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 206px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M274,54.5 L370,54.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,372,54.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M382,71 L382,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,382,157.99999999999994)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M274,64.67 L370.6,162.9" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.7011581929675424,-0.7130057422170528,0.7130057422170528,-0.7011581929675424,372,164.33050847457628)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 255px; top: 39px;"><dg-editor-container data-editor-id="de7913755653862058" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 39px;"><dg-editor-container data-editor-id="de3529176501698361" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 159px;"><dg-editor-container data-editor-id="de4089942749832116" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 310px; top: 19px;"><dg-editor-container data-editor-id="de01006259791115749" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 386px; top: 89px;"><dg-editor-container data-editor-id="de25139894079476055" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 283px; top: 107px;"><dg-editor-container data-editor-id="de8013468458919444" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 42px; top: 62px;"><dg-editor-container data-editor-id="de5157235904927107" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">   </block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3 </block><block class="Relation">&gt;</block><block class="Normal"> f </block><block class="Relation">&gt;</block><block class="Normal">g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> 3 </block><block class="Relation">&gt;</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Punctuation">.</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という関数合成でしたが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>mapFunctorでは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 206px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M288,54.5 L370,54.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,372,54.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M390,71 L390,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,390,157.99999999999994)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M286.5,71 L372.09,156.59" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.7071067811865477,-0.7071067811865475,0.7071067811865475,-0.7071067811865477,373.49999999999994,158)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 253px; top: 39px;"><dg-editor-container data-editor-id="de5590653231514149" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 39px;"><dg-editor-container data-editor-id="de8079683490087268" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">4</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 373px; top: 159px;"><dg-editor-container data-editor-id="de24216812672874255" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">6</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 286px; top: 13px;"><dg-editor-container data-editor-id="de5742354840783159" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">map</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">+</block><block class="Normal">1</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 392px; top: 88px;"><dg-editor-container data-editor-id="de8833337188077477" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal"> map</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">+</block><block class="Normal">2</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 236px; top: 112px;"><dg-editor-container data-editor-id="de4414474964755537" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazy lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">map</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Unary">+</block><block class="Normal">3</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 42px; top: 62px;"><dg-editor-container data-editor-id="de4008316945913959" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">   </block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Functorの連鎖</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// [6]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>合成された関数のFunctor</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> fg </block><block class="operator token">=</block><block class=" token"> f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// +3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">fg</block><block class="punctuation token">)</block><block class=" token">        </block><block class="comment token">// [6]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// [6]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>map 二項演算子を</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>≫　に置き換えて、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> f </block><block class="Relation">≫</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Punctuation">.</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということが成立しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7048382986907749" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7048382986907749"><prefix style="text-align: left; padding-right: 0.25em;">20.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>mapFunctorの合成（Functor composition）の問題点</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ところがよくよく考えてみると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f </block><block class="Punctuation">.</block><block class="Normal"> g</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、関数の合成、つまり</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>identityFunctorであるパイプライン演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>による</block><block style="font-weight: bold;">関数の合成（Function composition）</block><block>です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f </block><block class="Punctuation">.</block><block class="Normal"> g </block><block class="Relation">=</block><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これで置き換えてみると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> f </block><block class="Relation">≫</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっており、異なる二項演算子が混ざっている事が確認できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">identityFunctorであるパイプライン演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">による関数の合成では、当然、二項演算子は、パイプライン演算子ひとつだけに統一されています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3 </block><block class="Relation">&gt;</block><block class="Normal"> f </block><block class="Relation">&gt;</block><block class="Normal">g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> 3 </block><block class="Relation">&gt;</block><block class="Normal">  </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この事実は結構重大で、やはり「等しい」ことが安全な代数構造で、安全なコーディングができる、という原理原則になってきます。裏を返すと、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7119164239016376"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ある二項演算の合成の演算がモノイド（Monoid）を構成しているとき、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.07600170390056471"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">⋅</block><block class="Normal"> h</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g </block><block class="Binary">⋅</block><block class="Normal"> h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id </block><block class="Binary">⋅</block><block class="Normal"> f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> id</block></line></editarea></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">その二項演算をモナド（Monad）と呼びます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして実は、Functorの世界では、こういう自然に、自動的に、関数合成できて、それがMonoidという安全な代数構造だ、というのは、</block><block style="font-weight: bold;">Identity functorだけ</block><block>、なんですね。特別なのです。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということを反映していて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「単一の演算子で関数合成が自然に成立しており、それは自動的に結合性があることになり（）の組み合わせを気にする必要がないMonoidで、そういうIdentityFunctorはMonadと呼ばれている」</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということは、</block><block style="font-weight: bold;">mapFunctorでは自動的に成立なんてしていない</block><block>、ということを意味します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3 </block><block class="Relation">&gt;</block><block class="Normal"> f </block><block class="Relation">&gt;</block><block class="Normal">g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> 3 </block><block class="Relation">&gt;</block><block class="Normal">  </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのと同じように、mapFunctorであっても、もし、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> f </block><block class="Relation">≫</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal">f </block><block class="Relation">≫</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と二項演算子　≫</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、統一されるのであれば、それはmapFunctorでも、identityFunctorの関数合成と同じように、mapFunctorの合成ができるようになる、Monadになる、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あと、細かいことで混乱しやすいのですが、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal">f </block><block class="Relation">≫</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、二項演算の頭に、タイプコンストラクタである</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[a]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が必要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">identityFunctorであるパイプライン演算</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では必要なかったのですが、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">  </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">  </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> identity</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、二項演算の頭に、</block><block style="font-weight: bold;">identityFunctor</block><block>のタイプコンストラクタである</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">identity関数</block><block>が暗黙に存在している、と考えれば、整合性がつきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてまさにこの差の複雑性の増加により、identityFunctor以外のFunctorでは自然と単一の演算子で合成ができずMonadになっていない、と考えられます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> f </block><block class="Relation">≫</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal">f </block><block class="Relation">≫</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であると仮に想定しながら、試しに</block><block style="font-weight: bold;">Array.map()</block><block>を使って実験してみると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token">　</block><block class="comment token">// [[3]]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[3]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ではなく、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[[3]]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となってしまっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>mapFunctorのタイプコンストラクタである、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[a]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が二重に適用されてしまった結果です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これがもしidentityFunctorのタイプコンストラクタである、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>identity関数　</block><block style="font-weight: bold;">a → a</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ならば二重に適用されても構造は変わりません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最初から内部構造がない、とも言えます。安全な代数構造です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">実際に、リアル世界のコードで、このように、mapメソッドチェーンを使い倒していて、ある式を、再利用可能な関数として切り出して、別のmapメソッドチェーンに組み入れる、関数の切り貼りのシナリオは普通にありえます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そこで</block><block style="font-weight: bold;">「関数なので自動的に連結（関数合成）してくれるのだろう」と安心していたら、なんか[[]] と二重の入れ子構造になったデータが出てきた!!原因は不明だ？？というバグが発生しかねません、ということはタイムスパンはわからないですがそのうち必ず発生するでしょう。</block><block>原因不明の安全でない代数構造を放置して、それに気がつかないままコーディングをしているのだから。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、解決すべき重要な問題です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" style="color: inherit; text-decoration: inherit;">Array.map()</a></block><block>は</block><block style="font-weight: bold;">モナド（Monad）</block><block>ではありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.2780394991298569" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.2780394991298569"><prefix style="text-align: left; padding-right: 0.25em;">20.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>flatMapMonadの登場 Monadの合成（Monad composition）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この問題はある一定以上のレベルの関数型プログラマの間では認識されていて、その結果、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ES2019で新たに実装された、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" target="_blank" style="color: inherit; text-decoration: inherit;">Array.flatMap()</a></block><block style="font-weight: bold;"> メソッドがモナド（Monad</block><block>）です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-flatMap/issues/10" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-flatMap/issues/10" target="_blank" style="color: inherit; text-decoration: inherit;">https://github.com/tc39/proposal-flatMap/issues/10</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.08481094280482981"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>This proposal essentially gives native Arrays the methods they need to work as </block><block style="font-weight: bold;">Monads</block><block> (without having to extend the prototype).</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" target="_blank" style="color: inherit; text-decoration: inherit;">Array.flatMap()</a></block><block style="font-weight: bold;"> メソッド</block><block>を利用して</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token">　</block><block class="comment token">// [[3]]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と同じ実験をしてみると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token">　</block><block class="comment token">// [3]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> f </block><block class="Relation">≫</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal">f </block><block class="Relation">≫</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が想定通り、成立しました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">identityFunctorが</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">identityMonad</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">であったように、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">flatMapFunctorは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">flatMapMonadである</block><block>、といえます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">関数の合成が成立したことによって自動的に結合性もある</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8497228387872322"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%86%99%E5%83%8F%E3%81%AE%E5%90%88%E6%88%90" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%86%99%E5%83%8F%E3%81%AE%E5%90%88%E6%88%90" target="_blank" style="color: inherit; text-decoration: inherit;">写像の合成</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Function_composition" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Function_composition" target="_blank" style="color: inherit; text-decoration: inherit;">Function composition</a></block><block>）</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2258952117920452"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像の合成は、それが定義される限りにおいて常に</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" target="_blank" style="color: inherit; text-decoration: inherit;">結合的</a></block><block style="font-weight: bold;">である。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>すなわち、f, g, h がそれぞれ（合成が定義できるように）適当に選ばれた始域および終域を備えた写像であるとするならば、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 36.689px; position: relative;"><img src="image-resources/50704bcc-2cd0-4df6-9bad-0e97f2963237.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が成り立つ。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、括弧はそれが付いているところから先に合成を計算することを指し示すためのものである。これは括弧をつける位置の選び方は写像の合成の結果に影響を及ぼさないということを意味しているから、括弧を取り除いても意味を損なうことは無く、しばしば括弧を省略して</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 180px; height: 34.5813px; position: relative;"><img src="image-resources/70c9bad5-6fe2-4bef-837b-57cbb4e22ad7.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g </block><block class="Binary">⋅</block><block class="Normal"> h</block></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書かれる。写像の数がさらに増えても同様である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">写像の合成は、二項演算であり、それが定義される限りにおいて常に</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87" target="_blank" style="color: inherit; text-decoration: inherit;">結合的</a></block><block>ということは、要するに写像の連鎖が成立している限り、結合性がある</block><block style="font-weight: bold;">半群（Semigroup）</block><block>であり、半群には必ず単位元がいつでも追加できるのは保証されているので、</block><block style="font-weight: bold;">写像の合成はモノイド</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5425600271625799"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 208px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M342,65.41 L430.65,162.12" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6757188764954565,-0.7371594128461754,0.7371594128461754,-0.6757188764954565,432,163.59090909090907)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M340,174.5 L430,174.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,432,174.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M224,63.93 L318.62,162.63" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6920171924052004,-0.7218810188775043,0.7218810188775043,-0.6920171924052004,320,164.0689655172414)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M331.73,71 L330.31,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.016579868187697203,-0.9998625445384374,0.9998625445384374,0.016579868187697203,330.275,158)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M224,53.58 L320,54.4" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,322,54.41525423728813)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 388px; top: 79px;"><dg-editor-container data-editor-id="de3083245827293004" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">5</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 230px; top: 112px;"><dg-editor-container data-editor-id="de6421169748735633" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 366px; top: 173px;"><dg-editor-container data-editor-id="de012411941604139054" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">3</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 332px; top: 103px;"><dg-editor-container data-editor-id="de05098219693503858" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">2</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 260px; top: 18px;"><dg-editor-container data-editor-id="de1416483122799388" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Unary">+</block><block class="Normal">1</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 433px; top: 159px;"><dg-editor-container data-editor-id="de8292907462496992" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(208, 2, 27); fill: rgb(208, 2, 27); stroke: rgb(208, 2, 27); border-color: rgb(208, 2, 27); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">9</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 321px; top: 159px;"><dg-editor-container data-editor-id="de13052735542658112" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">6</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 323px; top: 39px;"><dg-editor-container data-editor-id="de04307460697746435" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">4</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 205px; top: 38px;"><dg-editor-container data-editor-id="de6452367972869584" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Dとhを付けて</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">h</block><block class="Binary">:</block><block class="Normal">C</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">D</block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block><block class="Binary">:</block><block class="Normal">B</block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal">D     </block></line></editarea></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 208px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g></g></g><g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M345,66.82 L430.64,158.57" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6823812024608394,-0.7309965078768154,0.7309965078768154,-0.6823812024608394,431.99999999999994,160.03571428571428)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M345,174.5 L430,174.5" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,432,174.5)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M230,67.12 L318.62,159.96" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.6905037716770935,-0.7233287919747895,0.7233287919747895,-0.6905037716770935,320,161.40476190476187)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M333.36,71 L332.65,156" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(0.008377482414770796,-0.9999649082784806,0.9999649082784806,0.008377482414770796,332.6375,158)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g><g class="connection-group"><g class="arrow-line"><path class="connection real" stroke-dasharray="" d="  M230,53.61 L320,54.38" style="stroke: rgb(0, 0, 0); stroke-width: 1; fill: none; fill-opacity: 1;"></path><g stroke="#000" transform="matrix(-0.99996343090164,-0.008552009086826611,0.008552009086826611,-0.99996343090164,322.00000000000006,54.40128755364807)" style="stroke: rgb(0, 0, 0); stroke-width: 1;"><path d=" M10.93,-3.29 Q4.96,-0.45 0,0 Q4.96,0.45 10.93,3.29"></path></g></g></g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 388px; top: 79px;"><dg-editor-container data-editor-id="de3043785201278797" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 226px; top: 102px;"><dg-editor-container data-editor-id="de7856131756349287" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 378px; top: 172px;"><dg-editor-container data-editor-id="de903474138926692" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">h</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 336px; top: 89px;"><dg-editor-container data-editor-id="de87731263728436" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">g</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 272px; top: 18px;"><dg-editor-container data-editor-id="de31084159403468514" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">f</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 433px; top: 159px;"><dg-editor-container data-editor-id="de6780729305805309" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(208, 2, 27); fill: rgb(208, 2, 27); stroke: rgb(208, 2, 27); border-color: rgb(208, 2, 27); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">D</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 321px; top: 159px;"><dg-editor-container data-editor-id="de9541249378900827" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(245, 166, 35); fill: rgb(245, 166, 35); stroke: rgb(245, 166, 35); border-color: rgb(245, 166, 35); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">C</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 323px; top: 39px;"><dg-editor-container data-editor-id="de8078305232819489" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(126, 211, 33); fill: rgb(126, 211, 33); stroke: rgb(126, 211, 33); border-color: rgb(126, 211, 33); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">B</block></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 205px; top: 38px;"><dg-editor-container data-editor-id="de4532772668273204" class="no-border-on-print math-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 17px; font-family: Asana-Math, Asana;"><editarea class="diagram-editor non-wrap lazyable no-area-container" style="color: rgb(74, 144, 226); fill: rgb(74, 144, 226); stroke: rgb(74, 144, 226); border-color: rgb(74, 144, 226); font-size: 1.44em;"><line class="" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">A</block></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f</block><block class="Binary">⋅</block><block class="Normal">g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Binary">⋅</block><block class="Normal">h</block><block class="Relation">=</block><block class="Normal">f</block><block class="Binary">⋅</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g</block><block class="Binary">⋅</block><block class="Normal">h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数合成という二項演算は、連鎖が成立している限り必ず結合性があるのがわかります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>従って、半群（Semigroup）です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、半群（Semigroup）であるならば、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.44602397612279"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">半群（Semigroup）にはいつでも単位元を追加してモノイドにできる</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということでした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6941256061479399"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">⋅</block><block class="Normal"> h</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g </block><block class="Binary">⋅</block><block class="Normal"> h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id </block><block class="Binary">⋅</block><block class="Normal"> f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> id</block></line></editarea></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.16744677234585503" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.16744677234585503"><prefix style="text-align: left; padding-right: 0.25em;">20.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Monadの左右の単位元（Identity）はタイプコンストラクタ関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block><block style="font-weight: bold;">Monadにおいては、この左右の単位元 id というのは、必ず、タイプコンストラクタ関数になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この非常に興味深い事実を検証してみます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id </block><block class="Binary">⋅</block><block class="Normal"> f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> id</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">mapFunctor / mapMonad </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のタイプコンスタクタ</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">id = a =&gt; [a]</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">id</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とし、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数</block><block style="font-weight: bold;"> f</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">id</block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とのFunctorの合成の二項演算を試行します。　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、関数 </block><block style="font-weight: bold;">f</block><block> が、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっておらず、</block><block style="font-weight: bold;">タイプコンストラクタ id</block><block> がついているのがMonad演算では特徴的で、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Monad関数</block><block>などと呼ばれますが、これは後で解説します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">mapFunctor / mapMonad </block><block>の合成の二項演算子を</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="string token">'.'</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と定義してしておきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">flatMapCompose</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="parameter token">g</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">id</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class=" token">id</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customOperator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="string token">'.'</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">flatMapCompose</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customOperator</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="string token">'.'</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">flatMapCompose</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id </block><block class="Binary">⋅</block><block class="Normal"> f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> id</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を検証したいのですが、特別な例外はあるものの、一般に</block><block style="font-weight: bold;">数学で「関数が同じかどうか比較する」ことは不可能</block><block>で、実際に値をインプットしてみてアウトプットが等しいかどうか調査する、という泥臭い方法でしかないので、ここでは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算をもって、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>値 </block><block style="font-weight: bold;">4</block><block> を</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">left center right</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>へインプットし、それぞれのアウトプットを見ています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここでの問題は、[] が二重にならないか？みたいなことでしかないので、それで十分検証できると見なせるでしょう。 </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> center </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">4</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//center  f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> left </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">4</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//e * f = f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class=" token">id</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> right </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">4</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//f * e = f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">id</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">center</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// [8]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">left</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">   </block><block class="comment token">// [8]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">right</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// [8]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class=" token"> </block><block class="number token">8</block><block class=" token"> </block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class=" token"> </block><block class="number token">8</block><block class=" token"> </block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class=" token"> </block><block class="number token">8</block><block class=" token"> </block><block class="punctuation token">]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Monadはタイプコンストラクタ関数が、左右の単位元となるような二項演算です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8105584043269354" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8105584043269354"><prefix style="text-align: left; padding-right: 0.25em;">20.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Monad</block><block>をもっと厳密にTypeScriptで定義していく</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここでは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>mapFunctor</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>flatMapMonad</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>にしていきますが、前提として、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>mapFunctorの構造をしっかりと認識しておく必要があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2541129194718428"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">Functorをもっと厳密にTypeScriptで定義していく</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptにおいてはタイプコンストラクタにも当然きちんと型（Type）がつくのですが、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ジェネリックを使って、以下のようにタイプ定義します。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>素の値である</block><block style="font-weight: bold;">A</block><block>から、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタである</block><block style="font-weight: bold;">F</block><block>によって　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F&lt;A&gt;</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という</block><block style="font-weight: bold;">新しい型（Type）が生み出された</block><block>、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とうまく表現されています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは直感的にもわかりやすく美しい表現ですし、配列に限らず他の全ての型にも一貫して応用できるので、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A[]</block><block>や</block><block style="font-weight: bold;">B[]</block><block>と書く代わりに</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F&lt;A&gt;</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F&lt;B&gt;</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書いてしまって、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> map</block><block class="punctuation token">:</block><block class=" token"> map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">             </block><block class="comment token">//  [1]  type construct</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">//  [2]  mapped</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このコードでは概念をかんたんに示す目的のために「1要素だけの配列のmap」を定義しています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>型定義だけを改めて抜粋すると、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">このTypeScriptのコードで、かなり正確に、Functorの概念を表現できています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちなみに、Haskellでは、型定義にプレースホルダは積み増さない流儀なので、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">fmap </block><block class="punctuation token">:</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">-</block><block class="operator token">&gt;</block><block class=" token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">-</block><block class="operator token">&gt;</block><block class=" token"> f a </block><block class="operator token">-</block><block class="operator token">&gt;</block><block class=" token"> f b</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とFunctorはよりスッキリと定義されてるのですが、全く同じ意味です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptではプレースホルダは逐一明示したほうが便利だ、という方針で、そのメリットは確かに大きいですが、こういう抽象度が高い概念になると、逆に見通しが悪くなるデメリットはありますね。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>視覚的に表現するとこういう概念図になるでしょう。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 187px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M368.11,48.11 L446.39,48.11 L446.39,126.39 L368.11,126.39 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(184, 233, 134); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M521.61,47.5 L599.89,47.5 L599.89,125.78 L521.61,125.78 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(184, 233, 134); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M63,87.25 C63,71.65 75.65,59 91.25,59 C106.85,59 119.5,71.65 119.5,87.25 C119.5,102.85 106.85,115.5 91.25,115.5 C75.65,115.5 63,102.85 63,87.25 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(74, 144, 226); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M210.75,57 L240.5,86.64 L210.75,116.28 L181,86.64 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(208, 2, 27); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M129,82.74 L155.1,82.74 L155.1,77.89 L172.5,87.59 L155.1,97.28 L155.1,92.43 L129,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M48.6,44.24 L257.6,44.24 L257.6,128.63 L48.6,128.63 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M464,82.74 L490.1,82.74 L490.1,77.89 L507.5,87.59 L490.1,97.28 L490.1,92.43 L464,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M288,82.74 L314.1,82.74 L314.1,77.89 L331.5,87.59 L314.1,97.28 L314.1,92.43 L288,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M379,87.25 C379,71.65 391.65,59 407.25,59 C422.85,59 435.5,71.65 435.5,87.25 C435.5,102.85 422.85,115.5 407.25,115.5 C391.65,115.5 379,102.85 379,87.25 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(74, 144, 226); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M560.75,57 L590.5,86.64 L560.75,116.28 L531,86.64 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(208, 2, 27); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M360,42.09 L606.5,42.09 L606.5,131.95 L360,131.95 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 284px; top: 98px;"><dg-editor-container data-editor-id="de3163215279552667" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">map</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 266px; top: 36px;"><dg-editor-container data-editor-id="de15968144925618954" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Functor</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 141px; top: 98px;"><dg-editor-container data-editor-id="de06709938180529473" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">f</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 448.391px; top: 95.1094px;"><dg-editor-container data-editor-id="de9363231465673443" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">map(f)</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 101px; top: 11px;"><dg-editor-container data-editor-id="de7272162757382468" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Function</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 435px; top: 9px;"><dg-editor-container data-editor-id="de2707194168287108" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Function</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 120px; top: 135px;"><dg-editor-container data-editor-id="de4336571173687258" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>morphism</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 447px; top: 135px;"><dg-editor-container data-editor-id="de4141356052371543" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>morphism</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>MonoidもFunctorもMonadも、人間の工学的な要請とは関係なくアプリオリに存在している代数構造であって、そこが、あとあと設計上の不具合が露呈しがちな、命令型の文（Statement）オブジェクト指向のクラスのあり方と本質的に異なります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Monadも別に設計するわけではなくて、Haskellのプログラマが「これは使える」と発見した代数構造です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>究極的には、こういう代数構造になっているという、形式的な説明しかできません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>mapFunctor</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>flatMapMonadがどう違うのか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というと、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%AF%BE%E7%A7%B0%E6%80%A7#:~:text=%E5%AF%BE%E7%A7%B0%E6%80%A7%EF%BC%88%E3%81%9F%E3%81%84%E3%81%97%E3%82%87%E3%81%86%E3%81%9B%E3%81%84,%E6%80%A7%E8%B3%AA%E3%81%AE%E3%81%93%E3%81%A8%E3%82%92%E3%81%84%E3%81%86%E3%80%82" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%AF%BE%E7%A7%B0%E6%80%A7#:~:text=%E5%AF%BE%E7%A7%B0%E6%80%A7%EF%BC%88%E3%81%9F%E3%81%84%E3%81%97%E3%82%87%E3%81%86%E3%81%9B%E3%81%84,%E6%80%A7%E8%B3%AA%E3%81%AE%E3%81%93%E3%81%A8%E3%82%92%E3%81%84%E3%81%86%E3%80%82" target="_blank" style="color: inherit; text-decoration: inherit;">対称性</a></block><block style="font-weight: bold;">です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">別の言葉でいうと複数の要素の型（Type）が「等しい」統一された構造になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3482526465834064"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">3 </block><block class="Relation">&gt;</block><block class="Normal"> f </block><block class="Relation">&gt;</block><block class="Normal">g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> 3 </block><block class="Relation">&gt;</block><block class="Normal">  </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのと同じように、mapFunctorであっても、もし、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> f </block><block class="Relation">≫</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal">f </block><block class="Relation">≫</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と二項演算子　≫</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、統一されるのであれば、それはmapFunctorでも、identityFunctorの関数合成と同じように、mapFunctorの合成ができるようになる、Monadになる、ということです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あと、細かいことで混乱しやすいのですが、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal">f </block><block class="Relation">≫</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、二項演算の頭に、タイプコンストラクタである</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[a]</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が必要です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">identityFunctorであるパイプライン演算</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では必要なかったのですが、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">  </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">  </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> identity</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、二項演算の頭に、</block><block style="font-weight: bold;">identityFunctor</block><block>のタイプコンストラクタである</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">identity関数</block><block>が暗黙に存在している、と考えれば、整合性がつきます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてまさにこの差の複雑性の増加により、identityFunctor以外のFunctorでは自然と単一の演算子で合成ができずMonadになっていない、と考えられます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">  a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> identity</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block></line></editarea></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal"> a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal">f </block><block class="Relation">≫</block><block class="Normal"> g</block></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>インプット　素の値</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アウトプット　タイプコンストラクタを通過した上でのFunctor値</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、いうタイプをFunctorに昇格させるような関数が自然と出てくることを確認しました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタ関数は原理的に最初からFunctor型に昇格させる型構造になっていて</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それに加えて、これまで</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>としていたものを、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token">　</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Functor型に昇格させる型構造である</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モナド関数（Monad function）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>に統一してみれば、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type flatMap </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。念の為に、mapFunctorと比較してみてください。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、型構造的には、FunctorとMonadの違いは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>としていたものを、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token">　</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Functor型に昇格させる型構造である</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">モナド関数（Monad function）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>に変えることにしたという、ただ1点のみです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆に言うと、ここを1個変えるだけで、他のタイプコンストラクタなどとMonad関数的に型が一致して統一されます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまりFunctorというかMonadを合成したいときに、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal">f </block><block class="Relation">≫</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という型構造のものが普通に入ってきても、それは仕様通りなので問題がなくなります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろんこれは、繰り返しになりますが、最初からそうなっているMonadという代数構造を後付け解釈しただけのことですが、こう考えていくと、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>IdentityFunctorでは、タイプコンストラクタが、Identity関数なので、いちいち書かなくても良くて、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token">　</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と同じものなので、自動的に諸々は統一されていて、Monadの構造になっている、と解釈することができます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7929879976801739"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">identityFunctorであるパイプライン演算</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では必要なかったのですが、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">  </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> a </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">  </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> identity</block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">&gt;</block><block class="Normal">f </block><block class="Relation">&gt;</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、二項演算の頭に、</block><block style="font-weight: bold;">identityFunctor</block><block>のタイプコンストラクタである</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">identity関数</block><block>が暗黙に存在している、と考えれば、整合性がつきます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以上が一番外側のアウトラインの説明で、flatMapMonadに限らずすべてのMonadに共通の構造です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6298029272260803" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6298029272260803"><prefix style="text-align: left; padding-right: 0.25em;">20.8. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Monadの実装にはflatという概念が使われている</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>flatMapMonadの実際の実装は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> flatMap</block><block class="punctuation token">:</block><block class=" token"> flatMap </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    Fa</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">flat</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Fa.map(f)</block><block> の値を、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">flat() </block><block>している、と結構単純なものになっています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">]</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// Monad function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">        　</block><block class="comment token">// [1]  type construct</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//  [2] flatMapped</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type flatMap </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> flatMap</block><block class="punctuation token">:</block><block class=" token"> flatMap </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    Fa</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">flat</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="constant token">F</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function token">log</block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// [2]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" target="_blank" style="color: inherit; text-decoration: inherit;">Array.prototype.flat()</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" target="_blank" style="color: inherit; text-decoration: inherit;">Array.prototype.flatMap()</a></block><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と</block><block style="font-weight: bold;">セットで同時にES2019で導入されたArrayのメソッドで、最初からflatMapというMonad構造を念頭に実装されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7415016123361016"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>flatMap() メソッドは、最初にマッピング関数を使用してそれぞれの要素をマップした後、結果を新しい配列内にフラット化します。これは、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" style="color: inherit; text-decoration: inherit;">map() </a></block><block>の後に深さ 1 の</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" target="_blank" style="color: inherit; text-decoration: inherit;"> flat() </a></block><block>を行うのと同じですが、これら 2 つのメソッドを別々にコールするよりもわずかに効率的です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Array.flatMapのタイプコンストラクタは</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">   </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう[]を積み増す方向の関数であり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆にArray.flat()は、1階層分の構造を潰す（平坦化する）方向の関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" target="_blank" style="color: inherit; text-decoration: inherit;">Array.prototype.flat()</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>からサンプルコードをそのまま引用すると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> arr1 </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">]</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">arr1</block><block class="punctuation token">.</block><block class="function token">flat</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// expected output: [0, 1, 2, 3, 4]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> arr2 </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">[</block><block class="punctuation token">[</block><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">4</block><block class="punctuation token">]</block><block class="punctuation token">]</block><block class="punctuation token">]</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">arr2</block><block class="punctuation token">.</block><block class="function token">flat</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// expected output: [0, 1, 2, [3, 4]]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>どういうMonadであっても、そのタイプコンストラクタで構築される構造があり、そのMonad演算の演算子の関数では、必ずその</block><block style="font-weight: bold; font-style: italic;">逆方向に平坦化する操作</block><block>が行われます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタは、</block><block style="font-weight: bold;">unit</block><block>と呼ばれることも多く、</block><block style="font-weight: bold;">flat</block><block>と合わせて語呂も良いので合わせて図式化してみると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 120px; height: 303.206px; position: relative;"><img src="image-resources/1442db9d-8a71-4c9f-9bbd-e0d23dfc648c.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>unit(タイプコンストラクタ) は１階層だけ上げる。　</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>flat は</block><block style="font-weight: bold;">ネストしていれば</block><block>１階層だけ下げる。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という構造になっていて、どんなMonadのflatに該当する操作でも、せっかく構築した型（Type）を破壊して、素の値がでてくるまでflatしてしまうことはありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="punctuation token">[</block><block class="number token">7</block><block class="punctuation token">]</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">flat</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token">  </block><block class="comment token">// [7]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">7</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">flat</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token">    </block><block class="comment token">// [7]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、</block><block style="font-weight: bold;">Array.flat </block><block>は、もし Array がネストしてたら、１階層下げて Array を返しますが、ネストしていなかったらそのままの Array を返します。最後の配列の皮を剥いで、裸の値 7 を返すようなことはありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block><block style="font-weight: bold;">Array.flat の返り値は必ず Array タイプである</block><block>、という基底が保証されている安全な関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.17411936577198683" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.17411936577198683"><prefix style="text-align: left; padding-right: 0.25em;">20.9. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">MonadはFunctorのより安全な上位互換となる代数構造</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にこの</block><block style="font-weight: bold;">安全装置つきのようなflatの実装</block><block>のおかげで、</block><block style="font-weight: bold;">flatMapMonadはmapFunctorと全く同じように使える上位互換のような代数構造</block><block>になっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Monad関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を使う前提であったのがftatMapMonadなのですが、mapFunctorに使うような、Monad関数ではない、これまでどおりの普通の関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f1</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を使っても、flatの基底で壊れることなくスムーズに機能します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ただし、この場合、型定義にひと工夫が必要で、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token">　</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>との両方の関数がflatMap関数へのインプットとなるので、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>としておく必要はあります。こうしておかないとタイプエラーが出ます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まとめると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type flatMap </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> flatMap</block><block class="punctuation token">:</block><block class=" token"> flatMap </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    Fa</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">flat</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f1</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="constant token">F</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B1</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function token">log</block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">   </block><block class="comment token">// [2]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function token">log</block><block class="punctuation token">(</block><block class="constant token">B1</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// [2]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>念の為ですが、これはflatMapMonadの構造の説明のために、車輪の再発明的に自前で実装しただけで、実際は</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" target="_blank" style="color: inherit; text-decoration: inherit;">Array.prototype.flatMap()</a></block><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>として、最初からメソッドが提供されているので、このように自前実装するまでもなく、使うことができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7265471990785151"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にリアル世界のコードで、このように、mapメソッドチェーンを使い倒していて、ある式を、再利用可能な関数として切り出して、別のmapメソッドチェーンに組み入れる、関数の切り貼りのシナリオは普通にありえます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そこで</block><block style="font-weight: bold;">「関数なので自動的に連結（関数合成）してくれるのだろう」と安心していたら、なんか[[]] と二重の入れ子構造になったデータが出てきた!!原因は不明だ？？というバグが発生しかねません、ということはタイムスパンはわからないですがそのうち必ず発生するでしょう。</block><block>原因不明の安全でない代数構造を放置して、それに気がつかないままコーディングをしているのだから。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、解決すべき重要な問題です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" style="color: inherit; text-decoration: inherit;">Array.map()</a></block><block>はモナド（Monad）ではありません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この問題はある一定以上のレベルの関数型プログラマの間では認識されていて、その結果、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ES2019で新たに実装された、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" target="_blank" style="color: inherit; text-decoration: inherit;">Array.flatMap()</a></block><block> メソッドが、モナド（Monad）です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-flatMap/issues/10" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-flatMap/issues/10" target="_blank" style="color: inherit; text-decoration: inherit;">https://github.com/tc39/proposal-flatMap/issues/10</a></block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3343080593871388"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>This proposal essentially gives native Arrays the methods they need to work as </block><block style="font-weight: bold;">Monads</block><block> (without having to extend the prototype).</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これで</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token">　</block><block class="comment token">// [[3]]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と同じ実験をしてみると、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token">　</block><block class="comment token">// [3]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> f </block><block class="Relation">≫</block><block class="Normal"> g </block></line><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Relation">=</block><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">3</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal"> </block><opensymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">(</hidden-span><svg style="width: 0.5em;"><path d=" M 6.27 1.70 c 0.00 -0.06 -0.04 -0.08 -0.08 -0.08 c -0.03 0.00 -0.06 0.01 -0.08 0.02 c -2.55 1.34 -4.65 3.73 -4.65 9.40 v 0.60 h 1.53 v -0.60 c 0.00 -3.23 0.64 -7.03 3.31 -9.06 c 0.12 -0.09 0.13 -0.19 0.13 -0.28 z   M 1.44 11.64 v 0.72 h 1.53 v -0.72 z" stroke="none"></path><path d=" M 6.27 22.30 c 0.00 0.06 -0.04 0.08 -0.08 0.08 c -0.03 0.00 -0.06 -0.01 -0.08 -0.02 c -2.55 -1.34 -4.65 -3.73 -4.65 -9.40 v -0.60 h 1.53 v 0.60 c 0.00 3.23 0.64 7.03 3.31 9.06 c 0.12 0.09 0.13 0.19 0.13 0.28 z" stroke="none"></path></svg></opensymbolblock><block class="Normal">a </block><compositeblock dir="ltr" class="arrow-like-symbol"><arrow-like-simple><span>→</span></arrow-like-simple></compositeblock><block class="Normal"> </block><opensymbolblock class="normal" type="bracket"><bracket-span>[</bracket-span></opensymbolblock><block class="Normal">a</block><closesymbolblock class="normal" type="bracket"><bracket-span>]</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Relation">≫</block><block class="Normal">f </block><block class="Relation">≫</block><block class="Normal"> g</block><closesymbolblock class="" type="parenthesis" style="height: 1.41176em;"><hidden-span style="margin-top: 0.0588235em; align-self: flex-start;">)</hidden-span><svg style="width: 0.5em;"><path d=" M 1.75 1.70 c 0.00 -0.06 0.04 -0.08 0.08 -0.08 c 0.03 0.00 0.06 0.01 0.08 0.02 c 2.55 1.34 4.65 3.73 4.65 9.40 v 0.60 h -1.53 v -0.60 c 0.00 -3.23 -0.64 -7.03 -3.31 -9.06 c -0.12 -0.09 -0.13 -0.19 -0.13 -0.28 z  M 6.58 11.64 v 0.72 h -1.53 v -0.72 z" stroke="none"></path><path d=" M 1.75 22.30 c 0.00 0.06 0.04 0.08 0.08 0.08 c 0.03 0.00 0.06 -0.01 0.08 -0.02 c 2.55 -1.34 4.65 -3.73 4.65 -9.40 v -0.60 h -1.53 v 0.60 c 0.00 3.23 -0.64 7.03 -3.31 9.06 c -0.12 0.09 -0.13 0.19 -0.13 0.28 z" stroke="none"></path></svg></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が想定通り、成立しました。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>identityFunctorが、identityMonadであったように、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>flatMapFunctorは同時に、flatMapMonadである、といえます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.24969274792843343"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> g</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock><block class="Normal"> </block><block class="Binary">⋅</block><block class="Normal"> h</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> </block><opensymbolblock class="normal" type="parenthesis"><bracket-span>(</bracket-span></opensymbolblock><block class="Normal">g </block><block class="Binary">⋅</block><block class="Normal"> h</block><closesymbolblock class="normal" type="parenthesis"><bracket-span>)</bracket-span></closesymbolblock></line></editarea></compositeblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id </block><block class="Binary">⋅</block><block class="Normal"> f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> id</block></line></editarea></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>すでに</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class="number token">3</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">flatMap</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token">　</block><block class="comment token">// [3]</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、JavaScriptのArrayに組み込み済みのArray.flatmapを利用していると同時に、この f も g もMonad関数を説明する前に、map()で使っていた同じf g をまったく問題なく使っていました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、その直後に、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6470670646913983"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>念の為に左右の単位元についても検証しておきます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-container-symbol role-mathmode-area display" style="font-size: 17px;"><editarea class="math-mode-font lazy lazyable no-area-container" style="font-family: Asana-Math, Asana;"><line class="taggable" style="line-height: 1.2;"><baselineblock></baselineblock><block class="Normal">id </block><block class="Binary">⋅</block><block class="Normal"> f</block><block class="Relation">=</block><block class="Normal">f</block><block class="Relation">=</block><block class="Normal">f </block><block class="Binary">⋅</block><block class="Normal"> id</block></line></editarea></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>mapFunctor / mapMonad </block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のタイプコンスタクタ</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">id = a =&gt; [a]</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">id</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とし、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数 f</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">id</block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とのFunctorの合成の二項演算を試行します。　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、関数 f が、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっておらず、</block><block style="font-weight: bold;">タイプコンストラクタ id</block><block> がついているのがMonad演算では特徴的で、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Monad関数</block><block>などと呼ばれますが、これは後で解説します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となったのですが、この</block><block style="font-weight: bold;">左右の単位元の証明</block><block>のようなときは、さすがに</block><block style="font-weight: bold;"> f がMonad関数でないと等式が成立しない</block><block>ので、Monad関数を使っています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆に言うと、そういう特別なケースではない大半の利用では、別にそれがMonadであると意識せずとも、Functorの上位互換として使えるので安全性のメリットしかないと思います。これがおそらくHaskell界隈を中心としてなんでもMonad化されている理由のひとつでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7718823715265186" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.7718823715265186"><prefix style="text-align: left; padding-right: 0.25em;">20.10. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Monadのつくりかた</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>概念としてはFunctorのほうがよほど重要で、安全性の要素を考慮しなければ、わざわざMonadを取り扱わなくても、たいていはFunctorだけでも事足ります。</block><block style="font-weight: bold;">まずは自力で必要なFunctorを自由自在に実装できるようになることが先決です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">安全装置つきのようなflatの実装</block><block>は、今回たまたまflatMapというMonadとセットでES2019で導入されていましたが、一般的には、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Functorを構築して、それから</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="font-weight: bold; flex-shrink: 0; min-width: 1em; text-align: left;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">flat的な構造を取り入れてMonadにしていく</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という流れで、flat的な構造は、タイプコンストラクタで構築した方向と逆の操作を、そのタイプの基底を壊さない安全装置つきで実装する、と自前で実装する必要があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block><block style="font-weight: bold;">新しいFunctorの構成の実例は、後半のReactiveFunctorで紹介しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.37821901300535576" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.37821901300535576"><prefix style="text-align: left; padding-right: 0.5em;">21. </prefix><blocks><baselineblock class="inline"></baselineblock><block>「非同期（Asynchronous）」と命令型プログラミングという技術的負債とasync/await</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6988724017823453" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6988724017823453"><prefix style="text-align: left; padding-right: 0.25em;">21.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ノイマン型コンピュータ</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 289.062px; position: relative;"><img src="image-resources/62ffae2f-5f24-4d10-b3e4-7f1732928924.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://japan.zdnet.com/glossary/exp/%E3%83%8E%E3%82%A4%E3%83%9E%E3%83%B3%E5%9E%8B%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF/?s=4" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://japan.zdnet.com/glossary/exp/%E3%83%8E%E3%82%A4%E3%83%9E%E3%83%B3%E5%9E%8B%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF/?s=4" target="_blank" style="color: inherit; text-decoration: inherit;">ノイマン型コンピュータ</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2519098071103183"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ノイマン型コンピュータとは</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>（ノイマンガタコンピュータ,von Neuman type computer,）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ノイマン型コンピュータとは、ハンガリー出身の数学者であるジョン・フォン・ノイマン（John von Neumann）によって提唱された、コンピュータの基本構成（アーキテクチャ）のことである。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ノイマン型コンピュータでは、記憶部に計算手続きのプログラムが内蔵され、</block><block style="font-weight: bold;">逐次処理方式で処理が行われる</block><block>。 中央演算部、制御部、記憶機構、入力部、出力部の5つの部分からなり、プログラム実行時には、主記憶装置から演算制御装置へ命令やデータが記憶レジスタを経由して転送され、</block><block style="font-weight: bold;">命令は、命令アドレスレジスタにセットされたアドレスに沿って逐次的に実行される。 今日の一般的なコンピュータシステムのほとんどが、このノイマン型である。 </block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"><border-resizing-container data-reactroot=""><border-line style="position: absolute; top: -3px; height: 6px; left: 0px; width: 837px; cursor: row-resize; background: transparent;"></border-line><border-line style="position: absolute; top: 182px; height: 6px; left: 0px; width: 837px; cursor: row-resize; background: transparent;"></border-line><border-line style="position: absolute; left: -3px; width: 6px; top: 0px; height: 185px; cursor: col-resize; background: transparent;"></border-line><border-line style="position: absolute; left: 833.5px; width: 6px; top: 0.5px; height: 184px; cursor: col-resize; background: transparent;"></border-line><border-v-resizing></border-v-resizing><border-h-resizing></border-h-resizing></border-resizing-container></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>根本的に、我々が利用して恩恵を受けている現代のコンピュータとはノイマン型であり、ハードウェアの設計として順次処理がデフォルトです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういうコンピュータというハードウェアに命令を送るプログラムとしてアセンブラ、C、と徐々に抽象化、構造化がなされてきたのですが、このマシンが特定の動作を行うように命令を送る、時系列に命令文を並べたものがコードであり、そのコードを上手に書くことこそがプログラミングである、という歴史的に確立した作法があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして本稿の冒頭で示したとおり、この作法、流儀は延々と現代まで現在進行系で継承されており、非常に不幸なことには、ある程度のプログラミング経験がある中級者以降になっても、おおよそ「これまでこうやってなんとかうまくやってきたのだから」というメンタルブロックが強烈で、なかなか当たり前として刷り込まれた作法を更新することは難しいのが現状です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ノイマン型コンピューティングで、命令を時系列で順次送り出し、コードはその時系列の順番どおりに物理的に上から下に並べたものである、というある種の常識的なイメージが強固だからでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その他には、歴史的にコンピュータのハードウェアの性能が限定的で、泥臭い命令型の順次実行ではない、より抽象的なアプローチがパフォーマンスの点で不利になっていたからだと考えられます。さらに、プログラミングではない数学であっても、順次、上から下に計算していく、というのは人間の限られた頭脳ではこちらの作法の方が負担が小さく当たり前に快適だということも考えられます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>グラフ構造が成立していることを考え、依存関係を解決していくようなアプローチは人間の頭脳では現実的ではないので、計算というのは上から下に順次処理していくのが人間にとってもわかりやすい、マシンのパフォーマンスにとってもシンプルで有利だ、とそのような事情が長らくあったのだろうと思います。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" style="line-height: 1.4; font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5);" data-line-id="n0.6657733062156239" id="n0.6657733062156239"><prefix style="text-align: left; padding-right: 0.25em;">21.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>現代ではノイマン型の命令型思考は技術的負債となっている</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%8A%80%E8%A1%93%E7%9A%84%E8%B2%A0%E5%82%B5#:~:text=%E6%8A%80%E8%A1%93%E7%9A%84%E8%B2%A0%E5%82%B5%EF%BC%88%E8%8B%B1%3A%20Technical,%E5%8F%8D%E6%98%A0%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE%E3%81%A7%E3%81%82%E3%82%8B%E3%80%82" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%8A%80%E8%A1%93%E7%9A%84%E8%B2%A0%E5%82%B5#:~:text=%E6%8A%80%E8%A1%93%E7%9A%84%E8%B2%A0%E5%82%B5%EF%BC%88%E8%8B%B1%3A%20Technical,%E5%8F%8D%E6%98%A0%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE%E3%81%A7%E3%81%82%E3%82%8B%E3%80%82" target="_blank" style="color: inherit; text-decoration: inherit;">技術的負債</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7120578649568372"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">技術的負債（英: Technical debt）、または設計負債[1]、コード負債とは、ソフトウェア開発における概念であり、時間がかかるより良いアプローチを使用する代わりに、今すぐ簡単な（限定的な）解決策を選択することで生じる追加の手直しの暗黙のコストを反映したものである[2]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>金銭的な負債と同様[3]に、技術的負債も返済されなければ、「利子」が蓄積され、変更の実施が困難になる。技術的負債を処理しないと、ソフトウェアのエントロピーが増大する。金銭的負債と同様に、技術的負債も必ずしも悪いものではなく、プロジェクトを前進させるために（概念実証として）必要な場合もある。一方で、「技術的負債」というメタファーは、その影響を最小限に抑える傾向があり、その結果、修正するために必要な作業の優先順位付けが不十分になると主張する専門家もいる[4] [5]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コードベース上で変更が開始されると、コードベースの他の部分やドキュメントにも、他の調整された変更が必要になることがよくある。完了していない必要な変更は負債とみなされ、支払われるまでは利息が上乗せされて発生するため、プロジェクトの構築が煩雑になる。この言葉は主にソフトウェア開発で使われるが、他の職業にも適用できる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ノイマン型の命令型プログラミングというアプローチはまさに</block><block style="font-weight: bold;">技術的負債という概念に合致</block><block>します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>原因としていろいろ列挙されているのですが、思い当たる事が多いです。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8128631252585454"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">原因</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>技術的負債の一般的な原因は次のとおり。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>継続的な開発：時間をかけてプロジェクトを強化していくと、</block><block style="font-weight: bold;">古いソリューションは最適ではなくなる。</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>不十分な先行定義：開発中に要件がまだ定義されていない場合、</block><block style="font-weight: bold;">設計が行われる前に開発が開始される。これは時間を節約するために行われるが、後になって手直しをしなければならないことがよくある。</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>ビジネス上のプレッシャー：必要な変更が完了する前に、ビジネスが何かをすぐにリリースすることを検討する場合、未完了の変更からなる技術的負債が蓄積される[6] [7]。</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">プロセスや理解の欠如。</block><block>企業が技術的負債の概念に気付かず、その影響を考慮せずに意思決定を行う。</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">緊密に結合されたコンポーネント。</block><block>機能がモジュール化されていないため、ソフトウェアはビジネスニーズの変化に対応できるだけの柔軟性を持たない。</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">知識の欠如：開発者がエレガントなコードの書き方を知らない場合</block><block>[7]。</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>オーナーシップの欠如：ソフトウェアの外注化により、社内のエンジニアリングが外注コードのリファクタリングやリライトを要求される場合。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">古いソリューションは最適ではなくなる</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という指摘ですが、たしかにノイマン型のハードウェアの限られたリソースや、あるいはアセンブラや、より抽象化が進んだ高級言語であってもせいぜいC言語しかない、という時代においては、命令型のアプローチは最適でありつづけました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてハードウェアがこういう単一のフレームワークの中では最適であったアプローチが、現代では、CPU自体がマルチコア化も進み、また最近特に</block><block style="font-weight: bold;">著しいクラウド化</block><block>が進み、ハードウェアと言う代物自体が単一の存在、命令を送る物理的デバイス、という意味が消滅しつつあります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E5%88%86%E6%95%A3%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0#%E6%8A%80%E8%A1%93%E7%9A%84%E5%95%8F%E9%A1%8C" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E5%88%86%E6%95%A3%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0#%E6%8A%80%E8%A1%93%E7%9A%84%E5%95%8F%E9%A1%8C" target="_blank" style="color: inherit; text-decoration: inherit;">分散コンピューティング</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.921607782491795"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>分散コンピューティング（ぶんさんコンピューティング、英: distributed computing）とは、プログラムの個々の部分が同時並行的に複数のコンピュータ上で実行され、各々がネットワークを介して互いに通信を行いながら全体として処理が進行する計算手法のことである。複雑な計算などをネットワークを介して複数のコンピュータを利用して行うことで、一台のコンピュータで計算するよりスループットを上げようとする取り組み、またはそれを実現する為の仕組みである。分散処理（ぶんさんしょり）ともいう。並列コンピューティングの一形態に分類されるが、一般に並列コンピューティングと言えば、同時並行に実行する主体は同じコンピュータシステム内のCPU群である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E4%B8%A6%E5%88%97%E8%A8%88%E7%AE%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E4%B8%A6%E5%88%97%E8%A8%88%E7%AE%97" target="_blank" style="color: inherit; text-decoration: inherit;">並列計算</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8477815612309616"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>並列計算（へいれつけいさん、英語: parallel computing）は、コンピュータにおいて特定の処理をいくつかの独立した小さな処理に細分化し、複数の処理装置（プロセッサ）上でそれぞれの処理を同時に実行させることである[1]。並列コンピューティングや並列処理とも呼ばれる。大きな問題を解いたり、大量のデータを処理したりする過程は、より小さなサブタスクやサブデータグループの処理に分割できることが多い、という事実を利用して単位時間あたりの処理効率（スループット）の向上を図る手法である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.20803285730414922"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">可能性と問題点</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>並列計算は、プロセッサ同士が独立して同時に仕事をするため、理想的な状況下ではプロセッサの回路規模を大きくすること無く、プロセッサの数に比例して処理性能が向上できると考えられ、スーパーコンピュータなどで古くから採られた手法である。スーパーコンピュータの高い性能は、プロセッサ数やノード数がパーソナルコンピュータに比べて極めて多く、並列処理性能が高いことも重要な要因である[2]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、問題点もある。並列計算を行う場合、もっともパフォーマンスを発揮するのはこれら複数のプロセッサが全て100%使い切られた時と考えられるが、</block><block style="font-weight: bold;">従来のプログラムの多くは、複数のプロセッサを均等に全て使い切るようにはできておらず、また、そういったプログラミングは難しい。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"><border-resizing-container data-reactroot=""><border-line style="position: absolute; top: -3px; height: 6px; left: 0px; width: 837px; cursor: row-resize; background: transparent;"></border-line><border-line style="position: absolute; top: 207.188px; height: 6px; left: 0px; width: 837px; cursor: row-resize; background: transparent;"></border-line><border-line style="position: absolute; left: -3px; width: 6px; top: 0px; height: 210.188px; cursor: col-resize; background: transparent;"></border-line><border-line style="position: absolute; left: 833.5px; width: 6px; top: 0.5px; height: 209.188px; cursor: col-resize; background: transparent;"></border-line><border-v-resizing></border-v-resizing><border-h-resizing></border-h-resizing></border-resizing-container></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.05286369301223193"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">背景</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">従来、コンピュータソフトウェアは逐次的に計算されるものとして書かれてきた。問題を解くためにアルゴリズムが構築され、それによって逐次的に実行される命令列が生成される。その命令列は、コンピュータのCPU上で実行される。命令は一度に1つずつ実行される[3]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>一方並列計算では、複数の計算ノードが同時並行的に動作して問題を解く。問題は独立した部分に分割され、各計算ノードがアルゴリズムの一部を同時並行的に実行する。計算ノードの実体は様々であり、マルチプロセッサ型のコンピュータの各CPUだったり、ネットワーク上のコンピュータだったり、専用ハードウェアだったり、それらの組合せだったりする[3]。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、</block><block style="font-weight: bold;">「従来のハードウェア構成」にとって最適でありつづけた「従来のソフトウェア」というのは、「現代のハードウェア構成」においては、そっくりそのまま技術的負債</block><block>となってしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、怠惰や惰性によってすでに技術的負債となってしまっているアイデアをデフォルトと位置づけて安心していると、それは全部</block><block style="font-weight: bold;">「解決すべきなのだが、解決がとても難しい問題」</block><block>となって必ずしっぺ返しを食らうことになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「現代のハードウェア構成」というのは</block><block class="role-hyper-link" data-hyper-link-url="https://aws.amazon.com/jp/free/?trk=ps_a134p000003yhoPAAQ&amp;trkCampaign=acq_paid_search_brand&amp;sc_channel=ps&amp;sc_campaign=acquisition_JP&amp;sc_publisher=google&amp;sc_category=core-main&amp;sc_country=JP&amp;sc_geo=JP&amp;sc_outcome=devadopt&amp;sc_detail=aws&amp;sc_content=Brand_Core_aws_e&amp;sc_matchtype=e&amp;sc_segment=487544183164&amp;sc_medium=ACQ-P|PS-GO|Brand|Desktop|SU|Core-Main|Core|JP|EN|Text|dx&amp;ef_id=Cj0KCQiAnaeNBhCUARIsABEee8VZTiyQFd6vFD8sVQSs2xwNvBujeC-R0LYdxQMLaonyPtmNI67xOSEaAhQjEALw_wcB:G:s&amp;s_kwcid=AL!4422!3!487544183164!e!!g!!aws&amp;gclid=Cj0KCQiAnaeNBhCUARIsABEee8VZTiyQFd6vFD8sVQSs2xwNvBujeC-R0LYdxQMLaonyPtmNI67xOSEaAhQjEALw_wcB&amp;all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc&amp;awsf.Free%20Tier%20Types=*all&amp;awsf.Free%20Tier%20Categories=*all" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://aws.amazon.com/jp/free/?trk=ps_a134p000003yhoPAAQ&amp;trkCampaign=acq_paid_search_brand&amp;sc_channel=ps&amp;sc_campaign=acquisition_JP&amp;sc_publisher=google&amp;sc_category=core-main&amp;sc_country=JP&amp;sc_geo=JP&amp;sc_outcome=devadopt&amp;sc_detail=aws&amp;sc_content=Brand_Core_aws_e&amp;sc_matchtype=e&amp;sc_segment=487544183164&amp;sc_medium=ACQ-P|PS-GO|Brand|Desktop|SU|Core-Main|Core|JP|EN|Text|dx&amp;ef_id=Cj0KCQiAnaeNBhCUARIsABEee8VZTiyQFd6vFD8sVQSs2xwNvBujeC-R0LYdxQMLaonyPtmNI67xOSEaAhQjEALw_wcB:G:s&amp;s_kwcid=AL!4422!3!487544183164!e!!g!!aws&amp;gclid=Cj0KCQiAnaeNBhCUARIsABEee8VZTiyQFd6vFD8sVQSs2xwNvBujeC-R0LYdxQMLaonyPtmNI67xOSEaAhQjEALw_wcB&amp;all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc&amp;awsf.Free%20Tier%20Types=*all&amp;awsf.Free%20Tier%20Categories=*all" target="_blank" style="color: inherit; text-decoration: inherit;">AWS</a></block><block style="font-weight: bold;">や</block><block class="role-hyper-link" data-hyper-link-url="https://azure.microsoft.com/ja-jp/" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://azure.microsoft.com/ja-jp/" target="_blank" style="color: inherit; text-decoration: inherit;">Azure</a></block><block>それから</block><block class="role-hyper-link" data-hyper-link-url="https://cloud.google.com/gcp/?hl=ja&amp;utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=japac-JP-all-ja-dr-bkws-all-super-trial-e-dr-1009882&amp;utm_content=text-ad-none-none-DEV_c-CRE_540744635217-ADGP_Hybrid%20%7C%20BKWS%20-%20EXA%20%7C%20Txt%20~%20GCP%20~%20General_cloud%20platform-google%20cloud%20platform-en-KWID_43700030990911667-kwd-26415313501&amp;userloc_1009565-network_g&amp;utm_term=KW_google%20cloud%20platform&amp;gclid=Cj0KCQiAnaeNBhCUARIsABEee8UQBv0OCc4TfWsdNIEGpVQKpldqhjJmsLw_Lzo6nuRwjT6Xo1Xu-xIaAuV2EALw_wcB&amp;gclsrc=aw.ds" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://cloud.google.com/gcp/?hl=ja&amp;utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=japac-JP-all-ja-dr-bkws-all-super-trial-e-dr-1009882&amp;utm_content=text-ad-none-none-DEV_c-CRE_540744635217-ADGP_Hybrid%20%7C%20BKWS%20-%20EXA%20%7C%20Txt%20~%20GCP%20~%20General_cloud%20platform-google%20cloud%20platform-en-KWID_43700030990911667-kwd-26415313501&amp;userloc_1009565-network_g&amp;utm_term=KW_google%20cloud%20platform&amp;gclid=Cj0KCQiAnaeNBhCUARIsABEee8UQBv0OCc4TfWsdNIEGpVQKpldqhjJmsLw_Lzo6nuRwjT6Xo1Xu-xIaAuV2EALw_wcB&amp;gclsrc=aw.ds" target="_blank" style="color: inherit; text-decoration: inherit;">GoolgeClougPlatform</a></block><block style="font-weight: bold;">のような「計算資源のコモディティ化」です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">クラウドという抽象的なハードウェアから計算資源を切り出して購入します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="">この場合、原理的に、「計算ノード」が「ネットワーク上のコンピュータ」である並列計算になっていますから、単一のノイマン型ハードウェアに逐次の命令リストを送る、という命令型アプローチはまるで最適ではないのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">技術的負債をデフォルトとするメンタルブロック</block><block>は、新しい状況においては、</block><block style="font-weight: bold;">これまで慣れ親しんで積み重ねてきた自身の技術的手法が全く通用しない</block><block>、</block><block style="font-weight: bold;">すべて1から学習しなおす必要がある</block><block>、という</block><block style="font-weight: bold;">精神的不安となって返ってくる</block><block>ことになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.08089182014509655" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.08089182014509655"><prefix style="text-align: left; padding-right: 0.25em;">21.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>「非同期（Asynchronous）」という用語</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>巷には、</block><block style="font-weight: bold;">「</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Glossary/Asynchronous" style="text-decoration: underline; color: rgb(17, 85, 204); font-weight: bold;"><a href="https://developer.mozilla.org/ja/docs/Glossary/Asynchronous" target="_blank" style="color: inherit; text-decoration: inherit;">非同期</a></block><block style="font-weight: bold;">（Asynchronous）」</block><block>という言葉そのものを説明するようなページがとても多いです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして多くの場合その説明に欠落しているのが、そもそも</block><block style="font-weight: bold;">、「同期（Synchronous）処理」</block><block>というものが、</block><block style="font-weight: bold;">ノイマン型コンピューティングの命令型コードによる逐次処理のこと</block><block>である、という知見です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">非同期処理は、そのまま分散コンピューティング、並列処理、クラウドコンピューティングという概念にとっては、現代においてはむしろこちらのほうが最適化されている当然のアプローチ</block><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、厄介なのが、</block><block style="font-weight: bold;">ノイマン型コンピューティングの命令型コードによる逐次処理のこと</block><block>である</block><block style="font-weight: bold;">同期（Synchronous）処理</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が、</block><block style="font-weight: bold;">多くの技術者のマインドセットとしてデフォルトの素地として存在</block><block>していて、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Glossary/Asynchronous" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Glossary/Asynchronous" target="_blank" style="color: inherit; text-decoration: inherit;">非同期</a></block><block>（Asynchronous）処理が、なにか特別な新しい概念のように取り扱われがちなことです。そして、</block><block style="font-weight: bold;">「解決すべきなのだが、解決がとても難しい問題」</block><block>として非同期処理は考えられがちです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、技術的負債を放置した結果しっかりとしっぺ返しを食らっている現状を端的にあらわしている証拠のひとつです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最初は、ノイマン型コンピューティング、命令型を、まあこれまでこれでやってきたことだし、命令型コードというのは最初に当たり前に習うんだかから、と問題としては捉えてはいません。しかし、しばらく経ってから、巡り巡って</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Glossary/Asynchronous" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Glossary/Asynchronous" target="_blank" style="color: inherit; text-decoration: inherit;">非同期</a></block><block style="font-weight: bold;">（Asynchronous）」って一体何？なんか難しそうな概念ですね！</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となってしまっているのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.03549108308925342" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.03549108308925342"><prefix style="text-align: left; padding-right: 0.25em;">21.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptの非同期関数（Async function）async/await</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptで最近(ES7)導入されて普及している</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">async/await</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、この</block><block style="font-weight: bold;">技術的負債の権化のような存在</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>多くのプログラマは技術的負債であるとは気が付かないまま利用して普及しているのが、まさに技術的負債ぽいですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まず、JavaScriptには、</block><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Promise" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" style="color: inherit; text-decoration: inherit;">Promise</a></block><block>という非同期処理のための関数があります。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9385974593044477"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Promise オブジェクトは、非同期処理の完了 (もしくは失敗) の結果およびその結果の値を表します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Proimise </block><block>はちょっと出来の悪い</block><block style="font-weight: bold;">FRPのFunctor</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>出来は悪いのですが、</block><block style="font-weight: bold;">Functor</block><block>という</block><block style="font-weight: bold;">代数構造として実装されていることはかなり良いこと</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、なんとこの</block><block style="font-weight: bold;">「代数構造としての良さ」を帳消しにしたい</block><block>人たちが多くて、わざわざ</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/async_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" style="color: inherit; text-decoration: inherit;">async</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.671343371485462"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>非同期関数は async キーワードで宣言され、その中で await キーワードを使うことができます。 async および await キーワードを使用することで、プロミスベースの非同期の動作を、プロミスチェーンを明示的に構成する必要なく、よりすっきりとした方法で書くことができます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのが導入されました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6220480937109112"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>The async and await keywords enable asynchronous, promise-based behavior to be written in </block><block style="font-weight: bold;">a cleaner style</block><block>,</block><block style="font-weight: bold;"> avoiding the need to explicitly configure promise chains.</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.21120769819481855"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プロミスチェーンを明示的に構成する必要なく、よりすっきりとした方法で書くことができます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Promiseというのは代数構造であるFunctorであり、プロミスチェーンというのは、二項演算の連鎖という式のことですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「明示的に構成する必要なく」</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>って</block><block style="font-weight: bold;">代数構造を明示する必要がない</block><block>、ということを平気で主張しています。結構信じられません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>信じられないことが普通に起こってしまうのが、まさに</block><block style="font-weight: bold;">技術的負債の世界の恐ろしさ</block><block>なのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>英語原文においても、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block><block style="font-weight: bold;">a cleaner style</block><block>,</block><block style="font-weight: bold;"> avoiding the need to explicitly configure promise chains.</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書かれていて、これはある種の世界的コンセンサスを得て表示されている、ということを意味します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>代数構造の式を書き下すほうが、明らかに、cleaner styleで、スッキリとした方法なのですが、彼らがいう</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「スッキリとした方法（cleaner style）」</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 181.495px; position: relative;"><img src="image-resources/85bfeb26-c6e6-4adf-b4b0-63f2ed4c5208.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もちろん、</block><block style="font-weight: bold;">命令型コードにおける構文（Statement）</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3365956788435418"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>非同期関数には、 await 式を置くことができます。 await 式は返されたプロミスが履行されるか拒否されるまで実行を中断することで、</block><block style="font-weight: bold;">プロミスを返す関数をあたかも同期しているかのように動作させます</block><block>。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">async/await</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を使うと、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">PromiseFunctorという代数構造の式を書かなくても</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">非同期処理をよりわかりやすく</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">同期処理的に</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">命令型の構文で書けるようになる</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そう堂々と主張されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>別の人は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6950711274828578"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/gvergnaud/ts-pattern" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://github.com/gvergnaud/ts-pattern" target="_blank" style="color: inherit; text-decoration: inherit;">ts-pattern</a></block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6066593445702411"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">より良い、より安全な条件（condition）</block><block>を書きましょう。パターンマッチングを使えば、複雑な複数の条件を、単一のコンパクトな</block><block style="font-weight: bold;">式（expression）</block><block>で表現できます。</block><block style="font-weight: bold;">コードが短くなり、読みやすくなります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">パターンマッチングとは何ですか？</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パターンマッチング</block><block>とは、</block><block style="font-weight: bold;">関数型プログラミング言語に由来する技術で、値の構造に基づいて条件付きコードの分岐を宣言的に記述</block><block>するものです。この技術は、特に複雑なデータ構造や複数の値で分岐する場合に、</block><block style="font-weight: bold;">命令型の代替物（if/else/switch文）</block><block>よりもはるかに強力で、はるかに冗長性が少ないことが証明されています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パターンマッチングは、Haskell、Rust、Swift、Elixir、その他多くの言語で実装されています。EcmaScript仕様にパターンマッチングを追加するための</block><block class="role-hyper-link" data-hyper-link-url="https://github.com/tc39/proposal-pattern-matching" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://github.com/tc39/proposal-pattern-matching" target="_blank" style="color: inherit; text-decoration: inherit;">tc39プロポーザル</a></block><block>がありますが、まだステージ1であり、この先数年は実装されそうにありません（仮に実装されることがあったとしても）。幸運なことに、パターンマッチングはユーザーランドで実装することができます。</block><block style="font-weight: bold;"> ts-pattern</block><block>は、タイプセーフなパターンマッチングの実装を提供しており、今日から使い始めることができます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と主張し、逆にTC39では、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3829927389880816"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それ以前にTC39プロポーザル版Pattern Matchingは、どのような実装になっているのでしょう？</block></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.47072380750115284" style="width: 769px;"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 750px; height: 587.95px; position: relative;"><img src="image-resources/2f724fa2-0ac3-4d6c-ab80-8f95287450b0.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>うーん、なんか</block><block style="font-weight: bold;">文（Statememt）</block><block>になっていますね・・・</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>元々Pattern Matchingとは関数型プログラミングが発祥であり、</block><block style="font-weight: bold;">式（expression）</block><block>であるのが普通なのに。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://github.com/gvergnaud/ts-pattern" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://github.com/gvergnaud/ts-pattern" target="_blank" style="color: inherit; text-decoration: inherit;">ts-pattern</a></block><block>のコードでは純粋に簡潔に二項演算の式として構築できることとは対照的です。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">sanitize</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">name</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function token">match</block><block class="punctuation token">(</block><block class=" token">name</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">with</block><block class="punctuation token">(</block><block class="string token">'text'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'span'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'p'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="string token">'text'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">with</block><block class="punctuation token">(</block><block class="string token">'btn'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="string token">'button'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">.</block><block class="function token">otherwise</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> name</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは何を意味するのか？というと、</block><block style="font-weight: bold;">ts-pattern</block><block>ライブラリの作者はPattern Matchingがなんたるかという本質とそれによってもたらされる効能、</block></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">より良い、より安全な条件（condition）</block><block>を書きましょう。パターンマッチングを使えば、複雑な複数の条件を、単一のコンパクトな</block><block style="font-weight: bold;">式（expression）</block><block>で表現できます。</block><block style="font-weight: bold;">コードが短くなり、読みやすくなります。</block></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">パターンマッチング</block><block>とは、</block><block style="font-weight: bold;">関数型プログラミング言語に由来する技術で、値の構造に基づいて条件付きコードの分岐を宣言的に記述</block><block>するものです。この技術は、特に複雑なデータ構造や複数の値で分岐する場合に、</block><block style="font-weight: bold;">命令型の代替物（if/else/switch文）</block><block>よりもはるかに強力で、はるかに冗長性が少ないことが証明されています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を良く理解していてその強い理念と情熱をもって実装しているのに対して、本件のTS39プロポーザルの参加者は、需要がありそうだしやってみよう、標準化されたら自分の功績にもなるし、という功名心（全員がそうではないが筆者が直接やりとりしたこともあるアカウントの参加者（あまりレベルが高いプログラマとは見做せない）を見てたらおそらくそんなところ）で、さらに背景には「JavaScriptはあくまで命令型の文の集まりとして記述されるべきだ」という信念のようなものが共有されており、</block><block style="font-weight: bold;">switch/case</block><block>文との後方互換性を維持したかったのだろうと想像します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TC39では、基本的に命令型の構文を導入することに懸命で、というかおそらく内部にそういう強い思想と主張をもった人間が存在するのでしょうが、教条化しているようです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">async/await</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">PromiseFunctorという代数構造の式や「プロミスチェーン」と呼ばれる二項演算の連鎖の式（Expression）は明示したくない</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>より</block><block style="font-weight: bold;">「スッキリとした方法（cleaner style）」</block><block>つまり</block><block style="font-weight: bold;">命令型の文（Statement）の方が良い</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という、よくわからない信念、教条をもつひとたちのためのものですから、この信念に同意できない場合は、みんなが使っているから、自分のプロジェクト範囲に与えられているから、という</block><block style="font-weight: bold;">同調圧力にならう以外の利用する合理性、メリットは一切ない</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、こういう</block><block style="font-weight: bold;">無意味な構文の発明というのは、たいてい不整合さを無用に発生させます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にそのページには、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 120px; position: relative;"><img src="image-resources/62aef92c-7e62-4f7d-997f-7dcc42058d31.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、</block><block style="font-weight: bold;">Functorや二項演算の連鎖を、わざわざ命令文の列挙に加工</block><block>したことから発生する、</block><block style="font-weight: bold;">新しいルール</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>が付与されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">新しいルール</block><block>に</block><block style="font-weight: bold;">プログラマが注意を従わない可能性が十分に想定される</block><block>からこそ、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Note:これを知っている必要があります、さもなければエラーが発生しますよ！</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>わざわざ「親切」に記載しておく必要があるのですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということはプログラマが全力で回避すべき</block><block style="font-weight: bold;">「複雑性」を追加</block><block>していることになりますが、あんまりそういうことは</block><block style="font-weight: bold;">気にしないスタイル</block><block>なのでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>基本的に、</block><block style="font-weight: bold;">ちょっとくらい新しいルールが追加されても、プログラマがそれに注意を払えばかんたんに解決するはなしだ、大した問題にはならないはずだ</block><block>、という</block><block style="font-style: italic; font-weight: bold;">愚かな楽観論</block><block>に基づいています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>基本的に命令型の構文を正当化をするときには、議論は全部こんな感じになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 254.69px; position: relative;"><img src="image-resources/a705e049-8442-4bd0-abac-d50bbd2d77a8.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「両者は同等ではありません。」「異なる参照を返します。」</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>非常に恐ろしい事実が宣言されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、「ソフトウェアの複雑性」は</block><block style="font-weight: bold;">組み合わせ爆発</block><block>が根本要因であり、</block><block style="font-weight: bold;">「等しい」という価値を重視すれば、原理的に組み合わせ爆発のリスクを回避できる</block><block>、という原理原則に反するものです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その結果</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「問題になることがあります」</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と「仕方がないですよね」的に書かれているのですが、そもそも、</block><block style="font-weight: bold;">代数構造の式（Expression）</block><block>を</block><block style="font-weight: bold;">命令型の文（Statement）</block><block>として書き下すほうが</block><block style="font-weight: bold;">「スッキリとした方法（cleaner style）」</block><block>だという強い信念により好んでわざわざ後付けしたわけなので、別に「仕方がない」ことはありません。</block><block style="font-weight: bold;">最初から余計なことはしなければ、組み合わせ爆発の唯一要因である「等しくない」「区別すべき要素」は発生していない</block><block>のです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>技術的負債の世界は恐ろしいですよね。</block><block style="font-weight: bold;">非常に愚かなアプローチです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なんでこんなことになるのだろう？とは思いますが、結局のところ、こういう不合理な信念、教条というものは、「精神的な弱み」に起因するのであって、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3874369619789295"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">この場合、原理的に、「計算ノード」が「ネットワーク上のコンピュータ」である並列計算になっていますから、単一のノイマン型ハードウェアに逐次の命令リストを送る、という命令型アプローチはまるで最適ではないのです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">技術的負債をデフォルトとするメンタルブロック</block><block>は、新しい状況においては、</block><block style="font-weight: bold;">これまで慣れ親しんで積み重ねてきた自身の技術的手法が全く通用しない</block><block>、</block><block style="font-weight: bold;">すべて1から学習しなおす必要がある</block><block>、という</block><block style="font-weight: bold;">精神的不安となって返ってくる</block><block>ことになります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というようなことだと想像します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Promise</block><block>は、実装は複雑でけして出来の良いFRPではありませんが、ひとつの</block><block style="font-weight: bold;">Funcor</block><block>であり代数構造なので二項演算の連鎖なりを書けば良いのですが、命令型ではありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これまでと勝手が違うことは感じられます、そこであえて慣れ親しんでいる</block><block style="font-weight: bold;">命令型の構文の列挙という既存のスタイルに固執する</block><block>ほうが</block><block style="font-weight: bold;">「スッキリとした方法（cleaner style）」</block><block>と感じられる、</block><block style="font-weight: bold;">精神的な安定が得られる</block><block>、そうとしか説明のしようがありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.5419287901306875" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.5419287901306875"><prefix style="text-align: left; padding-right: 0.5em;">22. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型リアクティブプログラミング（FRP） 時間に依存する関数型コードの書き方 </block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.06030256166697501" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.06030256166697501"><prefix style="text-align: left; padding-right: 0.25em;">22.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型コードは時間とコードの配置場所に暗黙に依存している</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この章のメインテーマは</block><block style="font-weight: bold;">「時間」</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プログラミングは数学的な作業であり、工学的な作業ですから、当然、理系分野とみなされるのですが、同じ物理学ではニュートン物理学あるいはそれ以前から、かなり客観視されて研究されてきた</block><block style="font-weight: bold;">時間という概念</block><block>を、かなり巧妙に回避しながらプログラミングの体系を構築し議論しようとしています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型コードははあくまでコードの構造の主体が</block><block style="font-weight: bold;">フロー文</block><block>であり、</block><block style="font-weight: bold;">依存グラフ（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Dependency_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Dependency_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Dependency graph</a></block><block style="font-weight: bold;">）</block><block>など最初からまったく考慮していない</block><block style="font-weight: bold;">各種変数の値がバラバラに各自それぞれ独自のルールにもとづいて刻々と変化していく</block><block>ので、途中のパーツを交換してみたら、なにか</block><block style="font-weight: bold;">時系列の観点で不整合がかんたんに発生</block><block>してしまい、</block><block style="font-weight: bold;">プログラマにとっては想定不可能だった不具合</block><block>が生じます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは</block><block style="font-weight: bold;">多くの（命令型）プログラマーが普段の経験として痛感している事実</block><block>でしょうし、</block><block style="font-weight: bold;">DEBUGのために生産性が致命的に損なわれています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードは</block><block style="font-weight: bold;">依存グラフ</block><block>で構成された式である他方で、</block><block style="font-weight: bold;">命令型コードは時系列に依存</block><block>しているのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7548331480343926" style="line-height: 1.4; font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5);" id="n0.7548331480343926"><prefix style="text-align: left; padding-right: 0.25em;">22.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型コードで普通にやっている値の書き換えというのは一体なんなのか？ ミュータブル（mutable）な世界</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9167879252150404"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>命令型コードははあくまでコードの構造の主体が</block><block style="font-weight: bold;">フロー文</block><block>であり、</block><block style="font-weight: bold;">依存グラフ（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Dependency_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Dependency_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Dependency graph</a></block><block style="font-weight: bold;">）</block><block>など最初からまったく考慮していない</block><block style="font-weight: bold;">各種変数の値がバラバラに各自それぞれ独自のルールにもとづいて刻々と変化していく</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という命令型の作法は普通に行われていますが、そもそも、値の書き換えってなんでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プログラミングとは根本的には数学的作業なのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここにある値、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A = 1</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのがあるとします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この値を書き換える、っていうのは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A = 2</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>などにするということですよね？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">数学的には破綻しています。</block><block>義務教育を受けていれば誰でもすぐにわかることです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>もしくは、</block><block style="font-weight: bold;">「いやプログラミング特有の代入なんで、数学的には破綻していない！」</block><block>というのであれば、「数学とは違うプログラミング特有のまた別のなにかの概念」を暗黙に導入しながら数学的ではない方法を採用している、ということなので、いずれにせよ純粋に数学的なプログラミングはやってない、ということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>背景にはもちろん、</block><block style="font-weight: bold;">ノイマン型コンピュータへの命令を送っているだけであって逐次処理にすぎないなのだから</block><block>、という理屈があります。命令型プログラミングに入門すると、まずこういうふうにやれ、と教わるのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ノイマン型コンピューティングである命令型の</block><block style="font-weight: bold;">逐次処理</block><block>という歴史的背景による実践があるにしても、数学的に破綻しているのは、数学的な作業であるプログラミングではかなりマズいです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>したがって、</block><block style="font-weight: bold;">値を書き換える真似は避けよう</block><block>、と考えれば、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>「値の不変性」英語で言えば</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%A4%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%96%E3%83%AB" style="text-decoration: underline; color: rgb(17, 85, 204); font-weight: bold;"><a href="https://ja.wikipedia.org/wiki/%E3%82%A4%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%96%E3%83%AB" target="_blank" style="color: inherit; text-decoration: inherit;">イミュータブル</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Immutable_object" style="text-decoration: underline; color: rgb(17, 85, 204); font-weight: bold;"><a href="https://en.wikipedia.org/wiki/Immutable_object" target="_blank" style="color: inherit; text-decoration: inherit;">Immutable</a></block><block style="font-weight: bold;">）にする</block><block>、という方針になります。　</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9156250288323462"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">イミュータブル (英: immutable)</block><block> なオブジェクトとは、</block><block style="font-weight: bold;">作成後にその状態を変えることのできない</block><block>オブジェクトのことである。対義語は</block><block style="font-weight: bold;">ミュータブル (英: mutable) </block><block>なオブジェクトで、</block><block style="font-weight: bold;">作成後も状態を変えることができる</block><block>。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さて、ここで重大な問題が発生してしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">我々が暮らしている「現実世界」はミュータブル（mutable）なのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>現実世界というのは刻一刻と変化していきます。数学的整合性のあるimmutableで一貫したプログラミングをしていく、そんな方針などは</block><block style="font-weight: bold;">机上の空論</block><block>で、だから関数型プログラミングという理想論は現実的なアプリケーションを開発するのには使いものにはならない、と考えることができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にそういう認識が大勢であった時代は長く続いていました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>整理すると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>数学世界 immutable</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>現実世界 mutable</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このようなマインドセットがまずあるわけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">両者は一致しない</block><block>、じゃあどうしよう？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>原始的な命令型パラダイム、あるいはオブジェクト指向の大半の作法では、我々の素朴な直感のマインドセットに忠実に従って、</block><block style="font-weight: bold;">数学世界のほうを捻じ曲げる</block><block>ことにします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>数学世界（エセ）mutable</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>現実世界 mutable</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とします。これで</block><block style="font-weight: bold;">現実世界とエセ数学世界の一致</block><block>となりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>エセ数学世界、っていうのは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A = 1</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A = 2</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>みたいな並びを普通に許容します。普通の命令型のコードです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>値の変更を許すことはないimmutableの世界ではないほうの、mutableな世界です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コードの並び方に依存して論理が決まっていく世界です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block><block style="font-weight: bold;">数学ではなくコードの並び方のほうが重要</block><block>なのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この、エセ数学世界での各種操作が旧来の意味での原始的なプログラミングの作法である、と言えるでしょう。</block><block style="font-weight: bold;">当然のように発生している眼の前の数学的不整合についてはその都度ごまかしごまかしやっていく</block><block>わけです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.19337518569281165" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.19337518569281165"><prefix style="text-align: left; padding-right: 0.25em;">22.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>イミュータブル（Immutable）な世界</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>根本的に何かが間違っている。何か見落としている。それは「時間」の概念です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>きちんと時間の概念を導入してやれば、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>時間</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">t1</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">t2</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A(t1) = 1</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A(t2) = 2</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とできて、数学的に破綻しなくなります。たったそれだけのことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これだとコードの並びに依存しません、入れ替わったって別に大丈夫です。純粋に数学的だと言えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてもっと話を広げると、これは我々の</block><block style="font-weight: bold;">現実世界でも同じ</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-style: italic; font-weight: bold;">宇宙の時空構造を記述する物理学は数学で記述されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>時空構造には時間軸があり</block><block style="font-weight: bold;">「時間」は物理学の理論を構築している数式のパラメータのひとつでしかありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは特に、理論物理学の素養があれば、ごく普通の知見であり世界観でしょう。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 407.01px; position: relative;"><img src="image-resources/4312c07c-d55e-47f4-a9d7-1407b131f55d.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://amzn.to/3ImH35c" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://amzn.to/3ImH35c" target="_blank" style="color: inherit; text-decoration: inherit;">A Stubbornly Persistent Illusion: The Essential Scientific Works of Albert Einstein | スティーブン・ホーキング</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.48341806669360965"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>The distinction between the past, present and future is only a stubbornly persistent illusion.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>過去、現在、未来の区別というのは、頑固につきまとう幻想に過ぎない</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>— アルバート・アインシュタイン</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://www.quora.com/In-which-ways-can-we-visualise-the-space-time-continuum/answer/Henry-K-O-Norman-1" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://www.quora.com/In-which-ways-can-we-visualise-the-space-time-continuum/answer/Henry-K-O-Norman-1" target="_blank" style="color: inherit; text-decoration: inherit;">In which ways can we visualise the space-time continuum?</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>時空連続体はどうやって可視化できるのでしょうか？</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4411217584131202"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>アインシュタインは、彼のとっての宇宙を、何も動かず（！）、起こりうることはすべてすでに起こっており（！）、過去も未来も（！）起こり続けている「固いブロック」（ブロック宇宙）として思い描いていました。アインシュタインにとっての時間は、このブロックの仮想的な「スライス」でした。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">すべての時間が現在みたいなもの</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 600px; height: 387.708px; position: relative;"><img src="image-resources/3eea1afe-afe0-4159-b008-c53d3d02ad34.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということで、わざと嘘を書いてしまった前言</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.8252664198777979"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さて、ここで重大な問題が発生してしまいます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">我々が暮らしている「現実世界」はミュータブル（mutable）なのです。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を撤回させていただいて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">現実世界も数学・物理学的な俯瞰では、immutableです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>従って、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>数学世界 immutable</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>現実世界 mutable</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と素朴に考えるマインドセットが間違っていたのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>また、その素朴に間違っているマインドセットのつじつま合わせをするために、</block><block style="font-weight: bold;">数学世界のほうを捻じ曲げる</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>数学世界（エセ）mutable</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>現実世界 mutable</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というアプローチも間違っています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>正しくは、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>数学世界 immutable</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>現実世界 immutable</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっているのでなんの問題もありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5662845104978185" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5662845104978185"><prefix style="text-align: left; padding-right: 0.25em;">22.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>GitはImmutableな</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%B0%B8%E7%B6%9A%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%B0%B8%E7%B6%9A%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0" target="_blank" style="color: inherit; text-decoration: inherit;">永続データ構造</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Persistent_data_structure" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Persistent_data_structure" target="_blank" style="color: inherit; text-decoration: inherit;">Persistent data structure</a></block><block>）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>数学世界 immutable</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>現実世界 immutable</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left; visibility: hidden;">• </prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にこういうモデルはプログラミングの世界ではよく使われています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0" target="_blank" style="color: inherit; text-decoration: inherit;">バージョン管理システム</a></block><block> で、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://git-scm.com/" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://git-scm.com/" target="_blank" style="color: inherit; text-decoration: inherit;">Git</a></block><block>がメジャーです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 200px; height: 102.674px; position: relative;"><img src="image-resources/efb7a5bc-c8f8-4d0f-a250-5656ce38121b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Gitでは</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 172.8px; position: relative;"><img src="image-resources/57587916-d948-452e-8d0c-d92e399db76b.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように時間軸でバージョンが更新されるレポジトリをImmutableなデータ構造で管理しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>GitHubでは、このようにHistoryがありますが、Immutableなデータ構造になっています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 400px; height: 584.897px; position: relative;"><img src="image-resources/4d90f404-0e70-4b9f-aa32-584484e9b416.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このようなデータ構造を</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%B0%B8%E7%B6%9A%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%B0%B8%E7%B6%9A%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0" target="_blank" style="color: inherit; text-decoration: inherit;">永続データ構造</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Persistent_data_structure" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Persistent_data_structure" target="_blank" style="color: inherit; text-decoration: inherit;">Persistent data structure</a></block><block>）といいます。</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.36366383181056783"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>永続データ構造（えいぞくデータこうぞう、英: Persistent data structure）は、変更される際に変更前のバージョンを常に保持するデータ構造である。このようなデータ構造は、更新の際に元のデータ構造を書き換えるのではなく、新たなデータ構造を生成すると考えられ、</block><block style="font-weight: bold;">イミュータブルなデータ構造</block><block>の構築に利用可能である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.21054596832091788" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.21054596832091788"><prefix style="text-align: left; padding-right: 0.25em;">22.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数そして二項演算子は暗黙に時間依存してはならない</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>副作用がない純粋な関数（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Pure_function" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Pure_function" target="_blank" style="color: inherit; text-decoration: inherit;">Pure function</a></block><block>）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>状態を持たない純粋な関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのが、より一般的な言い方ですが、いろいろ解説を読んでも、最終的には要するに.、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「時間依存しない」</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という事実を、「時間」というキーワードを避けながら説明されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「時間依存しない」</block><block>というのは、つまり</block><block style="font-weight: bold;">Immutable</block><block>である、いうことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>純粋、副作用、それから参照透過性というバズワードの問題点は、たとえばこのコードは純粋と言えるのか？これは副作用と言えるのか？と、時間依存の扱いという本質とははずれたところで言葉の定義議論という本末転倒で不毛な議論に必ず陥るからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>いわゆる</block><block style="font-weight: bold;">「純粋な関数」とは、厳密にその関数の引数のみに依存している</block><block>と一応の説明はされます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードの</block><block style="font-weight: bold;">式を組み立てていく</block><block>ときは、関数そして</block><block style="font-weight: bold;">二項演算子</block><block>と</block><block style="font-weight: bold;">（）</block><block>を活用して</block><block style="font-weight: bold;">依存グラフを構成</block><block>します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、この関数はどうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> x </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">5</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> x</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「純粋な関数」とは、厳密にその関数の引数のみに依存している</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と考えたとき、この</block><block style="font-weight: bold;"> f</block><block> 関数は</block><block style="font-weight: bold;">関数の引数であるa</block><block>のみに依存しておらず</block><block style="font-weight: bold;">外部変数であるxにも依存しているだろう？</block><block>という疑念が出てきて当然です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、この</block><block style="font-weight: bold;">xは「定数」</block><block>で、</block><block style="font-weight: bold;">時間変化せず、常に5と等しく、安全に置き換え可能なので、時間依存していません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Immutableです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数の別の表記である二項演算子、二項演算についても同様です。演算は左右の被演算子（Operator）2つのみに依存して、依存グラフを構成しなければいけません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>幸いなことに、二項演算の場合は、命令型プログラミングでは当たり前のようにやっている時間依存する演算みたいなことは当たり前ではなく、小学校の算数の教育からずっと、</block><block style="font-weight: bold;">「計算」したらそれで値が決まる</block><block>、という意識は強く、計算する時間によって答えがコロコロと変わる、というのはむしろ珍しい現象におもえることでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、我々は義務教育の頃には、</block><block style="font-weight: bold;">演算というものは時間依存しないものである</block><block>、という正しい作法を徹底的に叩き込まれており、その次に、命令型プログラミングなるもので、コードに出てくる関数では、</block><block style="font-weight: bold;">演算する時間、タイミングによって、値がコロコロと変化する、時間依存するのが当たり前である、という間違った作法を再教育されている</block><block>わけです。今一度小学校の算数の頃の意識に戻り、演算というものは時間依存しないものである、と頭をリセットしなおす必要があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コードの論理的な依存グラフより外の外部と接続しているIOが副作用があり純粋ではない、と言われる理由は、コードの外の現実世界の「時間」に依存しているからです。</block><block style="font-weight: bold;">現実世界は壮大な時間依存するグラフ</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして</block><block style="font-weight: bold;">現実世界はImmutableな宇宙なので、別に依存してもかまわないですし、ユーザからの入力やコンソールへの出力をはじめIOでは実際に依存する必要があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかしそのときは、</block><block style="font-weight: bold;">暗黙にやってはいけません</block><block>。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.19494951449768894" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.19494951449768894"><prefix style="text-align: left; padding-right: 0.25em;">22.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>関数そして二項演算子が時間依存するときは明示的に依存グラフを構成する</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.26392497904624235"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold; font-size: 1.44em;">計算可能な有向非巡回グラフ（DAG）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">巡回グラフ</block><block>あるいは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E9%96%89%E8%B7%AF%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向閉路グラフ</a></block><block> (</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Cycle_graph" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Cycle_graph" target="_blank" style="color: inherit; text-decoration: inherit;">directed cycle graph</a></block><block>)になっていない、つまり、計算可能で無限ループになってないグラフのことは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block style="font-weight: bold;">）</block><block>と呼びます。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 429.73px; position: relative;"><img src="image-resources/babfe0c3-651c-4554-989f-899c8aa5014a.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5531635743704164"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">有向非巡回グラフ、有向非循環グラフ、有向無閉路グラフ（ゆうこうひじゅんかいグラフ、英: Directed acyclic graph, DAG）</block><block>とは、</block><block style="font-weight: bold;">グラフ理論における閉路のない有向グラフのこと</block><block>である。有向グラフは頂点と有向辺（方向を示す矢印付きの辺）からなり、辺は頂点同士をつなぐが、ある頂点</block><block style="font-weight: bold;">v</block><block>から出発し、辺をたどり、頂点</block><block style="font-weight: bold;">v</block><block>に戻ってこないのが</block><block style="font-weight: bold;">有向非巡回グラフ</block><block>である[1][2][3]。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">有向非巡回グラフは様々な情報をモデル化するのに使われる。</block><block>有向非巡回グラフにおける到達可能性は半順序を構成し、全ての有限半順序は到達可能性を利用し有向非巡回グラフで表現可能である。順序づけする必要があるタスクの集合は、あるタスクが他のタスクよりも前に行う必要があるという制約により、頂点をタスク、辺を制約条件で表現すると有向非巡回グラフで表現できる。</block><block style="font-weight: bold;">トポロジカルソートを使うと、妥当な順序を手に入れることができる。</block><block>加えて、有向非巡回グラフは一部が重なるシーケンスの集合を表現する際の空間効率の良い表現として利用できる。また、</block><block style="font-weight: bold;">有向非巡回グラフはイベント間の因果関係を表現することにも使える。さらに、有向非巡回グラフはデータの流れが一定方向のネットワークを表現することにも使える。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block style="font-weight: bold;">, DAG）</block><block>は、</block><block style="font-weight: bold;">依存グラフ（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Dependency_graph#Recognizing_impossible_evaluations" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Dependency_graph#Recognizing_impossible_evaluations" target="_blank" style="color: inherit; text-decoration: inherit;">Dependency graph</a></block><block style="font-weight: bold;">）</block><block>のなかで</block><block style="font-weight: bold;">依存関係のサイクル（循環依存関係）が存在しない特殊なケース</block><block>であり、関数型プログラミングあるいは本稿で、依存グラフというときには、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block>）のことを意味します。</block><block style="font-weight: bold;">原理的に計算可能なのはこちらでしかない</block><block>からですね。</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9624786129935239"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In a dependency graph, </block><block style="font-weight: bold;">the cycles of dependencies (also called circular dependencies) </block><block>lead to a situation in which</block><block style="font-weight: bold;"> no valid evaluation order exists</block><block>, because none of the objects in the cycle may be evaluated first.</block><block style="font-weight: bold;"> If a dependency graph does not have any circular dependencies, it forms a directed acyclic graph, and an evaluation order may be found by topological sorting.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>依存関係グラフにおいて、</block><block style="font-weight: bold;">依存関係のサイクル（循環依存関係とも呼ばれる）</block><block>は、サイクル内のどのオブジェクトも最初に評価することができないため、</block><block style="font-weight: bold;">有効な評価順序が存在しない</block><block>という状況を引き起こす。</block><block style="font-weight: bold;">依存グラフに循環依存性がない場合、それは有向非巡回グラフ（DAG）を形成し、トポロジカルソートによって評価順序を見つけることができる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode indent-1 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5395195095091614"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">有向非巡回グラフはイベント間の因果関係を表現することにも使える。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、関数型プログラミングの文脈でいうと、</block><block style="font-weight: bold;">関数型リアクティブプログラミング（FunctionalReactiveProgramming）</block><block>つまりFRPのことです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>演算可能な式を二項演算子やグループ化演算子</block><block style="font-weight: bold;">（）</block><block>を活用して代数的に構成することは、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block style="font-weight: bold;">, DAG）</block><block>を構成することであり、これは</block><block style="font-weight: bold;">そのままイベント間の因果関係を表現することが可能</block><block>です。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"><border-resizing-container data-reactroot=""><border-line style="position: absolute; top: -3px; height: 6px; left: 0px; width: 867px; cursor: row-resize; background: transparent;"></border-line><border-line style="position: absolute; top: 1279.94px; height: 6px; left: 0px; width: 867px; cursor: row-resize; background: transparent;"></border-line><border-line style="position: absolute; left: -3px; width: 6px; top: 0px; height: 1282.94px; cursor: col-resize; background: transparent;"></border-line><border-line style="position: absolute; left: 863.5px; width: 6px; top: 0.5px; height: 1281.94px; cursor: col-resize; background: transparent;"></border-line><border-v-resizing></border-v-resizing><border-h-resizing></border-h-resizing></border-resizing-container></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>現実世界の時間に依存するコードを書くときは、各イベント間の因果関係を表現する依存グラフ、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block style="font-weight: bold;">, DAG）</block><block>を構成します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これはとっかかりがイベントであるだけで、これまで</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3392184646954457"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型のコードでは、</block><block style="font-weight: bold;">二項演算子</block><block>とともに</block><block style="font-weight: bold;">グループ化演算子 ( ) </block><block>を組み合わせることで</block><block style="font-weight: bold;">依存グラフを構成</block><block>し、</block><block style="font-weight: bold;">演算はその依存グラフを解決する形で進んでいく。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">依存グラフ</block><block>を構成する</block><block style="font-weight: bold;">二項演算</block><block>を最大限に活用した式の組み立てに注力することで、</block><block style="font-weight: bold;">バグの入り込む余地が極小</block><block>の関数型コードを書くことが実現できる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とやってきたこととまったく同一のアプローチです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>各イベント間の因果関係を表現する依存グラフ、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%9C%89%E5%90%91%E9%9D%9E%E5%B7%A1%E5%9B%9E%E3%82%B0%E3%83%A9%E3%83%95" target="_blank" style="color: inherit; text-decoration: inherit;">有向非巡回グラフ</a></block><block style="font-weight: bold;">（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Directed_acyclic_graph" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" style="color: inherit; text-decoration: inherit;">Directed acyclic graph</a></block><block style="font-weight: bold;">, DAG）</block><block>を構成することが、</block><block style="font-weight: bold;">関数型リアクティブプログラミング（FunctionalReactiveProgramming）</block><block>つまりFRPです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">その式（Expression）を構成しますが、その役割を担う代数構造はFunctorやMonadという二項演算です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5943299440260956" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5943299440260956"><prefix style="text-align: left; padding-right: 0.25em;">22.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block>時間軸上のイベントを参照する関数</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイマーイベント</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/API/setTimeout" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/API/setTimeout" target="_blank" style="color: inherit; text-decoration: inherit;">setTimeout()</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>キッチンタイマーやスマホOSのタイマーと同じで、セットした瞬間から、セットした時間の後でイベントを発生する時間関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これはタイマーをセットした瞬間を0として、時間軸の相対座標でtの時間に依存関係を構築すると見なせます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そういう関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その他ユーザー入力のIOでトリガーされるイベントをはじめ、いろいろあるようです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/Events" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/Events" target="_blank" style="color: inherit; text-decoration: inherit;">イベントリファレンス</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3875180606651738" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3875180606651738"><prefix style="text-align: left; padding-right: 0.25em;">22.8. </prefix><blocks><baselineblock class="inline"></baselineblock><block>イベント駆動型プログラミング（Event-driven programming）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E9%A7%86%E5%8B%95%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E9%A7%86%E5%8B%95%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">イベント駆動型プログラミング</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.05867578871962009"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>イベント駆動プログラミング（イベントくどうプログラミング、英: event-driven programming）とは、ユーザー側の操作による受動的なイベントの発生によって、コンピュータ側の能動的なプロセスの実行とプログラムフローの選択が決定されるというプログラミングパラダイムである。イベントドリブンとも邦訳される。グラフィカルユーザーインターフェース（GUI）ソフトウェアでよく用いられており、ユーザー入力に対するレスポンス出力の実装に適している。デバイスドライバプログラムでも多用されている。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで言うイベントとは、マウスクリックやキーボード押下によるユーザー操作、センサーやシグナル受信によるハードウェア入力、走行スレッドや発生トランザクションからのメッセージ受信を指している。プロセスの実行とは、スレッドの開始や手続き/関数の呼出しを指している。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>イベント駆動（event-driven）という概念は、イベントをトリガーにある関数を適用する、というもっとも基本的で素朴な概念です。ただそのことだけ、言い表しており、それ以上のことはなにもありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.07872245400439071" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.07872245400439071"><prefix style="text-align: left; padding-right: 0.25em;">22.9. </prefix><blocks><baselineblock class="inline"></baselineblock><block>リアクティブプログラミング（Reactive programming）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Reactive_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Reactive_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Reactive programming</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3523875882875893"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In computing, reactive programming is a declarative programming paradigm concerned with data streams and the propagation of change. With this paradigm, it's possible to express static (e.g., arrays) or dynamic (e.g., event emitters) data streams with ease, and also communicate that an inferred dependency within the associated execution model exists, which facilitates the automatic propagation of the changed data flow.</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コンピュータにおけるリアクティブプログラミングは、データストリームと変化の伝播に関する宣言的なプログラミングパラダイムである。このパラダイムでは、静的なデータストリーム（配列など）や動的なデータストリーム（イベントエミッタなど）を簡単に表現することができ、また、関連する実行モデル内に推測される依存関係が存在することを伝えることで、変更されたデータフローの自動伝搬を容易にすることができる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>リアクティブプログラミング（Reactive programming）では、もう少し高度なことが書かれています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>イベント駆動型プログラミング（Event-driven programming）をベースに抽象化して高度な操作が可能になって枠組みと考えて良いでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最初の</block><block style="font-weight: bold;">「イベント」はデータの変更というように抽象化</block><block>されます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、HTML/JavaScriptでいうと、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="operator token">&lt;</block><block class=" token">button label</block><block class="operator token">=</block><block class="string token">"Click me"</block><block class=" token"> onclick</block><block class="operator token">=</block><block class="string token">"alert('Hi')"</block><block class="operator token">/</block><block class="operator token">&gt;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが、</block><block style="font-weight: bold;">イベント駆動プログラミングのコード</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ユーザによる</block><block style="font-weight: bold;">ボタンClickイベント</block><block>が、</block><block style="font-weight: bold;">alert関数の適用</block><block>に直接、紐付いています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>非常に直接的で単純でわかりやすいですし、一度はこういうコードを書いた人は多いのではないでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>でも、こういうのはあんまり洗練された設計ではありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なぜならば、イベントと具体的な関数適用が直結している、結合が密すぎるからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、alert命令だけじゃなくて、他にもいろいろやらせたかったり、このクリックイベントと、また別のイベント、たとえばダブルクリックだったり、ドラッグだったり、そういうのと組み合わせるシナリオは普通に考えられるわけで、そういう場合、このコードはあっさり破綻します。これ以上どうすれば良いのかわからない、複雑性に耐えられない。つまり、よろしくないコードです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そこで、イベントと具体的な関数適用を直結させるのではなくて、その中間にリアクティブ値というデータを用意します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そうすることで、そのリアクティブ値は、他の関数適用と紐付けることができますし、リアクティブなデータ構造として抽象化されているので、別のリアクティブなデータ構造と組み合わせて複雑なことでも自在に出来るようになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これはつまり、リアクティブなデータで依存グラフを構成する、ということです。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 500px; height: 300.664px; position: relative;"><img src="image-resources/65fc2091-3e42-4b95-b372-7530f86a2ea6.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あらかじめ設計された依存グラフに従って、データの変更はイベント駆動するので</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%89%E3%83%9F%E3%83%8E%E5%80%92%E3%81%97" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%89%E3%83%9F%E3%83%8E%E5%80%92%E3%81%97" target="_blank" style="color: inherit; text-decoration: inherit;">ドミノ倒し</a></block><block>のように伝播していきます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 224.1px; position: relative;"><img src="image-resources/684c8241-1fd7-4938-b709-c3b8608a59e4.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これはまさに、</block><block style="font-weight: bold;">関数型リアクティブプログラミング（FunctionalReactiveProgramming）</block><block>つまりFRPそのものであるように思えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に、このあたりの用語、概念は分類の問題でしかなく、境界は曖昧です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、他にも</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AD%E3%83%BC%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AD%E3%83%BC%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" target="_blank" style="color: inherit; text-decoration: inherit;">データフロープログラミング</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Dataflow_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Dataflow_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Dataflow programming</a></block><block>）</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.33882425694351426"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>データフロープログラミング（英: dataflow programming）は、データフローの原理とアーキテクチャに準拠してプログラムを、オペレーション間のデータフローの有向グラフとして模型化するというプログラミングパラダイムである。データフロー言語は、関数型言語の特徴を共有しており、より数値処理に適したものになっている。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">「データフローの有向グラフとして模型化する」</block><block>さらに</block><block style="font-weight: bold;">「関数型言語」</block><block>とか書いてあるんだし、だったらそれはFRPなんじゃないの？と思えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう専門用語は、これに限らず複数あります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>誰々がパイオニアである、と書かれていることも多くて、基本そういう功績のために新しい用語がつくられたり、そういう用語の混乱はよくあることなので、あまり気にする必要もないですし、本末転倒になって不毛なことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>基本的に、プログラミングを含む工学では、なるだけ既存の数学的な概念と用語を踏襲すべきであって、同じ意味の造語を無闇に増やすことはあまり意味がないどころか、混乱をもたらすだけだと考えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.47526662147378795" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.47526662147378795"><prefix style="text-align: left; padding-right: 0.25em;">22.10. </prefix><blocks><baselineblock class="inline"></baselineblock><block>PromiseはJavaScriptに導入されたの時間軸上のイベントのFunctor</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Using_promises#%E5%8F%A4%E3%81%84%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF_api_%E3%82%92%E3%83%A9%E3%83%83%E3%83%97%E3%81%99%E3%82%8B_promise_%E3%81%AE%E4%BD%9C%E6%88%90" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Using_promises#%E5%8F%A4%E3%81%84%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF_api_%E3%82%92%E3%83%A9%E3%83%83%E3%83%97%E3%81%99%E3%82%8B_promise_%E3%81%AE%E4%BD%9C%E6%88%90" target="_blank" style="color: inherit; text-decoration: inherit;">古いコールバック API をラップする Promise の作成</a></block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6417094268856323"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 800px; height: 447.73px; position: relative;"><img src="image-resources/e91da40b-e179-40df-90f4-72d6946cbfe7.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>PromiseはJavaScriptに導入された時間軸の二項演算</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> promise </block><block class="operator token">=</block><block class=" token"> </block><block class="keyword token">new</block><block class=" token"> </block><block class="class-name token">Promise</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">resolve</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function token">setTimeout</block><block class="punctuation token">(</block><block class=" token">resolve</block><block class="punctuation token">,</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">1000</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class="string token">"3 seconds"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">promise</block><block class="punctuation token">.</block><block class="function token">then</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//returns promise object</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>極めて限定的ながらPromiseはJavaScriptに導入された時間軸の二項演算で、不完全なFRPであるとは言えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、イベントについてPromiseは繰り返し参照することはできません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.4120075861137342" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.4120075861137342"><prefix style="text-align: left; padding-right: 0.5em;">23. </prefix><blocks><baselineblock class="inline"></baselineblock><block>シンプルでミニマルかつ強力なFRPの実装 </block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.043048156605886234" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.043048156605886234"><prefix style="text-align: left; padding-right: 0.25em;">23.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Demo</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Reactive_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Reactive_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Reactive programming</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のWikipedia項目の前半部分に、FRPのDemoにちょうど良さそうなコードがあるので、それを活用します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コードを引用すると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">1</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> c </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">2</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 3 (not 12 because "=" is not a reactive assignment operator)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>前半は普通の命令型のコードで、一旦、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と定義というより「代入」したあとで、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、bを「破壊的代入」しても、a の値についてはすでに計算済みなので影響を受けません、という、まずまず命令型プログラマにとっては、常に考える対象となる事柄で、特に工夫のない関数型コードであっても、ある程度共有できるアイデアが説明されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その後で、長いコメントがあり、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// now imagine you have a special operator "$=" that changes the value of a variable (executes code on the right side of the operator and assigns result to left side variable) not only when explicitly initialized, but also when referenced variables (on the right side of the operator) are changed</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9602097562552296"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、明示的に初期化されたときだけでなく、（演算子の右側で）参照される変数が変更されたときにも、変数の値を変更する（演算子の右側でコードを実行し、その結果を左側の変数に代入する）特殊な演算子「$=」があるとします。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と仮想的なリアクティブ演算子があるという説明があり、その後、その仮想リアクティブ演算子を利用したリアクティブプログラミングのコードがあります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">1</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> c </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">2</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> a $</block><block class="operator token">=</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 12</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まずまずリアクティブというアイデアは理解しやすい、特に命令型コードに慣れ親しんでいるプログラマにとっては、コードの上下のフローが逆行するようなありえないことが実現しているよう見えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">この仮想的なリアクティブなコードを、今から実装するFRPの実際のコードに書き直します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> b </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> c </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">allNoResetIO</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class=" token">b</block><block class="punctuation token">,</block><block class=" token"> c</block><block class="punctuation token">]</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">               </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter punctuation token">[</block><block class="parameter token">b</block><block class="parameter punctuation token">,</block><block class="parameter token"> c</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">10</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> Log </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 12</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">100</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">        </block><block class="comment token">// 102</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">12</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">102</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>オリジナルのコードのとおり、普通に</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 12</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書いてしまったら、さすがにそれ以上どうしようもないので、せっかくなのでLog自体もリアクティブに紐づけています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> Log </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう式を定義しておくことで、</block><block style="font-weight: bold;">Logは恒久的にリアクティブ値である a にリアクティブに反応してlogを書き出し続けます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>従って、この式の後で、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">100</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、これもリアクティブ値である b を更新すると、リアクティブに </block><block style="font-weight: bold;">102 </block><block>とコンソールに書き出します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.4780853697014782" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.4780853697014782"><prefix style="text-align: left; padding-right: 0.25em;">23.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor ReactiveMonad</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">このFRP実装は、非常に強力です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆にいくら関数型プログラミングの理論を突き詰めても、つまるところ、このようにログであるとか、実世界と時間依存するようなコードが書けなければ、事実上実用的なアプリケーションは何一つ書くことはできないでしょう。まさに関数型プログラミングが机上の空論で終わってしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてこのFRP実装は極めてシンプルで、使い方は極めてシンプルです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その理由は、</block><block style="font-weight: bold;">このFRPが、あるひとつのFunctorあるいはMonadで、ただの代数構造でしかないからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">このFRPはたかだかひとつのFunctorとして実装されていて、同時にMonadとしても実装されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算であり、二項演算子は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">&gt;=</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というシンボルで表現されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">IO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であり、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> b </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> c </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、リアクティブ値を構築します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Monadなので、このタイプコンストラクタ </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">IO は、この二項演算の左右の単位元としても機能します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算の左のオペランド</block><block>は、リアクティブ値、つまり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">a,b,c,Log</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とここで定義されている全ての値で</block><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> Log </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-style: italic;"> 右オペランド</block><block>は、Functor/Monadなので、当然こういうLogなどの関数です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter punctuation token">[</block><block class="parameter token">b</block><block class="parameter punctuation token">,</block><block class="parameter token"> c</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、リアクティブに演算を行う関数の場合もあります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このオリジナルの仮想コード</block><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> a $</block><block class="operator token">=</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> に該当する</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">allNoResetIO</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class=" token">b</block><block class="punctuation token">,</block><block class=" token"> c</block><block class="punctuation token">]</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">               </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter punctuation token">[</block><block class="parameter token">b</block><block class="parameter punctuation token">,</block><block class="parameter token"> c</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、2つのリアクティブ値が更新されたときに、まとめて更新されるリアクティブ値をアウトプットにする関数で、このコードでは、二項演算の左のオペランドになっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allNoResetIO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と長ったらしい命名にしているのは、この「リアクティブ値をまとめる」というやりかたは別にひとつでなく複数のパターンがあり、他にも、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allAndResetIO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これらの長い名前の、まとめる系の関数は、ReactiveMonadとは別の関数として実装されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういうシンプルなDemoでも、リアクティブ値をまとめる系の関数はかなり必要となるので、別途実装しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コアとなるReactiveFunctorとReactiveMonadはその名の通りの二項演算でしかないので、原理的に複雑になりようもありませんが、別途このようにプラグイン的に必要な関数があれば、コアとなるReactiveMonadを利用して、目的の用途に応じて実装していきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allNoResetIO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allAndResetIO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数は、ReactiveMonadを利用して実装されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その意味では、ReactiveMonadに依存するFRPライブラリを構成すると言えなくもないですが、別に誰かが発明した仕様が難解なAPIがズラリとそろっている学習するのが困難なFRPフレームワークではありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block><block style="font-weight: bold;">もしその必要を感じるのであれば、多数の関数を準備することで高度なFRPフレームワークぽくすることも可能</block><block>です。究極的には</block><block style="font-weight: bold;">依存しているのは、ReactiveMonadひとつだけ、というシンプルでミニマルでありながら強力なFRPで</block><block>す。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちなみにこういう、関数型コードでは結構シンプルにまた無駄なくエレガントにただひとつの代数構造であるFunctorやMonadで実装できるようなFRPでも、オブジェクト指向では、モデル-ビュー-コントローラー（MVC）アーキテクチャーがこういう役割分担になっていてデータバインディングがあってビューは自動的に更新される、、、などとやっていますが、</block><block style="font-weight: bold;">非常に冗長で筋が良くない</block><block>ですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.44296126446533024" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.44296126446533024"><prefix style="text-align: left; padding-right: 0.25em;">23.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor を実装するための下敷きとなるアイデア</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctorを実装すれば、その延長線上でReactiveMonadも実装できますから、なにはともあれまず最初にFunctorを実装する必要があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆にそれが終われば8割がたの仕事は終わりです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Demoあるいは、オリジナルの仮想リアクティブコードを見ていてもすぐわかりますが、これは要するにExcelなどの表計算ソフトの挙動と同じです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>表計算ソフトのセルは依存グラフのかたまりです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 212.93px; position: relative;"><img src="image-resources/db559cac-c22e-471b-be06-642fbc90523d.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>AとBの2つのセルに注目します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ITリテラシがある現代人にとっては結構見慣れた光景かもしれません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Aのセルを更新すれば、自動的にBのセルも更新される、これはまさにリアクティブプログラミングそのものです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Aはリアクティブ値</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Bに関数 f が入った結果、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Bの値がリアクティブに更新される</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということなので、これを数式で考えると、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Aとfの間の二項演算となっているFunctor</block><block>です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">B = A ⩾ f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、配列で</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">B = A.map(f)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とやっているのと変わりません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてこの延長線上で、おなじように、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 430px; height: 214.133px; position: relative;"><img src="image-resources/06498da5-668d-497d-a93e-961c24bfb886.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>今度は、AとCのセルに注目します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">C = A ⩾ g</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という同じ構造ではあるが別の二項演算になります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここでもうトリックはわかりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Aというセルを起点に考えて</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">A ⩾ f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">A ⩾ g</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と複数の任意の関数がどんどん登録され積み上がっていって、そのそれぞれの二項演算の結果、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">B = A ⩾ f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">C = A ⩾ g</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という、別のリアクティブ値が生成されていくのだろうと。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Aには、無限リストとして、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">[f, g, h, ..........]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のように登録された関数が追加されていて、登録時には、新規に生成されたセル</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;"> B, C, D</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>がある。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、セルAの値が更新されたら、Aのリストに登録されている関数を一斉に、その更新値をもって関数適用して、その結果はB,C,Dに送られる、そしてそのそれぞれのB,C,D自体も、Aと同様にリアクティブなセルなので、それぞれのリストに登録されたすべての関数が送られた更新値をもって一斉に関数適用、、、とこういうカラクリなのでしょう。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というより、もしかしたら、表計算ソフトの利用者の多くは直感的に理解している仕組みを繰り返しているだけなのかもしれません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6013936765263639" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6013936765263639"><prefix style="text-align: left; padding-right: 0.25em;">23.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor を実装するスタート地点</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">B = A ⩾ f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">B = A &gt; map(f)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であったように、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">B = A &gt; reactive(f)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なので、ReactiveFunctorの実装としては、このreactive関数を実装することになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">mapFunctorについてはすでにかなりよく調べており、実装についても詳細に判明しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6717353918460087"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">Functorをもっと厳密にTypeScriptで定義していく</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">F</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">a</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> map</block><block class="punctuation token">:</block><block class=" token"> map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">             </block><block class="comment token">//  [1]  type construct</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">map</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">//  [2]  mapped</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このコードでは概念をかんたんに示す目的のために「1要素だけの配列のmap」を定義しています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>型定義だけを改めて抜粋すると、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">// type constructor</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">このTypeScriptのコードで、かなり正確に、Functorの概念を表現できています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちなみに、Haskellでは、型定義にプレースホルダは積み増さない流儀なので、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">fmap </block><block class="punctuation token">:</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">-</block><block class="operator token">&gt;</block><block class=" token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">-</block><block class="operator token">&gt;</block><block class=" token"> f a </block><block class="operator token">-</block><block class="operator token">&gt;</block><block class=" token"> f b</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とFunctorはよりスッキリと定義されてるのですが、全く同じ意味です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>TypeScriptではプレースホルダは逐一明示したほうが便利だ、という方針で、そのメリットは確かに大きいですが、こういう抽象度が高い概念になると、逆に見通しが悪くなるデメリットはありますね。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>視覚的に表現するとこういう概念図になるでしょう。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 187px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M368.11,48.11 L446.39,48.11 L446.39,126.39 L368.11,126.39 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(184, 233, 134); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M521.61,47.5 L599.89,47.5 L599.89,125.78 L521.61,125.78 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(184, 233, 134); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M63,87.25 C63,71.65 75.65,59 91.25,59 C106.85,59 119.5,71.65 119.5,87.25 C119.5,102.85 106.85,115.5 91.25,115.5 C75.65,115.5 63,102.85 63,87.25 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(74, 144, 226); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M210.75,57 L240.5,86.64 L210.75,116.28 L181,86.64 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(208, 2, 27); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M129,82.74 L155.1,82.74 L155.1,77.89 L172.5,87.59 L155.1,97.28 L155.1,92.43 L129,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M48.6,44.24 L257.6,44.24 L257.6,128.63 L48.6,128.63 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M464,82.74 L490.1,82.74 L490.1,77.89 L507.5,87.59 L490.1,97.28 L490.1,92.43 L464,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M288,82.74 L314.1,82.74 L314.1,77.89 L331.5,87.59 L314.1,97.28 L314.1,92.43 L288,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M379,87.25 C379,71.65 391.65,59 407.25,59 C422.85,59 435.5,71.65 435.5,87.25 C435.5,102.85 422.85,115.5 407.25,115.5 C391.65,115.5 379,102.85 379,87.25 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(74, 144, 226); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M560.75,57 L590.5,86.64 L560.75,116.28 L531,86.64 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(208, 2, 27); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M360,42.09 L606.5,42.09 L606.5,131.95 L360,131.95 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 284px; top: 98px;"><dg-editor-container data-editor-id="de7684302838791648" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">map</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 266px; top: 36px;"><dg-editor-container data-editor-id="de05006733925624163" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Functor</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 141px; top: 98px;"><dg-editor-container data-editor-id="de6900154914516217" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">f</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 448.391px; top: 95.1094px;"><dg-editor-container data-editor-id="de3621235940401255" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">map(f)</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 101px; top: 11px;"><dg-editor-container data-editor-id="de08200847773341624" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Function</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 435px; top: 9px;"><dg-editor-container data-editor-id="de935257870310205" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Function</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 120px; top: 135px;"><dg-editor-container data-editor-id="de07680617116355326" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>morphism</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 447px; top: 135px;"><dg-editor-container data-editor-id="de355935160189947" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>morphism</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最終的には、このTypeScriptのコードをそのまま参考にして型のコードを書きますが、とりあえず概念のかんたんのために見通しをよくして、JavaScriptだけのコードから立ち上げることにします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9803638747766774" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9803638747766774"><prefix style="text-align: left; padding-right: 0.25em;">23.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor のタイプコンストラクタ（型構築子）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まずはタイプコンストラクタですが、mapFunctorの場合は、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> a から [a]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように大変シンプルでした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctorのタイプコンストラクタである</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>IO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>はいったいどういう構造になるのでしょうか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>要するに表計算ソフトのセルの実装そのものです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>セルの挙動を考えると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.20878523932198334"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Aには、無限リストとして、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">[f, g, h, ..........]</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のように登録された関数が追加されていて</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっていて、素朴な感覚としては、時間軸で刻々と変化する可変長の無限リストの構造です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E6%B0%B8%E7%B6%9A%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E6%B0%B8%E7%B6%9A%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0" target="_blank" style="color: inherit; text-decoration: inherit;">永続データ構造</a></block><block>（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Persistent_data_structure" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Persistent_data_structure" target="_blank" style="color: inherit; text-decoration: inherit;">Persistent data structure</a></block><block>）　</block></blocks></line><line class="root text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.15064541236113116"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>永続データ構造（えいぞくデータこうぞう、英: Persistent data structure）は、変更される際に変更前のバージョンを常に保持するデータ構造である。このようなデータ構造は、更新の際に元のデータ構造を書き換えるのではなく、新たなデータ構造を生成すると考えられ、</block><block style="font-weight: bold;">イミュータブルなデータ構造</block><block>の構築に利用可能である。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ですね。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ただし実際に実装するとなると、これは履歴を全部保持するようなバージョニングのデータ構造にする合理性はあるのか？という強い疑念がでてきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、</block><block style="font-style: italic; font-weight: bold;">表計算ソフトの操作履歴をGitのように全バージョンを保持しておく必要がどこにあるのだろう？</block><block>ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>普通に考えてその必要はないので、</block><block style="font-weight: bold;">最新の履歴、つまり直近の値だけを保持することにします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なんのことはない、</block><block style="font-weight: bold;">Mutableなデータですが、あくまで概念的にはImmutableで最新、直近の値にアクセスしている</block><block>、ということにします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Mutableな値で問題となるのは、根本的に依存グラフを構成していないからです。依存グラフで「管理」もされていない値が時間軸で変化していくのは非常に良くないですが、最新の値が常に依存グラフの一部である場合は、なんの問題も発生しない、ということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしておそらくこういうトリックを使うのは、こういうIOのFunctorを実装するときに限られるでしょう。なぜならば、これ以降で同じことをしたい場合は、このIOのFunctorがすでに手元にあるので、それを使えば良くて、それでImmutableなデータ構造とみなせるからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>今、時系列の方向の履歴の無限リストを考えていましたが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">[f, g, h, ..........]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のように登録された関数のリスト</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それ自体は、最新の値に限定したとしもリストになっているはずです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで方法は２つ考えられて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ひとつめは、そのとおり素直に配列として実装する。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ふたつめは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6734181409394848"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>セルAの値が更新されたら、Aのリストに登録されている関数を一斉に、その更新値をもって関数適用して、その結果はB,C,Dに送られる</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということなので、もうそのリストの関数を1つの関数に合成してしまって、その合成された関数1個だけを最新の値として保持する、ことが考えられます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>どちらが良いのか？実装に迷うところですが、おそらくデータのあり方としてシンプルで堅牢なのは、リストの保持ではなくて、1つだけの関数の保持でしょうし、関数合成というのは二項演算なので間違う要素が少ないし、間違ったらすぐ検出できそうです。リストの取り扱いで間違ったら原因究明で厄介なことになりそうだ、という直感が働きます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ふたつめの、「リストの関数を1つの関数に合成してしまって、その合成された関数1個だけを最新の値として保持する」というアプローチを選択します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactiveFunctorのタイプコンストラクタ</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastF</block><block class="punctuation token">:</block><block class=" token"> identity </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//now pipeline-operator available to IO</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>lastFという要素があるオブジェクトがReactive値で、それを生成するタイプコンストラクタIO関数です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まずは、極力シンプルに保つためにインプットもありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最初に保持している関数はidentityです。何もしない関数で、関数の単位元を保持していることになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なにかを実装するときに、自然とこういう単位元が必要になってくるのは設計として良い兆候です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactiveFunctorのReactive値は、パイプライン演算が使えてほしいので、予めもうここでP関数でくるんでいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>今後もうreactiveFunctorのReactive値ならば自動的にパイプライン演算が使えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクトして、セルAを作り出します。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>パイプライン演算が使えるはずなので確認しておきます。</block><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block><block class=" token"> lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">Function</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">]</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9237110378617883" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9237110378617883"><prefix style="text-align: left; padding-right: 0.25em;">23.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor の二項演算子を表すreactive関数①</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.18714772691265535"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">B = A ⩾ f</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのは、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">B = A &gt; map(f)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であったように、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">B = A &gt; reactive(f)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なので、ReactiveFunctorの実装としては、このreactive関数を実装することになります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">mapFunctorについてはすでにかなりよく調べており、実装についても詳細に判明しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.9092185589659627"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">Functorをもっと厳密にTypeScriptで定義していく</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="comment token">// function =&gt; function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">Fa</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">F</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> map</block><block class="punctuation token">:</block><block class=" token"> map </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">F</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>視覚的に表現するとこういう概念図になるでしょう。</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="math-diagram inline" aria-label="Diagram" role="img"><math-diagram aria-hidden="true" data-amt="diagram" style="height: 187px; z-index: 1;"><clip-region style="width: 100%; height: 100%; display: block; overflow: hidden; position: relative;"><zoom-region><svg></svg><div class="diagram-plotly-layer" style="position: absolute; inset: 0px; pointer-events: none; fill: none; stroke: none;"><svg style="overflow:visible;position:absolute;left:0;top:0;"></svg></div><svg class="role-diagram-draw-area"><g class="shapes-region" style="stroke: black; fill: none;"><g class="composite-shape"><path class="real" d=" M368.11,48.11 L446.39,48.11 L446.39,126.39 L368.11,126.39 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(184, 233, 134); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M521.61,47.5 L599.89,47.5 L599.89,125.78 L521.61,125.78 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(184, 233, 134); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M63,87.25 C63,71.65 75.65,59 91.25,59 C106.85,59 119.5,71.65 119.5,87.25 C119.5,102.85 106.85,115.5 91.25,115.5 C75.65,115.5 63,102.85 63,87.25 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(74, 144, 226); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M210.75,57 L240.5,86.64 L210.75,116.28 L181,86.64 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(208, 2, 27); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M129,82.74 L155.1,82.74 L155.1,77.89 L172.5,87.59 L155.1,97.28 L155.1,92.43 L129,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M48.6,44.24 L257.6,44.24 L257.6,128.63 L48.6,128.63 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M464,82.74 L490.1,82.74 L490.1,77.89 L507.5,87.59 L490.1,97.28 L490.1,92.43 L464,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M288,82.74 L314.1,82.74 L314.1,77.89 L331.5,87.59 L314.1,97.28 L314.1,92.43 L288,92.43 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M379,87.25 C379,71.65 391.65,59 407.25,59 C422.85,59 435.5,71.65 435.5,87.25 C435.5,102.85 422.85,115.5 407.25,115.5 C391.65,115.5 379,102.85 379,87.25 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(74, 144, 226); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M560.75,57 L590.5,86.64 L560.75,116.28 L531,86.64 Z" style="stroke-width: 1; stroke: none; stroke-opacity: 1; fill: rgb(208, 2, 27); fill-opacity: 1;"></path></g><g class="composite-shape"><path class="real" d=" M360,42.09 L606.5,42.09 L606.5,131.95 L360,131.95 Z" style="stroke-width: 1; stroke: rgb(0, 0, 0); fill: none; fill-opacity: 1;"></path></g><g></g></g><g></g><g></g><g></g></svg><diagram-editors><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 284px; top: 98px;"><dg-editor-container data-editor-id="de8444786862911182" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">map</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 266px; top: 36px;"><dg-editor-container data-editor-id="de427131599701406" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Functor</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 141px; top: 98px;"><dg-editor-container data-editor-id="de996738110839704" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">f</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 448.391px; top: 95.1094px;"><dg-editor-container data-editor-id="de8402837838199986" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">map(f)</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 101px; top: 11px;"><dg-editor-container data-editor-id="de4880167640955235" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Function</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 435px; top: 9px;"><dg-editor-container data-editor-id="de02550538510999867" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">Function</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 120px; top: 135px;"><dg-editor-container data-editor-id="de5076245049035548" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>morphism</block></blocks></line></editarea></dg-editor-container></position-container><position-container data-rotation="0" data-skewx="0" data-flipx="false" data-anchor="left-top" style="left: 447px; top: 135px;"><dg-editor-container data-editor-id="de8996849512435285" class="no-border-on-print text-diagram-editor" style="border: 1px solid transparent; transform: translate(0%, 0%); font-size: 15px; font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-style: normal;"><editarea class="diagram-editor non-wrap no-area-container text-mode" style="font-size: 1em;"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>morphism</block></blocks></line></editarea></dg-editor-container></position-container></diagram-editors></zoom-region><svg style="position: absolute; width: 100%; height: 100%; overflow: visible; left: 0px; top: 0px; pointer-events: none;"></svg></clip-region></math-diagram></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これが一番外側のアウトラインです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptのコードをみると、結構単純ではあって、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">map</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">             </block><block class="parameter token">Fa</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">Fa</block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>mapFunctorは二項演算で</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>map演算子を定義する　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>mapの左右のオペランドがある</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>左オペランドは   Fa</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>右オペランドは   f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>両方のオペランドが満たされたときには、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>新しいFbをタイプコンスタクタ F で構築しながらアウトプットする</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そういうことです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これをreactiveFunctorに置き換えたいのですが、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6350111621477275"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 300px; height: 212.93px; position: relative;"><img src="image-resources/b5c2b450-d28d-4350-aab9-20eafbb98dc5.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>AとBの2つのセルに注目します。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ITリテラシがある現代人にとっては結構見慣れた光景かもしれません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Aのセルを更新すれば、自動的にBのセルも更新される、これはまさにリアクティブプログラミングそのものです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Aはリアクティブ値</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Bに関数 f が入った結果、</block></blocks></line><line class="text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Bの値がリアクティブに更新される</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということなので、これを数式で考えると、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Aとfの間の二項演算となっているFunctor</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">B = A ⩾ f</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、配列で</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em;">B = A.map(f)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とやっているのと変わりません。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というアイデアを念頭において、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactiveFunctorは二項演算で</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive演算子を定義する　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactiveの左右のオペランドがある</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>左オペランドは   セルA</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>右オペランドは   登録したい関数 f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>両方のオペランドが満たされたときには、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>新しいセルBをタイプコンスタクタ IO で構築しながらアウトプットする</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>従って、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">reactive</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="comment token">// A['&gt;'](reactive(f)) returns new B</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>？？となるかもしれませんが、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">IO</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// new IO created</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>IO() でタイプコンストラクトして、B⟹B のidentity関数をパイプライン演算で適用しているだけなので、そのままIO()が出てきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>新しいセルBをタイプコンスタクタ IO で構築</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ということをやっており、そのBに関してAで関数fについて登録する、という作業はなにもやっておらず、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>(B =&gt; B)とだけやっています。ここはあとでやります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block><block class=" token"> lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">Function</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">]</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>新しいセルBが、Aとfのreactive二項演算によって生み出されて返ってきました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これで、とりあえず、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>IOタイプコンストラクタと</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive演算子</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とFunctorの構造をもって最低限の機能をすることが確認できました。　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まずはとりあえずエラーを出さずにちゃんと想定どおり機能するか確認して、そこから徐々に拡張するのが重要です。最初からいきなり複雑なことをやってエラーが出るのが当たり前の状況から削っていく、という開発手法ではうまくいきません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.25307392623877156" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.25307392623877156"><prefix style="text-align: left; padding-right: 0.25em;">23.7. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor のトリガー関数 change()</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Demoコードで、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> b </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> c </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">allNoResetIO</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class=" token">b</block><block class="punctuation token">,</block><block class=" token"> c</block><block class="punctuation token">]</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">               </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter punctuation token">[</block><block class="parameter token">b</block><block class="parameter punctuation token">,</block><block class="parameter token"> c</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">10</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> Log </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 12</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">100</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">        </block><block class="comment token">// 102</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">12</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">102</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というのを出しましたが、この</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">10</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という、reactive値をトリガーする関数を定義します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>demoでは最終的なMonadバージョンを使っていて、このトリガー関数の名前が next となっているのですが、Functorバージョンではchangeという名前にしています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>セルAにたいして、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="number token">10</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> トリガー関数は、</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block> セルに入る値つまりreactive値になる値</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>セル</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>２つのインプットがあるカリー化された高階関数です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">change</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">lastF</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最終的に、セルAがそのまま返ってきてほしいので、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">lastF</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>right関数を利用してこのような形になっており、ほんとうにやりたいのは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">lastF</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、Aに登録されている最新の関数である、A.lastFに対して、reactive値を適用しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで注意したいのが、この</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A.lastF(a)</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数適用の返り値はそのままright関数によって捨てられてしまう、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Aに登録された関数のリストが合成されていて、そのすべてに a で適用したいというだけで、返り値は求めていません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.15972524276080868"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold; font-style: italic;">命令型では普通にやっている、文（Statement）の上下の羅列による順次実行と全く同じこと</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>right関数を利用したlog関数</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">log</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　　</block><block class="punctuation token">(</block><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　　</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">log</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という命令型のコードを書いているのと全く同じです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードでも、たとえば、特に、本書であとからやるFRPの実装では、原理的にIOを弄り倒すので、そういうIOと関与しない範囲の関数型コードではアンチパターンである、このような命令型の列挙をしたくなる局面が非常に多いのです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そこで諦めて｛｝を使って、冗長なreturn文（Statement）などを書きたくない場合は、right関数を利用することで、あくまで式（Expression）としてスッキリと書き下すことが可能になります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と一緒で、リストにあるすべての値について、同じ関数を適用させたい、それだけ、ということで、それぞれの返り値について、別途きちんと処理することにします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3423301430814405" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3423301430814405"><prefix style="text-align: left; padding-right: 0.25em;">23.8. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor の二項演算子を表すreactive関数②</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>一番外側の構造</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">reactive</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="comment token">// A['&gt;'](reactive(f)) returns new B</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の続きです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で置き換えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>一気に複雑になりましたが、外側から説明していきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class=" token">　</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最終的には、最初の設計どおりBを返しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>rightの左側は捨てられてしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その捨てられるrichtの左側は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">　　　　　　　</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、これも外側からいくと、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">　　　</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">　 </block><block class="punctuation token">)</block><block class=" token">　　</block><block class="comment token">//function composition</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっていて、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A.lastF を 新しい関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">　　　　</block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class=" token"> </block><block class="punctuation token">(</block><block class=" token">　 </block><block class="punctuation token">)</block><block class=" token">　　</block><block class="comment token">//function composition</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で上書きしています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここでは、既存のA.lastF という直近の関数と (  ) の中の関数を合成（連結）しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この関数合成演算子は、ローカル関数合成演算子を与えるF関数により与えられています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.6386151479236846"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数の合成演算はモノイドなので、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">F関数</block><block>を使ったローカル拡張</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">F</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっているのは、結構気持ち悪くて、素直に、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Function.prototype</block><block>のグローバル拡張</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とシンプルに表現しておきたいです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ただし、あとから実装するFRPライブラリでは、ライブラリなのでグローバルスペースに干渉するのは良くないので、自己完結しておくために、このローカルアプローチを採用しています。（どうせ関数合成は1箇所しか使っていない）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>この</block><block style="font-weight: bold;">（どうせ関数合成は1箇所しか使っていない）</block><block>というのがこの部分です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここがちょうど、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.5890211633366016"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ふたつめの、「リストの関数を1つの関数に合成してしまって、その合成された関数1個だけを最新の値として保持する」というアプローチを選択します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>に該当。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>( ) の中の関数は、　</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここも　right関数で、左のインプットは捨てられるので、外側は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">)</block><block class=" token"> 　</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というidentity関数が合成されている、ということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A.lastFの値はもともとがidentity関数だったので、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">　　　　</block><block class="constant token">F</block><block class="punctuation token">(</block><block class=" token">identity</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">identity</block><block class="punctuation token">)</block><block class=" token">　　</block><block class="comment token">//function composition</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>つまり、A.lastFは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタ</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastF</block><block class="punctuation token">:</block><block class=" token"> identity </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//now pipeline-operator available to IO</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>の最初からずっと一貫して外側から見ると identity関数のまま、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>捨てられた左のインプットは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">　　　　　　　</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token">　</block><block class="comment token">//a applied to all reactive functions</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、ようやく一番内側までたどり着くことができました。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、まさに、</block><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4001980054741445"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">ReactiveFunctor のトリガー関数 change()</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>セルAにたいして、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="number token">10</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というトリガー関数で、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>セルBにむけてリアクティブ値をトリガーしろ、ということです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>外側は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">)</block><block class=" token"> 　</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というidentity関数だったのですが、実はこの</block><block style="font-weight: bold;"> a </block><block>は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のとおり、</block><block style="font-weight: bold;">未来のreactive値</block><block>なので、そういう構造が組み入れられた上で、関数合成されて新しい</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A.lastF</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という直近の合成関数として登録された、ということになります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たしかにrightの左側は捨てられるのですが、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.26280356198974997"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最終的に、セルAがそのまま返ってきてほしいので、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">lastF</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>right関数を利用してこのような形になっており、ほんとうにやりたいのは、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">lastF</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、Aに登録されている最新の関数である、A.lastFに対して、reactive値を適用しています。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで注意したいのが、この</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A.lastF(a)</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数適用の返り値はそのままright関数によって捨てられてしまう、ということです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Aに登録された関数のリストが合成されていて、そのすべてに a で適用したいというだけで、返り値は求めていません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.7434584159088153"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold; font-style: italic;">命令型では普通にやっている、文（Statement）の上下の羅列による順次実行と全く同じこと</block><block>です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>right関数を利用したlog関数</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">log</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　　</block><block class="punctuation token">(</block><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　　　　　　　　</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、</block></blocks></line><line class="text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">log</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">return</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という命令型のコードを書いているのと全く同じです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型コードでも、たとえば、特に、本書であとからやるFRPの実装では、原理的にIOを弄り倒すので、そういうIOと関与しない範囲の関数型コードではアンチパターンである、このような命令型の列挙をしたくなる局面が非常に多いのです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そこで諦めて｛｝を使って、冗長なreturn文（Statement）などを書きたくない場合は、right関数を利用することで、あくまで式（Expression）としてスッキリと書き下すことが可能になります。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と一緒で、リストにあるすべての値について、同じ関数を適用させたい、それだけ、ということで、それぞれの返り値について、別途きちんと処理することにします。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これと全く同じ構造であることに注目してください。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>rightの左側は捨てられますが、逐次処理と一緒で「実行」はされるのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このような外側はidentity関数である関数が、reactive演算が行われるたびに、どんどん積み増される形で関数合成されて追加されていきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これがこの</block><block style="font-weight: bold;">reactiveFunctorのコアのコア、中枢</block><block>であると言えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.2819757664745257" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.2819757664745257"><prefix style="text-align: left; padding-right: 0.25em;">23.9. </prefix><blocks><baselineblock class="inline"></baselineblock><block>初歩的なReactiveFunctor のコード</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これで最初の初歩的なReactiveFunctorは完成しました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastF</block><block class="punctuation token">:</block><block class=" token"> identity </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">//now pipeline-operator available to IO</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">reactive</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">// A['&gt;']reactive(f) returns B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">change</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">lastF</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3248777531025189" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3248777531025189"><prefix style="text-align: left; padding-right: 0.25em;">23.10. </prefix><blocks><baselineblock class="inline"></baselineblock><block>初歩的なReactiveFunctor のテスト</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>カラのセルAを定義して、セルAに1を入れました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このセルAに何か値が入ったときに、値をlogしてくれるような新しいセル Bを定義しました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際にセルAに1を入れたら、期待したとおり値1がlogされました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">C</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">5</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">5</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同じように、セルBとCを、Aに紐付ける形で定義しました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Aに5を入れたときに、セルBとCは双方とも、5をlogしました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 失敗</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>カラのセルAを定義して、その直後にセルAに1を入れました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その後から、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>Aに何か値が入ったときに、値をlogしてくれるような新しいセル Bを定義しました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>結果なにもlogしてこなかったです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>しかし、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最初のテスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>だったのです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、同じ内容なのに、コードの順番が入れ替わっただけで、成功したり失敗するのはよくありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">コードの並び順そのもので依存グラフが変わってしまっている</block><block>、ということになるからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>言い換えると、</block><block style="font-weight: bold;">コードの並び順によってはFunctorの挙動が「等しくない」ということになり、複雑性が生じています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>従って、この</block><block style="font-weight: bold;">reactiveFuncorの初期バージョンは安全な水準には到達していない</block><block>と評価します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>改善が必要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>最後のテストが成功することを目指します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そうすれば、少なくともこの範囲において</block><block style="font-weight: bold;">コードの並び順に関わらずFunctorの挙動が「等しい」ことが確認され、このレベルの複雑性は消滅します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.8173009347729534" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.8173009347729534"><prefix style="text-align: left; padding-right: 0.5em;">24. </prefix><blocks><baselineblock class="inline"></baselineblock><block>より安全なReactiveFunctor version2</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9799215640352013" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9799215640352013"><prefix style="text-align: left; padding-right: 0.25em;">24.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>やはりReactive値を保持する必要があった</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>初期バージョンが失敗した理由は、Reactive値を保持していなかったことが原因です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>あえて過度にシンプルに設計したからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5923390398060853" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5923390398060853"><prefix style="text-align: left; padding-right: 0.25em;">24.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor version 2</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor ver.2</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastF</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">,</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastVal</block><block class="punctuation token">:</block><block class=" token"> a       </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">reactive</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="keyword token">undefined</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// instant</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">// A['&gt;']reactive(f) returns B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">change</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function token">right</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">lastF</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5625050520332517" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5625050520332517"><prefix style="text-align: left; padding-right: 0.25em;">24.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタ</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタは、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastF</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">,</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastVal</block><block class="punctuation token">:</block><block class=" token"> a       </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となりました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>新たに、lastValとしてreactive値が保持されるようになっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてこれはまったく同じ理屈と理由でmutableです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>同時に、タイプコストラクタは初期値をインプットとして受け入れるようになりました。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.9636673999788532" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.9636673999788532"><prefix style="text-align: left; padding-right: 0.25em;">24.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">reactive</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="keyword token">undefined</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// instant</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">// A['&gt;']reactive(f) returns B</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive関数の一番外側のrightの右側では、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>単に B を返していたものが、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">　</block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// instant</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>を返すように変更されました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>change関数はトリガーしても、外側は同じくright関数によるidentity関数なので結局はBが返されます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>左側で、返り値としては捨てられる、逐次処理は、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// instant</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であり、これはreactive演算が行われて、新しいセルであるBが構成されると同時に、登録した関数 f はその場で即座にトリガーされる、という仕組みです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.253327835651999" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.253327835651999"><prefix style="text-align: left; padding-right: 0.25em;">24.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>change関数</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">change</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter token">a</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function token">right</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class="function token">lastF</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive値を保持するようになったのでトリガーされたときには、登録関数が実行される前に、まずはセルA自身の</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive値が</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">A.lastVal = a</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と更新されます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8234928077394887" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8234928077394887"><prefix style="text-align: left; padding-right: 0.25em;">24.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>version2のテスト</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>初期値をもって定義したAに対して、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>二項演算を行ってBが生成されるのと同時に、右オペランドであるlogが即時トリガーされています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">5</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに5をトリガーすると、想定通りの挙動を示します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="number token">5</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">5</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">version1では失敗していたケースです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>verison2の最初のテスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">1</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> でも成功していたのですが、いずれにせよどのタイミングであっても、二項演算により新たなBが生成されると同時に、右オペランドの関数は即時トリガーされます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">ReactiveFunctor version2は直感的にも自然な振る舞いであり、version1の安全ではない問題点は解消されたので、水準を満たすと評価します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.8547076058302192" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.8547076058302192"><prefix style="text-align: left; padding-right: 0.5em;">25. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor version3 (typed with None)</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.30435109639727576" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.30435109639727576"><prefix style="text-align: left; padding-right: 0.25em;">25.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Noneの導入</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>version3ではversion2 にNoneを追加します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctorの二項演算対象となる左オペランドの集合に、新たにNoneが追加されます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.2em; font-weight: bold;">B = A ⩾ f</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A はReactiveFunctorの二項演算対象となる左オペランドの集合</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>version2  A: JavaScriptの値すべて</block></blocks></line><line class="root text-mode indent-0 has-indent list-item" style="line-height: 1.4;"><prefix style="flex-shrink: 0; min-width: 1em; text-align: left;">• </prefix><blocks><baselineblock class="inline"></baselineblock><block>version3  A: JavaScriptの値すべて + None</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>となります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>なぜこんなことをするのか？というと、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctorは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>表計算ソフトのセルをモデルとしているのですが、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="image-container no-cursor-selected no-editor"><image-viewer class=""><image-container class="left"><div class="image-content" style="width: 430px; height: 214.133px; position: relative;"><img src="image-resources/b2962a25-44ab-48c3-8757-5e4dd402b526.png" style="width: 100%; height: 100%; box-sizing: border-box; border-radius: 0px;"></div></image-container></image-viewer><div style="display: none;"></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">セルには、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">JavaScriptの値すべて</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">が入ることを想定しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">この前提で考えると、ではこのセルが空欄である状態は、どうやって表現するのか？</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>という問題が生じます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 「JavaScriptの値すべて」が、セルの空欄でない値なのだから、セルが空欄であるJavaScriptの値は存在しません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>従って、新たに1個、このReactiveFunctorの演算にとってReactive値はカラになっているという値を用意する必要があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>念の為ですが、空の値とは単位元とは異なります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>たとえば、flatMapMonadでは、空の値は </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">[ ]　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>で、左右の単位元はタイプコンストラクタ</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">a ⟹ [a]</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>でした。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういう、演算と空の値については、パイプライン演算子の実装で論じました。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.19741603905496619"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em;">null問題とオプション型（OptionType）</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ただしいずれのケースにおいても任意のJavaScriptの値にパイプライン演算子を実装するには、</block><block style="font-weight: bold;">undefined</block><block>と</block><block style="font-weight: bold;">null</block><block>の問題があります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>念の為ですが、言語組み込みでパイプライン演算子を実装する際には、コードで表記されているパイプラインを既存の関数適用のして解釈しなおせばよい、SyntaxSugaarでさえあればよい、Macroでも何でも良いですが要するに単にコード上の表記に限る問題なので、何の問題もありません。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そういう言語ベースでの実装ならば何の問題もないものを言語ベースでないユーザランドで実装する際に問題が出るので厄介なわけです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">null</block><block>はJavaScriptにおいて例外的で特殊なオブジェクトですがメソッドを追加できません。エラーが出ます。また</block><block style="font-weight: bold;">undefined</block><block>もオブジェクトで包む</block><block style="font-weight: bold;">Object(undefined)</block><block>としても、</block><block style="font-weight: bold;">{}</block><block>と空オブジェクトになり、意味が異なってしまいます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際これはソフトウェア開発でよく知られた問題で、一般的には</block><block class="role-hyper-link" data-hyper-link-url="https://ja.wikipedia.org/wiki/%E3%83%8C%E3%83%AB%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF#%E6%AD%B4%E5%8F%B2" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://ja.wikipedia.org/wiki/%E3%83%8C%E3%83%AB%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF#%E6%AD%B4%E5%8F%B2" target="_blank" style="color: inherit; text-decoration: inherit;">ヌルポインタ</a></block><block>の問題が著名です。</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4955367787173752"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>2009年にアントニー・ホーアは、彼が1965年にALGOL Wの一部としてヌル参照を発明したと述べている。2009年のカンファレンスでホーアはこの発明を「10億ドルの誤り」と述べた。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>それは10億ドルにも相当する私の誤りだ。null参照を発明したのは1965年のことだった。当時、私はオブジェクト指向言語 (ALGOL W) における参照のための包括的型システムを設計していた。目標は、コンパイラでの自動チェックで全ての参照が完全に安全であることを保証することだった。しかし、私は単にそれが容易だというだけで、無効な参照を含める誘惑に抵抗できなかった。これは、後に数え切れない過ち、脆弱性、システムクラッシュを引き起こし、過去40年間で10億ドル相当の苦痛と損害を引き起こしたとみられる。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode indent-0 has-indent" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ただしこれは空の値をプログラミング言語がどのように実装しているか？によって別に</block><block style="font-weight: bold;">ヌルポインタに限らず問題の出方は様々</block><block>で、根本的には、実装されている</block><block style="font-weight: bold;">演算子と特殊な空の値の親和性、互換性がなく、演算が破綻する、タイプの不一致の問題です。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>では、どのようなアプローチが正解か？というと、</block><block style="font-weight: bold;">空の値であっても明示的に、その演算が対象とするオペランドの型、あるいは集合、別の言い方では、その関数の定義域に含めれば良い</block><block>わけです。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このアプローチは、</block><block style="font-weight: bold;">オプション型（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Option_type" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Option_type" target="_blank" style="color: inherit; text-decoration: inherit;">Option type</a></block><block style="font-weight: bold;">）</block><block>としてよく知られています。</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.4574557949671214"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>In programming languages (especially functional programming languages) and type theory, an </block><block style="font-weight: bold;">option type</block><block> or maybe type is a polymorphic type that represents encapsulation of an optional value; e.g., it is used as the return type of functions which may or may not return a meaningful value when they are applied. It consists of a constructor which either is empty (often named None or Nothing), or which encapsulates the original data type A (often written Just A or Some A).</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>A distinct, but related concept outside of functional programming, which is popular in object-oriented programming, is called nullable types (often expressed as A?). The core difference between option types and nullable types is that option types support nesting (Maybe (Maybe A) ≠ Maybe A), while nullable types do not (String?? = String?).</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>プログラミング言語（特に関数型言語）や型理論において、</block><block style="font-weight: bold;">オプション型</block><block>またはmay型は、オプション値のカプセル化を表す多相型である。例えば、関数を適用したときに意味のある値を返すかどうかわからない関数の戻り値の型として使用される。この型は、空であるか（</block><block style="font-weight: bold;">None</block><block>または</block><block style="font-weight: bold;">Nothing</block><block>と呼ばれることが多い）、または元のデータ型Aをカプセル化する（Just AまたはSome Aと呼ばれることが多い）コンストラクタで構成されます。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数型プログラミングとは別の概念ですが、オブジェクト指向プログラミングでよく使われる関連概念として、Nullable type（しばしば A? と表記される） オプション型とヌルアブル型の主な違いは、オプション型はネストをサポートしている（Maybe (Maybe A) ≠ Maybe A）のに対し、ヌルアブル型はサポートしていない（String??? = String?）</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>JavaScriptにおいても、実は、</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Optional_chaining" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Optional_chaining" target="_blank" style="color: inherit; text-decoration: inherit;">オプショナルチェーン (?.)</a></block><block> (optional chaining)なるものが実装されていて、</block></blocks></line><line class="text-mode indent-0 has-indent full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.3461491940736119"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">?. </block><block>演算子の機能は . チェーン演算子と似ていますが、参照が nullish (</block><block style="font-weight: bold;">null </block><block>または </block><block style="font-weight: bold;">undefined</block><block>) の場合にエラーとなるのではなく、式が短絡され </block><block style="font-weight: bold;">undefined </block><block>が返されるところが異なります。関数呼び出しで使用すると、与えられた関数が存在しない場合、</block><block style="font-weight: bold;"> undefined </block><block>を返します。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、JavaScriptオブジェクトのメソッドチェーンにおいて、それなりに</block><block style="font-weight: bold;">オプション型（</block><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Option_type" style="text-decoration: underline; font-weight: bold; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Option_type" target="_blank" style="color: inherit; text-decoration: inherit;">Option type</a></block><block style="font-weight: bold;">）</block><block>の機能もネイティブに存在していることがわかります。</block></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ただし残念ながら今回のパイプライン演算子の実装には役立たないので、素のJavaScriptの値をオプション型に拡張すると見做し、</block><block style="font-weight: bold;">None</block><block>というパイプライン演算子と互換性のある値を新たに添加する方針で行きます。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ちょうど都合よく、パイプライン演算子でNoneを導入していますから、それを共有できます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>表計算ソフトのセルが空であるとき、なんの挙動も発生しないことは保証されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor ver.3では、</block><block style="font-weight: bold;">Noneが入力された際には演算は行わない</block><block>、という保証がある仕様にします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor ver.2では、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">reactive</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="parameter token">f</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="parameter constant token">A</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="keyword token">undefined</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">// new IO created</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と新たにBを構成する際の初期値にとりあえずなんの理論的な後ろ盾もなく勝手にundefinedを入れていました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>version3では、ここにはNoneが入ります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.3899317396392328" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.3899317396392328"><prefix style="text-align: left; padding-right: 0.25em;">25.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>型（Type）の導入</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">version3はTypeScriptで記述されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor ver.3</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> isNone </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> None</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> x is </block><block class="parameter token">None</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  x </block><block class="operator token">===</block><block class=" token"> None</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> optionMap </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">isNone</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">?</block><block class=" token"> None </block><block class="punctuation token">:</block><block class=" token"> </block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> typeIO </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">Symbol</block><block class="punctuation token">(</block><block class="string token">"IO"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block><block class="comment token">// identity Type in outer shape</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  lastVal</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class=" token"> </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class=" token">any</block><block class="operator token">&gt;</block><block class="comment token">//circular reference</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> any</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastF</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">,</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastVal</block><block class="punctuation token">:</block><block class=" token"> a       </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customType</block><block class="punctuation token">(</block><block class=" token">typeIO</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'&gt;&gt;'</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">reactive</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> reactive </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">B</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//new B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              right</block><block class="comment token">//type check of A done with optionMap</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// instant</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">// A['&gt;']reactive(f) returns B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> change </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function token">right</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">//return A</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5090245398556286" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5090245398556286"><prefix style="text-align: left; padding-right: 0.25em;">25.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive演算子の追加　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>version2</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">reactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> の表記方法はそのままversion3でも有効に継承されていますが、冗長なので</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">reactive演算子</block><block>が追加されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>version3</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と書けるようになります。</block><block style="font-style: italic; font-weight: bold;">簡潔な表記は大変重要です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5537344673141684" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5537344673141684"><prefix style="text-align: left; padding-right: 0.25em;">25.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタ</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> typeIO </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">Symbol</block><block class="punctuation token">(</block><block class="string token">"IO"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block><block class="comment token">// identity Type in outer shape</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  lastVal</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class=" token"> </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class=" token">any</block><block class="operator token">&gt;</block><block class="comment token">//circular reference</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> any</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastF</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">,</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastVal</block><block class="punctuation token">:</block><block class=" token"> a       </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customType</block><block class="punctuation token">(</block><block class=" token">typeIO</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'&gt;&gt;'</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">reactive</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>version2の構造をほぼそのまま継承してTypeScriptで書いているだけですが、上記のとおり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">reactive演算子</block><block>が追加されています。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'&gt;&gt;'</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">reactive</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>さらに</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customType</block><block class="punctuation token">(</block><block class=" token">typeIO</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、IO型であることを明示しました。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> typeIO </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">Symbol</block><block class="punctuation token">(</block><block class="string token">"IO"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">customType</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">type</block><block class="parameter punctuation token">:</block><block class="parameter token"> symbol</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">&lt;</block><block class="constant token">T</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter keyword token">set</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">T</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      Object</block><block class="punctuation token">.</block><block class="function token">defineProperty</block><block class="punctuation token">(</block><block class="keyword token">set</block><block class="punctuation token">,</block><block class=" token"> type</block><block class="punctuation token">,</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        value</block><block class="punctuation token">:</block><block class=" token"> type</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは、Monadにするための布石です。flatの機構を実装するためには、Typeの判定が必要になってくるからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、実はこのcustomType関数は、パイプラインMonad演算子の実装でも使いました。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8426694178617018" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8426694178617018"><prefix style="text-align: left; padding-right: 0.25em;">25.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>isNoneとoptionMap</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> isNone </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> None</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> x is </block><block class="parameter token">None</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  x </block><block class="operator token">===</block><block class=" token"> None</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> optionMap </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">isNone</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">?</block><block class=" token"> None </block><block class="punctuation token">:</block><block class=" token"> </block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveFunctor ver.3では、</block><block style="font-weight: bold;">Noneが入力された際には演算は行わない</block><block>、という実装がここです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ver,3のすべての関数適用はoptionMapを通じて行われており、isNoneで判定しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive, change関数では、この該当部分だけoptionMap関数に置き換えられています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive, change関数は、それ以外の変更箇所はなく、typeをつけただけで特に追加の説明はありません。</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.5310531003877403" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.5310531003877403"><prefix style="text-align: left; padding-right: 0.25em;">25.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>version3のテスト</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="number token">7</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="keyword token">undefined</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="keyword token">null</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">7</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">undefined</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">null</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive値がNoneでトリガーされたときだけ、Functorの演算はなされず出力されていません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>初期値についても同様です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その他の挙動についてはversion2と全く同じなのでテストは省略します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.31483537472045664" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.31483537472045664"><prefix style="text-align: left; padding-right: 0.5em;">26. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveMonad</block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.1875967039128954" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.1875967039128954"><prefix style="text-align: left; padding-right: 0.25em;">26.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block> flat機構の追加</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveMonadでは、ReactiveFunctor version3 にflat機構を追加します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>change関数　 ReactiveFunctor ver.3 からそのまま継承  </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> change </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function token">right</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//apply new a to the composed function</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> flatChange関数　ReactiveMonadで追加されたflat機構</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> flatChange </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    typeIO </block><block class="keyword token">in</block><block class=" token"> </block><block class="function token">Object</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> 　</block><block class="comment token">//flat TTX=TX</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="operator token">?</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="function token">Object</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>flatChangeという名前が長いので next というショートカットを追加</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> next </block><block class="operator token">=</block><block class=" token"> flatChange</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.7298287194437192" style="line-height: 1.4; font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5);" id="n0.7298287194437192"><prefix style="text-align: left; padding-right: 0.25em;">26.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block> flatReactive関数と演算子の追加　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveMonadでは、flatReactive関数と演算子が追加されます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">flatReactive</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これは追加で割り当てられた二項演算子で書けます。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>reactive関数　 ReactiveFunctor ver.3 からそのまま継承  </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> reactive </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">B</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//new B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              right</block><block class="comment token">//type check of A done with optionMap</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// instant</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">// A['&gt;']reactive(f) returns B</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> flatReactive関数　changeをflatChangeに置き換え</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> flatReactive </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">B</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//new B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              right</block><block class="comment token">//type check of A done with optionMap</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">flatChange</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="function token">flatChange</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// instant</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">// A['&gt;']flatReactive(f) returns B</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.40618984835300975" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.40618984835300975"><prefix style="text-align: left; padding-right: 0.25em;">26.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block> タイプコンストラクタ</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> typeIO </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">Symbol</block><block class="punctuation token">(</block><block class="string token">"IO"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block><block class="comment token">// identity Type in outer shape</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  lastVal</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class=" token"> </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class=" token">any</block><block class="operator token">&gt;</block><block class="comment token">//circular reference</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> any</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;="</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> any</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastF</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">,</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastVal</block><block class="punctuation token">:</block><block class=" token"> a       </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customType</block><block class="punctuation token">(</block><block class=" token">typeIO</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'&gt;&gt;'</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">reactive</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'&gt;='</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">flatReactive</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveMonadはReactiveFunctorの上位互換なので、Fuctorの演算子も継承しており使う事ができます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.6478491657362517" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.6478491657362517"><prefix style="text-align: left; padding-right: 0.25em;">26.4. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveMonad 結合性（Associativity）テスト</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数とMonadの合成（連結）演算子をそれぞれ定義しておきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> compose </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">C</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">g</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">b</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">C</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">g</block><block class="punctuation token">(</block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> IOcompose </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">C</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">g</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">b</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">C</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">g</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="class-name token">Function</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'.'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class=" token">compose</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="constant token">P</block><block class="punctuation token">(</block><block class="class-name token">Function</block><block class="punctuation token">.</block><block class=" token">prototype</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'..'</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class=" token">IOcompose</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f1</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f2</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">{</block><block class="comment token">//endofunctor associativity</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">{</block><block class="comment token">//monad associativity</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">x</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'..'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class="comment token">//monad composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">[</block><block class=" token">Number</block><block class="punctuation token">:</block><block class=" token"> </block><block class="number token">3</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f1</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f2</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="parameter token">x</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'..'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>成功　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">{</block><block class=" token">　</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> f1 </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          a</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> f2 </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          a</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">+</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">A</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="parameter token">x</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">A</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">B</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class=" token">f1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'..'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f2</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block><block class=" token"> lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">Function</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">]</block><block class="punctuation token">,</block><block class=" token"> lastVal</block><block class="punctuation token">:</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block><block class=" token"> lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">Function</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">]</block><block class="punctuation token">,</block><block class=" token"> lastVal</block><block class="punctuation token">:</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">{</block><block class=" token"> lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">[</block><block class=" token">Function</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">]</block><block class="punctuation token">,</block><block class=" token"> lastVal</block><block class="punctuation token">:</block><block class=" token"> </block><block class="number token">3</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">3</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.8067909417298746" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.8067909417298746"><prefix style="text-align: left; padding-right: 0.25em;">26.5. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveMonad 左右の単位元（left &amp; right Identity）テスト</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>テスト</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">{</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">f</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> number</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">a </block><block class="operator token">*</block><block class=" token"> </block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="comment token">//center  f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> center </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="comment token">//left  e * f = f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> left </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="constant token">IO</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'..'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="comment token">//right  f * e = f</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="keyword token">const</block><block class=" token"> right </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="constant token">P</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'..'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="constant token">IO</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      left</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">   </block><block class="comment token">//IO type</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      center</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">//IO type</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      right</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">  </block><block class="comment token">//IO type</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">2</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">2</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">2</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>成功</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.02831358116408711" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.02831358116408711"><prefix style="text-align: left; padding-right: 0.25em;">26.6. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveMonad ES Modules（ESM）</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">import</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  None</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">,</block><block class="comment token">//Pipe</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  customType</block><block class="punctuation token">,</block><block class=" token"> customOperator</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">F</block><block class="comment token">//Function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class=" token"> </block><block class="keyword token">from</block><block class=" token"> </block><block class="string token">"./NonePcustomTypeOperator.js"</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> obj </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> identity </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> right </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">b</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> log </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> isNone </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class=" token">x</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> None</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> x is </block><block class="parameter token">None</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    x </block><block class="operator token">===</block><block class=" token"> None</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> optionMap </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="function token">isNone</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">?</block><block class=" token"> None </block><block class="punctuation token">:</block><block class=" token"> </block><block class="function token">f</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> typeIO </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">Symbol</block><block class="punctuation token">(</block><block class="string token">"IO"</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  type </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="function-variable function token">lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block><block class="comment token">// identity Type in outer shape</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    lastVal</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">}</block><block class=" token"> </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class=" token">any</block><block class="operator token">&gt;</block><block class="comment token">//circular reference</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> any</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;="</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> any</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="constant token">P</block><block class="punctuation token">(</block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      lastF</block><block class="punctuation token">:</block><block class=" token"> identity</block><block class="punctuation token">,</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      lastVal</block><block class="punctuation token">:</block><block class=" token"> a       </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">}</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customType</block><block class="punctuation token">(</block><block class=" token">typeIO</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'&gt;&gt;'</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">reactive</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">customOperator</block><block class="punctuation token">(</block><block class="string token">'&gt;='</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">flatReactive</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> reactive </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">B</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//new B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                right</block><block class="comment token">//type check of A done with optionMap</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="function token">change</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// instant</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> flatReactive </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">B</block><block class="operator token">&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="comment token">// new IO created</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">B</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">B</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//new B</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF </block><block class="operator token">=</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="constant token">F</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'.'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">//function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="comment token">//a is the future reactive value</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                right</block><block class="comment token">//type check of A done with optionMap</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">flatChange</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="comment token">//a applied to all reactive functions</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class="constant token">B</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="function token">flatChange</block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class=" token">f</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// instant</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> change </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="function token">right</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//mutable</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class="function token">optionMap</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastF</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="constant token">A</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> flatChange </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter constant token">A</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      typeIO </block><block class="keyword token">in</block><block class=" token"> </block><block class="function token">Object</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="operator token">?</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="function token">Object</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="comment token">//flat TTX=TX</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">change</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">const</block><block class=" token"> next </block><block class="operator token">=</block><block class=" token"> flatChange</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="keyword token">return</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">,</block><block class=" token"> next</block><block class="punctuation token">,</block><block class=" token"> typeIO </block><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="function-variable function token">lastF</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block><block class="comment token">// identity Type as outer frame</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  lastVal</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class=" token"> </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class=" token">any</block><block class="operator token">&gt;</block><block class="comment token">//circular reference</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">P</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;&gt;"</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> any</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="operator token">&amp;</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="string token">"&gt;="</block><block class="punctuation token">:</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="function-variable function token">f</block><block class="punctuation token">:</block><block class=" token"> </block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> any</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">|</block><block class=" token"> </block><block class="constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="punctuation token">}</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="constant token">IO</block><block class=" token"> </block><block class="operator token">=</block><block class=" token"> obj</block><block class="punctuation token">.</block><block class="constant token">IO</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> next </block><block class="operator token">=</block><block class=" token"> obj</block><block class="punctuation token">.</block><block class=" token">next</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> typeIO </block><block class="operator token">=</block><block class=" token"> obj</block><block class="punctuation token">.</block><block class=" token">typeIO</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">export</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">,</block><block class=" token"> next</block><block class="punctuation token">,</block><block class=" token"> typeIO </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> 　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.721911549889799" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.721911549889799"><prefix style="text-align: left; padding-right: 0.5em;">27. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveMonadのエクステンション関数 </block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.09446143924798522" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.09446143924798522"><prefix style="text-align: left; padding-right: 0.25em;">27.1. </prefix><blocks><baselineblock class="inline"></baselineblock><block>Demo</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block class="role-hyper-link" data-hyper-link-url="https://en.wikipedia.org/wiki/Reactive_programming" style="text-decoration: underline; color: rgb(17, 85, 204);"><a href="https://en.wikipedia.org/wiki/Reactive_programming" target="_blank" style="color: inherit; text-decoration: inherit;">Reactive programming</a></block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>のWikipedia項目の前半部分に、FRPのDemoにちょうど良さそうなコードがあるので、それを活用します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コードを引用すると、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">1</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> c </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">2</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 3 (not 12 because "=" is not a reactive assignment operator)</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>前半は普通の命令型のコードで、一旦、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と定義というより「代入」したあとで、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と、bを「破壊的代入」しても、a の値についてはすでに計算済みなので影響を受けません、という、まずまず命令型プログラマにとっては、常に考える対象となる事柄で、特に工夫のない関数型コードであっても、ある程度共有できるアイデアが説明されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その後で、長いコメントがあり、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="comment token">// now imagine you have a special operator "$=" that changes the value of a variable (executes code on the right side of the operator and assigns result to left side variable) not only when explicitly initialized, but also when referenced variables (on the right side of the operator) are changed</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="matrix-symbol table-symbol role-tabular"><matrix class="table"><table data-table-id="n0.2091434969742938"><colgroup><col></colgroup><tbody><tr><td data-rindex="0" data-cindex="0" style="padding: 0.5em; border-color: rgb(0, 0, 0); border-style: solid; border-width: 1px;"><editarea class="text-mode"><line class="text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ここで、明示的に初期化されたときだけでなく、（演算子の右側で）参照される変数が変更されたときにも、変数の値を変更する（演算子の右側でコードを実行し、その結果を左側の変数に代入する）特殊な演算子「$=」があるとします。</block></blocks></line></editarea></td></tr></tbody></table><table-resize style="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px;"></table-resize></matrix></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と仮想的なリアクティブ演算子があるという説明があり、その後、その仮想リアクティブ演算子を利用したリアクティブプログラミングのコードがあります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">1</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> c </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">2</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> a $</block><block class="operator token">=</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b </block><block class="operator token">=</block><block class=" token"> </block><block class="number token">10</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">console</block><block class="punctuation token">.</block><block class="function token">log</block><block class="punctuation token">(</block><block class=" token">a</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">// 12</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>まずまずリアクティブというアイデアは理解しやすい、特に命令型コードに慣れ親しんでいるプログラマにとっては、コードの上下のフローが逆行するようなありえないことが実現しているよう見えます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">この仮想的なリアクティブなコードを、今から実装するFRPの実際のコードに書き直します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> b </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> c </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">allNoResetIO</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class=" token">b</block><block class="punctuation token">,</block><block class=" token"> c</block><block class="punctuation token">]</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">               </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter punctuation token">[</block><block class="parameter token">b</block><block class="parameter punctuation token">,</block><block class="parameter token"> c</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">10</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> Log </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token"> </block><block class="comment token">// 12</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">b</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">100</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">;</block><block class=" token">        </block><block class="comment token">// 102</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> </block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">12</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="number token">102</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>  </block></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.640205216780283" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.640205216780283"><prefix style="text-align: left; padding-right: 0.25em;">27.2. </prefix><blocks><baselineblock class="inline"></baselineblock><block>ReactiveMonadとエクステンション関数の関係</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">このFRP実装は、非常に強力です。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>逆にいくら関数型プログラミングの理論を突き詰めても、つまるところ、このようにログであるとか、実世界と時間依存するようなコードが書けなければ、事実上実用的なアプリケーションは何一つ書くことはできないでしょう。まさに関数型プログラミングが机上の空論で終わってしまいます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そしてこのFRP実装は極めてシンプルで、使い方は極めてシンプルです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その理由は、</block><block style="font-weight: bold;">このFRPが、あるひとつのFunctorあるいはMonadで、ただの代数構造でしかないからです。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">このFRPはたかだかひとつのFunctorとして実装されていて、同時にMonadとしても実装されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算であり、二項演算子は</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-size: 1.44em; font-weight: bold;">&gt;=</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というシンボルで表現されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>タイプコンストラクタは、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">IO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>であり、</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> b </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> c </block><block class="operator token">=</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">2</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このように、リアクティブ値を構築します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">Monadなので、このタイプコンストラクタ </block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">IO は、この二項演算の左右の単位元としても機能します。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">二項演算の左のオペランド</block><block>は、リアクティブ値、つまり、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">a,b,c,Log</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>とここで定義されている全ての値で</block><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> Log </block><block class="operator token">=</block><block class=" token"> a</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class=" token">log</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-style: italic;"> 右オペランド</block><block>は、Functor/Monadなので、当然こういうLogなどの関数です。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token"> </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter punctuation token">[</block><block class="parameter token">b</block><block class="parameter punctuation token">,</block><block class="parameter token"> c</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>というように、リアクティブに演算を行う関数の場合もあります。</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>このオリジナルの仮想コード</block><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">var</block><block class=" token"> a $</block><block class="operator token">=</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block> に該当する</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> a </block><block class="operator token">=</block><block class=" token"> </block><block class="function token">allNoResetIO</block><block class="punctuation token">(</block><block class="punctuation token">[</block><block class=" token">b</block><block class="punctuation token">,</block><block class=" token"> c</block><block class="punctuation token">]</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">               </block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter punctuation token">[</block><block class="parameter token">b</block><block class="parameter punctuation token">,</block><block class="parameter token"> c</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b </block><block class="operator token">+</block><block class=" token"> c</block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>は、2つのリアクティブ値が更新されたときに、まとめて更新されるリアクティブ値をアウトプットにする関数で、このコードでは、二項演算の左のオペランドになっています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allNoResetIO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>と長ったらしい命名にしているのは、この「リアクティブ値をまとめる」というやりかたは別にひとつでなく複数のパターンがあり、他にも、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allAndResetIO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>があります。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>これらの長い名前の、まとめる系の関数は、ReactiveMonadとは別の関数として実装されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>こういうシンプルなDemoでも、リアクティブ値をまとめる系の関数はかなり必要となるので、別途実装しています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>コアとなるReactiveFunctorとReactiveMonadはその名の通りの二項演算でしかないので、原理的に複雑になりようもありませんが、別途このようにプラグイン的に必要な関数があれば、コアとなるReactiveMonadを利用して、目的の用途に応じて実装していきます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>実際に、</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allNoResetIO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allAndResetIO</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>関数は、ReactiveMonadを利用して実装されています。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>その意味では、ReactiveMonadに依存するFRPライブラリを構成すると言えなくもないですが、別に誰かが発明した仕様が難解なAPIがズラリとそろっている学習するのが困難なFRPフレームワークではありません。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>そして、</block><block style="font-weight: bold;">もしその必要を感じるのであれば、多数の関数を準備することで高度なFRPフレームワークぽくすることも可能</block><block>です。究極的には</block><block style="font-weight: bold;">依存しているのは、ReactiveMonadひとつだけ、というシンプルでミニマルでありながら強力なFRPで</block><block>す。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-1" data-line-id="n0.33391236677198566" style="font-size: 1.6em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(65, 117, 5); line-height: 1.4;" id="n0.33391236677198566"><prefix style="text-align: left; padding-right: 0.25em;">27.3. </prefix><blocks><baselineblock class="inline"></baselineblock><block>エクステンション関数の実装</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allNoResetIO</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">import</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  None</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">,</block><block class="comment token">//Pipe</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  customType</block><block class="punctuation token">,</block><block class=" token"> customOperator</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">F</block><block class="comment token">//Function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class=" token"> </block><block class="keyword token">from</block><block class=" token"> </block><block class="string token">"./NonePcustomTypeOperator.js"</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">import</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">,</block><block class=" token"> next </block><block class="punctuation token">}</block><block class=" token"> </block><block class="keyword token">from</block><block class=" token"> </block><block class="string token">"./reactive-monad.js"</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> identity </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> right </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">b</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type flag </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class=" token">unknown</block><block class="operator token">&gt;</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class=" token">number</block><block class="operator token">&gt;</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> allNoResetIO </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">As</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class=" token">any</block><block class="operator token">&gt;</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class=" token">unknown</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">result</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class="constant token">P</block><block class="punctuation token">(</block><block class=" token">As</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">[</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">0</block><block class="punctuation token">)</block><block class="punctuation token">]</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> flag</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">flags</block><block class="parameter punctuation token">:</block><block class="parameter token"> flag</block><block class="parameter punctuation token">[</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              flags</block><block class="punctuation token">.</block><block class="function token">map</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">flag</block><block class="parameter punctuation token">:</block><block class="parameter token"> flag</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  flag</block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="comment token">//reactive A</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                    </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                        </block><block class="punctuation token">(</block><block class=" token">flag</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                        </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="function token">checkFlags</block><block class="punctuation token">(</block><block class=" token">As</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">result</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">flags</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class=" token">result</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">checkFlags</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">As</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="parameter punctuation token">[</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="parameter token">result</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class=" token">flags</block><block class="punctuation token">:</block><block class=" token"> flag</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="parameter token">any</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class=" token">flags</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="parameter token">flag</block><block class="parameter punctuation token">:</block><block class="parameter token"> flag</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              flag</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="operator token">===</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//all flags are 1</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="operator token">&amp;&amp;</block><block class=" token"> </block><block class="comment token">// None is not accepted to fill the result</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="operator token">!</block><block class="punctuation token">(</block><block class=" token">As</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">.</block><block class="function token">includes</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="operator token">?</block><block class=" token"> result</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">// return As lastVals</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            As</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">:</block><block class=" token"> None</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">　</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">export</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> allNoResetIO </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>　</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block style="font-weight: bold;">allAndResetIO</block></blocks></line><line class="root text-mode full-line-block-inside" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><compositeblock dir="ltr" class="code-section-symbol inline" style="display: block;"><div class="code-section theme-tomorrow-night" style="display: block; border: 1px solid lightgray; background: rgb(45, 45, 45); padding: 10px; font-size: 15px;"><editarea class="text-mode code-section-edit-area" style="font-family: &quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace;"><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">import</block><block class=" token"> </block><block class="punctuation token">{</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  None</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">P</block><block class="punctuation token">,</block><block class="comment token">//Pipe</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  customType</block><block class="punctuation token">,</block><block class=" token"> customOperator</block><block class="punctuation token">,</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="constant token">F</block><block class="comment token">//Function composition</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="punctuation token">}</block><block class=" token"> </block><block class="keyword token">from</block><block class=" token"> </block><block class="string token">"./NonePcustomTypeOperator.js"</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">import</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">,</block><block class=" token"> next </block><block class="punctuation token">}</block><block class=" token"> </block><block class="keyword token">from</block><block class=" token"> </block><block class="string token">"./reactive-monad.js"</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> identity </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> right </block><block class="operator token">=</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">A</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">A</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="operator token">&lt;</block><block class="constant token">B</block><block class="operator token">&gt;</block><block class="punctuation token">(</block><block class="parameter token">b</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">B</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> b</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">type flag </block><block class="operator token">=</block><block class=" token"> </block><block class="punctuation token">[</block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class=" token">unknown</block><block class="operator token">&gt;</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class=" token">number</block><block class="operator token">&gt;</block><block class="punctuation token">]</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> allAndResetIO </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class=" token">As</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class=" token">any</block><block class="operator token">&gt;</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="constant token">IO</block><block class="operator token">&lt;</block><block class=" token">unknown</block><block class="operator token">&gt;</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">result</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class="constant token">P</block><block class="punctuation token">(</block><block class=" token">As</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">[</block><block class="constant token">A</block><block class="punctuation token">,</block><block class=" token"> </block><block class="constant token">IO</block><block class="punctuation token">(</block><block class="number token">0</block><block class="punctuation token">)</block><block class="punctuation token">]</block><block class=" token"> </block><block class="keyword token">as</block><block class=" token"> flag</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">flags</block><block class="parameter punctuation token">:</block><block class="parameter token"> flag</block><block class="parameter punctuation token">[</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              flags</block><block class="punctuation token">.</block><block class="function token">map</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">flag</block><block class="parameter punctuation token">:</block><block class="parameter token"> flag</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  flag</block><block class="punctuation token">[</block><block class="number token">0</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'&gt;='</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="comment token">//reactive A</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                    </block><block class="punctuation token">(</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                      </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                        </block><block class="punctuation token">(</block><block class=" token">flag</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">1</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                        </block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="function token">checkFlags</block><block class="punctuation token">(</block><block class=" token">As</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">result</block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token">flags</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                  </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">(</block><block class=" token">result</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">)</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">const</block><block class=" token"> </block><block class="function-variable function token">checkFlags</block><block class=" token"> </block><block class="operator token">=</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">  </block><block class="punctuation token">(</block><block class="parameter token">As</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="parameter punctuation token">[</block><block class="parameter punctuation token">]</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">    </block><block class="punctuation token">(</block><block class="parameter token">result</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">      </block><block class="punctuation token">(</block><block class=" token">flags</block><block class="punctuation token">:</block><block class=" token"> flag</block><block class="punctuation token">[</block><block class="punctuation token">]</block><block class="punctuation token">)</block><block class="punctuation token">:</block><block class=" token"> </block><block class="parameter token">any</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">        </block><block class="punctuation token">(</block><block class=" token">flags</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="parameter token">flag</block><block class="parameter punctuation token">:</block><block class="parameter token"> flag</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              flag</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">]</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">.</block><block class="function token">reduce</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">a</block><block class="parameter punctuation token">,</block><block class="parameter token"> b</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> a </block><block class="operator token">*</block><block class=" token"> b</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="operator token">===</block><block class=" token"> </block><block class="number token">1</block><block class="punctuation token">)</block><block class=" token"> </block><block class="comment token">//all flags are 1</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="operator token">&amp;&amp;</block><block class=" token"> </block><block class="comment token">// None is not accepted to fill the result</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="operator token">!</block><block class="punctuation token">(</block><block class=" token">As</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block><block class="punctuation token">.</block><block class="function token">includes</block><block class="punctuation token">(</block><block class=" token">None</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="operator token">?</block><block class=" token"> </block><block class="function token">right</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">(</block><block class="comment token">//reset all flags to 0</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              flags</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                </block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter token">flag</block><block class="parameter punctuation token">:</block><block class="parameter token"> flag</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> flag</block><block class="punctuation token">[</block><block class="number token">1</block><block class="punctuation token">]</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block><block class="number token">0</block><block class="punctuation token">)</block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">)</block><block class="punctuation token">(</block><block class=" token"> </block><block class="comment token">// return As lastVals</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              result</block><block class="punctuation token">[</block><block class="string token">'&gt;'</block><block class="punctuation token">]</block><block class="punctuation token">(</block><block class="function token">next</block><block class="punctuation token">(</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">                As</block><block class="punctuation token">.</block><block class="function token">map</block><block class="punctuation token">(</block><block class="punctuation token">(</block><block class="parameter constant token">A</block><block class="parameter punctuation token">:</block><block class="parameter token"> </block><block class="parameter constant token">IO</block><block class="parameter operator token">&lt;</block><block class="parameter token">unknown</block><block class="parameter operator token">&gt;</block><block class="punctuation token">)</block><block class=" token"> </block><block class="operator token">=&gt;</block><block class=" token"> </block><block class="constant token">A</block><block class="punctuation token">.</block><block class=" token">lastVal</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">              </block><block class="punctuation token">)</block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">            </block><block class="punctuation token">)</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class=" token">          </block><block class="punctuation token">:</block><block class=" token"> None</block><block class="punctuation token">;</block></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="text-mode code-section-line"><prefix></prefix><blocks class="code-line-blocks-container"><baselineblock></baselineblock><block class="keyword token">export</block><block class=" token"> </block><block class="punctuation token">{</block><block class=" token"> allAndResetIO </block><block class="punctuation token">}</block></blocks></line></editarea></div></compositeblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode section sindent-0" data-line-id="n0.45770943966675315" style="font-size: 2em; padding-top: 0.5em; padding-bottom: 0.5em; font-weight: bold; color: rgb(139, 87, 42); line-height: 1.4;" id="n0.45770943966675315"><prefix style="text-align: left; padding-right: 0.5em;">28. </prefix><blocks><baselineblock class="inline"></baselineblock><block>MIT License</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix style=""></prefix><blocks><baselineblock class="inline"></baselineblock><block>Copyright (c) &lt;2021&gt; &lt; Ken Okabe kentutorialbook@gmail.com &gt;</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>以下に定める条件に従い、本ソフトウェアおよび関連文書のファイル（以下「ソフトウェア」）の複製を取得するすべての人に対し、ソフトウェアを無制限に扱うことを無償で許可します。これには、ソフトウェアの複製を使用、複写、変更、結合、掲載、頒布、サブライセンス、および/または販売する権利、およびソフトウェアを提供する相手に同じことを許可する権利も無制限に含まれます。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>上記の著作権表示および本許諾表示を、ソフトウェアのすべての複製または重要な部分に記載するものとします。</block></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><emptyblock aria-label="empty line"> </emptyblock></blocks></line><line class="root text-mode" style="line-height: 1.4;"><prefix></prefix><blocks><baselineblock class="inline"></baselineblock><block>ソフトウェアは「現状のまま」で、明示であるか暗黙であるかを問わず、何らの保証もなく提供されます。ここでいう保証とは、商品性、特定の目的への適合性、および権利非侵害についての保証も含みますが、それに限定されるものではありません。 作者または著作権者は、契約行為、不法行為、またはそれ以外であろうと、ソフトウェアに起因または関連し、あるいはソフトウェアの使用またはその他の扱いによって生じる一切の請求、損害、その他の義務について何らの責任も負わないものとします。</block></blocks></line></area-container></editarea><div></div></math-edit-container></math-type></editor-container></body></html>